/*
 * GoJS v1.7.17 JavaScript Library for HTML Diagrams
 * Northwoods Software, https://www.nwoods.com/
 * GoJS and Northwoods Software are registered trademarks of Northwoods Software Corporation.
 * Copyright (C) 1998-2017 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: https://gojs.net/1.7.17/doc/license.html.
 */
(function (window) {
    var f, aa = {};
    if (!window.document || void 0 === window.document.createElement("canvas").getContext)throw window.console && window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."), Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");
    if (!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");
    Function.prototype.bind || (Function.prototype.bind = function (a) {
        function b() {
            return g.apply(a, e.concat(d.call(arguments)))
        }

        function c() {
        }

        var d = Array.prototype.slice, e = d.call(arguments, 1), g = this;
        c.prototype = this.prototype;
        b.prototype = new c;
        return b
    });
    (function () {
        for (var a = 0, b = ["ms", "moz", "webkit", "o"], c = 0; c < b.length && !window.requestAnimationFrame; ++c)window.requestAnimationFrame = window[b[c] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[b[c] + "CancelAnimationFrame"] || window[b[c] + "CancelRequestAnimationFrame"];
        window.requestAnimationFrame || (window.requestAnimationFrame = function (b) {
            var c = (new Date).getTime(), g = Math.max(8, 16 - (c - a)), h = window.setTimeout(function () {
                b(c + g)
            }, g);
            a = c + g;
            return h
        });
        window.cancelAnimationFrame || (window.cancelAnimationFrame =
            function (a) {
                window.clearTimeout(a)
            })
    })();
    var v = {
        Aj: !1, LA: !1, nF: !1, GI: !1, gM: !1, NF: !1, cu: null, enableBoundsInfo: function (a) {
            v.Aj = !0;
            a && a.Gq()
        }, disableBoundsInfo: function (a) {
            v.Aj = !1;
            a && (a.pd.De(!0), a.Gq())
        }, kF: function (a, b) {
            void 0 === a && (a = v.cu);
            void 0 === b && (b = a.mm("").rb);
            var c = b.length, d = a.pd;
            d.fillStyle = "rgba(255,255,0,.3)";
            for (var e = 0; e < c; e++) {
                var g = b.ea(e), h = g.$;
                if (g instanceof x)v.kF(a, g.ya); else {
                    var k = g.Mi.copy();
                    k.sB(g.Jc);
                    d.save();
                    d.transform(k.m11, k.m12, k.m21, k.m22, k.dx, k.dy);
                    d.fillRect(h.x, h.y, h.width, h.height);
                    d.restore()
                }
            }
        }, lF: function (a,
                         b) {
            a || (a = v.cu);
            b || (b = a.mm("").rb);
            var c = a.pd, d = b.length;
            c.fillStyle = "rgba(0,0,255,.3)";
            for (var e = 0; e < d; e++) {
                var g = b.ea(e), h = g.Ga, k = g.Mi;
                g instanceof x ? v.lF(a, g.ya) : (c.save(), c.transform(k.m11, k.m12, k.m21, k.m22, k.dx, k.dy), c.fillRect(h.x, h.y, h.width, h.height), c.restore())
            }
        }, BI: function (a, b) {
            a || (a = v.cu);
            b || (b = a.mm("").rb);
            var c = a.pd, d = b.length;
            c.fillStyle = "rgba(0,0,255,.3)";
            for (var e = 0; e < d; e++) {
                var g = b.ea(e), h = g.Fa, k = g.Mi;
                g instanceof x ? v.BI(a, g.ya) : (c.save(), c.transform(k.m11, k.m12, k.m21, k.m22, k.dx,
                    k.dy), c.fillRect(h.x || 0, h.y || 0, h.width, h.height), c.restore())
            }
        }, EL: function () {
            v.lF();
            v.kF()
        }, FL: function (a) {
            a || (a = v.cu);
            var b = a.fd;
            a = a.pd;
            a.strokeStyle = "rgba(0,255,0,.9)";
            a.rect(b.x, b.y, b.width, b.height);
            a.stroke()
        }, mF: function (a, b) {
            b.fillStyle = "red";
            b.fillRect(0, 0, 8, 8);
            b.lineWidth = 8;
            b.strokeStyle = "rgba(255,255,0,.6)";
            var c = a.ub;
            b.rect(c.x, c.y, c.width, c.height);
            b.stroke();
            b.fillStyle = "rgba(0,255,0,.2)";
            b.fillRect(a.fd.x, a.fd.y, a.fd.width, a.fd.height)
        }, CI: function (a, b) {
            b instanceof ba || (a.lineWidth =
                2, a.strokeStyle = "rgba(255,0,0,.5)", a.rect(b.cc.x, b.cc.y, b.cc.width, b.cc.height), a.stroke(), b instanceof y && (a.strokeStyle = b.stroke, a.lineWidth = b.lb), null !== b.Q && b.Q.type === ea && (a.lineWidth = 1, a.strokeStyle = "rgba(10,200,10,.6)", b instanceof y && (a.strokeStyle = b.stroke, a.lineWidth = b.lb)))
        }, DI: function (a, b) {
            a.lineWidth = 1;
            a.strokeStyle = "rgba(0,0,255,.5)";
            a.rect(b.Ga.x, b.Ga.y, b.Ga.width, b.Ga.height);
            a.stroke();
            void 0 !== b.stroke && (a.strokeStyle = b.stroke);
            void 0 !== b.Sg && (a.lineWidth = b.Sg)
        }, KA: function (a, b,
                         c) {
            a.setTransform(1, 0, 0, 1, 0, 0);
            a.scale(b.rd, b.rd);
            a.transform(c.m11, c.m12, c.m21, c.m22, c.dx, c.dy);
            c = b.dc.length;
            for (var d = 0; d < c; d++)for (var e = b.dc.ea(d), g = e.rb.length, h = 0; h < g; h++) {
                var k = e.rb.ea(h);
                if (void 0 !== k.location && null !== k.location) {
                    if (k.location.F()) {
                        var l = k.location.x, m = k.location.y;
                        a.beginPath();
                        a.strokeStyle = "limegreen";
                        a.lineWidth = 2;
                        a.moveTo(l, m + 6);
                        a.lineTo(l, m);
                        a.lineTo(l + 6, m);
                        a.moveTo(l, m);
                        a.lineTo(l + 10, m + 20);
                        a.stroke()
                    }
                    l = k.position.x;
                    m = k.position.y;
                    a.beginPath();
                    a.strokeStyle = "red";
                    a.lineWidth = 2;
                    a.moveTo(l, m + 6);
                    a.lineTo(l, m);
                    a.lineTo(l + 6, m);
                    a.moveTo(l, m);
                    a.lineTo(l + 20, m + 10);
                    a.stroke()
                }
            }
            a.setTransform(1, 0, 0, 1, 0, 0)
        }, GL: function (a, b, c) {
            var d = a.length;
            b.fillStyle = "rgba(255,0,0,.1)";
            for (var e = 0; e < d; e++) {
                var g, h = a[e];
                g = c.Jc;
                var k = h.x, l = h.y, m = k + h.width, n = l + h.height, p = g.m11, q = g.m12, r = g.m21, s = g.m22, u = g.dx, t = g.dy, z = k * p + l * r + u, h = k * q + l * s + t;
                g = m * p + l * r + u;
                var l = m * q + l * s + t, w = k * p + n * r + u, k = k * q + n * s + t, p = m * p + n * r + u, m = m * q + n * s + t, n = z, q = h, n = Math.min(n, g), z = Math.max(z, g), q = Math.min(q, l), h = Math.max(h, l), n =
                    Math.min(n, w), z = Math.max(z, w), q = Math.min(q, k), h = Math.max(h, k), n = Math.min(n, p), z = Math.max(z, p), q = Math.min(q, m), h = Math.max(h, m);
                g = new C(n, q, z - n, h - q);
                b.fillRect(g.x, g.y, g.width, g.height)
            }
        }, EI: function (a, b, c, d, e) {
            a.fillStyle = "rgba(0,255,0,.2)";
            a.fillRect(b, c, d, e)
        }, FI: function (a, b, c) {
            a.save();
            var d = b.Jc;
            d.reset();
            1 !== b.scale && d.scale(b.scale);
            b = b.position;
            0 === b.x && 0 === b.y || d.translate(-b.x, -b.y);
            a.setTransform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
            c = c.dd.o;
            d = c.length;
            for (b = 0; b < d; b++) {
                var e = c[b];
                a.beginPath();
                a.moveTo(e.x - 4, e.y);
                a.lineTo(e.x + 4, e.y);
                a.moveTo(e.x, e.y - 4);
                a.lineTo(e.x, e.y + 4);
                a.lineWidth = 2;
                a.strokeStyle = "rgba(255,0,0,.9)";
                a.stroke()
            }
            a.restore()
        }, CL: function (a) {
            a || (a = v.cu);
            for (a = a.co; a.next();)D.trace(a.value.toString())
        }, uM: function (a, b) {
            var c = b.ep(a), d = b.Ub;
            d.se = b.aC(c);
            d.ha = c;
            return fa(b, d, a)
        }, pM: function (a, b) {
            b.Ie(a.ha) && (b.pd.fillStyle = "lime", b.pd.fillRect(a.se.x, a.se.y, 1 * b.scale, 1 * b.scale))
        }, qM: function (a) {
            var b = ga(a, !1, null, null);
            if (!b.sq) {
                var c = a.ub, d = a.scale;
                a = a.pd;
                for (var e = 0; e <= b.zn; e++)for (var g =
                    0; g <= b.An; g++) {
                    var h = b.od[e][g];
                    if (0 !== h) {
                        var k = (e * b.fe + b.$f - c.x) * d, l = (g * b.Od + b.ag - c.y) * d;
                        0 !== h && (a.fillStyle = "rgba(255, 0, 0, .2)", a.fillRect(k, l, b.fe * d, b.Od * d));
                        999999 <= h || (h %= 10, a.fillStyle = "blue", a.fillText(h.toString(), k, l + b.Od))
                    }
                }
            }
        }, dumpReferences: function (a) {
            if (a instanceof E)for (a = a.co; a.next();) {
                var b = a.value;
                D.trace(b.toString());
                for (b = b.Ii; b.next();)v.dumpReferences(b.value)
            } else if (a instanceof F) {
                D.trace("References for " + a);
                null !== a.layer && D.trace("  " + a.layer.toString() + ' LayerName: "' +
                    a.Nf + '"');
                a.to !== a && D.trace("  SelectionObject: " + a.to.toString() + ' SelectionObjectName: "' + a.Hy + '"');
                a.xf !== a && D.trace("  LocationObject: " + a.xf.toString() + ' LocationObjectName: "' + a.my + '"');
                if (a.oh) {
                    for (var b = "", c = a.oh.j; c.next();)b += c.key + " ";
                    D.trace("  Adornments: " + b)
                }
                null !== a.Ka && D.trace("  ContainingGroup: " + a.Ka.toString());
                if (a instanceof G) {
                    if (0 < a.Kd.count) {
                        b = "";
                        for (c = a.Kd; c.next();)b += c.value.toString() + ", ";
                        D.trace("  Links: " + b)
                    }
                    null !== a.Xb && D.trace("  LabeledLink: " + a.Xb.toString());
                    if (a instanceof I) {
                        D.trace("  Placeholder: " + a.placeholder);
                        b = "";
                        for (c = a.Oc; c.next();)b += c.value.toString() + ", ";
                        D.trace("  Members: " + b);
                        b = "";
                        for (c = a.fn.j; c.next();)b += c.value.toString() + ", ";
                        D.trace("  NestedGroups: " + b);
                        D.trace("  Layout: " + a.Yb)
                    }
                } else if (a instanceof J) {
                    D.trace("  Path: " + a.path);
                    D.trace("  From: " + a.Y + " " + a.Mc + ' "' + a.gg + '"');
                    D.trace("  To: " + a.ba + " " + a.ld + ' "' + a.mh + '"');
                    b = "";
                    for (a = a.wf; a.next();)b += a.value.toString() + ", ";
                    D.trace("  LabelNodes: " + b)
                }
            }
        }, dumpVisualTree: function (a) {
            if (a instanceof E)for (a = a.co; a.next();) {
                var b = a.value;
                D.trace(b.toString());
                for (b = b.Ii; b.next();)v.dumpVisualTree(b.value)
            } else a instanceof F && (b = " ", a.aF && (b += "c"), a.eF && (b += "d"), a.LF && (b += "g"), a.oG && (b += "m"), a.GG && (b += "h"), a.HG && (b += "z"), a.MG && (b += "o"), a.dl && (b += "s"), a.dH && (b += "t"), a.TG && (b += "A"), a.Yx && (b += "B"), a.fB && (b += "L"), a.ib && (b += "S"), a.Zk && (b += "H"), v.cD(a, 1, b))
        }, cD: function (a, b, c) {
            for (var d = "", e = 0; e < b; e++)d += "  ";
            d += a.toString();
            c && (d += c);
            c = a.name ? ' "' + a.name + '" ' : " ";
            c = a.visible ? c + "v" : c + "!v";
            c = a.sg ? c +
            "p" : c + "!p";
            a.Lf && (c += "m");
            a.xu && (c += "a");
            d += c;
            if (0 !== a.Rb || 0 !== a.column)d += " [" + a.Rb + "," + a.column + "]";
            d += " " + a.$.toString();
            a.Ea.F() && (d += " d:" + a.Ea.toString());
            a.Ga.F() && (d += " n:" + a.Ga.toString());
            1 !== a.scale && (d += " s:" + a.scale);
            0 !== a.angle && (d += " a:" + a.angle);
            null !== a.background && (d += " b:" + a.background.toString());
            null !== a.bm && (d += " a:" + a.background.toString());
            a instanceof x && (d += " elts:" + a.ya.count, a.isEnabled || (d += " !ENABLED"), a.vq && (d += " CLIPPING"), 0 !== a.jH && (d += " top:" + a.jH), 0 !== a.hG && (d +=
                " left:" + a.hG), null !== a.$k && (d += " itemArray#:" + D.cb(a.$k)), a.dG && (d += " cat:" + a.dG), null !== a.data && (d += " data:" + a.data));
            null !== a.vd && (d += ' portId: "' + a.vd + '"');
            D.trace(d);
            if (a instanceof x)for (a = a.elements; a.next();)v.cD(a.value, b + 1, "")
        }, IL: function (a) {
            D.trace("DelayedReferences (" + a.Ag.count + ")");
            for (a = a.Ag.j; a.next();) {
                for (var b = "", c = a.value.j; c.next();)b += ha(c.value) + ", ";
                D.trace("  " + a.key + ": " + b)
            }
        }, TE: function (a, b) {
            if (!D.Sa(b) || b instanceof Element || b instanceof CanvasRenderingContext2D || b instanceof ja || b instanceof ka)return "";
            var c = "", d;
            for (d in b)if ("string" !== typeof d)"" === c && (c = b + "\n"), c += "  " + d + " is not a string property\n"; else if ("_" !== d.charAt(0) && !(2 >= d.length)) {
                var e = D.vb(b, d);
                if (null !== e && "function" !== typeof e) {
                    if (b.hasOwnProperty(d)) {
                        var g = Object.getPrototypeOf(b);
                        if (g && g.Hw && g.Hw[d])continue
                    } else if (D.Tx(b, d))continue;
                    "" === c && (c = b + "\n");
                    c += '  unknown property "' + d + '" has value: ' + e + " at " + a + "\n"
                }
            }
            return c
        }, xx: function (a, b) {
            if (null !== b && void 0 !== b && "number" !== typeof b && "string" !== typeof b && "boolean" !== typeof b && "function" !== typeof b)if (void 0 !== D.Jd(b)) {
                if (!v.Uw.contains(b))if (v.Uw.add(b), v.vw.add(v.TE(a, b)), b instanceof K || b instanceof L || b instanceof ma)for (var c = b.j; c.next();)v.xx(a + "[" + c.key + "]", c.value); else for (c in b) {
                    var d = D.vb(b, c);
                    if (void 0 !== d && null !== d && D.Sa(d) && d !== b.Hw) {
                        if (b instanceof na) {
                            if (d === b.pf)continue
                        } else if (b instanceof x) {
                            if ("data" === c || d === b.Pd)continue;
                            if ("itemArray" === c || d === b.cj)continue;
                            if (b instanceof F && d === b.Nl)continue
                        } else if (!(b instanceof E))if (b instanceof oa) {
                            if ("archetypeGroupData" === c || d === b.ez)continue
                        } else if (b instanceof pa) {
                            if ("archetypeLinkData" === c || d === b.gz)continue;
                            if ("archetypeLabelNodeData" === c || d === b.fz)continue
                        } else if (b instanceof ra) {
                            if ("archetypeNodeData" === c || d === b.sl)continue
                        } else if (b instanceof M) {
                            if ("nodeDataArray" === c || d === b.ye)continue;
                            if ("linkDataArray" === c || d === b.cf || d === b.ki)continue;
                            if (d === b.Gc)continue;
                            if (d === b.Ag)continue
                        } else if (b instanceof ta || b instanceof va || b instanceof wa)continue;
                        v.xx(a + "." +
                            c, d)
                    }
                }
            } else if (Array.isArray(b))for (c = 0; c < b.length; c++)v.xx(a + "[" + c + "]", b[c]); else v.vw.add(v.TE(a, b))
        }, checkProperties: function (a) {
            void 0 === v.Uw ? v.Uw = new L(Object) : v.Uw.clear();
            v.vw = new xa;
            v.xx("", a);
            a = v.vw.toString();
            v.vw = null;
            return a
        }
    };
    aa.Debug = v;
    var D = {
        xd: 1,
        ad: 2,
        nd: 4,
        md: 8,
        Zn: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("534.30") && 0 < window.navigator.userAgent.indexOf("Android"),
        mJ: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("MSIE 9.0"),
        WF: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("MSIE 10.0"),
        XF: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("Trident/7"),
        QL: void 0 !== window.navigator && 0 < window.navigator.userAgent.indexOf("Edge/"),
        Yk: void 0 !== window.navigator && void 0 !==
        window.navigator.platform && 0 <= window.navigator.platform.toUpperCase().indexOf("MAC"),
        YF: void 0 !== window.navigator && void 0 !== window.navigator.platform && null !== window.navigator.platform.match(/(iPhone|iPod|iPad)/i),
        bF: function (a, b, c) {
            var d = -1;
            return function () {
                var e = this, g = arguments;
                -1 !== d && D.clearTimeout(d);
                d = D.setTimeout(function () {
                    d = -1;
                    c || a.apply(e, g)
                }, b);
                c && !d && a.apply(e, g)
            }
        },
        setTimeout: function (a, b) {
            return window.setTimeout(a, b)
        },
        clearTimeout: function (a) {
            window.clearTimeout(a)
        },
        createElement: function (a) {
            return window.document.createElement(a)
        },
        k: function (a) {
            throw Error(a);
        },
        pa: function (a, b) {
            var c = "The object is frozen, so its properties cannot be set: " + a.toString();
            void 0 !== b && (c += "  to value: " + b);
            D.k(c)
        },
        l: function (a, b, c, d) {
            a instanceof b || (c = D.getTypeName(c), void 0 !== d && (c += "." + d), D.jc(a, b, c))
        },
        h: function (a, b, c, d) {
            typeof a !== b && (c = D.getTypeName(c), void 0 !== d && (c += "." + d), D.jc(a, b, c))
        },
        p: function (a, b, c) {
            "number" === typeof a && isFinite(a) || (b = D.getTypeName(b), void 0 !== c && (b += "." + c), D.k(b + " must be a real number type, and not NaN or Infinity: " +
                a))
        },
        Da: function (a, b, c, d) {
            a instanceof ya && a.Oe === b || (c = D.getTypeName(c), void 0 !== d && (c += "." + d), D.jc(a, "a constant of class " + D.tf(b), c))
        },
        Zt: function (a, b) {
            "string" === typeof a ? za(a) || D.k('Color "' + a + '" is not a valid color string for ' + b) : a instanceof Aa || D.k("Value for " + b + " must be a color string or a Brush, not " + a)
        },
        jc: function (a, b, c, d) {
            b = D.getTypeName(b);
            c = D.getTypeName(c);
            void 0 !== d && (c += "." + d);
            "string" === typeof a ? D.k(c + " value is not an instance of " + b + ': "' + a + '"') : D.k(c + " value is not an instance of " +
                b + ": " + a)
        },
        ua: function (a, b, c, d) {
            c = D.getTypeName(c);
            void 0 !== d && (c += "." + d);
            D.k(c + " is not in the range " + b + ": " + a)
        },
        wd: function (a) {
            D.k(D.tf(a) + " constructor cannot take any arguments.")
        },
        Ua: function (a) {
            D.k("Collection was modified during iteration: " + a.toString() + "\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")
        },
        Xj: function (a, b) {
            D.k("No property to set for this enum value: " + b + " on " + a.toString())
        },
        trace: function (a) {
            window.console && window.console.log(a)
        },
        Gx: {},
        Qn: function (a, b) {
            !0 !== D.Gx[a] && (D.Gx[a] = !0, window.console && window.console.log(a + " is deprecated in " + b + ", see the GoJS change log for more information."))
        },
        Sa: function (a) {
            return "object" === typeof a && null !== a
        },
        isArray: function (a) {
            return Array.isArray(a) || a instanceof NodeList || a instanceof HTMLCollection
        },
        oJ: function (a) {
            return Array.isArray(a)
        },
        Yt: function (a, b, c) {
            D.isArray(a) || D.jc(a, "Array or NodeList or HTMLCollection", b, c)
        },
        cb: function (a) {
            return a.length
        },
        fm: function (a) {
            return Array.prototype.slice.call(a)
        },
        La: function (a, b) {
            Array.isArray(a);
            return a[b]
        },
        QE: function (a, b, c) {
            Array.isArray(a) ? a[b] = c : D.k("Cannot replace an object in an HTMLCollection or NodeList at " + b)
        },
        cm: function (a, b) {
            if (Array.isArray(a))return a.indexOf(b);
            for (var c = a.length, d = 0; d < c; d++)if (a[d] === b)return d;
            return -1
        },
        Kh: function (a, b, c) {
            Array.isArray(a) ? b >= a.length ? a.push(c) : a.splice(b, 0, c) : D.k("Cannot insert an object into an HTMLCollection or NodeList: " + c + " at " + b)
        },
        Xg: function (a,
                      b) {
            Array.isArray(a) ? b >= a.length ? a.pop() : a.splice(b, 1) : D.k("Cannot remove an object from an HTMLCollection or NodeList at " + b)
        },
        Xy: [],
        P: function () {
            var a = D.Xy.pop();
            return void 0 === a ? new N : a
        },
        Fb: function (a, b) {
            var c = D.Xy.pop();
            if (void 0 === c)return new N(a, b);
            c.x = a;
            c.y = b;
            return c
        },
        A: function (a) {
            D.Xy.push(a)
        },
        oC: [],
        Dm: function () {
            var a = D.oC.pop();
            return void 0 === a ? new Ba : a
        },
        Tk: function (a) {
            D.oC.push(a)
        },
        Yy: [],
        Rf: function () {
            var a = D.Yy.pop();
            return void 0 === a ? new C : a
        },
        ug: function (a, b, c, d) {
            var e = D.Yy.pop();
            if (void 0 === e)return new C(a, b, c, d);
            e.x = a;
            e.y = b;
            e.width = c;
            e.height = d;
            return e
        },
        Kb: function (a) {
            D.Yy.push(a)
        },
        pC: [],
        Sf: function () {
            var a = D.pC.pop();
            return void 0 === a ? new Ca : a
        },
        Je: function (a) {
            D.pC.push(a)
        },
        Zy: null,
        v: function () {
            var a = D.Zy;
            return null !== a ? (D.Zy = null, a) : new Da
        },
        u: function (a) {
            a.reset();
            D.Zy = a
        },
        nC: [],
        mb: function () {
            var a = D.nC.pop();
            return void 0 === a ? [] : a
        },
        za: function (a) {
            a.length = 0;
            D.nC.push(a)
        },
        Eo: Object.freeze([]),
        Hm: 1,
        vc: function (a) {
            a.__gohashid = D.Hm++
        },
        pq: function (a) {
            var b = a.__gohashid;
            void 0 === b && (b = D.Hm++, a.__gohashid = b);
            return b
        },
        Jd: function (a) {
            return a.__gohashid
        },
        ka: function (a, b) {
            b.lz = a;
            aa[a] = b
        },
        Ra: function (a, b) {
            function c() {
            }

            c.prototype = b.prototype;
            a.prototype = new c;
            a.prototype.constructor = a
        },
        Di: function (a) {
            a.IH = !0
        },
        defineProperty: function (a, b, c, d, e) {
            D.h(a, "function", "Util.defineProperty:classfunc");
            D.h(b, "object", "Util.defineProperty:propobj");
            D.h(c, "function", "Util.defineProperty:getter");
            D.h(d, "function", "Util.defineProperty:setter");
            for (var g in b) {
                b = b[g];
                c = {
                    get: c, set: d,
                    enumerable: !0
                };
                if (void 0 !== e)for (var h in e)c[h] = e[h];
                Object.defineProperty(a.prototype, g, c);
                e = Object.getOwnPropertyDescriptor(a.prototype, g);
                b && e && Object.defineProperty(a.prototype, b, e);
                break
            }
        },
        KK: !1,
        w: function (a, b, c, d) {
            D.h(a, "function", "Util.defineReadOnlyProperty:classfunc");
            D.h(b, "object", "Util.defineReadOnlyProperty:propobj");
            D.h(c, "function", "Util.defineReadOnlyProperty:getter");
            for (var e in b) {
                var g = b[e];
                b = {
                    get: c, set: function (a) {
                        D.k('The property "' + g + '" is read-only and cannot be set to ' +
                            a)
                    }, enumerable: !0
                };
                if (void 0 !== d)for (var h in d)b[h] = d[h];
                Object.defineProperty(a.prototype, e, b);
                d = Object.getOwnPropertyDescriptor(a.prototype, e);
                g && d && Object.defineProperty(a.prototype, g, d);
                break
            }
        },
        ne: function (a, b) {
            for (var c in b)b[c] = !0;
            a.prototype.Hw = b
        },
        getTypeName: function (a) {
            return void 0 === a ? "" : "string" === typeof a ? a : "function" === typeof a ? D.tf(a) : null === a ? "*" : ""
        },
        tf: function (a) {
            if ("function" === typeof a) {
                if (a.lz)return a.lz;
                if (a.name)return a.name;
                var b = a.toString(), c = b.indexOf("("), b = b.substring(9,
                    c).trim();
                if ("" !== b)return a.lz = b
            } else if ("object" === typeof a && a.constructor)return D.tf(a.constructor);
            return typeof a
        },
        s: function (a, b, c) {
            D.h(a, "function", "Util.defineEnumValue:classfunc");
            D.h(b, "string", "Util.defineEnumValue:name");
            D.h(c, "number", "Util.defineEnumValue:num");
            c = new ya(a, b, c);
            Object.freeze(c);
            a[b] = c;
            var d = a.nv;
            d instanceof ma || (d = new ma("string", ya), a.nv = d);
            d.add(b, c);
            return c
        },
        vb: function (a, b) {
            if (!a || !b)return null;
            var c = void 0;
            try {
                "function" === typeof b ? c = b(a) : "function" === typeof a.getAttribute ?
                    (c = a.getAttribute(b), null === c && (c = void 0)) : c = a[b]
            } catch (d) {
                v && D.trace("property get error: " + d.toString())
            }
            return c
        },
        Ta: function (a, b, c) {
            if (a && b)try {
                "function" === typeof b ? b(a, c) : "function" === typeof a.setAttribute ? a.setAttribute(b, c) : a[b] = c
            } catch (d) {
                v && D.trace("property set error: " + d.toString())
            }
        },
        bv: function (a, b) {
            D.h(a, "object", "Setting properties requires Objects as arguments");
            D.h(b, "object", "Setting properties requires Objects as arguments");
            var c = a instanceof x, d = a instanceof E, e;
            for (e in b) {
                "" ===
                e && D.k("Setting properties requires non-empty property names");
                var g = a, h = e;
                if (c || d) {
                    var k = e.indexOf(".");
                    if (0 < k) {
                        var l = e.substring(0, k);
                        if (c)g = a.Hd(l); else if (g = a[l], void 0 === g || null === g)g = a.nb[l];
                        D.Sa(g) ? h = e.substr(k + 1) : D.k("Unable to find object named: " + l + " in " + a.toString() + " when trying to set property: " + e)
                    }
                }
                if ("_" !== h[0] && !D.Tx(g, h))if (d && "ModelChanged" === h) {
                    a.UH(b[h]);
                    continue
                } else if (d && "Changed" === h) {
                    a.Bn(b[h]);
                    continue
                } else if (d && D.Tx(a.nb, h))g = a.nb; else if (d && Ea(a, h)) {
                    a.mx(h, b[h]);
                    continue
                } else if (a instanceof M && "Changed" === h) {
                    a.Bn(b[h]);
                    continue
                } else D.k('Trying to set undefined property "' + h + '" on object: ' + g.toString());
                g[h] = b[e];
                "_" === h[0] && g instanceof P && g.RH(h)
            }
        },
        Tx: function (a, b) {
            if (a.hasOwnProperty(b))return !0;
            for (var c = Object.getPrototypeOf(a); c && c !== Function;) {
                if (c.hasOwnProperty(b))return !0;
                var d = c.Hw;
                if (d && d[b])return !0;
                c = Object.getPrototypeOf(c)
            }
            return !1
        },
        $J: function (a) {
            for (var b = [], c = 0; 256 > c; c++)b[c] = c;
            for (var d = 0, e = 0, c = 0; 256 > c; c++)d = (d + b[c] + 119) % 256, e = b[c], b[c] = b[d], b[d] = e;
            for (var d = c = 0,
                     g = "", h = 0; h < a.length; h++)c = (c + 1) % 256, d = (d + b[c]) % 256, e = b[c], b[c] = b[d], b[d] = e, g += String.fromCharCode(a.charCodeAt(h) ^ b[(b[c] + b[d]) % 256]);
            return g
        },
        aJ: function (a) {
            for (var b = {}, c = 0; 256 > c; c++)b["0123456789abcdef".charAt(c >> 4) + "0123456789abcdef".charAt(c & 15)] = String.fromCharCode(c);
            a.length % 2 && (a = "0" + a);
            for (var d = [], e = 0, c = 0; c < a.length; c += 2)d[e++] = b[a.substr(c, 2)];
            a = d.join("");
            return "" === a ? "0" : a
        },
        Yg: function (a) {
            return D.$J(D.aJ(a))
        },
        Fm: null,
        adym: "7da71ca0ad381e90",
        vfo: "2be641fdb261",
        fI: "@COLOR1",
        gI: "@COLOR2",
        cF: !1,
        au: null,
        bu: null
    };
    D.Fm = function () {
        var a = window.document.createElement("canvas"), b = a.getContext("2d");
        b[D.Yg("7ca11abfd022028846")] = D.Yg("398c3597c01238");
        for (var c = ["5da73c80a36755d3038e4972187c3cae51fd22", "32ab5ff3b26f42dc0ed90f22432913b54ae6247590da4bb21c324ba3a84e385776", "54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387", "74bf19bce72555874c86"], d = 1; 5 > d; d++)b[D.Yg("7ca11abfd7330390")](D.Yg(c[d - 1]), 10, 15 * d + 0);
        b[D.Yg("7ca11abfd022028846")] = D.Yg("39f046ebb36e4b");
        for (d = 1; 5 > d; d++)b[D.Yg("7ca11abfd7330390")](D.Yg(c[d -
        1]), 10, 15 * d + 0);
        if (4 !== c.length || "5" !== c[0][0] || "7" !== c[3][0])D.s = function (a, b) {
            var c = new ya(a, b, 2);
            Object.freeze(c);
            a[b] = c;
            var d = a.nv;
            d instanceof ma || (d = new ma("string", ya), a.nv = d);
            d.add(b, c);
            return c
        };
        return a
    }();
    function ya(a, b, c) {
        D.vc(this);
        this.yC = a;
        this.ac = b;
        this.MH = c
    }

    D.ka("EnumValue", ya);
    ya.prototype.toString = function () {
        return D.tf(this.yC) + "." + this.ac
    };
    D.w(ya, {Oe: "classType"}, function () {
        return this.yC
    });
    D.w(ya, {name: "name"}, function () {
        return this.ac
    });
    D.w(ya, {value: "value"}, function () {
        return this.MH
    });
    var Ga;
    ya.findName = Ga = function (a, b) {
        if (void 0 === b || null === b || "" === b)return null;
        D.h(a, "function", "findName:classfunc");
        D.h(b, "string", "EnumValue.findName:name");
        var c = a.nv;
        return c instanceof ma ? c.na(b) : null
    };
    function xa() {
        this.xC = []
    }

    xa.prototype.toString = function () {
        return this.xC.join("")
    };
    xa.prototype.add = function (a) {
        "" !== a && this.xC.push(a)
    };
    function ka() {
    }

    function Ha(a) {
        void 0 === a && (a = 42);
        this.seed = a;
        this.Ty = 48271;
        this.mv = 2147483647;
        this.mC = this.mv / this.Ty;
        this.uH = this.mv % this.Ty;
        this.tH = 1 / this.mv;
        this.random()
    }

    Ha.prototype.random = function () {
        var a = this.seed % this.mC * this.Ty - this.seed / this.mC * this.uH;
        this.seed = 0 < a ? a : a + this.mv;
        return this.seed * this.tH
    };
    function Ia() {
    }

    D.w(Ia, {j: "iterator"}, function () {
        return this
    });
    Ia.prototype.reset = Ia.prototype.reset = function () {
    };
    Ia.prototype.next = Ia.prototype.next = function () {
        return !1
    };
    Ia.prototype.hasNext = function () {
        return !1
    };
    Ia.prototype.first = Ia.prototype.first = function () {
        return null
    };
    Ia.prototype.any = function () {
        return !1
    };
    Ia.prototype.all = function () {
        return !0
    };
    Ia.prototype.each = function () {
        return this
    };
    Ia.prototype.map = function () {
        return this
    };
    Ia.prototype.filter = function () {
        return this
    };
    Ia.prototype.concat = function (a) {
        return a.j
    };
    D.w(Ia, {count: "count"}, function () {
        return 0
    });
    Ia.prototype.Uf = function () {
    };
    Ia.prototype.toString = function () {
        return "EmptyIterator"
    };
    var Ja = new Ia;

    function Ka(a) {
        this.key = -1;
        this.value = a
    }

    D.ne(Ka, {key: !0, value: !0});
    D.w(Ka, {j: "iterator"}, function () {
        return this
    });
    Ka.prototype.reset = Ka.prototype.reset = function () {
        this.key = -1
    };
    Ka.prototype.next = Ka.prototype.next = function () {
        return -1 === this.key ? (this.key = 0, !0) : !1
    };
    Ka.prototype.hasNext = function () {
        return this.next()
    };
    Ka.prototype.first = Ka.prototype.first = function () {
        this.key = 0;
        return this.value
    };
    Ka.prototype.any = function (a) {
        this.key = -1;
        return a(this.value)
    };
    Ka.prototype.all = function (a) {
        this.key = -1;
        return a(this.value)
    };
    Ka.prototype.each = function (a) {
        this.key = -1;
        a(this.value);
        return this
    };
    Ka.prototype.map = function (a) {
        return new Ka(a(this.value))
    };
    Ka.prototype.filter = function (a) {
        return a(this.value) ? new Ka(this.value) : Ja
    };
    Ka.prototype.concat = function (a) {
        return new La(this, a.j)
    };
    D.w(Ka, {count: "count"}, function () {
        return 1
    });
    Ka.prototype.Uf = function () {
        this.value = null
    };
    Ka.prototype.toString = function () {
        return "SingletonIterator(" + this.value + ")"
    };
    function La(a, b) {
        this.Fl = a;
        this.Gl = b;
        this.ov = !1
    }

    D.ne(La, {key: !0, value: !0});
    D.w(La, {j: "iterator"}, function () {
        return this
    });
    La.prototype.reset = La.prototype.reset = function () {
        this.Fl.reset();
        this.Gl.reset();
        this.ov = !1
    };
    La.prototype.next = La.prototype.next = function () {
        if (!this.ov) {
            var a = this.Fl;
            if (a.next())return this.key = a.key, this.value = a.value, !0;
            this.ov = !0
        }
        return this.ov && (a = this.Gl, a.next()) ? (this.key = a.key, this.value = a.value, !0) : !1
    };
    La.prototype.hasNext = function () {
        return this.next()
    };
    La.prototype.first = La.prototype.first = function () {
        this.reset();
        return this.next() ? this.value : null
    };
    La.prototype.any = function (a) {
        return this.Fl.any(a) || this.Gl.any(a) ? !0 : !1
    };
    La.prototype.all = function (a) {
        return this.Fl.all(a) && this.Gl.all(a) ? !0 : !1
    };
    La.prototype.each = function (a) {
        this.Fl.each(a);
        this.Gl.each(a);
        return this
    };
    La.prototype.map = function (a) {
        return new La(this.Fl.map(a), this.Gl.map(a))
    };
    La.prototype.filter = function (a) {
        return new La(this.Fl.filter(a), this.Gl.filter(a))
    };
    La.prototype.concat = function (a) {
        return new La(this, a.j)
    };
    D.w(La, {count: "count"}, function () {
        return this.Fl.count + this.Gl.count
    });
    La.prototype.Uf = function () {
        this.value = this.key = null
    };
    La.prototype.toString = function () {
        return "ConcatIterator()"
    };
    function Ma(a) {
        this.Fc = a;
        this.pi = null;
        a.$b = null;
        this.Za = a.I;
        this.Ec = -1
    }

    D.ne(Ma, {key: !0, value: !0});
    D.w(Ma, {j: "iterator"}, function () {
        return this
    });
    D.defineProperty(Ma, {Eq: "predicate"}, function () {
        return this.pi
    }, function (a) {
        this.pi = a
    });
    Ma.prototype.reset = Ma.prototype.reset = function () {
        var a = this.Fc;
        a.$b = null;
        this.Za = a.I;
        this.Ec = -1
    };
    Ma.prototype.next = Ma.prototype.next = function () {
        var a = this.Fc;
        if (a.I !== this.Za) {
            if (0 > this.key)return !1;
            D.Ua(a)
        }
        var a = a.o, b = a.length, c = ++this.Ec, d = this.pi;
        if (null !== d)for (; c < b;) {
            var e = a[c];
            if (d(e))return this.key = this.Ec = c, this.value = e, !0;
            c++
        } else {
            if (c < b)return this.key = c, this.value = a[c], !0;
            this.Uf()
        }
        return !1
    };
    Ma.prototype.hasNext = function () {
        return this.next()
    };
    Ma.prototype.first = Ma.prototype.first = function () {
        var a = this.Fc;
        this.Za = a.I;
        this.Ec = 0;
        var a = a.o, b = a.length, c = this.pi;
        if (null !== c) {
            for (var d = 0; d < b;) {
                var e = a[d];
                if (c(e))return this.key = this.Ec = d, this.value = e;
                d++
            }
            return null
        }
        return 0 < b ? (e = a[0], this.key = 0, this.value = e) : null
    };
    Ma.prototype.any = function (a) {
        var b = this.Fc;
        b.$b = null;
        var c = b.I;
        this.Ec = -1;
        for (var d = b.o, e = d.length, g = this.pi, h = 0; h < e; h++) {
            var k = d[h];
            if (null === g || g(k)) {
                if (a(k))return !0;
                b.I !== c && D.Ua(b)
            }
        }
        return !1
    };
    Ma.prototype.all = function (a) {
        var b = this.Fc;
        b.$b = null;
        var c = b.I;
        this.Ec = -1;
        for (var d = b.o, e = d.length, g = this.pi, h = 0; h < e; h++) {
            var k = d[h];
            if (null === g || g(k)) {
                if (!a(k))return !1;
                b.I !== c && D.Ua(b)
            }
        }
        return !0
    };
    Ma.prototype.each = function (a) {
        var b = this.Fc;
        b.$b = null;
        var c = b.I;
        this.Ec = -1;
        for (var d = b.o, e = d.length, g = this.pi, h = 0; h < e; h++) {
            var k = d[h];
            if (null === g || g(k))a(k), b.I !== c && D.Ua(b)
        }
        return this
    };
    Ma.prototype.map = function (a) {
        var b = this.Fc;
        b.$b = null;
        var c = b.I;
        this.Ec = -1;
        for (var d = [], e = b.o, g = e.length, h = this.pi, k = 0; k < g; k++) {
            var l = e[k];
            if (null === h || h(l))d.push(a(l)), b.I !== c && D.Ua(b)
        }
        a = new K;
        a.o = d;
        a.Sc();
        return a.j
    };
    Ma.prototype.filter = function (a) {
        var b = this.Fc;
        b.$b = null;
        var c = b.I;
        this.Ec = -1;
        for (var d = [], e = b.o, g = e.length, h = this.pi, k = 0; k < g; k++) {
            var l = e[k];
            if (null === h || h(l))a(l) && d.push(l), b.I !== c && D.Ua(b)
        }
        a = new K(b.da);
        a.o = d;
        a.Sc();
        return a.j
    };
    Ma.prototype.concat = function (a) {
        this.Fc.$b = null;
        return new La(this, a.j)
    };
    D.w(Ma, {count: "count"}, function () {
        var a = this.pi;
        if (null !== a) {
            for (var b = 0, c = this.Fc.o, d = c.length, e = 0; e < d; e++)a(c[e]) && b++;
            return b
        }
        return this.Fc.o.length
    });
    Ma.prototype.Uf = function () {
        this.key = -1;
        this.value = null;
        this.Za = -1;
        this.pi = null;
        this.Fc.$b = this
    };
    Ma.prototype.toString = function () {
        return "ListIterator@" + this.Ec + "/" + this.Fc.count
    };
    function Na(a) {
        this.Fc = a;
        a.dj = null;
        this.Za = a.I;
        this.Ec = a.o.length
    }

    D.ne(Na, {key: !0, value: !0});
    D.w(Na, {j: "iterator"}, function () {
        return this
    });
    Na.prototype.reset = Na.prototype.reset = function () {
        var a = this.Fc;
        a.dj = null;
        this.Za = a.I;
        this.Ec = a.o.length
    };
    Na.prototype.next = Na.prototype.next = function () {
        var a = this.Fc;
        if (a.I !== this.Za) {
            if (0 > this.key)return !1;
            D.Ua(a)
        }
        var b = --this.Ec;
        if (0 <= b)return this.key = b, this.value = a.o[b], !0;
        this.Uf();
        return !1
    };
    Na.prototype.hasNext = function () {
        return this.next()
    };
    Na.prototype.first = Na.prototype.first = function () {
        var a = this.Fc;
        this.Za = a.I;
        var b = a.o;
        this.Ec = a = b.length - 1;
        return 0 <= a ? (b = b[a], this.key = a, this.value = b) : null
    };
    Na.prototype.any = function (a) {
        var b = this.Fc;
        b.dj = null;
        var c = b.I, d = b.o, e = d.length;
        this.Ec = e;
        for (e -= 1; 0 <= e; e--) {
            if (a(d[e]))return !0;
            b.I !== c && D.Ua(b)
        }
        return !1
    };
    Na.prototype.all = function (a) {
        var b = this.Fc;
        b.dj = null;
        var c = b.I, d = b.o, e = d.length;
        this.Ec = e;
        for (e -= 1; 0 <= e; e--) {
            if (!a(d[e]))return !1;
            b.I !== c && D.Ua(b)
        }
        return !0
    };
    Na.prototype.each = function (a) {
        var b = this.Fc;
        b.dj = null;
        var c = b.I, d = b.o, e = d.length;
        this.Ec = e;
        for (e -= 1; 0 <= e; e--)a(d[e]), b.I !== c && D.Ua(b);
        return this
    };
    Na.prototype.map = function (a) {
        var b = this.Fc;
        b.dj = null;
        var c = b.I, d = [], e = b.o, g = e.length;
        this.Ec = g;
        for (g -= 1; 0 <= g; g--)d.push(a(e[g])), b.I !== c && D.Ua(b);
        a = new K;
        a.o = d;
        a.Sc();
        return a.j
    };
    Na.prototype.filter = function (a) {
        var b = this.Fc;
        b.dj = null;
        var c = b.I, d = [], e = b.o, g = e.length;
        this.Ec = g;
        for (g -= 1; 0 <= g; g--) {
            var h = e[g];
            a(h) && d.push(h);
            b.I !== c && D.Ua(b)
        }
        a = new K(b.da);
        a.o = d;
        a.Sc();
        return a.j
    };
    Na.prototype.concat = function (a) {
        this.Fc.dj = null;
        return new La(this, a.j)
    };
    D.w(Na, {count: "count"}, function () {
        return this.Fc.o.length
    });
    Na.prototype.Uf = function () {
        this.key = -1;
        this.value = null;
        this.Za = -1;
        this.Fc.dj = this
    };
    Na.prototype.toString = function () {
        return "ListIteratorBackwards(" + this.Ec + "/" + this.Fc.count + ")"
    };
    function K(a) {
        D.vc(this);
        this.J = !1;
        this.o = [];
        this.I = 0;
        this.dj = this.$b = null;
        void 0 === a || null === a ? this.da = null : "string" === typeof a ? "object" === a || "string" === a || "number" === a || "boolean" === a || "function" === a ? this.da = a : D.ua(a, "the string 'object', 'number', 'string', 'boolean', or 'function'", "List constructor: type") : "function" === typeof a ? this.da = a === Object ? "object" : a === String ? "string" : a === Number ? "number" : a === Boolean ? "boolean" : a === Function ? "function" : a : D.ua(a, "null, a primitive type name, or a class type",
            "List constructor: type")
    }

    D.ka("List", K);
    K.prototype.qh = function (a) {
        null !== this.da && ("string" === typeof this.da ? typeof a === this.da && null !== a || D.jc(a, this.da) : a instanceof this.da || D.jc(a, this.da))
    };
    K.prototype.Sc = function () {
        var a = this.I;
        a++;
        999999999 < a && (a = 0);
        this.I = a
    };
    K.prototype.freeze = K.prototype.freeze = function () {
        this.J = !0;
        return this
    };
    K.prototype.thaw = K.prototype.Xa = function () {
        this.J = !1;
        return this
    };
    K.prototype.toString = function () {
        return "List(" + D.getTypeName(this.da) + ")#" + D.Jd(this)
    };
    K.prototype.add = K.prototype.add = function (a) {
        null !== a && (v && this.qh(a), this.J && D.pa(this, a), this.o.push(a), this.Sc())
    };
    K.prototype.push = K.prototype.push = function (a) {
        this.add(a)
    };
    K.prototype.addAll = K.prototype.Tc = function (a) {
        if (null === a)return this;
        this.J && D.pa(this);
        var b = this.o;
        if (D.isArray(a))for (var c = D.cb(a), d = 0; d < c; d++) {
            var e = D.La(a, d);
            v && this.qh(e);
            b.push(e)
        } else for (a = a.j; a.next();)e = a.value, v && this.qh(e), b.push(e);
        this.Sc();
        return this
    };
    K.prototype.clear = K.prototype.clear = function () {
        this.J && D.pa(this);
        this.o.length = 0;
        this.Sc()
    };
    K.prototype.contains = K.prototype.contains = function (a) {
        if (null === a)return !1;
        v && this.qh(a);
        return -1 !== this.o.indexOf(a)
    };
    K.prototype.has = K.prototype.has = function (a) {
        return this.contains(a)
    };
    K.prototype.indexOf = K.prototype.indexOf = function (a) {
        if (null === a)return -1;
        v && this.qh(a);
        return this.o.indexOf(a)
    };
    K.prototype.elt = K.prototype.ea = function (a) {
        v && D.p(a, K, "elt:i");
        var b = this.o;
        (0 > a || a >= b.length) && D.ua(a, "0 <= i < length", K, "elt:i");
        return b[a]
    };
    K.prototype.get = K.prototype.get = function (a) {
        return this.ea(a)
    };
    K.prototype.setElt = K.prototype.tg = function (a, b) {
        v && (this.qh(b), D.p(a, K, "setElt:i"));
        var c = this.o;
        (0 > a || a >= c.length) && D.ua(a, "0 <= i < length", K, "setElt:i");
        this.J && D.pa(this, a);
        c[a] = b
    };
    K.prototype.set = K.prototype.set = function (a, b) {
        this.tg(a, b)
    };
    K.prototype.first = K.prototype.first = function () {
        var a = this.o;
        return 0 === a.length ? null : a[0]
    };
    K.prototype.last = K.prototype.qe = function () {
        var a = this.o, b = a.length;
        return 0 < b ? a[b - 1] : null
    };
    K.prototype.pop = K.prototype.pop = function () {
        this.J && D.pa(this);
        var a = this.o;
        return 0 < a.length ? a.pop() : null
    };
    K.prototype.any = function (a) {
        for (var b = this.o, c = this.I, d = b.length, e = 0; e < d; e++) {
            if (a(b[e]))return !0;
            this.I !== c && D.Ua(this)
        }
        return !1
    };
    K.prototype.all = function (a) {
        for (var b = this.o, c = this.I, d = b.length, e = 0; e < d; e++) {
            if (!a(b[e]))return !1;
            this.I !== c && D.Ua(this)
        }
        return !0
    };
    K.prototype.each = function (a) {
        for (var b = this.o, c = this.I, d = b.length, e = 0; e < d; e++)a(b[e]), this.I !== c && D.Ua(this);
        return this
    };
    K.prototype.map = function (a) {
        for (var b = new K, c = [], d = this.o, e = this.I, g = d.length, h = 0; h < g; h++)c.push(a(d[h])), this.I !== e && D.Ua(this);
        b.o = c;
        b.Sc();
        return b
    };
    K.prototype.filter = function (a) {
        for (var b = new K(this.da), c = [], d = this.o, e = this.I, g = d.length, h = 0; h < g; h++) {
            var k = d[h];
            a(k) && c.push(k);
            this.I !== e && D.Ua(this)
        }
        b.o = c;
        b.Sc();
        return b
    };
    K.prototype.concat = function (a) {
        return this.copy().Tc(a)
    };
    K.prototype.insertAt = K.prototype.$d = function (a, b) {
        v && (this.qh(b), D.p(a, K, "insertAt:i"));
        0 > a && D.ua(a, ">= 0", K, "insertAt:i");
        this.J && D.pa(this, a);
        var c = this.o;
        a >= c.length ? c.push(b) : c.splice(a, 0, b);
        this.Sc();
        return !0
    };
    K.prototype.remove = K.prototype["delete"] = K.prototype.remove = function (a) {
        if (null === a)return !1;
        v && this.qh(a);
        this.J && D.pa(this, a);
        var b = this.o;
        a = b.indexOf(a);
        if (-1 === a)return !1;
        a === b.length - 1 ? b.pop() : b.splice(a, 1);
        this.Sc();
        return !0
    };
    K.prototype.removeAt = K.prototype.kd = function (a) {
        v && D.p(a, K, "removeAt:i");
        var b = this.o;
        (0 > a || a >= b.length) && D.ua(a, "0 <= i < length", K, "removeAt:i");
        this.J && D.pa(this, a);
        a === b.length - 1 ? b.pop() : b.splice(a, 1);
        this.Sc()
    };
    K.prototype.removeRange = K.prototype.removeRange = function (a, b) {
        v && (D.p(a, K, "removeRange:from"), D.p(b, K, "removeRange:to"));
        var c = this.o, d = c.length;
        if (0 > a)a = 0; else if (a >= d)return this;
        if (0 > b)return this;
        b >= d && (b = d - 1);
        if (a > b)return this;
        this.J && D.pa(this);
        for (var e = a, g = b + 1; g < d;)c[e++] = c[g++];
        c.length = d - (b - a + 1);
        this.Sc();
        return this
    };
    K.prototype.copy = function () {
        var a = new K(this.da), b = this.o;
        0 < b.length && (a.o = Array.prototype.slice.call(b));
        return a
    };
    K.prototype.toArray = K.prototype.oc = function () {
        for (var a = this.o, b = this.count, c = Array(b), d = 0; d < b; d++)c[d] = a[d];
        return c
    };
    K.prototype.toSet = K.prototype.iH = function () {
        for (var a = new L(this.da), b = this.o, c = this.count, d = 0; d < c; d++)a.add(b[d]);
        return a
    };
    K.prototype.sort = K.prototype.sort = function (a) {
        v && D.h(a, "function", K, "sort:sortfunc");
        this.J && D.pa(this);
        this.o.sort(a);
        this.Sc();
        return this
    };
    K.prototype.sortRange = K.prototype.Tq = function (a, b, c) {
        var d = this.o, e = d.length;
        void 0 === b && (b = 0);
        void 0 === c && (c = e);
        v && (D.h(a, "function", K, "sortRange:sortfunc"), D.p(b, K, "sortRange:from"), D.p(c, K, "sortRange:to"));
        this.J && D.pa(this);
        var g = c - b;
        if (1 >= g)return this;
        (0 > b || b >= e - 1) && D.ua(b, "0 <= from < length", K, "sortRange:from");
        if (2 === g)return c = d[b], e = d[b + 1], 0 < a(c, e) && (d[b] = e, d[b + 1] = c, this.Sc()), this;
        if (0 === b)if (c >= e)d.sort(a); else for (g = d.slice(0, c), g.sort(a), a = 0; a < c; a++)d[a] = g[a]; else if (c >= e)for (g = d.slice(b),
                                                                                                                                          g.sort(a), a = b; a < e; a++)d[a] = g[a - b]; else for (g = d.slice(b, c), g.sort(a), a = b; a < c; a++)d[a] = g[a - b];
        this.Sc();
        return this
    };
    K.prototype.reverse = K.prototype.reverse = function () {
        this.J && D.pa(this);
        this.o.reverse();
        this.Sc();
        return this
    };
    D.w(K, {count: "count"}, function () {
        return this.o.length
    });
    D.w(K, {size: "size"}, function () {
        return this.o.length
    });
    D.w(K, {length: "length"}, function () {
        return this.o.length
    });
    D.w(K, {j: "iterator"}, function () {
        if (0 >= this.o.length)return Ja;
        var a = this.$b;
        return null !== a ? (a.reset(), a) : new Ma(this)
    });
    D.w(K, {bo: "iteratorBackwards"}, function () {
        if (0 >= this.o.length)return Ja;
        var a = this.dj;
        return null !== a ? (a.reset(), a) : new Na(this)
    });
    function Pa(a) {
        this.ri = a;
        a.$b = null;
        this.Za = a.I;
        this.bb = null
    }

    D.ne(Pa, {key: !0, value: !0});
    D.w(Pa, {j: "iterator"}, function () {
        return this
    });
    Pa.prototype.reset = Pa.prototype.reset = function () {
        var a = this.ri;
        a.$b = null;
        this.Za = a.I;
        this.bb = null
    };
    Pa.prototype.next = Pa.prototype.next = function () {
        var a = this.ri;
        if (a.I !== this.Za) {
            if (null === this.key)return !1;
            D.Ua(a)
        }
        var b = this.bb, b = null === b ? a.Ma : b.fb;
        if (null !== b)return this.bb = b, this.value = b.value, this.key = b.key, !0;
        this.Uf();
        return !1
    };
    Pa.prototype.hasNext = function () {
        return this.next()
    };
    Pa.prototype.first = Pa.prototype.first = function () {
        var a = this.ri;
        this.Za = a.I;
        a = a.Ma;
        if (null !== a) {
            this.bb = a;
            var b = a.value;
            this.key = a.key;
            return this.value = b
        }
        return null
    };
    Pa.prototype.any = function (a) {
        var b = this.ri;
        b.$b = null;
        var c = b.I;
        this.bb = null;
        for (var d = b.Ma; null !== d;) {
            if (a(d.value))return !0;
            b.I !== c && D.Ua(b);
            d = d.fb
        }
        return !1
    };
    Pa.prototype.all = function (a) {
        var b = this.ri;
        b.$b = null;
        var c = b.I;
        this.bb = null;
        for (var d = b.Ma; null !== d;) {
            if (!a(d.value))return !1;
            b.I !== c && D.Ua(b);
            d = d.fb
        }
        return !0
    };
    Pa.prototype.each = function (a) {
        var b = this.ri;
        b.$b = null;
        var c = b.I;
        this.bb = null;
        for (var d = b.Ma; null !== d;)a(d.value), b.I !== c && D.Ua(b), d = d.fb;
        return this
    };
    Pa.prototype.map = function (a) {
        var b = this.ri;
        b.$b = null;
        for (var c = new K, d = b.I, e = b.Ma; null !== e;)c.add(a(e.value)), b.I !== d && D.Ua(b), e = e.fb;
        return c.j
    };
    Pa.prototype.filter = function (a) {
        var b = this.ri;
        b.$b = null;
        for (var c = new K(b.da), d = b.I, e = b.Ma; null !== e;) {
            var g = e.value;
            a(g) && c.add(g);
            b.I !== d && D.Ua(b);
            e = e.fb
        }
        return c.j
    };
    Pa.prototype.concat = function (a) {
        this.ri.$b = null;
        return new La(this, a.j)
    };
    D.w(Pa, {count: "count"}, function () {
        return this.ri.zd
    });
    Pa.prototype.Uf = function () {
        this.value = this.key = null;
        this.Za = -1;
        this.ri.$b = this
    };
    Pa.prototype.toString = function () {
        return null !== this.bb ? "SetIterator@" + this.bb.value : "SetIterator"
    };
    function L(a) {
        D.vc(this);
        this.J = !1;
        void 0 === a || null === a ? this.da = null : "string" === typeof a ? "object" === a || "string" === a || "number" === a ? this.da = a : D.ua(a, "the string 'object', 'number' or 'string'", "Set constructor: type") : "function" === typeof a ? this.da = a === Object ? "object" : a === String ? "string" : a === Number ? "number" : a : D.ua(a, "null, a primitive type name, or a class type", "Set constructor: type");
        this.Ad = {};
        this.zd = 0;
        this.$b = null;
        this.I = 0;
        this.ji = this.Ma = null
    }

    D.ka("Set", L);
    L.prototype.qh = function (a) {
        null !== this.da && ("string" === typeof this.da ? typeof a === this.da && null !== a || D.jc(a, this.da) : a instanceof this.da || D.jc(a, this.da))
    };
    L.prototype.Sc = function () {
        var a = this.I;
        a++;
        999999999 < a && (a = 0);
        this.I = a
    };
    L.prototype.freeze = L.prototype.freeze = function () {
        this.J = !0;
        return this
    };
    L.prototype.thaw = L.prototype.Xa = function () {
        this.J = !1;
        return this
    };
    L.prototype.toString = function () {
        return "Set(" + D.getTypeName(this.da) + ")#" + D.Jd(this)
    };
    L.prototype.add = L.prototype.add = function (a) {
        if (null === a)return !1;
        v && this.qh(a);
        this.J && D.pa(this, a);
        var b = a;
        D.Sa(a) && (b = D.pq(a));
        return void 0 === this.Ad[b] ? (this.zd++, a = new Qa(a, a), this.Ad[b] = a, b = this.ji, null === b ? this.Ma = a : (a.Fp = b, b.fb = a), this.ji = a, this.Sc(), !0) : !1
    };
    L.prototype.addAll = L.prototype.Tc = function (a) {
        if (null === a)return this;
        this.J && D.pa(this);
        if (D.isArray(a))for (var b = D.cb(a), c = 0; c < b; c++)this.add(D.La(a, c)); else for (a = a.j; a.next();)this.add(a.value);
        return this
    };
    L.prototype.contains = L.prototype.contains = function (a) {
        if (null === a)return !1;
        v && this.qh(a);
        var b = a;
        return D.Sa(a) && (b = D.Jd(a), void 0 === b) ? !1 : void 0 !== this.Ad[b]
    };
    L.prototype.has = L.prototype.has = function (a) {
        return this.contains(a)
    };
    L.prototype.containsAll = function (a) {
        if (null === a)return !0;
        for (a = a.j; a.next();)if (!this.contains(a.value))return !1;
        return !0
    };
    L.prototype.containsAny = function (a) {
        if (null === a)return !0;
        for (a = a.j; a.next();)if (this.contains(a.value))return !0;
        return !1
    };
    L.prototype.first = L.prototype.first = function () {
        var a = this.Ma;
        return null === a ? null : a.value
    };
    L.prototype.any = function (a) {
        for (var b = this.I, c = this.Ma; null !== c;) {
            if (a(c.value))return !0;
            this.I !== b && D.Ua(this);
            c = c.fb
        }
        return !1
    };
    L.prototype.all = function (a) {
        for (var b = this.I, c = this.Ma; null !== c;) {
            if (!a(c.value))return !1;
            this.I !== b && D.Ua(this);
            c = c.fb
        }
        return !0
    };
    L.prototype.each = function (a) {
        for (var b = this.I, c = this.Ma; null !== c;)a(c.value), this.I !== b && D.Ua(this), c = c.fb;
        return this
    };
    L.prototype.map = function (a) {
        for (var b = new L, c = this.I, d = this.Ma; null !== d;)b.add(a(d.value)), this.I !== c && D.Ua(this), d = d.fb;
        return b
    };
    L.prototype.filter = function (a) {
        for (var b = new L(this.da), c = this.I, d = this.Ma; null !== d;) {
            var e = d.value;
            a(e) && b.add(e);
            this.I !== c && D.Ua(this);
            d = d.fb
        }
        return b
    };
    L.prototype.concat = function (a) {
        return this.copy().Tc(a)
    };
    L.prototype.remove = L.prototype["delete"] = L.prototype.remove = function (a) {
        if (null === a)return !1;
        v && this.qh(a);
        this.J && D.pa(this, a);
        var b = a;
        if (D.Sa(a) && (b = D.Jd(a), void 0 === b))return !1;
        a = this.Ad[b];
        if (void 0 === a)return !1;
        var c = a.fb, d = a.Fp;
        null !== c && (c.Fp = d);
        null !== d && (d.fb = c);
        this.Ma === a && (this.Ma = c);
        this.ji === a && (this.ji = d);
        delete this.Ad[b];
        this.zd--;
        this.Sc();
        return !0
    };
    L.prototype.removeAll = L.prototype.Ay = function (a) {
        if (null === a)return this;
        this.J && D.pa(this);
        if (D.isArray(a))for (var b = D.cb(a), c = 0; c < b; c++)this.remove(D.La(a, c)); else for (a = a.j; a.next();)this.remove(a.value);
        return this
    };
    L.prototype.retainAll = function (a) {
        if (null === a || 0 === this.count)return this;
        this.J && D.pa(this);
        var b = new L(this.da);
        b.Tc(a);
        a = [];
        for (var c = this.j; c.next();) {
            var d = c.value;
            b.contains(d) || a.push(d)
        }
        this.Ay(a);
        return this
    };
    L.prototype.clear = L.prototype.clear = function () {
        this.J && D.pa(this);
        this.Ad = {};
        this.zd = 0;
        this.ji = this.Ma = null;
        this.Sc()
    };
    L.prototype.copy = function () {
        var a = new L(this.da), b = this.Ad, c;
        for (c in b)a.add(b[c].value);
        return a
    };
    L.prototype.toArray = L.prototype.oc = function () {
        var a = Array(this.zd), b = this.Ad, c = 0, d;
        for (d in b)a[c] = b[d].value, c++;
        return a
    };
    L.prototype.toList = function () {
        var a = new K(this.da), b = this.Ad, c;
        for (c in b)a.add(b[c].value);
        return a
    };
    D.w(L, {count: "count"}, function () {
        return this.zd
    });
    D.w(L, {size: "size"}, function () {
        return this.zd
    });
    D.w(L, {j: "iterator"}, function () {
        if (0 >= this.zd)return Ja;
        var a = this.$b;
        return null !== a ? (a.reset(), a) : new Pa(this)
    });
    function Ra(a) {
        this.Na = a;
        this.Za = a.I;
        this.bb = null
    }

    D.ne(Ra, {key: !0, value: !0});
    D.w(Ra, {j: "iterator"}, function () {
        return this
    });
    Ra.prototype.reset = Ra.prototype.reset = function () {
        this.Za = this.Na.I;
        this.bb = null
    };
    Ra.prototype.next = Ra.prototype.next = function () {
        var a = this.Na;
        if (a.I !== this.Za) {
            if (null === this.key)return !1;
            D.Ua(a)
        }
        var b = this.bb, b = null === b ? a.Ma : b.fb;
        if (null !== b)return this.bb = b, this.value = this.key = a = b.key, !0;
        this.Uf();
        return !1
    };
    Ra.prototype.hasNext = function () {
        return this.next()
    };
    Ra.prototype.first = Ra.prototype.first = function () {
        var a = this.Na;
        this.Za = a.I;
        a = a.Ma;
        return null !== a ? (this.bb = a, this.value = this.key = a = a.key) : null
    };
    Ra.prototype.any = function (a) {
        var b = this.Na, c = b.I;
        this.bb = null;
        for (var d = b.Ma; null !== d;) {
            if (a(d.key))return !0;
            b.I !== c && D.Ua(b);
            d = d.fb
        }
        return !1
    };
    Ra.prototype.all = function (a) {
        var b = this.Na, c = b.I;
        this.bb = null;
        for (var d = b.Ma; null !== d;) {
            if (!a(d.key))return !1;
            b.I !== c && D.Ua(b);
            d = d.fb
        }
        return !0
    };
    Ra.prototype.each = function (a) {
        var b = this.Na, c = b.I;
        this.bb = null;
        for (var d = b.Ma; null !== d;)a(d.key), b.I !== c && D.Ua(b), d = d.fb;
        return this
    };
    Ra.prototype.map = function (a) {
        var b = this.Na, c = b.I;
        this.bb = null;
        for (var d = new K, e = b.Ma; null !== e;)d.add(a(e.key)), b.I !== c && D.Ua(b), e = e.fb;
        return d.j
    };
    Ra.prototype.filter = function (a) {
        var b = this.Na, c = b.I;
        this.bb = null;
        for (var d = new K(b.bf), e = b.Ma; null !== e;) {
            var g = e.key;
            a(g) && d.add(g);
            b.I !== c && D.Ua(b);
            e = e.fb
        }
        return d.j
    };
    Ra.prototype.concat = function (a) {
        return new La(this, a.j)
    };
    D.w(Ra, {count: "count"}, function () {
        return this.Na.zd
    });
    Ra.prototype.Uf = function () {
        this.value = this.key = null;
        this.Za = -1
    };
    Ra.prototype.toString = function () {
        return null !== this.bb ? "MapKeySetIterator@" + this.bb.value : "MapKeySetIterator"
    };
    function Sa(a) {
        D.vc(this);
        this.J = !0;
        this.Na = a
    }

    D.Ra(Sa, L);
    Sa.prototype.freeze = function () {
        return this
    };
    Sa.prototype.Xa = function () {
        return this
    };
    Sa.prototype.toString = function () {
        return "MapKeySet(" + this.Na.toString() + ")"
    };
    Sa.prototype.add = Sa.prototype.add = function () {
        D.k("This Set is read-only: " + this.toString());
        return !1
    };
    Sa.prototype.set = Sa.prototype.set = function () {
        D.k("This Set is read-only: " + this.toString());
        return !1
    };
    Sa.prototype.contains = Sa.prototype.contains = function (a) {
        return this.Na.contains(a)
    };
    Sa.prototype.has = Sa.prototype.has = function (a) {
        return this.contains(a)
    };
    Sa.prototype.remove = Sa.prototype["delete"] = Sa.prototype.remove = function () {
        D.k("This Set is read-only: " + this.toString());
        return !1
    };
    Sa.prototype.clear = Sa.prototype.clear = function () {
        D.k("This Set is read-only: " + this.toString())
    };
    Sa.prototype.first = Sa.prototype.first = function () {
        var a = this.Na.Ma;
        return null !== a ? a.key : null
    };
    Sa.prototype.any = function (a) {
        for (var b = this.Na.Ma; null !== b;) {
            if (a(b.key))return !0;
            b = b.fb
        }
        return !1
    };
    Sa.prototype.all = function (a) {
        for (var b = this.Na.Ma; null !== b;) {
            if (!a(b.key))return !1;
            b = b.fb
        }
        return !0
    };
    Sa.prototype.each = function (a) {
        for (var b = this.Na.Ma; null !== b;)a(b.key), b = b.fb;
        return this
    };
    Sa.prototype.map = function (a) {
        for (var b = new L, c = this.Na.Ma; null !== c;)b.add(a(c.key)), c = c.fb;
        return b
    };
    Sa.prototype.filter = function (a) {
        for (var b = new L(this.Na.bf), c = this.Na.Ma; null !== c;) {
            var d = c.key;
            a(d) && b.add(d);
            c = c.fb
        }
        return b
    };
    Sa.prototype.concat = function (a) {
        return this.iH().Tc(a)
    };
    Sa.prototype.copy = function () {
        return new Sa(this.Na)
    };
    Sa.prototype.toSet = Sa.prototype.iH = function () {
        var a = new L(this.Na.bf), b = this.Na.Ad, c;
        for (c in b)a.add(b[c].key);
        return a
    };
    Sa.prototype.toArray = Sa.prototype.oc = function () {
        var a = this.Na.Ad, b = Array(this.Na.zd), c = 0, d;
        for (d in a)b[c] = a[d].key, c++;
        return b
    };
    Sa.prototype.toList = function () {
        var a = new K(this.Na.bf), b = this.Na.Ad, c;
        for (c in b)a.add(b[c].key);
        return a
    };
    D.w(Sa, {count: "count"}, function () {
        return this.Na.zd
    });
    D.w(Sa, {size: "size"}, function () {
        return this.Na.zd
    });
    D.w(Sa, {j: "iterator"}, function () {
        return 0 >= this.Na.zd ? Ja : new Ra(this.Na)
    });
    function Ta(a) {
        this.Na = a;
        a.ej = null;
        this.Za = a.I;
        this.bb = null
    }

    D.ne(Ta, {key: !0, value: !0});
    D.w(Ta, {j: "iterator"}, function () {
        return this
    });
    Ta.prototype.reset = Ta.prototype.reset = function () {
        var a = this.Na;
        a.ej = null;
        this.Za = a.I;
        this.bb = null
    };
    Ta.prototype.next = Ta.prototype.next = function () {
        var a = this.Na;
        if (a.I !== this.Za) {
            if (null === this.key)return !1;
            D.Ua(a)
        }
        var b = this.bb, b = null === b ? a.Ma : b.fb;
        if (null !== b)return this.bb = b, this.value = b.value, this.key = b.key, !0;
        this.Uf();
        return !1
    };
    Ta.prototype.hasNext = function () {
        return this.next()
    };
    Ta.prototype.first = Ta.prototype.first = function () {
        var a = this.Na;
        this.Za = a.I;
        a = a.Ma;
        if (null !== a) {
            this.bb = a;
            var b = a.value;
            this.key = a.key;
            return this.value = b
        }
        return null
    };
    Ta.prototype.any = function (a) {
        var b = this.Na;
        b.ej = null;
        var c = b.I;
        this.bb = null;
        for (var d = b.Ma; null !== d;) {
            if (a(d.value))return !0;
            b.I !== c && D.Ua(b);
            d = d.fb
        }
        return !1
    };
    Ta.prototype.all = function (a) {
        var b = this.Na;
        b.ej = null;
        var c = b.I;
        this.bb = null;
        for (var d = b.Ma; null !== d;) {
            if (!a(d.value))return !1;
            b.I !== c && D.Ua(b);
            d = d.fb
        }
        return !0
    };
    Ta.prototype.each = function (a) {
        var b = this.Na;
        b.ej = null;
        var c = b.I;
        this.bb = null;
        for (var d = b.Ma; null !== d;)a(d.value), b.I !== c && D.Ua(b), d = d.fb;
        return this
    };
    Ta.prototype.map = function (a) {
        var b = this.Na;
        b.ej = null;
        var c = b.I;
        this.bb = null;
        for (var d = new K, e = b.Ma; null !== e;)d.add(a(e.value)), b.I !== c && D.Ua(b), e = e.fb;
        return d.j
    };
    Ta.prototype.filter = function (a) {
        var b = this.Na;
        b.ej = null;
        var c = b.I;
        this.bb = null;
        for (var d = new K(b.bf), e = b.Ma; null !== e;) {
            var g = e.value;
            a(g) && d.add(g);
            b.I !== c && D.Ua(b);
            e = e.fb
        }
        return d.j
    };
    Ta.prototype.concat = function (a) {
        this.Na.ej = null;
        return new La(this, a.j)
    };
    D.w(Ta, {count: "count"}, function () {
        return this.Na.zd
    });
    Ta.prototype.Uf = function () {
        this.value = this.key = null;
        this.Za = -1;
        this.Na.ej = this
    };
    Ta.prototype.toString = function () {
        return null !== this.bb ? "MapValueSetIterator@" + this.bb.value : "MapValueSetIterator"
    };
    function Qa(a, b) {
        this.key = a;
        this.value = b;
        this.Fp = this.fb = null
    }

    D.ne(Qa, {key: !0, value: !0});
    Qa.prototype.toString = function () {
        return "{" + this.key + ":" + this.value + "}"
    };
    function Ya(a) {
        this.Na = a;
        a.$b = null;
        this.Za = a.I;
        this.bb = null
    }

    D.ne(Ya, {key: !0, value: !0});
    D.w(Ya, {j: "iterator"}, function () {
        return this
    });
    Ya.prototype.reset = Ya.prototype.reset = function () {
        var a = this.Na;
        a.$b = null;
        this.Za = a.I;
        this.bb = null
    };
    Ya.prototype.next = Ya.prototype.next = function () {
        var a = this.Na;
        if (a.I !== this.Za) {
            if (null === this.key)return !1;
            D.Ua(a)
        }
        var b = this.bb, b = null === b ? a.Ma : b.fb;
        if (null !== b)return this.bb = b, this.key = b.key, this.value = b.value, !0;
        this.Uf();
        return !1
    };
    Ya.prototype.hasNext = function () {
        return this.next()
    };
    Ya.prototype.first = Ya.prototype.first = function () {
        var a = this.Na;
        this.Za = a.I;
        a = a.Ma;
        return null !== a ? (this.bb = a, this.key = a.key, this.value = a.value, a) : null
    };
    Ya.prototype.any = function (a) {
        var b = this.Na;
        b.$b = null;
        var c = b.I;
        this.bb = null;
        for (var d = b.Ma; null !== d;) {
            if (a(d))return !0;
            b.I !== c && D.Ua(b);
            d = d.fb
        }
        return !1
    };
    Ya.prototype.all = function (a) {
        var b = this.Na;
        b.$b = null;
        var c = b.I;
        this.bb = null;
        for (var d = b.Ma; null !== d;) {
            if (!a(d))return !1;
            b.I !== c && D.Ua(b);
            d = d.fb
        }
        return !0
    };
    Ya.prototype.each = function (a) {
        var b = this.Na;
        b.$b = null;
        var c = b.I;
        this.bb = null;
        for (var d = b.Ma; null !== d;)a(d), b.I !== c && D.Ua(b), d = d.fb;
        return this
    };
    Ya.prototype.map = function (a) {
        var b = this.Na;
        b.$b = null;
        var c = b.I;
        this.bb = null;
        for (var d = new K, e = b.Ma; null !== e;)d.add(a(e)), b.I !== c && D.Ua(b), e = e.fb;
        return d.j
    };
    Ya.prototype.filter = function (a) {
        var b = this.Na;
        b.$b = null;
        var c = b.I;
        this.bb = null;
        for (var d = new K, e = b.Ma; null !== e;)a(e) && d.add(e), b.I !== c && D.Ua(b), e = e.fb;
        return d.j
    };
    Ya.prototype.concat = function (a) {
        this.Na.$b = null;
        return new La(this, a.j)
    };
    D.w(Ya, {count: "count"}, function () {
        return this.Na.zd
    });
    Ya.prototype.Uf = function () {
        this.value = this.key = null;
        this.Za = -1;
        this.Na.$b = this
    };
    Ya.prototype.toString = function () {
        return null !== this.bb ? "MapIterator@" + this.bb : "MapIterator"
    };
    function ma(a, b) {
        D.vc(this);
        this.J = !1;
        void 0 === a || null === a ? this.bf = null : "string" === typeof a ? "object" === a || "string" === a || "number" === a ? this.bf = a : D.ua(a, "the string 'object', 'number' or 'string'", "Map constructor: keytype") : "function" === typeof a ? this.bf = a === Object ? "object" : a === String ? "string" : a === Number ? "number" : a : D.ua(a, "null, a primitive type name, or a class type", "Map constructor: keytype");
        void 0 === b || null === b ? this.Bi = null : "string" === typeof b ? "object" === b || "string" === b || "boolean" === b || "number" ===
        b || "function" === b ? this.Bi = b : D.ua(b, "the string 'object', 'number', 'string', 'boolean', or 'function'", "Map constructor: valtype") : "function" === typeof b ? this.Bi = b === Object ? "object" : b === String ? "string" : b === Number ? "number" : b === Boolean ? "boolean" : b === Function ? "function" : b : D.ua(b, "null, a primitive type name, or a class type", "Map constructor: valtype");
        this.Ad = {};
        this.zd = 0;
        this.ej = this.$b = null;
        this.I = 0;
        this.ji = this.Ma = null
    }

    D.ka("Map", ma);
    function $a(a, b) {
        null !== a.bf && ("string" === typeof a.bf ? typeof b === a.bf && null !== b || D.jc(b, a.bf) : b instanceof a.bf || D.jc(b, a.bf))
    }

    ma.prototype.Sc = function () {
        var a = this.I;
        a++;
        999999999 < a && (a = 0);
        this.I = a
    };
    ma.prototype.freeze = ma.prototype.freeze = function () {
        this.J = !0;
        return this
    };
    ma.prototype.thaw = ma.prototype.Xa = function () {
        this.J = !1;
        return this
    };
    ma.prototype.toString = function () {
        return "Map(" + D.getTypeName(this.bf) + "," + D.getTypeName(this.Bi) + ")#" + D.Jd(this)
    };
    ma.prototype.add = ma.prototype.add = function (a, b) {
        v && ($a(this, a), null !== this.Bi && ("string" === typeof this.Bi ? typeof b === this.Bi && null !== b || D.jc(b, this.Bi) : b instanceof this.Bi || D.jc(b, this.Bi)));
        this.J && D.pa(this, a);
        var c = a;
        D.Sa(a) && (c = D.pq(a));
        var d = this.Ad[c];
        if (void 0 === d)return this.zd++, d = new Qa(a, b), this.Ad[c] = d, c = this.ji, null === c ? this.Ma = d : (d.Fp = c, c.fb = d), this.ji = d, this.Sc(), !0;
        d.value = b;
        return !1
    };
    ma.prototype.set = ma.prototype.set = function (a, b) {
        return this.add(a, b)
    };
    ma.prototype.addAll = ma.prototype.Tc = function (a) {
        if (null === a)return this;
        if (D.isArray(a))for (var b = D.cb(a), c = 0; c < b; c++) {
            var d = D.La(a, c);
            this.add(d.key, d.value)
        } else for (a = a.j; a.next();)this.add(a.key, a.value);
        return this
    };
    ma.prototype.first = ma.prototype.first = function () {
        return this.Ma
    };
    ma.prototype.any = function (a) {
        for (var b = this.I, c = this.Ma; null !== c;) {
            if (a(c))return !0;
            this.I !== b && D.Ua(this);
            c = c.fb
        }
        return !1
    };
    ma.prototype.all = function (a) {
        for (var b = this.I, c = this.Ma; null !== c;) {
            if (!a(c))return !1;
            this.I !== b && D.Ua(this);
            c = c.fb
        }
        return !0
    };
    ma.prototype.each = function (a) {
        for (var b = this.I, c = this.Ma; null !== c;)a(c), this.I !== b && D.Ua(this), c = c.fb;
        return this
    };
    ma.prototype.map = function (a) {
        for (var b = new ma(this.bf), c = this.I, d = this.Ma; null !== d;)b.add(d.key, a(d)), this.I !== c && D.Ua(this), d = d.fb;
        return b
    };
    ma.prototype.filter = function (a) {
        for (var b = new ma(this.bf, this.Bi), c = this.I, d = this.Ma; null !== d;)a(d) && b.add(d.key, d.value), this.I !== c && D.Ua(this), d = d.fb;
        return b
    };
    ma.prototype.concat = function (a) {
        return this.copy().Tc(a)
    };
    ma.prototype.contains = ma.prototype.contains = function (a) {
        v && $a(this, a);
        var b = a;
        return D.Sa(a) && (b = D.Jd(a), void 0 === b) ? !1 : void 0 !== this.Ad[b]
    };
    ma.prototype.has = ma.prototype.has = function (a) {
        return this.contains(a)
    };
    ma.prototype.getValue = ma.prototype.na = function (a) {
        v && $a(this, a);
        var b = a;
        if (D.Sa(a) && (b = D.Jd(a), void 0 === b))return null;
        a = this.Ad[b];
        return void 0 === a ? null : a.value
    };
    ma.prototype.get = ma.prototype.get = function (a) {
        return this.na(a)
    };
    ma.prototype.remove = ma.prototype["delete"] = ma.prototype.remove = function (a) {
        if (null === a)return !1;
        v && $a(this, a);
        this.J && D.pa(this, a);
        var b = a;
        if (D.Sa(a) && (b = D.Jd(a), void 0 === b))return !1;
        a = this.Ad[b];
        if (void 0 === a)return !1;
        var c = a.fb, d = a.Fp;
        null !== c && (c.Fp = d);
        null !== d && (d.fb = c);
        this.Ma === a && (this.Ma = c);
        this.ji === a && (this.ji = d);
        delete this.Ad[b];
        this.zd--;
        this.Sc();
        return !0
    };
    ma.prototype.clear = ma.prototype.clear = function () {
        this.J && D.pa(this);
        this.Ad = {};
        this.zd = 0;
        this.ji = this.Ma = null;
        this.Sc()
    };
    ma.prototype.copy = function () {
        var a = new ma(this.bf, this.Bi), b = this.Ad, c;
        for (c in b) {
            var d = b[c];
            a.add(d.key, d.value)
        }
        return a
    };
    ma.prototype.toArray = ma.prototype.oc = function () {
        var a = this.Ad, b = Array(this.zd), c = 0, d;
        for (d in a) {
            var e = a[d];
            b[c] = new Qa(e.key, e.value);
            c++
        }
        return b
    };
    ma.prototype.toKeySet = ma.prototype.Yj = function () {
        return new Sa(this)
    };
    D.w(ma, {count: "count"}, function () {
        return this.zd
    });
    D.w(ma, {size: "size"}, function () {
        return this.zd
    });
    D.w(ma, {j: "iterator"}, function () {
        if (0 >= this.count)return Ja;
        var a = this.$b;
        return null !== a ? (a.reset(), a) : new Ya(this)
    });
    D.w(ma, {eG: "iteratorKeys"}, function () {
        return 0 >= this.count ? Ja : new Ra(this)
    });
    D.w(ma, {fG: "iteratorValues"}, function () {
        if (0 >= this.count)return Ja;
        var a = this.ej;
        return null !== a ? (a.reset(), a) : new Ta(this)
    });
    function N(a, b) {
        void 0 === a ? this.M = this.L = 0 : "number" === typeof a && "number" === typeof b ? (this.L = a, this.M = b) : D.k("Invalid arguments to Point constructor: " + a + ", " + b);
        this.J = !1
    }

    D.ka("Point", N);
    D.Di(N);
    D.ne(N, {x: !0, y: !0});
    N.prototype.assign = function (a) {
        this.L = a.L;
        this.M = a.M
    };
    N.prototype.setTo = N.prototype.n = function (a, b) {
        v && (D.h(a, "number", N, "setTo:x"), D.h(b, "number", N, "setTo:y"));
        this.L = a;
        this.M = b;
        return this
    };
    N.prototype.set = N.prototype.set = function (a) {
        v && D.l(a, N, N, "set:p");
        this.Qa();
        this.L = a.L;
        this.M = a.M;
        return this
    };
    N.prototype.copy = function () {
        var a = new N;
        a.L = this.L;
        a.M = this.M;
        return a
    };
    f = N.prototype;
    f.Oa = function () {
        this.J = !0;
        Object.freeze(this);
        return this
    };
    f.V = function () {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    f.freeze = function () {
        this.J = !0;
        return this
    };
    f.Xa = function () {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        return this
    };
    f.Qa = function (a) {
        if (this.J) {
            var b = "The Point is frozen, so its properties cannot be set: " + this.toString();
            void 0 !== a && (b += "  to value: " + a);
            D.k(b)
        }
    };
    N.parse = function (a) {
        if ("string" === typeof a) {
            a = a.split(" ");
            for (var b = 0, c = 0; "" === a[b];)b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0; "" === a[b];)b++;
            (d = a[b++]) && (e = parseFloat(d));
            return new N(c, e)
        }
        return new N
    };
    N.stringify = function (a) {
        v && D.l(a, N);
        return a.x.toString() + " " + a.y.toString()
    };
    N.prototype.toString = function () {
        return "Point(" + this.x + "," + this.y + ")"
    };
    N.prototype.equals = N.prototype.O = function (a) {
        return a instanceof N ? this.L === a.x && this.M === a.y : !1
    };
    N.prototype.equalTo = N.prototype.Jx = function (a, b) {
        return this.L === a && this.M === b
    };
    N.prototype.equalsApprox = N.prototype.Uc = function (a) {
        return ab(this.L, a.x) && ab(this.M, a.y)
    };
    N.prototype.add = N.prototype.add = function (a) {
        v && D.l(a, N, N, "add:p");
        this.Qa();
        this.L += a.x;
        this.M += a.y;
        return this
    };
    N.prototype.subtract = N.prototype.xo = function (a) {
        v && D.l(a, N, N, "subtract:p");
        this.Qa();
        this.L -= a.x;
        this.M -= a.y;
        return this
    };
    N.prototype.offset = N.prototype.offset = function (a, b) {
        v && (D.p(a, N, "offset:dx"), D.p(b, N, "offset:dy"));
        this.Qa();
        this.L += a;
        this.M += b;
        return this
    };
    N.prototype.rotate = N.prototype.rotate = function (a) {
        v && D.p(a, N, "rotate:angle");
        this.Qa();
        if (0 === a)return this;
        var b = this.L, c = this.M;
        if (0 === b && 0 === c)return this;
        var d = 0, e = 0;
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        90 === a ? (d = 0, e = 1) : 180 === a ? (d = -1, e = 0) : 270 === a ? (d = 0, e = -1) : (a = a * Math.PI / 180, d = Math.cos(a), e = Math.sin(a));
        this.L = d * b - e * c;
        this.M = e * b + d * c;
        return this
    };
    N.prototype.scale = N.prototype.scale = function (a, b) {
        v && (D.p(a, N, "scale:sx"), D.p(b, N, "scale:sy"));
        this.L *= a;
        this.M *= b;
        return this
    };
    N.prototype.distanceSquaredPoint = N.prototype.Ff = function (a) {
        v && D.l(a, N, N, "distanceSquaredPoint:p");
        var b = a.x - this.L;
        a = a.y - this.M;
        return b * b + a * a
    };
    N.prototype.distanceSquared = N.prototype.jq = function (a, b) {
        v && (D.p(a, N, "distanceSquared:px"), D.p(b, N, "distanceSquared:py"));
        var c = a - this.L, d = b - this.M;
        return c * c + d * d
    };
    N.prototype.normalize = N.prototype.normalize = function () {
        this.Qa();
        var a = this.L, b = this.M, c = Math.sqrt(a * a + b * b);
        0 < c && (this.L = a / c, this.M = b / c);
        return this
    };
    N.prototype.directionPoint = N.prototype.Wb = function (a) {
        v && D.l(a, N, N, "directionPoint:p");
        return bb(a.x - this.L, a.y - this.M)
    };
    N.prototype.direction = N.prototype.direction = function (a, b) {
        v && (D.p(a, N, "direction:px"), D.p(b, N, "direction:py"));
        return bb(a - this.L, b - this.M)
    };
    function bb(a, b) {
        if (0 === a)return 0 < b ? 90 : 0 > b ? 270 : 0;
        if (0 === b)return 0 < a ? 0 : 180;
        if (isNaN(a) || isNaN(b))return 0;
        var c = 180 * Math.atan(Math.abs(b / a)) / Math.PI;
        0 > a ? c = 0 > b ? c + 180 : 180 - c : 0 > b && (c = 360 - c);
        return c
    }

    N.prototype.projectOntoLineSegment = function (a, b, c, d) {
        v && (D.p(a, N, "projectOntoLineSegment:px"), D.p(b, N, "projectOntoLineSegment:py"), D.p(c, N, "projectOntoLineSegment:qx"), D.p(d, N, "projectOntoLineSegment:qy"));
        eb(a, b, c, d, this.L, this.M, this);
        return this
    };
    N.prototype.projectOntoLineSegmentPoint = function (a, b) {
        v && (D.l(a, N, N, "projectOntoLineSegmentPoint:p"), D.l(b, N, N, "projectOntoLineSegmentPoint:q"));
        eb(a.x, a.y, b.x, b.y, this.L, this.M, this);
        return this
    };
    N.prototype.snapToGrid = function (a, b, c, d) {
        v && (D.p(a, N, "snapToGrid:originx"), D.p(b, N, "snapToGrid:originy"), D.p(c, N, "snapToGrid:cellwidth"), D.p(d, N, "snapToGrid:cellheight"));
        fb(this.L, this.M, a, b, c, d, this);
        return this
    };
    N.prototype.snapToGridPoint = function (a, b) {
        v && (D.l(a, N, N, "snapToGridPoint:p"), D.l(b, Ba, N, "snapToGridPoint:q"));
        fb(this.L, this.M, a.x, a.y, b.width, b.height, this);
        return this
    };
    N.prototype.setRectSpot = N.prototype.uo = function (a, b) {
        v && (D.l(a, C, N, "setRectSpot:r"), D.l(b, Q, N, "setRectSpot:spot"));
        this.Qa();
        this.L = a.x + b.x * a.width + b.offsetX;
        this.M = a.y + b.y * a.height + b.offsetY;
        return this
    };
    N.prototype.setSpot = N.prototype.dv = function (a, b, c, d, e) {
        v && (D.p(a, N, "setSpot:x"), D.p(b, N, "setSpot:y"), D.p(c, N, "setSpot:w"), D.p(d, N, "setSpot:h"), (0 > c || 0 > d) && D.k("Point.setSpot:Width and height cannot be negative"), D.l(e, Q, N, "setSpot:spot"));
        this.Qa();
        this.L = a + e.x * c + e.offsetX;
        this.M = b + e.y * d + e.offsetY;
        return this
    };
    N.prototype.transform = function (a) {
        v && D.l(a, Ca, N, "transform:t");
        a.wb(this);
        return this
    };
    function gb(a, b) {
        v && D.l(b, Ca, N, "transformInverted:t");
        b.Fi(a);
        return a
    }

    var hb;
    N.distanceLineSegmentSquared = hb = function (a, b, c, d, e, g) {
        v && (D.p(a, N, "distanceLineSegmentSquared:px"), D.p(b, N, "distanceLineSegmentSquared:py"), D.p(c, N, "distanceLineSegmentSquared:ax"), D.p(d, N, "distanceLineSegmentSquared:ay"), D.p(e, N, "distanceLineSegmentSquared:bx"), D.p(g, N, "distanceLineSegmentSquared:by"));
        var h = e - c, k = g - d, l = h * h + k * k;
        c -= a;
        d -= b;
        var m = -c * h - d * k;
        if (0 >= m || m >= l)return h = e - a, k = g - b, Math.min(c * c + d * d, h * h + k * k);
        a = h * d - k * c;
        return a * a / l
    };
    var jb;
    N.distanceSquared = jb = function (a, b, c, d) {
        v && (D.p(a, N, "distanceSquared:px"), D.p(b, N, "distanceSquared:py"), D.p(c, N, "distanceSquared:qx"), D.p(d, N, "distanceSquared:qy"));
        a = c - a;
        b = d - b;
        return a * a + b * b
    };
    var tb;
    N.direction = tb = function (a, b, c, d) {
        v && (D.p(a, N, "direction:px"), D.p(b, N, "direction:py"), D.p(c, N, "direction:qx"), D.p(d, N, "direction:qy"));
        a = c - a;
        b = d - b;
        if (0 === a)return 0 < b ? 90 : 0 > b ? 270 : 0;
        if (0 === b)return 0 < a ? 0 : 180;
        if (isNaN(a) || isNaN(b))return 0;
        d = 180 * Math.atan(Math.abs(b / a)) / Math.PI;
        0 > a ? d = 0 > b ? d + 180 : 180 - d : 0 > b && (d = 360 - d);
        return d
    };
    D.defineProperty(N, {x: "x"}, function () {
        return this.L
    }, function (a) {
        this.Qa(a);
        v && D.h(a, "number", N, "x");
        this.L = a
    });
    D.defineProperty(N, {y: "y"}, function () {
        return this.M
    }, function (a) {
        this.Qa(a);
        v && D.h(a, "number", N, "y");
        this.M = a
    });
    N.prototype.isReal = N.prototype.F = function () {
        return isFinite(this.x) && isFinite(this.y)
    };
    function Ba(a, b) {
        void 0 === a ? this.Ha = this.Ia = 0 : "number" === typeof a && (0 <= a || isNaN(a)) && "number" === typeof b && (0 <= b || isNaN(b)) ? (this.Ia = a, this.Ha = b) : D.k("Invalid arguments to Size constructor: " + a + ", " + b);
        this.J = !1
    }

    D.ka("Size", Ba);
    D.Di(Ba);
    D.ne(Ba, {width: !0, height: !0});
    Ba.prototype.assign = function (a) {
        this.Ia = a.Ia;
        this.Ha = a.Ha
    };
    Ba.prototype.setTo = Ba.prototype.n = function (a, b) {
        v && (D.h(a, "number", Ba, "setTo:w"), D.h(b, "number", Ba, "setTo:h"), 0 > a && D.ua(a, ">= 0", Ba, "setTo:w"), 0 > b && D.ua(b, ">= 0", Ba, "setTo:h"));
        this.Ia = a;
        this.Ha = b;
        return this
    };
    Ba.prototype.set = Ba.prototype.set = function (a) {
        v && D.l(a, Ba, Ba, "set:s");
        this.Qa();
        this.Ia = a.Ia;
        this.Ha = a.Ha;
        return this
    };
    Ba.prototype.copy = function () {
        var a = new Ba;
        a.Ia = this.Ia;
        a.Ha = this.Ha;
        return a
    };
    f = Ba.prototype;
    f.Oa = function () {
        this.J = !0;
        Object.freeze(this);
        return this
    };
    f.V = function () {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    f.freeze = function () {
        this.J = !0;
        return this
    };
    f.Xa = function () {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        return this
    };
    f.Qa = function (a) {
        if (this.J) {
            var b = "The Size is frozen, so its properties cannot be set: " + this.toString();
            void 0 !== a && (b += "  to value: " + a);
            D.k(b)
        }
    };
    Ba.parse = function (a) {
        if ("string" === typeof a) {
            a = a.split(" ");
            for (var b = 0, c = 0; "" === a[b];)b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0; "" === a[b];)b++;
            (d = a[b++]) && (e = parseFloat(d));
            return new Ba(c, e)
        }
        return new Ba
    };
    Ba.stringify = function (a) {
        v && D.l(a, Ba);
        return a.width.toString() + " " + a.height.toString()
    };
    Ba.prototype.toString = function () {
        return "Size(" + this.width + "," + this.height + ")"
    };
    Ba.prototype.equals = Ba.prototype.O = function (a) {
        return a instanceof Ba ? this.Ia === a.width && this.Ha === a.height : !1
    };
    Ba.prototype.equalTo = Ba.prototype.Jx = function (a, b) {
        return this.Ia === a && this.Ha === b
    };
    Ba.prototype.equalsApprox = Ba.prototype.Uc = function (a) {
        return ab(this.Ia, a.width) && ab(this.Ha, a.height)
    };
    D.defineProperty(Ba, {width: "width"}, function () {
        return this.Ia
    }, function (a) {
        this.Qa(a);
        v && D.h(a, "number", Ba, "width");
        0 > a && D.ua(a, ">= 0", Ba, "width");
        this.Ia = a
    });
    D.defineProperty(Ba, {height: "height"}, function () {
        return this.Ha
    }, function (a) {
        this.Qa(a);
        v && D.h(a, "number", Ba, "height");
        0 > a && D.ua(a, ">= 0", Ba, "height");
        this.Ha = a
    });
    Ba.prototype.isReal = Ba.prototype.F = function () {
        return isFinite(this.width) && isFinite(this.height)
    };
    function C(a, b, c, d) {
        void 0 === a ? this.Ha = this.Ia = this.M = this.L = 0 : a instanceof N ? b instanceof N ? (this.L = Math.min(a.L, b.L), this.M = Math.min(a.M, b.M), this.Ia = Math.abs(a.L - b.L), this.Ha = Math.abs(a.M - b.M)) : b instanceof Ba ? (this.L = a.L, this.M = a.M, this.Ia = b.Ia, this.Ha = b.Ha) : D.k("Incorrect arguments supplied to Rect constructor") : "number" === typeof a && "number" === typeof b && "number" === typeof c && (0 <= c || isNaN(c)) && "number" === typeof d && (0 <= d || isNaN(d)) ? (this.L = a, this.M = b, this.Ia = c, this.Ha = d) : D.k("Invalid arguments to Rect constructor: " +
            a + ", " + b + ", " + c + ", " + d);
        this.J = !1
    }

    D.ka("Rect", C);
    D.Di(C);
    D.ne(C, {x: !0, y: !0, width: !0, height: !0});
    C.prototype.assign = function (a) {
        this.L = a.L;
        this.M = a.M;
        this.Ia = a.Ia;
        this.Ha = a.Ha
    };
    function xb(a, b, c) {
        a.Ia = b;
        a.Ha = c
    }

    C.prototype.setTo = C.prototype.n = function (a, b, c, d) {
        v && (D.h(a, "number", C, "setTo:x"), D.h(b, "number", C, "setTo:y"), D.h(c, "number", C, "setTo:w"), D.h(d, "number", C, "setTo:h"), 0 > c && D.ua(c, ">= 0", C, "setTo:w"), 0 > d && D.ua(d, ">= 0", C, "setTo:h"));
        this.L = a;
        this.M = b;
        this.Ia = c;
        this.Ha = d;
        return this
    };
    C.prototype.set = C.prototype.set = function (a) {
        v && D.l(a, C, C, "set:r");
        this.Qa();
        this.L = a.L;
        this.M = a.M;
        this.Ia = a.Ia;
        this.Ha = a.Ha;
        return this
    };
    C.prototype.setPoint = C.prototype.ih = function (a) {
        v && D.l(a, N, C, "setPoint:p");
        this.Qa();
        this.L = a.L;
        this.M = a.M;
        return this
    };
    C.prototype.setSize = function (a) {
        v && D.l(a, Ba, C, "setSize:s");
        this.Qa();
        this.Ia = a.Ia;
        this.Ha = a.Ha;
        return this
    };
    C.prototype.copy = function () {
        var a = new C;
        a.L = this.L;
        a.M = this.M;
        a.Ia = this.Ia;
        a.Ha = this.Ha;
        return a
    };
    f = C.prototype;
    f.Oa = function () {
        this.J = !0;
        Object.freeze(this);
        return this
    };
    f.V = function () {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    f.freeze = function () {
        this.J = !0;
        return this
    };
    f.Xa = function () {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        return this
    };
    f.Qa = function (a) {
        if (this.J) {
            var b = "The Rect is frozen, so its properties cannot be set: " + this.toString();
            void 0 !== a && (b += "  to value: " + a);
            D.k(b)
        }
    };
    C.parse = function (a) {
        if ("string" === typeof a) {
            a = a.split(" ");
            for (var b = 0, c = 0; "" === a[b];)b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            for (var e = 0; "" === a[b];)b++;
            (d = a[b++]) && (e = parseFloat(d));
            for (var g = 0; "" === a[b];)b++;
            (d = a[b++]) && (g = parseFloat(d));
            for (var h = 0; "" === a[b];)b++;
            (d = a[b++]) && (h = parseFloat(d));
            return new C(c, e, g, h)
        }
        return new C
    };
    C.stringify = function (a) {
        v && D.l(a, C);
        return a.x.toString() + " " + a.y.toString() + " " + a.width.toString() + " " + a.height.toString()
    };
    C.prototype.toString = function () {
        return "Rect(" + this.x + "," + this.y + "," + this.width + "," + this.height + ")"
    };
    C.prototype.equals = C.prototype.O = function (a) {
        return a instanceof C ? this.L === a.x && this.M === a.y && this.Ia === a.width && this.Ha === a.height : !1
    };
    C.prototype.equalTo = C.prototype.Jx = function (a, b, c, d) {
        return this.L === a && this.M === b && this.Ia === c && this.Ha === d
    };
    C.prototype.equalsApprox = C.prototype.Uc = function (a) {
        return ab(this.L, a.x) && ab(this.M, a.y) && ab(this.Ia, a.width) && ab(this.Ha, a.height)
    };
    function yb(a, b) {
        return zb(a.L, b.x) && zb(a.M, b.y) && zb(a.Ia, b.width) && zb(a.Ha, b.height)
    }

    C.prototype.containsPoint = C.prototype.Pa = function (a) {
        v && D.l(a, N, C, "containsPoint:p");
        return this.L <= a.x && this.L + this.Ia >= a.x && this.M <= a.y && this.M + this.Ha >= a.y
    };
    C.prototype.containsRect = C.prototype.Ok = function (a) {
        v && D.l(a, C, C, "containsRect:r");
        return this.L <= a.x && a.x + a.width <= this.L + this.Ia && this.M <= a.y && a.y + a.height <= this.M + this.Ha
    };
    C.prototype.contains = C.prototype.contains = function (a, b, c, d) {
        v ? (D.p(a, C, "contains:x"), D.p(b, C, "contains:y"), void 0 === c ? c = 0 : D.p(c, C, "contains:w"), void 0 === d ? d = 0 : D.p(d, C, "contains:h"), (0 > c || 0 > d) && D.k("Rect.contains:Width and height cannot be negative")) : (void 0 === c && (c = 0), void 0 === d && (d = 0));
        return this.L <= a && a + c <= this.L + this.Ia && this.M <= b && b + d <= this.M + this.Ha
    };
    C.prototype.reset = function () {
        this.Qa();
        this.Ha = this.Ia = this.M = this.L = 0
    };
    C.prototype.offset = C.prototype.offset = function (a, b) {
        v && (D.p(a, C, "offset:dx"), D.p(b, C, "offset:dy"));
        this.Qa();
        this.L += a;
        this.M += b;
        return this
    };
    C.prototype.inflate = C.prototype.If = function (a, b) {
        v && (D.p(a, C, "inflate:w"), D.p(b, C, "inflate:h"));
        return Db(this, b, a, b, a)
    };
    C.prototype.addMargin = C.prototype.nx = function (a) {
        v && D.l(a, Kb, C, "addMargin:m");
        return Db(this, a.top, a.right, a.bottom, a.left)
    };
    C.prototype.subtractMargin = C.prototype.wK = function (a) {
        v && D.l(a, Kb, C, "subtractMargin:m");
        return Db(this, -a.top, -a.right, -a.bottom, -a.left)
    };
    C.prototype.grow = function (a, b, c, d) {
        v && (D.p(a, C, "grow:t"), D.p(b, C, "grow:r"), D.p(c, C, "grow:b"), D.p(d, C, "grow:l"));
        return Db(this, a, b, c, d)
    };
    function Db(a, b, c, d, e) {
        a.Qa();
        var g = a.Ia;
        c + e <= -g ? (a.L += g / 2, a.Ia = 0) : (a.L -= e, a.Ia += c + e);
        c = a.Ha;
        b + d <= -c ? (a.M += c / 2, a.Ha = 0) : (a.M -= b, a.Ha += b + d);
        return a
    }

    C.prototype.intersectRect = function (a) {
        v && D.l(a, C, C, "intersectRect:r");
        return Mb(this, a.x, a.y, a.width, a.height)
    };
    C.prototype.intersect = C.prototype.PF = function (a, b, c, d) {
        v && (D.p(a, C, "intersect:x"), D.p(b, C, "intersect:y"), D.p(c, C, "intersect:w"), D.p(d, C, "intersect:h"), (0 > c || 0 > d) && D.k("Rect.intersect:Width and height cannot be negative"));
        return Mb(this, a, b, c, d)
    };
    function Mb(a, b, c, d, e) {
        a.Qa();
        var g = Math.max(a.L, b), h = Math.max(a.M, c);
        b = Math.min(a.L + a.Ia, b + d);
        c = Math.min(a.M + a.Ha, c + e);
        a.L = g;
        a.M = h;
        a.Ia = Math.max(0, b - g);
        a.Ha = Math.max(0, c - h);
        return a
    }

    C.prototype.intersectsRect = C.prototype.hg = function (a) {
        v && D.l(a, C, C, "intersectsRect:r");
        return this.QF(a.x, a.y, a.width, a.height)
    };
    C.prototype.intersects = C.prototype.QF = function (a, b, c, d) {
        v && (D.p(a, C, "intersects:x"), D.p(b, C, "intersects:y"), D.p(a, C, "intersects:w"), D.p(b, C, "intersects:h"), (0 > c || 0 > d) && D.k("Rect.intersects:Width and height cannot be negative"));
        var e = this.Ia, g = this.L;
        if (Infinity !== e && Infinity !== c && (e += g, c += a, isNaN(c) || isNaN(e) || g > c || a > e))return !1;
        a = this.Ha;
        c = this.M;
        return Infinity !== a && Infinity !== d && (a += c, d += b, isNaN(d) || isNaN(a) || c > d || b > a) ? !1 : !0
    };
    function Nb(a, b) {
        var c = a.Ia, d = b.width + 10 + 10, e = a.L, g = b.x - 10;
        if (e > d + g || g > c + e)return !1;
        c = a.Ha;
        d = b.height + 10 + 10;
        e = a.M;
        g = b.y - 10;
        return e > d + g || g > c + e ? !1 : !0
    }

    C.prototype.unionPoint = C.prototype.Li = function (a) {
        v && D.l(a, N, C, "unionPoint:p");
        return Rb(this, a.x, a.y, 0, 0)
    };
    C.prototype.unionRect = C.prototype.$h = function (a) {
        v && D.l(a, C, C, "unionRect:r");
        return Rb(this, a.L, a.M, a.Ia, a.Ha)
    };
    C.prototype.union = C.prototype.nH = function (a, b, c, d) {
        this.Qa();
        v ? (D.p(a, C, "union:x"), D.p(b, C, "union:y"), void 0 === c ? c = 0 : D.p(c, C, "union:w"), void 0 === d ? d = 0 : D.p(d, C, "union:h"), (0 > c || 0 > d) && D.k("Rect.union:Width and height cannot be negative")) : (void 0 === c && (c = 0), void 0 === d && (d = 0));
        return Rb(this, a, b, c, d)
    };
    function Rb(a, b, c, d, e) {
        var g = Math.min(a.L, b), h = Math.min(a.M, c);
        b = Math.max(a.L + a.Ia, b + d);
        c = Math.max(a.M + a.Ha, c + e);
        a.L = g;
        a.M = h;
        a.Ia = b - g;
        a.Ha = c - h;
        return a
    }

    C.prototype.setSpot = C.prototype.dv = function (a, b, c) {
        v && (D.p(a, C, "setSpot:x"), D.p(b, C, "setSpot:y"), D.l(c, Q, C, "setSpot:spot"));
        this.Qa();
        this.L = a - c.offsetX - c.x * this.Ia;
        this.M = b - c.offsetY - c.y * this.Ha;
        return this
    };
    var Sb;
    C.contains = Sb = function (a, b, c, d, e, g, h, k) {
        v ? (D.p(a, C, "contains:rx"), D.p(b, C, "contains:ry"), D.p(c, C, "contains:rw"), D.p(d, C, "contains:rh"), D.p(e, C, "contains:x"), D.p(g, C, "contains:y"), void 0 === h ? h = 0 : D.p(h, C, "contains:w"), void 0 === k ? k = 0 : D.p(k, C, "contains:h"), (0 > c || 0 > d || 0 > h || 0 > k) && D.k("Rect.contains:Width and height cannot be negative")) : (void 0 === h && (h = 0), void 0 === k && (k = 0));
        return a <= e && e + h <= a + c && b <= g && g + k <= b + d
    };
    C.intersects = function (a, b, c, d, e, g, h, k) {
        v && (D.p(a, C, "intersects:rx"), D.p(b, C, "intersects:ry"), D.p(c, C, "intersects:rw"), D.p(d, C, "intersects:rh"), D.p(e, C, "intersects:x"), D.p(g, C, "intersects:y"), D.p(h, C, "intersects:w"), D.p(k, C, "intersects:h"), (0 > c || 0 > d || 0 > h || 0 > k) && D.k("Rect.intersects:Width and height cannot be negative"));
        c += a;
        h += e;
        if (a > h || e > c)return !1;
        a = d + b;
        k += g;
        return b > k || g > a ? !1 : !0
    };
    D.defineProperty(C, {x: "x"}, function () {
        return this.L
    }, function (a) {
        this.Qa(a);
        v && D.h(a, "number", C, "x");
        this.L = a
    });
    D.defineProperty(C, {y: "y"}, function () {
        return this.M
    }, function (a) {
        this.Qa(a);
        v && D.h(a, "number", C, "y");
        this.M = a
    });
    D.defineProperty(C, {width: "width"}, function () {
        return this.Ia
    }, function (a) {
        this.Qa(a);
        v && D.h(a, "number", C, "width");
        0 > a && D.ua(a, ">= 0", C, "width");
        this.Ia = a
    });
    D.defineProperty(C, {height: "height"}, function () {
        return this.Ha
    }, function (a) {
        this.Qa(a);
        v && D.h(a, "number", C, "height");
        0 > a && D.ua(a, ">= 0", C, "height");
        this.Ha = a
    });
    D.defineProperty(C, {left: "left"}, function () {
        return this.L
    }, function (a) {
        this.Qa(a);
        v && D.h(a, "number", C, "left");
        this.L = a
    });
    D.defineProperty(C, {top: "top"}, function () {
        return this.M
    }, function (a) {
        this.Qa(a);
        v && D.h(a, "number", C, "top");
        this.M = a
    });
    D.defineProperty(C, {right: "right"}, function () {
        return this.L + this.Ia
    }, function (a) {
        this.Qa(a);
        v && D.p(a, C, "right");
        this.L += a - (this.L + this.Ia)
    });
    D.defineProperty(C, {bottom: "bottom"}, function () {
        return this.M + this.Ha
    }, function (a) {
        this.Qa(a);
        v && D.p(a, C, "top");
        this.M += a - (this.M + this.Ha)
    });
    D.defineProperty(C, {position: "position"}, function () {
        return new N(this.L, this.M)
    }, function (a) {
        this.Qa(a);
        v && D.l(a, N, C, "position");
        this.L = a.x;
        this.M = a.y
    });
    D.defineProperty(C, {size: "size"}, function () {
        return new Ba(this.Ia, this.Ha)
    }, function (a) {
        this.Qa(a);
        v && D.l(a, Ba, C, "size");
        this.Ia = a.width;
        this.Ha = a.height
    });
    D.defineProperty(C, {em: "center"}, function () {
        return new N(this.L + this.Ia / 2, this.M + this.Ha / 2)
    }, function (a) {
        this.Qa(a);
        v && D.l(a, N, C, "center");
        this.L = a.x - this.Ia / 2;
        this.M = a.y - this.Ha / 2
    });
    D.defineProperty(C, {oa: "centerX"}, function () {
        return this.L + this.Ia / 2
    }, function (a) {
        this.Qa(a);
        v && D.p(a, C, "centerX");
        this.L = a - this.Ia / 2
    });
    D.defineProperty(C, {va: "centerY"}, function () {
        return this.M + this.Ha / 2
    }, function (a) {
        this.Qa(a);
        v && D.p(a, C, "centerY");
        this.M = a - this.Ha / 2
    });
    C.prototype.isReal = C.prototype.F = function () {
        return isFinite(this.x) && isFinite(this.y) && isFinite(this.width) && isFinite(this.height)
    };
    C.prototype.isEmpty = function () {
        return 0 === this.width && 0 === this.height
    };
    function Kb(a, b, c, d) {
        void 0 === a ? this.wh = this.ph = this.Fh = this.Gh = 0 : void 0 === b ? this.left = this.bottom = this.right = this.top = a : void 0 === c ? (d = b, this.top = a, this.right = b, this.bottom = a, this.left = d) : void 0 !== d ? (this.top = a, this.right = b, this.bottom = c, this.left = d) : D.k("Invalid arguments to Margin constructor: " + a + ", " + b + ", " + c + ", " + d);
        this.J = !1
    }

    D.ka("Margin", Kb);
    D.Di(Kb);
    D.ne(Kb, {top: !0, right: !0, bottom: !0, left: !0});
    Kb.prototype.assign = function (a) {
        this.Gh = a.Gh;
        this.Fh = a.Fh;
        this.ph = a.ph;
        this.wh = a.wh
    };
    Kb.prototype.setTo = Kb.prototype.n = function (a, b, c, d) {
        v && (D.h(a, "number", Kb, "setTo:t"), D.h(b, "number", Kb, "setTo:r"), D.h(c, "number", Kb, "setTo:b"), D.h(d, "number", Kb, "setTo:l"));
        this.Qa();
        this.Gh = a;
        this.Fh = b;
        this.ph = c;
        this.wh = d;
        return this
    };
    Kb.prototype.set = Kb.prototype.set = function (a) {
        v && D.l(a, Kb, Kb, "assign:m");
        this.Qa();
        this.Gh = a.Gh;
        this.Fh = a.Fh;
        this.ph = a.ph;
        this.wh = a.wh;
        return this
    };
    Kb.prototype.copy = function () {
        var a = new Kb;
        a.Gh = this.Gh;
        a.Fh = this.Fh;
        a.ph = this.ph;
        a.wh = this.wh;
        return a
    };
    f = Kb.prototype;
    f.Oa = function () {
        this.J = !0;
        Object.freeze(this);
        return this
    };
    f.V = function () {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    f.freeze = function () {
        this.J = !0;
        return this
    };
    f.Xa = function () {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        return this
    };
    f.Qa = function (a) {
        if (this.J) {
            var b = "The Margin is frozen, so its properties cannot be set: " + this.toString();
            void 0 !== a && (b += "  to value: " + a);
            D.k(b)
        }
    };
    Kb.parse = function (a) {
        if ("string" === typeof a) {
            a = a.split(" ");
            for (var b = 0, c = NaN; "" === a[b];)b++;
            var d = a[b++];
            d && (c = parseFloat(d));
            if (isNaN(c))return new Kb;
            for (var e = NaN; "" === a[b];)b++;
            (d = a[b++]) && (e = parseFloat(d));
            if (isNaN(e))return new Kb(c);
            for (var g = NaN; "" === a[b];)b++;
            (d = a[b++]) && (g = parseFloat(d));
            if (isNaN(g))return new Kb(c, e);
            for (var h = NaN; "" === a[b];)b++;
            (d = a[b++]) && (h = parseFloat(d));
            return isNaN(h) ? new Kb(c, e) : new Kb(c, e, g, h)
        }
        return new Kb
    };
    Kb.stringify = function (a) {
        v && D.l(a, Kb);
        return a.top.toString() + " " + a.right.toString() + " " + a.bottom.toString() + " " + a.left.toString()
    };
    Kb.prototype.toString = function () {
        return "Margin(" + this.top + "," + this.right + "," + this.bottom + "," + this.left + ")"
    };
    Kb.prototype.equals = Kb.prototype.O = function (a) {
        return a instanceof Kb ? this.Gh === a.top && this.Fh === a.right && this.ph === a.bottom && this.wh === a.left : !1
    };
    Kb.prototype.equalTo = Kb.prototype.Jx = function (a, b, c, d) {
        return this.Gh === a && this.Fh === b && this.ph === c && this.wh === d
    };
    Kb.prototype.equalsApprox = Kb.prototype.Uc = function (a) {
        return ab(this.Gh, a.top) && ab(this.Fh, a.right) && ab(this.ph, a.bottom) && ab(this.wh, a.left)
    };
    D.defineProperty(Kb, {top: "top"}, function () {
        return this.Gh
    }, function (a) {
        this.Qa(a);
        v && D.p(a, Kb, "top");
        this.Gh = a
    });
    D.defineProperty(Kb, {right: "right"}, function () {
        return this.Fh
    }, function (a) {
        this.Qa(a);
        v && D.p(a, Kb, "right");
        this.Fh = a
    });
    D.defineProperty(Kb, {bottom: "bottom"}, function () {
        return this.ph
    }, function (a) {
        this.Qa(a);
        v && D.p(a, Kb, "bottom");
        this.ph = a
    });
    D.defineProperty(Kb, {left: "left"}, function () {
        return this.wh
    }, function (a) {
        this.Qa(a);
        v && D.p(a, Kb, "left");
        this.wh = a
    });
    Kb.prototype.isReal = Kb.prototype.F = function () {
        return isFinite(this.top) && isFinite(this.right) && isFinite(this.bottom) && isFinite(this.left)
    };
    function Ca() {
        this.m11 = 1;
        this.m21 = this.m12 = 0;
        this.m22 = 1;
        this.dy = this.dx = 0
    }

    D.Di(Ca);
    D.ne(Ca, {m11: !0, m12: !0, m21: !0, m22: !0, dx: !0, dy: !0});
    Ca.prototype.set = Ca.prototype.set = function (a) {
        v && D.l(a, Ca, Ca, "set:t");
        this.m11 = a.m11;
        this.m12 = a.m12;
        this.m21 = a.m21;
        this.m22 = a.m22;
        this.dx = a.dx;
        this.dy = a.dy;
        return this
    };
    Ca.prototype.copy = function () {
        var a = new Ca;
        a.m11 = this.m11;
        a.m12 = this.m12;
        a.m21 = this.m21;
        a.m22 = this.m22;
        a.dx = this.dx;
        a.dy = this.dy;
        return a
    };
    Ca.prototype.toString = function () {
        return "Transform(" + this.m11 + "," + this.m12 + "," + this.m21 + "," + this.m22 + "," + this.dx + "," + this.dy + ")"
    };
    Ca.prototype.equals = Ca.prototype.O = function (a) {
        return a instanceof Ca ? this.m11 === a.m11 && this.m12 === a.m12 && this.m21 === a.m21 && this.m22 === a.m22 && this.dx === a.dx && this.dy === a.dy : !1
    };
    Ca.prototype.isIdentity = Ca.prototype.Bu = function () {
        return 1 === this.m11 && 0 === this.m12 && 0 === this.m21 && 1 === this.m22 && 0 === this.dx && 0 === this.dy
    };
    Ca.prototype.reset = Ca.prototype.reset = function () {
        this.m11 = 1;
        this.m21 = this.m12 = 0;
        this.m22 = 1;
        this.dy = this.dx = 0;
        return this
    };
    Ca.prototype.multiply = Ca.prototype.multiply = function (a) {
        v && D.l(a, Ca, Ca, "multiply:matrix");
        var b = this.m12 * a.m11 + this.m22 * a.m12, c = this.m11 * a.m21 + this.m21 * a.m22, d = this.m12 * a.m21 + this.m22 * a.m22, e = this.m11 * a.dx + this.m21 * a.dy + this.dx, g = this.m12 * a.dx + this.m22 * a.dy + this.dy;
        this.m11 = this.m11 * a.m11 + this.m21 * a.m12;
        this.m12 = b;
        this.m21 = c;
        this.m22 = d;
        this.dx = e;
        this.dy = g;
        return this
    };
    Ca.prototype.multiplyInverted = Ca.prototype.sB = function (a) {
        v && D.l(a, Ca, Ca, "multiplyInverted:matrix");
        var b = 1 / (a.m11 * a.m22 - a.m12 * a.m21), c = a.m22 * b, d = -a.m12 * b, e = -a.m21 * b, g = a.m11 * b, h = b * (a.m21 * a.dy - a.m22 * a.dx), k = b * (a.m12 * a.dx - a.m11 * a.dy);
        a = this.m12 * c + this.m22 * d;
        b = this.m11 * e + this.m21 * g;
        e = this.m12 * e + this.m22 * g;
        g = this.m11 * h + this.m21 * k + this.dx;
        h = this.m12 * h + this.m22 * k + this.dy;
        this.m11 = this.m11 * c + this.m21 * d;
        this.m12 = a;
        this.m21 = b;
        this.m22 = e;
        this.dx = g;
        this.dy = h;
        return this
    };
    Ca.prototype.invert = Ca.prototype.Ux = function () {
        var a = 1 / (this.m11 * this.m22 - this.m12 * this.m21), b = -this.m12 * a, c = -this.m21 * a, d = this.m11 * a, e = a * (this.m21 * this.dy - this.m22 * this.dx), g = a * (this.m12 * this.dx - this.m11 * this.dy);
        this.m11 = this.m22 * a;
        this.m12 = b;
        this.m21 = c;
        this.m22 = d;
        this.dx = e;
        this.dy = g;
        return this
    };
    Ca.prototype.rotate = Ca.prototype.rotate = function (a, b, c) {
        v && (D.p(a, Ca, "rotate:angle"), D.p(b, Ca, "rotate:rx"), D.p(c, Ca, "rotate:ry"));
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        if (0 === a)return this;
        this.translate(b, c);
        var d = 0, e = 0;
        90 === a ? (d = 0, e = 1) : 180 === a ? (d = -1, e = 0) : 270 === a ? (d = 0, e = -1) : (e = a * Math.PI / 180, d = Math.cos(e), e = Math.sin(e));
        a = this.m12 * d + this.m22 * e;
        var g = this.m11 * -e + this.m21 * d, h = this.m12 * -e + this.m22 * d;
        this.m11 = this.m11 * d + this.m21 * e;
        this.m12 = a;
        this.m21 = g;
        this.m22 = h;
        this.translate(-b, -c);
        return this
    };
    Ca.prototype.translate = Ca.prototype.translate = function (a, b) {
        v && (D.p(a, Ca, "translate:x"), D.p(b, Ca, "translate:y"));
        this.dx += this.m11 * a + this.m21 * b;
        this.dy += this.m12 * a + this.m22 * b;
        return this
    };
    Ca.prototype.scale = Ca.prototype.scale = function (a, b) {
        void 0 === b && (b = a);
        v && (D.p(a, Ca, "translate:sx"), D.p(b, Ca, "translate:sy"));
        this.m11 *= a;
        this.m12 *= a;
        this.m21 *= b;
        this.m22 *= b;
        return this
    };
    Ca.prototype.transformPoint = Ca.prototype.wb = function (a) {
        v && D.l(a, N, Ca, "transformPoint:p");
        var b = a.L, c = a.M;
        a.L = b * this.m11 + c * this.m21 + this.dx;
        a.M = b * this.m12 + c * this.m22 + this.dy;
        return a
    };
    Ca.prototype.invertedTransformPoint = Ca.prototype.Fi = function (a) {
        v && D.l(a, N, Ca, "invertedTransformPoint:p");
        var b = 1 / (this.m11 * this.m22 - this.m12 * this.m21), c = -this.m12 * b, d = this.m11 * b, e = b * (this.m12 * this.dx - this.m11 * this.dy), g = a.L, h = a.M;
        a.L = g * this.m22 * b + h * -this.m21 * b + b * (this.m21 * this.dy - this.m22 * this.dx);
        a.M = g * c + h * d + e;
        return a
    };
    Ca.prototype.transformRect = Ca.prototype.mH = function (a) {
        v && D.l(a, C, Ca, "transformRect:rect");
        var b = a.L, c = a.M, d = b + a.Ia, e = c + a.Ha, g = this.m11, h = this.m12, k = this.m21, l = this.m22, m = this.dx, n = this.dy, p = b * g + c * k + m, q = b * h + c * l + n, r = d * g + c * k + m, c = d * h + c * l + n, s = b * g + e * k + m, b = b * h + e * l + n, g = d * g + e * k + m, d = d * h + e * l + n, e = p, h = q, p = Math.min(p, r), e = Math.max(e, r), h = Math.min(h, c), q = Math.max(q, c), p = Math.min(p, s), e = Math.max(e, s), h = Math.min(h, b), q = Math.max(q, b), p = Math.min(p, g), e = Math.max(e, g), h = Math.min(h, d), q = Math.max(q, d);
        a.L = p;
        a.M = h;
        a.Ia =
            e - p;
        a.Ha = q - h;
        return a
    };
    function Q(a, b, c, d) {
        void 0 === a ? this.Og = this.Ng = this.M = this.L = 0 : (void 0 === b && (b = 0), void 0 === c && (c = 0), void 0 === d && (d = 0), this.x = a, this.y = b, this.offsetX = c, this.offsetY = d);
        this.J = !1
    }

    D.ka("Spot", Q);
    D.Di(Q);
    D.ne(Q, {x: !0, y: !0, offsetX: !0, offsetY: !0});
    Q.prototype.assign = function (a) {
        this.L = a.L;
        this.M = a.M;
        this.Ng = a.Ng;
        this.Og = a.Og
    };
    Q.prototype.setTo = Q.prototype.n = function (a, b, c, d) {
        v && (Tb(a, "setTo:x"), Tb(b, "setTo:y"), Yb(c, "setTo:offx"), Yb(d, "setTo:offy"));
        this.Qa();
        this.L = a;
        this.M = b;
        this.Ng = c;
        this.Og = d;
        return this
    };
    Q.prototype.set = Q.prototype.set = function (a) {
        v && D.l(a, Q, Q, "set:s");
        this.Qa();
        this.L = a.L;
        this.M = a.M;
        this.Ng = a.Ng;
        this.Og = a.Og;
        return this
    };
    Q.prototype.copy = function () {
        var a = new Q;
        a.L = this.L;
        a.M = this.M;
        a.Ng = this.Ng;
        a.Og = this.Og;
        return a
    };
    f = Q.prototype;
    f.Oa = function () {
        this.J = !0;
        Object.freeze(this);
        return this
    };
    f.V = function () {
        return Object.isFrozen(this) ? this : this.copy().freeze()
    };
    f.freeze = function () {
        this.J = !0;
        return this
    };
    f.Xa = function () {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        return this
    };
    f.Qa = function (a) {
        if (this.J) {
            var b = "The Spot is frozen, so its properties cannot be set: " + this.toString();
            void 0 !== a && (b += "  to value: " + a);
            D.k(b)
        }
    };
    function ac(a, b) {
        a.L = NaN;
        a.M = NaN;
        a.Ng = b;
        return a
    }

    function Tb(a, b) {
        (isNaN(a) || 1 < a || 0 > a) && D.ua(a, "0 <= " + b + " <= 1", Q, b)
    }

    function Yb(a, b) {
        (isNaN(a) || Infinity === a || -Infinity === a) && D.ua(a, "real number, not NaN or Infinity", Q, b)
    }

    var bc;
    Q.parse = bc = function (a) {
        if ("string" === typeof a) {
            a = a.trim();
            if ("None" === a)return cc;
            if ("TopLeft" === a)return dc;
            if ("Top" === a || "TopCenter" === a || "MiddleTop" === a)return hc;
            if ("TopRight" === a)return ic;
            if ("Left" === a || "LeftCenter" === a || "MiddleLeft" === a)return jc;
            if ("Center" === a)return kc;
            if ("Right" === a || "RightCenter" === a || "MiddleRight" === a)return lc;
            if ("BottomLeft" === a)return sc;
            if ("Bottom" === a || "BottomCenter" === a || "MiddleBottom" === a)return tc;
            if ("BottomRight" === a)return uc;
            if ("TopSide" === a)return vc;
            if ("LeftSide" ===
                a)return wc;
            if ("RightSide" === a)return xc;
            if ("BottomSide" === a)return Bc;
            if ("TopBottomSides" === a)return Cc;
            if ("LeftRightSides" === a)return Kc;
            if ("TopLeftSides" === a)return Lc;
            if ("TopRightSides" === a)return Mc;
            if ("BottomLeftSides" === a)return Nc;
            if ("BottomRightSides" === a)return Oc;
            if ("NotTopSide" === a)return Pc;
            if ("NotLeftSide" === a)return Qc;
            if ("NotRightSide" === a)return Tc;
            if ("NotBottomSide" === a)return Uc;
            if ("AllSides" === a)return Vc;
            if ("Default" === a)return Wc;
            a = a.split(" ");
            for (var b = 0, c = 0; "" === a[b];)b++;
            var d = a[b++];
            void 0 !== d && 0 < d.length && (c = parseFloat(d));
            for (var e = 0; "" === a[b];)b++;
            d = a[b++];
            void 0 !== d && 0 < d.length && (e = parseFloat(d));
            for (var g = 0; "" === a[b];)b++;
            d = a[b++];
            void 0 !== d && 0 < d.length && (g = parseFloat(d));
            for (var h = 0; "" === a[b];)b++;
            d = a[b++];
            void 0 !== d && 0 < d.length && (h = parseFloat(d));
            return new Q(c, e, g, h)
        }
        return new Q
    };
    Q.stringify = function (a) {
        v && D.l(a, Q);
        return a.Vc() ? a.x.toString() + " " + a.y.toString() + " " + a.offsetX.toString() + " " + a.offsetY.toString() : a.toString()
    };
    Q.prototype.toString = function () {
        return this.Vc() ? 0 === this.Ng && 0 === this.Og ? "Spot(" + this.x + "," + this.y + ")" : "Spot(" + this.x + "," + this.y + "," + this.offsetX + "," + this.offsetY + ")" : this.O(cc) ? "None" : this.O(dc) ? "TopLeft" : this.O(hc) ? "Top" : this.O(ic) ? "TopRight" : this.O(jc) ? "Left" : this.O(kc) ? "Center" : this.O(lc) ? "Right" : this.O(sc) ? "BottomLeft" : this.O(tc) ? "Bottom" : this.O(uc) ? "BottomRight" : this.O(vc) ? "TopSide" : this.O(wc) ? "LeftSide" : this.O(xc) ? "RightSide" : this.O(Bc) ? "BottomSide" : this.O(Cc) ? "TopBottomSides" : this.O(Kc) ?
            "LeftRightSides" : this.O(Lc) ? "TopLeftSides" : this.O(Mc) ? "TopRightSides" : this.O(Nc) ? "BottomLeftSides" : this.O(Oc) ? "BottomRightSides" : this.O(Pc) ? "NotTopSide" : this.O(Qc) ? "NotLeftSide" : this.O(Tc) ? "NotRightSide" : this.O(Uc) ? "NotBottomSide" : this.O(Vc) ? "AllSides" : this.O(Wc) ? "Default" : "None"
    };
    Q.prototype.equals = Q.prototype.O = function (a) {
        return a instanceof Q ? (this.L === a.x || isNaN(this.L) && isNaN(a.x)) && (this.M === a.y || isNaN(this.M) && isNaN(a.y)) && this.Ng === a.offsetX && this.Og === a.offsetY : !1
    };
    Q.prototype.opposite = Q.prototype.sG = function () {
        return new Q(.5 - (this.L - .5), .5 - (this.M - .5), -this.Ng, -this.Og)
    };
    Q.prototype.includesSide = Q.prototype.Jj = function (a) {
        if (!this.Mj())return !1;
        if (!a.Mj())if (a.O(Xc))a = wc; else if (a.O(Yc))a = xc; else if (a.O(Zc))a = vc; else if (a.O($c))a = Bc; else return !1;
        a = a.offsetY;
        return (this.Og & a) === a
    };
    D.defineProperty(Q, {x: "x"}, function () {
        return this.L
    }, function (a) {
        this.Qa(a);
        v && Tb(a, "x");
        this.L = a
    });
    D.defineProperty(Q, {y: "y"}, function () {
        return this.M
    }, function (a) {
        this.Qa(a);
        v && Tb(a, "y");
        this.M = a
    });
    D.defineProperty(Q, {offsetX: "offsetX"}, function () {
        return this.Ng
    }, function (a) {
        this.Qa(a);
        v && Yb(a, "offsetX");
        this.Ng = a
    });
    D.defineProperty(Q, {offsetY: "offsetY"}, function () {
        return this.Og
    }, function (a) {
        this.Qa(a);
        v && Yb(a, "offsetY");
        this.Og = a
    });
    Q.prototype.isSpot = Q.prototype.Vc = function () {
        return !isNaN(this.x) && !isNaN(this.y)
    };
    Q.prototype.isNoSpot = Q.prototype.be = function () {
        return isNaN(this.x) || isNaN(this.y)
    };
    Q.prototype.isSide = Q.prototype.Mj = function () {
        return isNaN(this.x) && isNaN(this.y) && 1 === this.offsetX && 0 !== this.offsetY
    };
    Q.prototype.isNone = Q.prototype.qJ = function () {
        return isNaN(this.x) && isNaN(this.y) && 0 === this.offsetX && 0 === this.offsetY
    };
    Q.prototype.isDefault = Q.prototype.gd = function () {
        return isNaN(this.x) && isNaN(this.y) && -1 === this.offsetX && 0 === this.offsetY
    };
    var cc;
    Q.None = cc = ac(new Q(0, 0, 0, 0), 0).Oa();
    var Wc;
    Q.Default = Wc = ac(new Q(0, 0, -1, 0), -1).Oa();
    var dc;
    Q.TopLeft = dc = (new Q(0, 0, 0, 0)).Oa();
    var hc;
    Q.TopCenter = hc = (new Q(.5, 0, 0, 0)).Oa();
    var ic;
    Q.TopRight = ic = (new Q(1, 0, 0, 0)).Oa();
    var jc;
    Q.LeftCenter = jc = (new Q(0, .5, 0, 0)).Oa();
    var kc;
    Q.Center = kc = (new Q(.5, .5, 0, 0)).Oa();
    var lc;
    Q.RightCenter = lc = (new Q(1, .5, 0, 0)).Oa();
    var sc;
    Q.BottomLeft = sc = (new Q(0, 1, 0, 0)).Oa();
    var tc;
    Q.BottomCenter = tc = (new Q(.5, 1, 0, 0)).Oa();
    var uc;
    Q.BottomRight = uc = (new Q(1, 1, 0, 0)).Oa();
    var ad;
    Q.MiddleTop = ad = hc;
    var hd;
    Q.MiddleLeft = hd = jc;
    var id;
    Q.MiddleRight = id = lc;
    var jd;
    Q.MiddleBottom = jd = tc;
    var Zc;
    Q.Top = Zc = hc;
    var Xc;
    Q.Left = Xc = jc;
    var Yc;
    Q.Right = Yc = lc;
    var $c;
    Q.Bottom = $c = tc;
    var vc;
    Q.TopSide = vc = ac(new Q(0, 0, 1, D.xd), 1).Oa();
    var wc;
    Q.LeftSide = wc = ac(new Q(0, 0, 1, D.ad), 1).Oa();
    var xc;
    Q.RightSide = xc = ac(new Q(0, 0, 1, D.nd), 1).Oa();
    var Bc;
    Q.BottomSide = Bc = ac(new Q(0, 0, 1, D.md), 1).Oa();
    var Cc;
    Q.TopBottomSides = Cc = ac(new Q(0, 0, 1, D.xd | D.md), 1).Oa();
    var Kc;
    Q.LeftRightSides = Kc = ac(new Q(0, 0, 1, D.ad | D.nd), 1).Oa();
    var Lc;
    Q.TopLeftSides = Lc = ac(new Q(0, 0, 1, D.xd | D.ad), 1).Oa();
    var Mc;
    Q.TopRightSides = Mc = ac(new Q(0, 0, 1, D.xd | D.nd), 1).Oa();
    var Nc;
    Q.BottomLeftSides = Nc = ac(new Q(0, 0, 1, D.md | D.ad), 1).Oa();
    var Oc;
    Q.BottomRightSides = Oc = ac(new Q(0, 0, 1, D.md | D.nd), 1).Oa();
    var Pc;
    Q.NotTopSide = Pc = ac(new Q(0, 0, 1, D.ad | D.nd | D.md), 1).Oa();
    var Qc;
    Q.NotLeftSide = Qc = ac(new Q(0, 0, 1, D.xd | D.nd | D.md), 1).Oa();
    var Tc;
    Q.NotRightSide = Tc = ac(new Q(0, 0, 1, D.xd | D.ad | D.md), 1).Oa();
    var Uc;
    Q.NotBottomSide = Uc = ac(new Q(0, 0, 1, D.xd | D.ad | D.nd), 1).Oa();
    var Vc;
    Q.AllSides = Vc = ac(new Q(0, 0, 1, D.xd | D.ad | D.nd | D.md), 1).Oa();
    function kd() {
        this.bc = [1, 0, 0, 1, 0, 0]
    }

    kd.prototype.copy = function () {
        var a = new kd;
        a.bc[0] = this.bc[0];
        a.bc[1] = this.bc[1];
        a.bc[2] = this.bc[2];
        a.bc[3] = this.bc[3];
        a.bc[4] = this.bc[4];
        a.bc[5] = this.bc[5];
        return a
    };
    kd.prototype.translate = function (a, b) {
        this.bc[4] += this.bc[0] * a + this.bc[2] * b;
        this.bc[5] += this.bc[1] * a + this.bc[3] * b
    };
    kd.prototype.scale = function (a, b) {
        this.bc[0] *= a;
        this.bc[1] *= a;
        this.bc[2] *= b;
        this.bc[3] *= b
    };
    function ld(a) {
        this.type = a;
        this.r2 = this.y2 = this.x2 = this.r1 = this.y1 = this.x1 = 0;
        this.VE = [];
        this.pattern = null
    }

    ld.prototype.addColorStop = function (a, b) {
        this.VE.push({offset: a, color: b})
    };
    function rd(a, b, c) {
        this.fillStyle = "#000000";
        this.font = "10px sans-serif";
        this.globalAlpha = 1;
        this.lineCap = "butt";
        this.eo = 0;
        this.lineJoin = "miter";
        this.lineWidth = 1;
        this.miterLimit = 10;
        this.shadowBlur = 0;
        this.shadowColor = "rgba(0, 0, 0, 0)";
        this.shadowOffsetY = this.shadowOffsetX = 0;
        this.strokeStyle = "#000000";
        this.textAlign = "start";
        this.bq = !1;
        this.Qg = this.vt = this.ut = 0;
        this.document = b || document;
        this.oF = c;
        this.gy = null;
        this.path = [];
        this.Oh = new kd;
        this.stack = [];
        this.Hf = [];
        this.Hx = a;
        this.VJ = "http://www.w3.org/2000/svg";
        this.width = this.Hx.width;
        this.height = this.Hx.height;
        this.Bm = sd(this, "svg", {
            width: this.width + "px",
            height: this.height + "px",
            NM: "0 0 " + this.Hx.width + " " + this.Hx.height
        });
        this.Bm.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns", "http://www.w3.org/2000/svg");
        this.Bm.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
        td(this, 1, 0, 0, 1, 0, 0);
        a = D.Hm++;
        b = sd(this, "clipPath", {id: "mainClip" + a});
        b.appendChild(sd(this, "rect", {x: 0, y: 0, width: this.width, height: this.height}));
        this.Bm.appendChild(b);
        this.Hf[0].setAttributeNS(null, "clip-path", "url(#mainClip" + a + ")")
    }

    f = rd.prototype;
    f.arc = function (a, b, c, d, e, g) {
        ud(this, a, b, c, d, e, g)
    };
    f.beginPath = function () {
        this.path = []
    };
    f.bezierCurveTo = function (a, b, c, d, e, g) {
        this.path.push(["C", a, b, c, d, e, g])
    };
    f.clearRect = function () {
    };
    f.clip = function () {
        Cd(this, "clipPath", this.path, new kd)
    };
    f.closePath = function () {
        this.path.push(["z"])
    };
    f.createLinearGradient = function (a, b, c, d) {
        var e = new ld("linear");
        e.x1 = a;
        e.y1 = b;
        e.x2 = c;
        e.y2 = d;
        return e
    };
    f.createPattern = function () {
        return null
    };
    f.createRadialGradient = function (a, b, c, d, e, g) {
        var h = new ld("radial");
        h.x1 = a;
        h.y1 = b;
        h.r1 = c;
        h.x2 = d;
        h.y2 = e;
        h.r2 = g;
        return h
    };
    f.drawImage = function (a, b, c, d, e, g, h, k, l) {
        var m = "";
        a instanceof HTMLCanvasElement && (m = a.toDataURL());
        a instanceof HTMLImageElement && (m = a.src);
        void 0 === d && (g = b, h = c, k = d = a.naturalWidth, l = e = a.naturalHeight);
        d = d || 0;
        e = e || 0;
        g = g || 0;
        h = h || 0;
        k = k || 0;
        l = l || 0;
        m = {
            x: 0,
            y: 0,
            width: a.naturalWidth,
            height: a.naturalHeight,
            href: m,
            preserveAspectRatio: "xMidYMid slice"
        };
        zb(d, k) && zb(e, l) || (m.preserveAspectRatio = "none");
        var n = "";
        k /= d;
        l /= e;
        if (0 !== g || 0 !== h)n += " translate(" + g + ", " + h + ")";
        if (1 !== k || 1 !== l)n += " scale(" + k + ", " + l + ")";
        if (0 !==
            b || 0 !== c)n += " translate(" + -b + ", " + -c + ")";
        if (0 !== b || 0 !== c || d !== a.naturalWidth || e !== a.naturalHeight)a = "CLIP" + D.Hm++, g = sd(this, "clipPath", {id: a}), g.appendChild(sd(this, "rect", {
            x: b,
            y: c,
            width: d,
            height: e
        })), this.Bm.appendChild(g), m["clip-path"] = "url(#" + a + ")";
        Dd(this, "image", m, this.Oh, n);
        this.addElement("image", m)
    };
    f.fill = function () {
        Cd(this, "fill", this.path, this.Oh)
    };
    f.Zg = function () {
        this.bq ? this.clip() : this.fill()
    };
    f.fillRect = function (a, b, c, d) {
        Ed(this, "fill", [a, b, c, d], this.Oh)
    };
    f.fillText = function (a, b, c) {
        a = [a, b, c];
        b = this.textAlign;
        "left" === b ? b = "start" : "right" === b ? b = "end" : "center" === b && (b = "middle");
        b = {x: a[1], y: a[2], style: "font: " + this.font, "text-anchor": b};
        Dd(this, "fill", b, this.Oh);
        this.addElement("text", b, a[0])
    };
    f.lineTo = function (a, b) {
        this.path.push(["L", a, b])
    };
    f.moveTo = function (a, b) {
        this.path.push(["M", a, b])
    };
    f.quadraticCurveTo = function (a, b, c, d) {
        this.path.push(["Q", a, b, c, d])
    };
    f.rect = function (a, b, c, d) {
        this.path.push(["M", a, b], ["L", a + c, b], ["L", a + c, b + d], ["L", a, b + d], ["z"])
    };
    f.restore = function () {
        this.Oh = this.stack.pop();
        this.path = this.stack.pop();
        var a = this.stack.pop();
        this.fillStyle = a.fillStyle;
        this.font = a.font;
        this.globalAlpha = a.globalAlpha;
        this.lineCap = a.lineCap;
        this.eo = a.eo;
        this.lineJoin = a.lineJoin;
        this.lineWidth = a.lineWidth;
        this.miterLimit = a.miterLimit;
        this.shadowBlur = a.shadowBlur;
        this.shadowColor = a.shadowColor;
        this.shadowOffsetX = a.shadowOffsetX;
        this.shadowOffsetY = a.shadowOffsetY;
        this.strokeStyle = a.strokeStyle;
        this.textAlign = a.textAlign
    };
    f.save = function () {
        this.stack.push({
            fillStyle: this.fillStyle,
            font: this.font,
            globalAlpha: this.globalAlpha,
            lineCap: this.lineCap,
            eo: this.eo,
            lineJoin: this.lineJoin,
            lineWidth: this.lineWidth,
            miterLimit: this.miterLimit,
            shadowBlur: this.shadowBlur,
            shadowColor: this.shadowColor,
            shadowOffsetX: this.shadowOffsetX,
            shadowOffsetY: this.shadowOffsetY,
            strokeStyle: this.strokeStyle,
            textAlign: this.textAlign
        });
        for (var a = [], b = 0; b < this.path.length; b++)a.push(this.path[b]);
        this.stack.push(a);
        this.stack.push(this.Oh.copy())
    };
    f.setTransform = function (a, b, c, d, e, g) {
        1 === a && 0 === b && 0 === c && 1 === d && 0 === e && 0 === g || td(this, a, b, c, d, e, g)
    };
    f.scale = function (a, b) {
        this.Oh.scale(a, b)
    };
    f.translate = function (a, b) {
        this.Oh.translate(a, b)
    };
    f.transform = function () {
    };
    f.stroke = function () {
        Cd(this, "stroke", this.path, this.Oh)
    };
    f.Wj = function () {
        this.bq || this.stroke()
    };
    f.strokeRect = function (a, b, c, d) {
        Ed(this, "stroke", [a, b, c, d], this.Oh)
    };
    function sd(a, b, c, d) {
        a = a.document.createElementNS(a.VJ, b);
        if (D.Sa(c))for (var e in c)a.setAttributeNS("href" === e ? "http://www.w3.org/1999/xlink" : "", e, c[e]);
        void 0 !== d && (a.textContent = d);
        return a
    }

    f.addElement = function (a, b, c) {
        a = sd(this, a, b, c);
        0 < this.Hf.length ? this.Hf[this.Hf.length - 1].appendChild(a) : this.Bm.appendChild(a);
        return this.gy = a
    };
    function Dd(a, b, c, d, e) {
        1 !== a.globalAlpha && (c.opacity = a.globalAlpha);
        "fill" === b ? (a.fillStyle instanceof ld ? c.fill = Fd(a, a.fillStyle) : (/^rgba\(/.test(a.fillStyle) && (b = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle), c.fill = "rgb(" + b[1] + "," + b[2] + "," + b[3] + ")", c["fill-opacity"] = b[4]), c.fill = a.fillStyle), c.stroke = "none") : "stroke" === b && (c.fill = "none", a.strokeStyle instanceof ld ? c.stroke = Fd(a, a.strokeStyle) : (/^rgba\(/.test(a.strokeStyle) && (b = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle),
            c.stroke = "rgb(" + b[1] + "," + b[2] + "," + b[3] + ")", c["stroke-opacity"] = b[4]), c.stroke = a.strokeStyle), c["stroke-width"] = a.lineWidth, c["stroke-linecap"] = a.lineCap, c["stroke-linejoin"] = a.lineJoin, c["stroke-miterlimit"] = a.miterLimit);
        a = d.bc;
        a = "matrix(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ")";
        void 0 !== e && (a += e);
        c.transform = a
    }

    function Fd(a, b) {
        var c = "GRAD" + D.Hm++, d;
        if ("linear" === b.type)d = sd(a, "linearGradient", {
            x1: b.x1,
            x2: b.x2,
            y1: b.y1,
            y2: b.y2,
            id: c,
            gradientUnits: "userSpaceOnUse"
        }); else if ("radial" === b.type)d = sd(a, "radialGradient", {
            x1: b.x1,
            x2: b.x2,
            y1: b.y1,
            y2: b.y2,
            r1: b.r1,
            r2: b.r2,
            id: c
        }); else if ("pattern" === b.type) {
            var e = b.pattern;
            d = {width: e.width, height: e.height, id: c, patternUnits: "userSpaceOnUse"};
            var g = "";
            e instanceof HTMLCanvasElement && (g = e.toDataURL());
            e instanceof HTMLImageElement && (g = e.src);
            e = {
                x: 0, y: 0, width: e.width, height: e.height,
                href: g
            };
            d = sd(a, "pattern", d);
            d.appendChild(sd(a, "image", e))
        } else throw Error("invalid gradient");
        for (var e = b.VE, g = e.length, h = [], k = 0; k < g; k++) {
            var l = e[k], m = l.color, l = {offset: l.offset, "stop-color": m};
            /^rgba\(/.test(m) && (m = /^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(m), l["stop-color"] = "rgb(" + m[1] + "," + m[2] + "," + m[3] + ")", l["stop-opacity"] = m[4]);
            h.push(l)
        }
        h.sort(function (a, b) {
            return a.offset > b.offset ? 1 : -1
        });
        for (k = 0; k < g; k++)d.appendChild(sd(a, "stop", h[k]));
        a.Bm.appendChild(d);
        return "url(#" + c + ")"
    }

    function Ed(a, b, c, d) {
        c = {x: c[0], y: c[1], width: c[2], height: c[3]};
        Dd(a, b, c, d);
        a.addElement("rect", c)
    }

    function Cd(a, b, c, d) {
        for (var e = [], g = 0; g < c.length; g++) {
            var h = D.fm(c[g]), k = [h.shift()];
            if ("A" === k[0])k.push(h.shift() + "," + h.shift(), h.shift(), h.shift() + "," + h.shift(), h.shift() + "," + h.shift()); else for (; h.length;)k.push(h.shift() + "," + h.shift());
            e.push(k.join(" "))
        }
        c = {d: e.join(" ")};
        Dd(a, b, c, d);
        "clipPath" === b ? (b = "CLIP" + D.Hm++, d = sd(a, "clipPath", {id: b}), d.appendChild(sd(a, "path", c)), a.Bm.appendChild(d), 0 < a.Hf.length && a.Hf[a.Hf.length - 1].setAttributeNS(null, "clip-path", "url(#" + b + ")")) : a.addElement("path",
            c)
    }

    function ud(a, b, c, d, e, g, h) {
        var k = Math.abs(e - g);
        if (e !== g) {
            var l = b + d * Math.cos(g);
            g = c + d * Math.sin(g);
            k >= 2 * Math.PI ? (ud(a, b, c, d, e, e + Math.PI, h), ud(a, b, c, d, e + Math.PI, e + 2 * Math.PI, h), a.path.push(["M", l, g])) : (b += d * Math.cos(e), c += d * Math.sin(e), k = 180 * k / Math.PI, e = h ? 0 : 1, h = 180 <= k === !!h ? 0 : 1, 0 !== a.path.length ? a.path.push(["L", b, c]) : a.path.push(["M", b, c]), a.path.push(["A", d, d, k, h, e, l, g]))
        }
    }

    function td(a, b, c, d, e, g, h) {
        var k = new kd;
        k.bc = [b, c, d, e, g, h];
        b = {};
        Dd(a, "g", b, k);
        k = a.addElement("g", b);
        a.Hf.push(k)
    }

    f.kb = function () {
        if (0 !== this.shadowOffsetX || 0 !== this.shadowOffsetY || 0 !== this.shadowBlur) {
            var a = "SHADOW" + D.Hm++, b = this.addElement("filter", {
                id: a,
                x: "-100%",
                y: "-100%",
                width: "300%",
                height: "300%"
            }, null), c, d, e, g, h;
            c = sd(this, "feGaussianBlur", {"in": "SourceAlpha", result: "blur", DM: this.shadowBlur / 2});
            d = sd(this, "feFlood", {"in": "blur", result: "flood", "flood-color": this.shadowColor});
            e = sd(this, "feComposite", {"in": "flood", in2: "blur", operator: "in", result: "comp"});
            g = sd(this, "feOffset", {
                "in": "comp", result: "offsetBlur",
                dx: this.shadowOffsetX, dy: this.shadowOffsetY
            });
            h = sd(this, "feMerge", {});
            h.appendChild(sd(this, "feMergeNode", {"in": "offsetBlur"}));
            h.appendChild(sd(this, "feMergeNode", {"in": "SourceGraphic"}));
            b.appendChild(c);
            b.appendChild(d);
            b.appendChild(e);
            b.appendChild(g);
            b.appendChild(h);
            0 < this.Hf.length && this.Hf[this.Hf.length - 1].setAttributeNS(null, "filter", "url(#" + a + ")")
        }
    };
    f.RB = function (a, b, c) {
        this.ut = a;
        this.vt = b;
        this.Qg = c
    };
    f.vo = function () {
        this.shadowBlur = this.shadowOffsetY = this.shadowOffsetX = 0
    };
    f.wo = function () {
        this.shadowOffsetX = this.ut;
        this.shadowOffsetY = this.vt;
        this.shadowBlur = this.Qg
    };
    f.NA = function () {
        return !1
    };
    f.IA = function () {
    };
    f.De = function () {
    };
    f.Ky = function () {
    };
    rd.prototype.rotate = function () {
    };
    function ja(a, b) {
        this.ownerDocument = void 0 === b ? document : b;
        var c = this.ownerDocument.createElement("canvas");
        c.tabIndex = 0;
        this.Vd = c;
        this.Pk = new Gd(c);
        c.ca = a;
        Object.seal(this)
    }

    f = ja.prototype;
    f.toDataURL = function (a, b) {
        return this.Vd.toDataURL(a, b)
    };
    f.getBoundingClientRect = function () {
        return this.Vd.getBoundingClientRect()
    };
    f.focus = function () {
        return this.Vd.focus()
    };
    f.addEventListener = function (a, b, c) {
        this.Vd.addEventListener(a, b, c)
    };
    f.removeEventListener = function (a, b, c) {
        this.Vd.removeEventListener(a, b, c)
    };
    D.defineProperty(ja, {width: "width"}, function () {
        return this.Vd.width
    }, function (a) {
        this.Vd.width = a
    });
    D.defineProperty(ja, {height: "height"}, function () {
        return this.Vd.height
    }, function (a) {
        this.Vd.height = a
    });
    D.w(ja, {style: "style"}, function () {
        return this.Vd.style
    });
    function Gd(a) {
        a.getContext && a.getContext("2d") || D.k("Browser does not support HTML Canvas Element");
        this.xa = a.getContext("2d");
        this.hz = this.jz = this.iz = "";
        this.pr = !1;
        this.Qg = this.vt = this.ut = 0;
        Object.seal(this)
    }

    Gd.prototype.Ky = function (a) {
        this.xa.$A = a;
        this.xa.fM = a
    };
    D.defineProperty(Gd, {fillStyle: "fillStyle"}, function () {
        return this.xa.fillStyle
    }, function (a) {
        this.hz !== a && (this.hz = this.xa.fillStyle = a)
    });
    D.defineProperty(Gd, {font: "font"}, function () {
        return this.xa.font
    }, function (a) {
        this.iz !== a && (this.iz = this.xa.font = a)
    });
    D.defineProperty(Gd, {globalAlpha: "globalAlpha"}, function () {
        return this.xa.globalAlpha
    }, function (a) {
        this.xa.globalAlpha = a
    });
    D.defineProperty(Gd, {lineCap: "lineCap"}, function () {
        return this.xa.lineCap
    }, function (a) {
        this.xa.lineCap = a
    });
    D.defineProperty(Gd, {eo: "lineDashOffset"}, function () {
        return this.xa.eo
    }, function (a) {
        this.xa.eo = a
    });
    D.defineProperty(Gd, {lineJoin: "lineJoin"}, function () {
        return this.xa.lineJoin
    }, function (a) {
        this.xa.lineJoin = a
    });
    D.defineProperty(Gd, {lineWidth: "lineWidth"}, function () {
        return this.xa.lineWidth
    }, function (a) {
        this.xa.lineWidth = a
    });
    D.defineProperty(Gd, {miterLimit: "miterLimit"}, function () {
        return this.xa.miterLimit
    }, function (a) {
        this.xa.miterLimit = a
    });
    D.defineProperty(Gd, {shadowBlur: "shadowBlur"}, function () {
        return this.xa.shadowBlur
    }, function (a) {
        this.xa.shadowBlur = a
    });
    D.defineProperty(Gd, {shadowColor: "shadowColor"}, function () {
        return this.xa.shadowColor
    }, function (a) {
        this.xa.shadowColor = a
    });
    D.defineProperty(Gd, {shadowOffsetX: "shadowOffsetX"}, function () {
        return this.xa.shadowOffsetX
    }, function (a) {
        this.xa.shadowOffsetX = a
    });
    D.defineProperty(Gd, {shadowOffsetY: "shadowOffsetY"}, function () {
        return this.xa.shadowOffsetY
    }, function (a) {
        this.xa.shadowOffsetY = a
    });
    D.defineProperty(Gd, {strokeStyle: "strokeStyle"}, function () {
        return this.xa.strokeStyle
    }, function (a) {
        this.jz !== a && (this.jz = this.xa.strokeStyle = a)
    });
    D.defineProperty(Gd, {textAlign: "textAlign"}, function () {
        return this.xa.textAlign
    }, function (a) {
        this.xa.textAlign = a
    });
    D.defineProperty(Gd, {$A: "imageSmoothingEnabled"}, function () {
        return this.xa.$A
    }, function (a) {
        this.xa.$A = a
    });
    f = Gd.prototype;
    f.arc = function (a, b, c, d, e, g) {
        this.xa.arc(a, b, c, d, e, g)
    };
    f.beginPath = function () {
        this.xa.beginPath()
    };
    f.bezierCurveTo = function (a, b, c, d, e, g) {
        this.xa.bezierCurveTo(a, b, c, d, e, g)
    };
    f.clearRect = function (a, b, c, d) {
        this.xa.clearRect(a, b, c, d)
    };
    f.clip = function () {
        this.xa.clip()
    };
    f.closePath = function () {
        this.xa.closePath()
    };
    f.createLinearGradient = function (a, b, c, d) {
        return this.xa.createLinearGradient(a, b, c, d)
    };
    f.createPattern = function (a, b) {
        return this.xa.createPattern(a, b)
    };
    f.createRadialGradient = function (a, b, c, d, e, g) {
        return this.xa.createRadialGradient(a, b, c, d, e, g)
    };
    f.drawImage = function (a, b, c, d, e, g, h, k, l) {
        void 0 === d ? this.xa.drawImage(a, b, c) : this.xa.drawImage(a, b, c, d, e, g, h, k, l)
    };
    f.fill = function () {
        this.xa.fill()
    };
    f.fillRect = function (a, b, c, d) {
        this.xa.fillRect(a, b, c, d)
    };
    f.fillText = function (a, b, c) {
        this.xa.fillText(a, b, c)
    };
    f.getImageData = function (a, b, c, d) {
        return this.xa.getImageData(a, b, c, d)
    };
    f.lineTo = function (a, b) {
        this.xa.lineTo(a, b)
    };
    f.measureText = function (a) {
        return this.xa.measureText(a)
    };
    f.moveTo = function (a, b) {
        this.xa.moveTo(a, b)
    };
    f.quadraticCurveTo = function (a, b, c, d) {
        this.xa.quadraticCurveTo(a, b, c, d)
    };
    f.rect = function (a, b, c, d) {
        this.xa.rect(a, b, c, d)
    };
    f.restore = function () {
        this.xa.restore()
    };
    Gd.prototype.rotate = function (a) {
        this.xa.rotate(a)
    };
    f = Gd.prototype;
    f.save = function () {
        this.xa.save()
    };
    f.setTransform = function (a, b, c, d, e, g) {
        this.xa.setTransform(a, b, c, d, e, g)
    };
    f.scale = function (a, b) {
        this.xa.scale(a, b)
    };
    f.stroke = function () {
        this.xa.stroke()
    };
    f.transform = function (a, b, c, d, e, g) {
        1 === a && 0 === b && 0 === c && 1 === d && 0 === e && 0 === g || this.xa.transform(a, b, c, d, e, g)
    };
    f.translate = function (a, b) {
        this.xa.translate(a, b)
    };
    f.Zg = function (a) {
        if (a instanceof Aa && a.type === Hd) {
            var b = a.No;
            a = a.nz;
            a > b ? (this.scale(b / a, 1), this.translate((a - b) / 2, 0)) : b > a && (this.scale(1, a / b), this.translate(0, (b - a) / 2));
            this.pr ? this.clip() : this.fill();
            a > b ? (this.translate(-(a - b) / 2, 0), this.scale(1 / (b / a), 1)) : b > a && (this.translate(0, -(b - a) / 2), this.scale(1, 1 / (a / b)))
        } else this.pr ? this.clip() : this.fill()
    };
    f.Wj = function () {
        this.pr || this.stroke()
    };
    D.defineProperty(Gd, {bq: "clipInsteadOfFill"}, function () {
        return this.pr
    }, function (a) {
        this.pr = a
    });
    f = Gd.prototype;
    f.RB = function (a, b, c) {
        this.ut = a;
        this.vt = b;
        this.Qg = c
    };
    f.vo = function () {
        this.shadowBlur = this.shadowOffsetY = this.shadowOffsetX = 0
    };
    f.wo = function () {
        this.shadowOffsetX = this.ut;
        this.shadowOffsetY = this.vt;
        this.shadowBlur = this.Qg
    };
    f.NA = function (a, b) {
        var c = this.xa;
        if (void 0 !== c.setLineDash)c.setLineDash(a), c.lineDashOffset = b; else if (void 0 !== c.webkitLineDash)c.webkitLineDash = a, c.webkitLineDashOffset = b; else if (void 0 !== c.mozDash)c.mozDash = a, c.mozDashOffset = b; else return !1;
        return !0
    };
    f.IA = function () {
        var a = this.xa;
        void 0 !== a.setLineDash ? (a.setLineDash(D.Eo), a.lineDashOffset = 0) : void 0 !== a.webkitLineDash ? (a.webkitLineDash = D.Eo, a.webkitLineDashOffset = 0) : void 0 !== a.mozDash && (a.mozDash = null, a.mozDashOffset = 0)
    };
    f.De = function (a) {
        a && (this.iz = "");
        this.hz = this.jz = ""
    };
    var Id = (Math.sqrt(2) - 1) / 3 * 4, Jd = (new N(0, 0)).Oa(), Kd = (new C(0, 0, 0, 0)).Oa(), Td = (new Kb(0, 0, 0, 0)).Oa(), Ud = (new Kb(2, 2, 2, 2)).Oa(), Vd = (new N(6, 6)).Oa(), Wd = (new N(-Infinity, -Infinity)).Oa(), Xd = (new N(Infinity, Infinity)).Oa(), Yd = (new Ba(0, 0)).Oa(), Zd = (new Ba(1, 1)).Oa(), $d = (new Ba(6, 6)).Oa(), ae = (new Ba(8, 8)).Oa(), be = (new Ba(10, 10)).Oa(), ie = (new Ba(Infinity, Infinity)).Oa(), je = (new N(NaN, NaN)).Oa(), ke = (new Ba(NaN, NaN)).Oa(), le = (new C(NaN, NaN, NaN, NaN)).Oa(), me = (new Q(.156, .156)).Oa(), ne = (new Q(.844, .844)).Oa(),
        oe = new ka, pe = new ka, qe = null;

    function re(a) {
        if (0 >= a)return 0;
        var b = qe;
        if (null === b) {
            for (var b = [], c = 0; 2E3 >= c; c++)b[c] = Math.sqrt(c);
            qe = b
        }
        return 1 > a ? (c = 1 / a, 2E3 >= c ? 1 / b[c | 0] : Math.sqrt(a)) : 2E3 >= a ? b[a | 0] : Math.sqrt(a)
    }

    function ab(a, b) {
        var c = a - b;
        return .5 > c && -.5 < c
    }

    function zb(a, b) {
        var c = a - b;
        return 5E-8 > c && -5E-8 < c
    }

    function se(a, b, c, d, e, g, h) {
        0 >= e && (e = 1E-6);
        var k = 0, l = 0, m = 0, n = 0;
        a < c ? (l = a, k = c) : (l = c, k = a);
        b < d ? (n = b, m = d) : (n = d, m = b);
        if (a === c)return n <= h && h <= m && a - e <= g && g <= a + e;
        if (b === d)return l <= g && g <= k && b - e <= h && h <= b + e;
        k += e;
        l -= e;
        if (l <= g && g <= k && (m += e, n -= e, n <= h && h <= m))if (k - l > m - n)if (a - c > e || c - a > e) {
            if (g = (d - b) / (c - a) * (g - a) + b, g - e <= h && h <= g + e)return !0
        } else return !0; else if (b - d > e || d - b > e) {
            if (h = (c - a) / (d - b) * (h - b) + a, h - e <= g && g <= h + e)return !0
        } else return !0;
        return !1
    }

    function Ae(a, b, c, d, e, g, h, k, l, m, n, p) {
        if (se(a, b, h, k, p, c, d) && se(a, b, h, k, p, e, g))return se(a, b, h, k, p, m, n);
        var q = (a + c) / 2, r = (b + d) / 2, s = (c + e) / 2, u = (d + g) / 2;
        e = (e + h) / 2;
        g = (g + k) / 2;
        d = (q + s) / 2;
        c = (r + u) / 2;
        var s = (s + e) / 2, u = (u + g) / 2, t = (d + s) / 2, z = (c + u) / 2;
        return Ae(a, b, q, r, d, c, t, z, l, m, n, p) || Ae(t, z, s, u, e, g, h, k, l, m, n, p)
    }

    function Be(a, b, c, d, e, g, h, k, l, m) {
        if (se(a, b, h, k, l, c, d) && se(a, b, h, k, l, e, g))Rb(m, a, b, 0, 0), Rb(m, h, k, 0, 0); else {
            var n = (a + c) / 2, p = (b + d) / 2, q = (c + e) / 2, r = (d + g) / 2;
            e = (e + h) / 2;
            g = (g + k) / 2;
            d = (n + q) / 2;
            c = (p + r) / 2;
            var q = (q + e) / 2, r = (r + g) / 2, s = (d + q) / 2, u = (c + r) / 2;
            Be(a, b, n, p, d, c, s, u, l, m);
            Be(s, u, q, r, e, g, h, k, l, m)
        }
    }

    function Ce(a, b, c, d, e, g, h, k, l, m) {
        if (se(a, b, h, k, l, c, d) && se(a, b, h, k, l, e, g))0 === m.length && (m.push(a), m.push(b)), m.push(h), m.push(k); else {
            var n = (a + c) / 2, p = (b + d) / 2, q = (c + e) / 2, r = (d + g) / 2;
            e = (e + h) / 2;
            g = (g + k) / 2;
            d = (n + q) / 2;
            c = (p + r) / 2;
            var q = (q + e) / 2, r = (r + g) / 2, s = (d + q) / 2, u = (c + r) / 2;
            Ce(a, b, n, p, d, c, s, u, l, m);
            Ce(s, u, q, r, e, g, h, k, l, m)
        }
    }

    function De(a, b, c, d, e, g, h, k, l, m, n, p, q, r) {
        var s = 1 - l;
        a = a * s + c * l;
        b = b * s + d * l;
        c = c * s + e * l;
        d = d * s + g * l;
        e = e * s + h * l;
        g = g * s + k * l;
        k = a * s + c * l;
        h = b * s + d * l;
        c = c * s + e * l;
        d = d * s + g * l;
        m.x = a;
        m.y = b;
        n.x = k;
        n.y = h;
        p.x = k * s + c * l;
        p.y = h * s + d * l;
        q.x = c;
        q.y = d;
        r.x = e;
        r.y = g
    }

    function Ee(a, b, c, d, e, g, h, k, l, m) {
        if (se(a, b, e, g, m, c, d))return se(a, b, e, g, m, k, l);
        var n = (a + c) / 2, p = (b + d) / 2;
        c = (c + e) / 2;
        d = (d + g) / 2;
        var q = (n + c) / 2, r = (p + d) / 2;
        return Ee(a, b, n, p, q, r, h, k, l, m) || Ee(q, r, c, d, e, g, h, k, l, m)
    }

    function Fe(a, b, c, d, e, g, h, k) {
        if (se(a, b, e, g, h, c, d))Rb(k, a, b, 0, 0), Rb(k, e, g, 0, 0); else {
            var l = (a + c) / 2, m = (b + d) / 2;
            c = (c + e) / 2;
            d = (d + g) / 2;
            var n = (l + c) / 2, p = (m + d) / 2;
            Fe(a, b, l, m, n, p, h, k);
            Fe(n, p, c, d, e, g, h, k)
        }
    }

    function Ge(a, b, c, d, e, g, h, k) {
        if (se(a, b, e, g, h, c, d))0 === k.length && (k.push(a), k.push(b)), k.push(e), k.push(g); else {
            var l = (a + c) / 2, m = (b + d) / 2;
            c = (c + e) / 2;
            d = (d + g) / 2;
            var n = (l + c) / 2, p = (m + d) / 2;
            Ge(a, b, l, m, n, p, h, k);
            Ge(n, p, c, d, e, g, h, k)
        }
    }

    function He(a, b, c, d, e, g, h, k, l, m, n, p, q, r) {
        0 >= q && (q = 1E-6);
        if (se(a, b, h, k, q, c, d) && se(a, b, h, k, q, e, g)) {
            var s = (a - h) * (m - p) - (b - k) * (l - n);
            if (0 === s)return !1;
            q = ((a * k - b * h) * (l - n) - (a - h) * (l * p - m * n)) / s;
            s = ((a * k - b * h) * (m - p) - (b - k) * (l * p - m * n)) / s;
            if ((l > n ? l - n : n - l) < (m > p ? m - p : p - m)) {
                if (h = l = 0, b < k ? (l = b, h = k) : (l = k, h = b), s < l || s > h)return !1
            } else if (a < h ? l = a : (l = h, h = a), q < l || q > h)return !1;
            r.x = q;
            r.y = s;
            return !0
        }
        var s = (a + c) / 2, u = (b + d) / 2;
        c = (c + e) / 2;
        d = (d + g) / 2;
        e = (e + h) / 2;
        g = (g + k) / 2;
        var t = (s + c) / 2, z = (u + d) / 2;
        c = (c + e) / 2;
        d = (d + g) / 2;
        var w = (t + c) / 2, B = (z + d) / 2,
            A = (n - l) * (n - l) + (p - m) * (p - m), O = !1;
        He(a, b, s, u, t, z, w, B, l, m, n, p, q, r) && (b = (r.x - l) * (r.x - l) + (r.y - m) * (r.y - m), b < A && (A = b, O = !0));
        a = r.x;
        s = r.y;
        He(w, B, c, d, e, g, h, k, l, m, n, p, q, r) && (b = (r.x - l) * (r.x - l) + (r.y - m) * (r.y - m), b < A ? O = !0 : (r.x = a, r.y = s));
        return O
    }

    function Ie(a, b, c, d, e, g, h, k, l, m, n, p, q) {
        var r = 0;
        0 >= q && (q = 1E-6);
        if (se(a, b, h, k, q, c, d) && se(a, b, h, k, q, e, g)) {
            q = (a - h) * (m - p) - (b - k) * (l - n);
            if (0 === q)return r;
            var s = ((a * k - b * h) * (l - n) - (a - h) * (l * p - m * n)) / q, u = ((a * k - b * h) * (m - p) - (b - k) * (l * p - m * n)) / q;
            if (s >= n)return r;
            if ((l > n ? l - n : n - l) < (m > p ? m - p : p - m)) {
                if (a = l = 0, b < k ? (l = b, a = k) : (l = k, a = b), u < l || u > a)return r
            } else if (a < h ? (l = a, a = h) : l = h, s < l || s > a)return r;
            0 < q ? r++ : 0 > q && r--
        } else {
            var s = (a + c) / 2, u = (b + d) / 2, t = (c + e) / 2, z = (d + g) / 2;
            e = (e + h) / 2;
            g = (g + k) / 2;
            d = (s + t) / 2;
            c = (u + z) / 2;
            var t = (t + e) / 2, z = (z + g) / 2,
                w = (d + t) / 2, B = (c + z) / 2, r = r + Ie(a, b, s, u, d, c, w, B, l, m, n, p, q), r = r + Ie(w, B, t, z, e, g, h, k, l, m, n, p, q)
        }
        return r
    }

    function eb(a, b, c, d, e, g, h) {
        if (zb(a, c)) {
            var k = 0;
            c = 0;
            b < d ? (k = b, c = d) : (k = d, c = b);
            d = g;
            if (d < k)return h.x = a, h.y = k, !1;
            if (d > c)return h.x = a, h.y = c, !1;
            h.x = a;
            h.y = d;
            return !0
        }
        if (zb(b, d)) {
            a < c ? k = a : (k = c, c = a);
            d = e;
            if (d < k)return h.x = k, h.y = b, !1;
            if (d > c)return h.x = c, h.y = b, !1;
            h.x = d;
            h.y = b;
            return !0
        }
        k = ((a - e) * (a - c) + (b - g) * (b - d)) / ((c - a) * (c - a) + (d - b) * (d - b));
        if (-5E-6 > k)return h.x = a, h.y = b, !1;
        if (1.000005 < k)return h.x = c, h.y = d, !1;
        h.x = a + k * (c - a);
        h.y = b + k * (d - b);
        return !0
    }

    function Je(a, b, c, d, e, g, h, k, l) {
        if (ab(a, c) && ab(b, d))return l.x = a, l.y = b, !1;
        if (zb(e, h)) {
            if (zb(a, c))return eb(a, b, c, d, e, g, l), !1;
            g = (d - b) / (c - a) * (e - a) + b;
            return eb(a, b, c, d, e, g, l)
        }
        k = (k - g) / (h - e);
        if (zb(a, c)) {
            g = k * (a - e) + g;
            c = h = 0;
            b < d ? (h = b, c = d) : (h = d, c = b);
            if (g < h)return l.x = a, l.y = h, !1;
            if (g > c)return l.x = a, l.y = c, !1;
            l.x = a;
            l.y = g;
            return !0
        }
        h = (d - b) / (c - a);
        if (zb(k, h))return eb(a, b, c, d, e, g, l), !1;
        e = (h * a - k * e + g - b) / (h - k);
        if (zb(h, 0)) {
            a < c ? h = a : (h = c, c = a);
            if (e < h)return l.x = h, l.y = b, !1;
            if (e > c)return l.x = c, l.y = b, !1;
            l.x = e;
            l.y = b;
            return !0
        }
        g =
            h * (e - a) + b;
        return eb(a, b, c, d, e, g, l)
    }

    function Ke(a, b, c, d, e, g, h, k, l) {
        var m = 1E21, n = a, p = b;
        if (Je(a, b, a, d, e, g, h, k, l)) {
            var q = (l.x - e) * (l.x - e) + (l.y - g) * (l.y - g);
            q < m && (m = q, n = l.x, p = l.y)
        }
        Je(c, b, c, d, e, g, h, k, l) && (q = (l.x - e) * (l.x - e) + (l.y - g) * (l.y - g), q < m && (m = q, n = l.x, p = l.y));
        Je(a, b, c, b, e, g, h, k, l) && (q = (l.x - e) * (l.x - e) + (l.y - g) * (l.y - g), q < m && (m = q, n = l.x, p = l.y));
        Je(a, d, c, d, e, g, h, k, l) && (q = (l.x - e) * (l.x - e) + (l.y - g) * (l.y - g), q < m && (m = q, n = l.x, p = l.y));
        l.x = n;
        l.y = p;
        return 1E21 > m
    }

    function Re(a, b, c, d, e, g, h, k, l) {
        c = a - c;
        var m = e - h, n = h = 0;
        0 === c || 0 === m ? 0 === c ? (k = (g - k) / m, h = a, n = k * h + (g - k * e)) : (d = (b - d) / c, h = e, n = d * h + (b - d * a)) : (d = (b - d) / c, k = (g - k) / m, a = b - d * a, h = (g - k * e - a) / (d - k), n = d * h + a);
        l.n(h, n);
        return l
    }

    function Se(a, b, c) {
        var d = b.x, e = b.y, g = c.x, h = c.y, k = a.left, l = a.right, m = a.top, n = a.bottom;
        return d === g ? (g = a = 0, e < h ? (a = e, g = h) : (a = h, g = e), k <= d && d <= l && a <= n && g >= m) : e === h ? (d < g ? a = d : (a = g, g = d), m <= e && e <= n && a <= l && g >= k) : a.Pa(b) || a.Pa(c) || Te(k, m, l, m, d, e, g, h) || Te(l, m, l, n, d, e, g, h) || Te(l, n, k, n, d, e, g, h) || Te(k, n, k, m, d, e, g, h) ? !0 : !1
    }

    function Te(a, b, c, d, e, g, h, k) {
        return 0 >= Ue(a, b, c, d, e, g) * Ue(a, b, c, d, h, k) && 0 >= Ue(e, g, h, k, a, b) * Ue(e, g, h, k, c, d)
    }

    function Ue(a, b, c, d, e, g) {
        c -= a;
        d -= b;
        a = e - a;
        b = g - b;
        g = a * d - b * c;
        0 === g && (g = a * c + b * d, 0 < g && (g = (a - c) * c + (b - d) * d, 0 > g && (g = 0)));
        return 0 > g ? -1 : 0 < g ? 1 : 0
    }

    function Ve(a) {
        0 > a && (a += 360);
        360 <= a && (a -= 360);
        return a
    }

    function We(a, b, c, d) {
        var e = Math.PI;
        d || (b *= e / 180, c *= e / 180);
        d = b < c ? 1 : -1;
        var g = [], h = e / 2, k = b;
        for (b = Math.min(2 * e, Math.abs(c - b)); 1E-5 < b;) {
            c = k + d * Math.min(b, h);
            var e = (c - k) / 2, l = a * Math.cos(e), m = a * Math.sin(e), n = -m, p = l * l + n * n, q = p + l * l + n * m, p = 4 / 3 * (Math.sqrt(2 * p * q) - q) / (l * m - n * l), m = l - p * n, l = n + p * l, n = -l, p = e + k, e = Math.cos(p), p = Math.sin(p);
            g.push([0 + a * Math.cos(k), 0 + a * Math.sin(k), 0 + m * e - l * p, 0 + m * p + l * e, 0 + m * e - n * p, 0 + m * p + n * e, 0 + a * Math.cos(c), 0 + a * Math.sin(c)]);
            b -= Math.abs(c - k);
            k = c
        }
        return g
    }

    function fb(a, b, c, d, e, g, h) {
        c = Math.floor((a - c) / e) * e + c;
        d = Math.floor((b - d) / g) * g + d;
        var k = c;
        c + e - a < e / 2 && (k = c + e);
        a = d;
        d + g - b < g / 2 && (a = d + g);
        h.n(k, a)
    }

    function Xe(a, b) {
        var c = Math.max(a, b), d = Math.min(a, b), e = 1, g = 1;
        do e = c % d, c = g = d, d = e; while (0 < e);
        return g
    }

    function Ye(a, b, c, d) {
        var e = 0 > c, g = 0 > d, h = 0, k = h = 0;
        a < b ? (h = 1, k = 0) : (h = 0, k = 1);
        var l = 0, m = 0, n = 0, p = 0, l = 0 === h ? a : b, n = 0 === h ? c : d;
        if (0 === h ? e : g)n = -n;
        h = k;
        m = 0 === h ? a : b;
        p = 0 === h ? c : d;
        if (0 === h ? e : g)p = -p;
        a = a = 0;
        if (0 < p)if (0 < n) {
            b = l * l;
            a = m * m;
            l *= n;
            c = m * p;
            d = -a + c;
            e = -a + Math.sqrt(l * l + c * c);
            m = d;
            for (g = 0; 9999999999 > g; ++g) {
                m = .5 * (d + e);
                if (m === d || m === e)break;
                k = l / (m + b);
                h = c / (m + a);
                k = k * k + h * h - 1;
                if (0 < k)d = m; else if (0 > k)e = m; else break
            }
            n = b * n / (m + b) - n;
            p = a * p / (m + a) - p;
            a = Math.sqrt(n * n + p * p)
        } else a = Math.abs(p - m); else p = l * l - m * m, a = l * n, a < p ? (p = a / p, a = m * Math.sqrt(Math.abs(1 -
                p * p)), n = l * p - n, a = Math.sqrt(n * n + a * a)) : a = Math.abs(n - l);
        return a
    }

    function Ze(a) {
        1 < arguments.length && D.k("Geometry constructor can take at most one optional argument, the Geometry type.");
        D.vc(this);
        this.J = !1;
        void 0 === a ? a = $e : v && D.Da(a, Ze, Ze, "constructor:type");
        this.da = a;
        this.Ib = this.Bb = this.Ic = this.yc = 0;
        this.fk = new K(af);
        this.Uv = this.fk.I;
        this.Ev = (new C).freeze();
        this.ob = !0;
        this.er = this.Ho = null;
        this.fr = NaN;
        this.xi = dc;
        this.yi = uc;
        this.kp = this.mp = NaN;
        this.Wi = sf
    }

    D.ka("Geometry", Ze);
    D.Di(Ze);
    Ze.prototype.copy = function () {
        var a = new Ze;
        a.da = this.da;
        a.yc = this.yc;
        a.Ic = this.Ic;
        a.Bb = this.Bb;
        a.Ib = this.Ib;
        for (var b = this.fk.o, c = b.length, d = a.fk, e = 0; e < c; e++) {
            var g = b[e].copy();
            d.add(g)
        }
        a.Uv = this.Uv;
        a.Ev.assign(this.Ev);
        a.ob = this.ob;
        a.Ho = this.Ho;
        a.er = this.er;
        a.fr = this.fr;
        a.xi = this.xi.V();
        a.yi = this.yi.V();
        a.mp = this.mp;
        a.kp = this.kp;
        a.Wi = this.Wi;
        return a
    };
    var tf;
    Ze.Line = tf = D.s(Ze, "Line", 0);
    var uf;
    Ze.Rectangle = uf = D.s(Ze, "Rectangle", 1);
    var vf;
    Ze.Ellipse = vf = D.s(Ze, "Ellipse", 2);
    var $e;
    Ze.Path = $e = D.s(Ze, "Path", 3);
    Ze.prototype.Oa = function () {
        this.freeze();
        Object.freeze(this);
        return this
    };
    Ze.prototype.freeze = function () {
        this.J = !0;
        var a = this.nc;
        a.freeze();
        for (var a = a.o, b = a.length, c = 0; c < b; c++)a[c].freeze();
        return this
    };
    Ze.prototype.Xa = function () {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        var a = this.nc;
        a.Xa();
        for (var a = a.o, b = a.length, c = 0; c < b; c++)a[c].Xa();
        return this
    };
    Ze.prototype.equalsApprox = Ze.prototype.Uc = function (a) {
        if (!(a instanceof Ze))return !1;
        if (this.type !== a.type)return this.type === tf && a.type === $e ? wf(this, a) : a.type === tf && this.type === $e ? wf(a, this) : !1;
        if (this.type === $e) {
            var b = this.nc.o;
            a = a.nc.o;
            var c = b.length;
            if (c !== a.length)return !1;
            for (var d = 0; d < c; d++)if (!b[d].Uc(a[d]))return !1;
            return !0
        }
        return ab(this.la, a.la) && ab(this.ja, a.ja) && ab(this.G, a.G) && ab(this.H, a.H)
    };
    function wf(a, b) {
        if (a.type !== tf || b.type !== $e)return !1;
        if (1 === b.nc.count) {
            var c = b.nc.ea(0);
            if (1 === c.Db.count && ab(a.la, c.la) && ab(a.ja, c.ja) && (c = c.Db.ea(0), c.type === xf && ab(a.G, c.G) && ab(a.H, c.H)))return !0
        }
        return !1
    }

    var yf;
    Ze.stringify = yf = function (a) {
        return a.toString()
    };
    Ze.prototype.qc = function (a) {
        a.Oe === Ze ? this.type = a : D.Xj(this, a)
    };
    Ze.prototype.toString = function (a) {
        void 0 === a && (a = -1);
        switch (this.type) {
            case tf:
                return 0 > a ? "M" + this.la.toString() + " " + this.ja.toString() + "L" + this.G.toString() + " " + this.H.toString() : "M" + this.la.toFixed(a) + " " + this.ja.toFixed(a) + "L" + this.G.toFixed(a) + " " + this.H.toFixed(a);
            case uf:
                var b = new C(this.la, this.ja, 0, 0);
                b.nH(this.G, this.H, 0, 0);
                return 0 > a ? "M" + b.x.toString() + " " + b.y.toString() + "H" + b.right.toString() + "V" + b.bottom.toString() + "H" + b.left.toString() + "z" : "M" + b.x.toFixed(a) + " " + b.y.toFixed(a) + "H" + b.right.toFixed(a) +
                "V" + b.bottom.toFixed(a) + "H" + b.left.toFixed(a) + "z";
            case vf:
                b = new C(this.la, this.ja, 0, 0);
                b.nH(this.G, this.H, 0, 0);
                if (0 > a) {
                    var c = b.left.toString() + " " + (b.y + b.height / 2).toString(), d = b.right.toString() + " " + (b.y + b.height / 2).toString();
                    return "M" + c + "A" + (b.width / 2).toString() + " " + (b.height / 2).toString() + " 0 0 1 " + d + "A" + (b.width / 2).toString() + " " + (b.height / 2).toString() + " 0 0 1 " + c
                }
                c = b.left.toFixed(a) + " " + (b.y + b.height / 2).toFixed(a);
                d = b.right.toFixed(a) + " " + (b.y + b.height / 2).toFixed(a);
                return "M" + c + "A" + (b.width /
                    2).toFixed(a) + " " + (b.height / 2).toFixed(a) + " 0 0 1 " + d + "A" + (b.width / 2).toFixed(a) + " " + (b.height / 2).toFixed(a) + " 0 0 1 " + c;
            case $e:
                for (var b = "", c = this.nc.o, d = c.length, e = 0; e < d; e++) {
                    var g = c[e];
                    0 < e && (b += " x ");
                    g.Au && (b += "F ");
                    b += g.toString(a)
                }
                return b;
            default:
                return this.type.toString()
        }
    };
    Ze.fillPath = function (a) {
        "string" !== typeof a && D.jc(a, "string", Ze, "fillPath:str");
        a = a.split(/[Xx]/);
        for (var b = a.length, c = "", d = 0; d < b; d++)var e = a[d], c = null !== e.match(/[Ff]/) ? 0 === d ? c + e : c + ("X" + (" " === e[0] ? "" : " ") + e) : c + ((0 === d ? "" : "X ") + "F" + (" " === e[0] ? "" : " ") + e);
        return c
    };
    var zf;
    Ze.parse = zf = function (a, b) {
        function c() {
            return m >= u - 1 ? !0 : null !== l[m + 1].match(/[A-Za-z]/)
        }

        function d() {
            m++;
            return l[m]
        }

        function e() {
            var a = new N(parseFloat(d()), parseFloat(d()));
            n === n.toLowerCase() && (a.x = s.x + a.x, a.y = s.y + a.y);
            return a
        }

        function g() {
            return s = e()
        }

        function h() {
            return r = e()
        }

        function k() {
            return "c" !== p.toLowerCase() && "s" !== p.toLowerCase() ? s : new N(2 * s.x - r.x, 2 * s.y - r.y)
        }

        void 0 === b && (b = !1);
        "string" !== typeof a && D.jc(a, "string", Ze, "parse:str");
        a = a.replace(/,/gm, " ");
        a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,
            "$1 $2");
        a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm, "$1 $2");
        a = a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm, "$1 $2");
        a = a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm, "$1 $2");
        a = a.replace(/([0-9])([+\-])/gm, "$1 $2");
        a = a.replace(/(\.[0-9]*)(\.)/gm, "$1 $2");
        a = a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm, "$1 $3 $4 ");
        a = a.replace(/[\s\r\t\n]+/gm, " ");
        a = a.replace(/^\s+|\s+$/g, "");
        for (var l = a.split(" "), m = -1, n = "", p = "", q = new N(0, 0), r = new N(0, 0), s = new N(0,
            0), u = l.length, t = D.v(), z = !1, w = !1, B = !0, A = null; !(m >= u - 1);)if (p = n, n = d(), "" !== n)switch (n.toUpperCase()) {
            case "X":
                B = !0;
                w = z = !1;
                break;
            case "M":
                A = g();
                null === t.ec || !0 === B ? (T(t, A.x, A.y, z, !1, !w), B = !1) : t.moveTo(A.x, A.y);
                for (q = s; !c();)A = g(), t.lineTo(A.x, A.y);
                break;
            case "L":
                for (; !c();)A = g(), t.lineTo(A.x, A.y);
                break;
            case "H":
                for (; !c();)s = A = new N((n === n.toLowerCase() ? s.x : 0) + parseFloat(d()), s.y), t.lineTo(s.x, s.y);
                break;
            case "V":
                for (; !c();)s = A = new N(s.x, (n === n.toLowerCase() ? s.y : 0) + parseFloat(d())), t.lineTo(s.x, s.y);
                break;
            case "C":
                for (; !c();) {
                    var O = e(), H = h(), A = g();
                    U(t, O.x, O.y, H.x, H.y, A.x, A.y)
                }
                break;
            case "S":
                for (; !c();)O = k(), H = h(), A = g(), U(t, O.x, O.y, H.x, H.y, A.x, A.y);
                break;
            case "Q":
                for (; !c();)H = h(), A = g(), Af(t, H.x, H.y, A.x, A.y);
                break;
            case "T":
                for (; !c();)r = H = k(), A = g(), Af(t, H.x, H.y, A.x, A.y);
                break;
            case "B":
                for (; !c();) {
                    var A = parseFloat(d()), O = parseFloat(d()), H = parseFloat(d()), S = parseFloat(d()), Y = parseFloat(d()), R = Y, da = !1;
                    c() || (R = parseFloat(d()), c() || (da = 0 !== parseFloat(d())));
                    n === n.toLowerCase() && (H += s.x, S += s.y);
                    t.arcTo(A,
                        O, H, S, Y, R, da)
                }
                break;
            case "A":
                for (; !c();)O = Math.abs(parseFloat(d())), H = Math.abs(parseFloat(d())), S = parseFloat(d()), Y = !!parseFloat(d()), R = !!parseFloat(d()), A = g(), Bf(t, O, H, S, Y, R, A.x, A.y);
                break;
            case "Z":
                A = t.q.nc.o[t.q.nc.length - 1];
                W(t);
                s = q;
                break;
            case "F":
                A = "";
                for (O = 1; l[m + O];)if (null !== l[m + O].match(/[Uu]/))O++; else if (null === l[m + O].match(/[A-Za-z]/))O++; else {
                    A = l[m + O];
                    break
                }
                A.match(/[Mm]/) ? z = !0 : Cf(t);
                break;
            case "U":
                A = "";
                for (O = 1; l[m + O];)if (null !== l[m + O].match(/[Ff]/))O++; else if (null === l[m + O].match(/[A-Za-z]/))O++;
                else {
                    A = l[m + O];
                    break
                }
                A.match(/[Mm]/) ? w = !0 : t.kb(!1)
        }
        q = t.q;
        D.u(t);
        if (b)for (t = q.nc.j; t.next();)A = t.value, A.Au = !0;
        return q
    };
    function Df(a, b) {
        for (var c = a.length, d = D.P(), e = 0; e < c; e++) {
            var g = a[e];
            d.x = g[0];
            d.y = g[1];
            b.wb(d);
            g[0] = d.x;
            g[1] = d.y;
            d.x = g[2];
            d.y = g[3];
            b.wb(d);
            g[2] = d.x;
            g[3] = d.y;
            d.x = g[4];
            d.y = g[5];
            b.wb(d);
            g[4] = d.x;
            g[5] = d.y;
            d.x = g[6];
            d.y = g[7];
            b.wb(d);
            g[6] = d.x;
            g[7] = d.y
        }
        D.A(d)
    }

    Ze.prototype.Zx = function () {
        if (this.ob || this.Uv !== this.nc.I)return !0;
        for (var a = this.nc.o, b = a.length, c = 0; c < b; c++)if (a[c].Zx())return !0;
        return !1
    };
    Ze.prototype.Qy = function () {
        this.ob = !1;
        this.er = this.Ho = null;
        this.fr = NaN;
        this.Uv = this.nc.I;
        for (var a = this.nc.o, b = a.length, c = 0; c < b; c++)a[c].Qy()
    };
    Ze.prototype.Mh = function () {
        var a = this.Ev;
        a.Xa();
        isNaN(this.mp) || isNaN(this.kp) ? a.n(0, 0, 0, 0) : a.n(0, 0, this.mp, this.kp);
        Ef(this, a, !1);
        Rb(a, 0, 0, 0, 0);
        a.freeze()
    };
    Ze.prototype.computeBoundsWithoutOrigin = Ze.prototype.jI = function () {
        var a = new C;
        Ef(this, a, !0);
        return a
    };
    function Ef(a, b, c) {
        switch (a.type) {
            case tf:
            case uf:
            case vf:
                c ? b.n(a.yc, a.Ic, 0, 0) : Rb(b, a.yc, a.Ic, 0, 0);
                Rb(b, a.Bb, a.Ib, 0, 0);
                break;
            case $e:
                var d = a.nc;
                a = d.o;
                for (var d = d.length, e = 0; e < d; e++) {
                    var g = a[e];
                    c && 0 === e ? b.n(g.la, g.ja, 0, 0) : Rb(b, g.la, g.ja, 0, 0);
                    for (var h = g.Db.o, k = h.length, l = g.la, m = g.ja, n = 0; n < k; n++) {
                        var p = h[n];
                        switch (p.type) {
                            case xf:
                            case Ff:
                                l = p.G;
                                m = p.H;
                                Rb(b, l, m, 0, 0);
                                break;
                            case Gf:
                                Be(l, m, p.Cc, p.Zc, p.Uh, p.Vh, p.G, p.H, .5, b);
                                l = p.G;
                                m = p.H;
                                break;
                            case Rf:
                                Fe(l, m, p.Cc, p.Zc, p.G, p.H, .5, b);
                                l = p.G;
                                m = p.H;
                                break;
                            case Sf:
                            case Tf:
                                var q =
                                    p.type === Sf ? Uf(p, g) : Vf(p, g, l, m), r = q.length;
                                if (0 === r) {
                                    l = p.oa;
                                    m = p.va;
                                    Rb(b, l, m, 0, 0);
                                    break
                                }
                                for (var p = null, s = 0; s < r; s++)p = q[s], Be(p[0], p[1], p[2], p[3], p[4], p[5], p[6], p[7], .5, b);
                                null !== p && (l = p[6], m = p[7]);
                                break;
                            default:
                                D.k("Unknown Segment type: " + p.type)
                        }
                    }
                }
                break;
            default:
                D.k("Unknown Geometry type: " + a.type)
        }
    }

    Ze.prototype.normalize = Ze.prototype.normalize = function () {
        this.J && D.pa(this);
        var a = this.jI();
        this.offset(-a.x, -a.y);
        return new N(-a.x, -a.y)
    };
    Ze.prototype.offset = Ze.prototype.offset = function (a, b) {
        this.J && D.pa(this);
        v && (D.p(a, Ze, "offset"), D.p(b, Ze, "offset"));
        this.transform(1, 0, 0, 1, a, b);
        return this
    };
    Ze.prototype.scale = Ze.prototype.scale = function (a, b) {
        this.J && D.pa(this);
        v && (D.p(a, Ze, "scale:x"), D.p(b, Ze, "scale:y"), 0 === a && D.ua(a, "scale must be non-zero", Ze, "scale:x"), 0 === b && D.ua(b, "scale must be non-zero", Ze, "scale:y"));
        this.transform(a, 0, 0, b, 0, 0);
        return this
    };
    Ze.prototype.rotate = Ze.prototype.rotate = function (a, b, c) {
        this.J && D.pa(this);
        void 0 === b && (b = 0);
        void 0 === c && (c = 0);
        v && (D.p(a, Ze, "rotate:angle"), D.p(b, Ze, "rotate:x"), D.p(c, Ze, "rotate:y"));
        var d = D.Sf();
        d.reset();
        d.rotate(a, b, c);
        this.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
        D.Je(d);
        return this
    };
    Ze.prototype.transform = Ze.prototype.transform = function (a, b, c, d, e, g) {
        var h = 0, k = 0;
        switch (this.type) {
            case tf:
            case uf:
            case vf:
                h = this.yc;
                k = this.Ic;
                this.yc = h * a + k * c + e;
                this.Ic = h * b + k * d + g;
                h = this.Bb;
                k = this.Ib;
                this.Bb = h * a + k * c + e;
                this.Ib = h * b + k * d + g;
                break;
            case $e:
                for (var l = this.nc.o, m = l.length, n = 0; n < m; n++) {
                    var p = l[n], h = p.la, k = p.ja;
                    p.la = h * a + k * c + e;
                    p.ja = h * b + k * d + g;
                    for (var p = p.Db.o, q = p.length, r = 0; r < q; r++) {
                        var s = p[r];
                        switch (s.type) {
                            case xf:
                            case Ff:
                                h = s.G;
                                k = s.H;
                                s.G = h * a + k * c + e;
                                s.H = h * b + k * d + g;
                                break;
                            case Gf:
                                h = s.Cc;
                                k = s.Zc;
                                s.Cc =
                                    h * a + k * c + e;
                                s.Zc = h * b + k * d + g;
                                h = s.Uh;
                                k = s.Vh;
                                s.Uh = h * a + k * c + e;
                                s.Vh = h * b + k * d + g;
                                h = s.G;
                                k = s.H;
                                s.G = h * a + k * c + e;
                                s.H = h * b + k * d + g;
                                break;
                            case Rf:
                                h = s.Cc;
                                k = s.Zc;
                                s.Cc = h * a + k * c + e;
                                s.Zc = h * b + k * d + g;
                                h = s.G;
                                k = s.H;
                                s.G = h * a + k * c + e;
                                s.H = h * b + k * d + g;
                                break;
                            case Sf:
                                h = s.oa;
                                k = s.va;
                                s.oa = h * a + k * c + e;
                                s.va = h * b + k * d + g;
                                0 !== b && (h = 180 * Math.atan2(b, a) / Math.PI, 0 > h && (h += 360), s.Me += h);
                                0 > a && (s.Me = 180 - s.Me, s.zf = -s.zf);
                                0 > d && (s.Me = -s.Me, s.zf = -s.zf);
                                s.radiusX *= Math.sqrt(a * a + c * c);
                                void 0 !== s.radiusY && (s.radiusY *= Math.sqrt(b * b + d * d));
                                break;
                            case Tf:
                                h = s.G;
                                k = s.H;
                                s.G = h *
                                    a + k * c + e;
                                s.H = h * b + k * d + g;
                                0 !== b && (h = 180 * Math.atan2(b, a) / Math.PI, 0 > h && (h += 360), s.Zj += h);
                                0 > a && (s.Zj = 180 - s.Zj, s.um = !s.um);
                                0 > d && (s.Zj = -s.Zj, s.um = !s.um);
                                s.radiusX *= Math.sqrt(a * a + c * c);
                                s.radiusY *= Math.sqrt(b * b + d * d);
                                break;
                            default:
                                D.k("Unknown Segment type: " + s.type)
                        }
                    }
                }
        }
        this.ob = !0;
        return this
    };
    Ze.prototype.Pa = function (a, b, c, d) {
        var e = a.x, g = a.y, h = this.pb.x - 20;
        a = a.y;
        for (var k = 0, l = 0, m = 0, n = 0, p = 0, q = 0, r = this.nc.o, s = r.length, u = 0; u < s; u++) {
            var t = r[u];
            if (t.Au) {
                if (c && t.Pa(e, g, b))return !0;
                for (var z = t.Db, l = t.la, m = t.ja, w = l, B = m, A = z.o, O = 0; O <= z.length; O++) {
                    var H, S;
                    O !== z.length ? (H = A[O], S = H.type, p = H.G, q = H.H) : (S = xf, p = w, q = B);
                    switch (S) {
                        case Ff:
                            n = Wf(e, g, h, a, l, m, w, B);
                            if (isNaN(n))return !0;
                            k += n;
                            w = p;
                            B = q;
                            break;
                        case xf:
                            n = Wf(e, g, h, a, l, m, p, q);
                            if (isNaN(n))return !0;
                            k += n;
                            break;
                        case Gf:
                            n = Ie(l, m, H.Cc, H.Zc, H.Uh, H.Vh, p, q, h,
                                a, e, g, .5);
                            k += n;
                            break;
                        case Rf:
                            n = Ie(l, m, (l + 2 * H.Cc) / 3, (m + 2 * H.Zc) / 3, (2 * H.Cc + p) / 3, (2 * H.Zc + q) / 3, p, q, h, a, e, g, .5);
                            k += n;
                            break;
                        case Sf:
                        case Tf:
                            S = H.type === Sf ? Uf(H, t) : Vf(H, t, l, m);
                            var Y = S.length;
                            if (0 === Y) {
                                n = Wf(e, g, h, a, l, m, H.oa, H.va);
                                if (isNaN(n))return !0;
                                k += n;
                                break
                            }
                            for (var R = null, da = 0; da < Y; da++) {
                                R = S[da];
                                if (0 === da) {
                                    n = Wf(e, g, h, a, l, m, R[0], R[1]);
                                    if (isNaN(n))return !0;
                                    k += n
                                }
                                n = Ie(R[0], R[1], R[2], R[3], R[4], R[5], R[6], R[7], h, a, e, g, .5);
                                k += n
                            }
                            null !== R && (p = R[6], q = R[7]);
                            break;
                        default:
                            D.k("Unknown Segment type: " + H.type)
                    }
                    l = p;
                    m =
                        q
                }
                if (0 !== k)return !0;
                k = 0
            } else if (t.Pa(e, g, d ? b : b + 2))return !0
        }
        return 0 !== k
    };
    function Wf(a, b, c, d, e, g, h, k) {
        if (se(e, g, h, k, .05, a, b))return NaN;
        var l = (a - c) * (g - k);
        if (0 === l)return 0;
        var m = ((a * d - b * c) * (e - h) - (a - c) * (e * k - g * h)) / l;
        b = (a * d - b * c) * (g - k) / l;
        if (m >= a)return 0;
        if ((e > h ? e - h : h - e) < (g > k ? g - k : k - g)) {
            if (e = a = 0, g < k ? (a = g, e = k) : (a = k, e = g), b < a || b > e)return 0
        } else if (e < h ? (a = e, e = h) : a = h, m < a || m > e)return 0;
        return 0 < l ? 1 : -1
    }

    function Xf(a, b, c, d) {
        a = a.nc.o;
        for (var e = a.length, g = 0; g < e; g++)if (a[g].Pa(b, c, d))return !0;
        return !1
    }

    Ze.prototype.getPointAlongPath = Ze.prototype.UI = function (a, b) {
        0 > a ? a = 0 : 1 < a && (a = 1);
        void 0 === b && (b = new N);
        if (this.type === tf)return b.n(this.la + a * (this.G - this.la), this.ja + a * (this.H - this.ja)), b;
        for (var c = this.Px, d = this.lu, e = c.length, g = this.mu * a, h = 0, k = 0; k < e; k++)for (var l = d[k], m = l.length, n = 0; n < m; n++) {
            var p = l[n];
            if (h + p >= g)return d = (g - h) / p, c = c[k], k = c[2 * n], e = c[2 * n + 1], b.n(k + (c[2 * n + 2] - k) * d, e + (c[2 * n + 3] - e) * d), b;
            h += p
        }
        b.n(NaN, NaN);
        return b
    };
    Ze.prototype.getAngleAlongPath = Ze.prototype.BF = function (a) {
        0 > a ? a = 0 : 1 < a && (a = 1);
        var b = 0;
        if (this.type === tf)return b = 180 * Math.atan2(this.H - this.ja, this.G - this.la) / Math.PI;
        for (var b = this.Px, c = this.lu, d = b.length, e = this.mu * a, g = 0, h = 0; h < d; h++) {
            var k = c[h], l = k.length;
            for (a = 0; a < l; a++) {
                var m = k[a];
                if (g + m >= e)return b = b[h], b = 180 * Math.atan2(b[2 * a + 3] - b[2 * a + 1], b[2 * a + 2] - b[2 * a]) / Math.PI;
                g += m
            }
        }
        return NaN
    };
    Ze.prototype.getFractionForPoint = Ze.prototype.QI = function (a) {
        if (this.type === tf) {
            var b = this.la, c = this.ja, d = this.G, e = this.H;
            if (b !== d || c !== e) {
                var g = a.x;
                a = a.y;
                var h = 0, k = 0;
                return b === d ? (c < e ? (h = c, k = e) : (h = e, k = c), a <= h ? h === c ? 0 : 1 : a >= k ? k === c ? 0 : 1 : Math.abs(a - c) / (k - h)) : c === e ? (b < d ? (h = b, k = d) : (h = d, k = b), g <= h ? h === b ? 0 : 1 : g >= k ? k === b ? 0 : 1 : Math.abs(g - b) / (k - h)) : ((g - b) * (g - b) + (a - c) * (a - c)) / ((d - b) * (d - b) + (e - c) * (e - c))
            }
        } else if (this.type === uf) {
            if (b = this.la, c = this.ja, d = this.G, e = this.H, b !== d || c !== e) {
                var h = d - b, k = e - c, l = 2 * h + 2 * k, g = a.x;
                a = a.y;
                g = Math.min(Math.max(g, b), d);
                a = Math.min(Math.max(a, c), e);
                var b = Math.abs(g - b), d = Math.abs(g - d), c = Math.abs(a - c), e = Math.abs(a - e), m = Math.min(b, d, c, e);
                if (m === c)return g / l;
                if (m === d)return (h + a) / l;
                if (m === e)return (2 * h + k - g) / l;
                if (m === b)return (2 * h + 2 * k - a) / l
            }
        } else {
            for (var e = this.Px, h = this.lu, k = this.mu, l = D.P(), c = Infinity, b = d = 0, g = e.length, n = m = 0, p = 0; p < g; p++)for (var q = e[p], r = h[p], s = q.length, u = 0; u < s; u += 2) {
                var t = q[u], z = q[u + 1];
                if (0 !== u) {
                    eb(m, n, t, z, a.x, a.y, l);
                    var w = (l.x - a.x) * (l.x - a.x) + (l.y - a.y) * (l.y - a.y);
                    w < c && (c = w,
                        d = b, d += Math.sqrt((l.x - m) * (l.x - m) + (l.y - n) * (l.y - n)));
                    b += r[(u - 2) / 2]
                }
                m = t;
                n = z
            }
            D.A(l);
            a = d / k;
            return 0 > a ? 0 : 1 < a ? 1 : a
        }
        return 0
    };
    D.w(Ze, {Px: null}, function () {
        Yf(this);
        return this.Ho
    });
    function Yf(a) {
        if (null === a.Ho) {
            a.Zx() && a.Qy();
            var b = a.Ho = [], c = a.er = [], d = [], e = [];
            if (a.type === tf)d.push(a.la), d.push(a.ja), d.push(a.G), d.push(a.H), b.push(d), e.push(Math.sqrt((a.la - a.G) * (a.la - a.G) + (a.ja - a.H) * (a.ja - a.H))), c.push(e); else if (a.type === uf)d.push(a.la), d.push(a.ja), d.push(a.G), d.push(a.ja), d.push(a.G), d.push(a.H), d.push(a.la), d.push(a.H), d.push(a.la), d.push(a.ja), b.push(d), e.push(Math.abs(a.la - a.G)), e.push(Math.abs(a.ja - a.H)), e.push(Math.abs(a.la - a.G)), e.push(Math.abs(a.ja - a.H)), c.push(e);
            else if (a.type === vf) {
                var g = new af;
                g.la = a.G;
                g.ja = (a.ja + a.H) / 2;
                var h = new Zf(Sf);
                h.Me = 0;
                h.zf = 360;
                h.oa = (a.la + a.G) / 2;
                h.va = (a.ja + a.H) / 2;
                h.radiusX = Math.abs(a.la - a.G) / 2;
                h.radiusY = Math.abs(a.ja - a.H) / 2;
                g.add(h);
                a = Uf(h, g);
                e = a.length;
                if (0 === e)d.push(h.oa), d.push(h.va); else for (var h = g.la, g = g.ja, k = 0; k < e; k++) {
                    var l = a[k];
                    Ce(h, g, l[2], l[3], l[4], l[5], l[6], l[7], .5, d);
                    h = l[6];
                    g = l[7]
                }
                b.push(d);
                c.push($f(d))
            } else for (var m = a.nc.j; m.next();) {
                var n = m.value, d = [];
                d.push(n.la);
                d.push(n.ja);
                for (var h = n.la, g = n.ja, p = h, q = g, r = n.Db.o,
                         s = r.length, u = 0; u < s; u++) {
                    var t = r[u];
                    switch (t.da) {
                        case Ff:
                            4 <= d.length && (b.push(d), c.push($f(d)));
                            d = [];
                            d.push(t.G);
                            d.push(t.H);
                            h = t.G;
                            g = t.H;
                            p = h;
                            q = g;
                            break;
                        case xf:
                            d.push(t.G);
                            d.push(t.H);
                            h = t.G;
                            g = t.H;
                            break;
                        case Gf:
                            Ce(h, g, t.Rd, t.ff, t.Eh, t.Pg, t.Bb, t.Ib, .5, d);
                            h = t.G;
                            g = t.H;
                            break;
                        case Rf:
                            Ge(h, g, t.Rd, t.ff, t.Bb, t.Ib, .5, d);
                            h = t.G;
                            g = t.H;
                            break;
                        case Sf:
                            a = Uf(t, n);
                            e = a.length;
                            if (0 === e) {
                                d.push(t.oa);
                                d.push(t.va);
                                h = t.oa;
                                g = t.va;
                                break
                            }
                            for (k = 0; k < e; k++)l = a[k], Ce(h, g, l[2], l[3], l[4], l[5], l[6], l[7], .5, d), h = l[6], g = l[7];
                            break;
                        case Tf:
                            a =
                                Vf(t, n, h, g);
                            e = a.length;
                            if (0 === e) {
                                d.push(t.oa);
                                d.push(t.va);
                                h = t.oa;
                                g = t.va;
                                break
                            }
                            for (k = 0; k < e; k++)l = a[k], Ce(h, g, l[2], l[3], l[4], l[5], l[6], l[7], .5, d), h = l[6], g = l[7];
                            break;
                        default:
                            D.k("Segment not of valid type: " + t.da)
                    }
                    t.ii && (d.push(p), d.push(q))
                }
                4 <= d.length && (b.push(d), c.push($f(d)))
            }
        }
    }

    D.w(Ze, {lu: null}, function () {
        Yf(this);
        return this.er
    });
    D.w(Ze, {mu: null}, function () {
        var a = this.fr;
        if (isNaN(a)) {
            if (this.type === tf)var a = Math.abs(this.G - this.la), b = Math.abs(this.H - this.ja), a = Math.sqrt(a * a + b * b); else if (this.type === uf)a = Math.abs(this.G - this.la), b = Math.abs(this.H - this.ja), a = 2 * a + 2 * b; else for (var b = this.lu, c = b.length, d = a = 0; d < c; d++)for (var e = b[d], g = e.length, h = 0; h < g; h++)a += e[h];
            this.fr = a
        }
        return a
    });
    function $f(a) {
        for (var b = [], c = 0, d = 0, e = a.length, g = 0; g < e; g += 2) {
            var h = a[g], k = a[g + 1];
            0 !== g && (c = Math.sqrt(jb(c, d, h, k)), b.push(c));
            c = h;
            d = k
        }
        return b
    }

    D.defineProperty(Ze, {type: "type"}, function () {
        return this.da
    }, function (a) {
        this.da !== a && (v && D.Da(a, Ze, Ze, "type"), this.J && D.pa(this, a), this.da = a, this.ob = !0)
    });
    D.defineProperty(Ze, {la: "startX"}, function () {
        return this.yc
    }, function (a) {
        this.yc !== a && (v && D.p(a, Ze, "startX"), this.J && D.pa(this, a), this.yc = a, this.ob = !0)
    });
    D.defineProperty(Ze, {ja: "startY"}, function () {
        return this.Ic
    }, function (a) {
        this.Ic !== a && (v && D.p(a, Ze, "startY"), this.J && D.pa(this, a), this.Ic = a, this.ob = !0)
    });
    D.defineProperty(Ze, {G: "endX"}, function () {
        return this.Bb
    }, function (a) {
        this.Bb !== a && (v && D.p(a, Ze, "endX"), this.J && D.pa(this, a), this.Bb = a, this.ob = !0)
    });
    D.defineProperty(Ze, {H: "endY"}, function () {
        return this.Ib
    }, function (a) {
        this.Ib !== a && (v && D.p(a, Ze, "endY"), this.J && D.pa(this, a), this.Ib = a, this.ob = !0)
    });
    D.defineProperty(Ze, {nc: "figures"}, function () {
        return this.fk
    }, function (a) {
        this.fk !== a && (v && D.l(a, K, Ze, "figures"), this.J && D.pa(this, a), this.fk = a, this.ob = !0)
    });
    Ze.prototype.add = Ze.prototype.add = function (a) {
        this.fk.add(a);
        return this
    };
    Ze.prototype.setSpots = function (a, b, c, d, e, g, h, k) {
        this.J && D.pa(this);
        this.xi = (new Q(a, b, e, g)).freeze();
        this.yi = (new Q(c, d, h, k)).freeze();
        return this
    };
    D.defineProperty(Ze, {C: "spot1"}, function () {
        return this.xi
    }, function (a) {
        v && D.l(a, Q, Ze, "spot1");
        this.J && D.pa(this, a);
        this.xi = a.V()
    });
    D.defineProperty(Ze, {D: "spot2"}, function () {
        return this.yi
    }, function (a) {
        v && D.l(a, Q, Ze, "spot2");
        this.J && D.pa(this, a);
        this.yi = a.V()
    });
    D.defineProperty(Ze, {me: "defaultStretch"}, function () {
        return this.Wi
    }, function (a) {
        v && D.Da(a, P, Ze, "stretch");
        this.J && D.pa(this, a);
        this.Wi = a
    });
    D.w(Ze, {pb: "bounds"}, function () {
        this.Zx() && (this.Qy(), this.Mh());
        return this.Ev
    });
    function af(a, b, c, d) {
        D.vc(this);
        this.J = !1;
        void 0 === c && (c = !0);
        this.Um = c;
        void 0 === d && (d = !0);
        this.np = d;
        void 0 !== a ? (v && D.p(a, af, "sx"), this.yc = a) : this.yc = 0;
        void 0 !== b ? (v && D.p(b, af, "sy"), this.Ic = b) : this.Ic = 0;
        this.Jp = new K(Zf);
        this.Vw = this.Jp.I;
        this.ob = !0
    }

    D.ka("PathFigure", af);
    D.Di(af);
    af.prototype.copy = function () {
        var a = new af;
        a.Um = this.Um;
        a.np = this.np;
        a.yc = this.yc;
        a.Ic = this.Ic;
        for (var b = this.Jp.o, c = b.length, d = a.Jp, e = 0; e < c; e++) {
            var g = b[e].copy();
            d.add(g)
        }
        a.Vw = this.Vw;
        a.ob = this.ob;
        return a
    };
    af.prototype.equalsApprox = af.prototype.Uc = function (a) {
        if (!(a instanceof af && ab(this.la, a.la) && ab(this.ja, a.ja)))return !1;
        var b = this.Db.o;
        a = a.Db.o;
        var c = b.length;
        if (c !== a.length)return !1;
        for (var d = 0; d < c; d++)if (!b[d].Uc(a[d]))return !1;
        return !0
    };
    f = af.prototype;
    f.toString = function (a) {
        void 0 === a && (a = -1);
        for (var b = 0 > a ? "M" + this.la.toString() + " " + this.ja.toString() : "M" + this.la.toFixed(a) + " " + this.ja.toFixed(a), c = this.Db.o, d = c.length, e = 0; e < d; e++)b += " " + c[e].toString(a);
        return b
    };
    f.freeze = function () {
        this.J = !0;
        var a = this.Db;
        a.freeze();
        for (var b = a.o, a = a.length, c = 0; c < a; c++)b[c].freeze();
        return this
    };
    f.Xa = function () {
        this.J = !1;
        var a = this.Db;
        a.Xa();
        for (var a = a.o, b = a.length, c = 0; c < b; c++)a[c].Xa();
        return this
    };
    f.Zx = function () {
        if (this.ob)return !0;
        var a = this.Db;
        if (this.Vw !== a.I)return !0;
        for (var a = a.o, b = a.length, c = 0; c < b; c++)if (a[c].ob)return !0;
        return !1
    };
    f.Qy = function () {
        this.ob = !1;
        var a = this.Db;
        this.Vw = a.I;
        for (var a = a.o, b = a.length, c = 0; c < b; c++) {
            var d = a[c];
            d.ob = !1;
            d.yg = null
        }
    };
    D.defineProperty(af, {Au: "isFilled"}, function () {
        return this.Um
    }, function (a) {
        v && D.h(a, "boolean", af, "isFilled");
        this.J && D.pa(this, a);
        this.Um = a
    });
    D.defineProperty(af, {Zk: "isShadowed"}, function () {
        return this.np
    }, function (a) {
        v && D.h(a, "boolean", af, "isShadowed");
        this.J && D.pa(this, a);
        this.np = a
    });
    D.defineProperty(af, {la: "startX"}, function () {
        return this.yc
    }, function (a) {
        v && D.p(a, af, "startX");
        this.J && D.pa(this, a);
        this.yc = a;
        this.ob = !0
    });
    D.defineProperty(af, {ja: "startY"}, function () {
        return this.Ic
    }, function (a) {
        v && D.p(a, af, "startY");
        this.J && D.pa(this, a);
        this.Ic = a;
        this.ob = !0
    });
    D.defineProperty(af, {Db: "segments"}, function () {
        return this.Jp
    }, function (a) {
        v && D.l(a, K, af, "segments");
        this.J && D.pa(this, a);
        this.Jp = a;
        this.ob = !0
    });
    af.prototype.add = af.prototype.add = function (a) {
        this.Jp.add(a);
        return this
    };
    af.prototype.Pa = function (a, b, c) {
        for (var d = this.la, e = this.ja, g = d, h = e, k = this.Db.o, l = k.length, m = 0; m < l; m++) {
            var n = k[m];
            switch (n.type) {
                case Ff:
                    g = n.G;
                    h = n.H;
                    d = n.G;
                    e = n.H;
                    break;
                case xf:
                    if (se(d, e, n.G, n.H, c, a, b))return !0;
                    d = n.G;
                    e = n.H;
                    break;
                case Gf:
                    if (Ae(d, e, n.Cc, n.Zc, n.Uh, n.Vh, n.G, n.H, .5, a, b, c))return !0;
                    d = n.G;
                    e = n.H;
                    break;
                case Rf:
                    if (Ee(d, e, n.Cc, n.Zc, n.G, n.H, .5, a, b, c))return !0;
                    d = n.G;
                    e = n.H;
                    break;
                case Sf:
                case Tf:
                    var p = n.type === Sf ? Uf(n, this) : Vf(n, this, d, e), q = p.length;
                    if (0 === q) {
                        if (se(d, e, n.oa, n.va, c, a, b))return !0;
                        d = n.oa;
                        e = n.va;
                        break
                    }
                    for (var r = null, s = 0; s < q; s++)if (r = p[s], 0 === s && se(d, e, r[0], r[1], c, a, b) || Ae(r[0], r[1], r[2], r[3], r[4], r[5], r[6], r[7], .5, a, b, c))return !0;
                    null !== r && (d = r[6], e = r[7]);
                    break;
                default:
                    D.k("Unknown Segment type: " + n.type)
            }
            if (n.Vx && (d !== g || e !== h) && se(d, e, g, h, c, a, b))return !0
        }
        return !1
    };
    function Zf(a, b, c, d, e, g, h, k) {
        D.vc(this);
        this.J = !1;
        void 0 === a ? a = xf : v && D.Da(a, Zf, Zf, "constructor:type");
        this.da = a;
        void 0 !== b ? (v && D.p(b, Zf, "ex"), this.Bb = b) : this.Bb = 0;
        void 0 !== c ? (v && D.p(c, Zf, "ey"), this.Ib = c) : this.Ib = 0;
        void 0 === d && (d = 0);
        void 0 === e && (e = 0);
        void 0 === g && (g = 0);
        void 0 === h && (h = 0);
        a === Tf ? (a = g % 360, 0 > a && (a += 360), this.Rd = a, this.ff = 0, v && D.p(d, Zf, "x1"), this.Eh = Math.max(d, 0), v && D.p(e, Zf, "y1"), this.Pg = Math.max(e, 0), this.sp = "boolean" === typeof h ? !!h : !1, this.Lo = !!k) : (v && D.p(d, Zf, "x1"), this.Rd = d, v && D.p(e,
            Zf, "y1"), this.ff = e, v && D.p(g, Zf, "x2"), a === Sf && (g = Math.max(g, 0)), this.Eh = g, "number" === typeof h ? (a === Sf && (h = Math.max(h, 0)), this.Pg = h) : this.Pg = 0, this.Lo = this.sp = !1);
        this.ii = !1;
        this.ob = !0;
        this.yg = null
    }

    D.ka("PathSegment", Zf);
    D.Di(Zf);
    Zf.prototype.copy = function () {
        var a = new Zf;
        a.da = this.da;
        a.Bb = this.Bb;
        a.Ib = this.Ib;
        a.Rd = this.Rd;
        a.ff = this.ff;
        a.Eh = this.Eh;
        a.Pg = this.Pg;
        a.sp = this.sp;
        a.Lo = this.Lo;
        a.ii = this.ii;
        a.ob = this.ob;
        return a
    };
    Zf.prototype.equalsApprox = Zf.prototype.Uc = function (a) {
        if (!(a instanceof Zf) || this.type !== a.type || this.Vx !== a.Vx)return !1;
        switch (this.type) {
            case Ff:
            case xf:
                return ab(this.G, a.G) && ab(this.H, a.H);
            case Gf:
                return ab(this.G, a.G) && ab(this.H, a.H) && ab(this.Cc, a.Cc) && ab(this.Zc, a.Zc) && ab(this.Uh, a.Uh) && ab(this.Vh, a.Vh);
            case Rf:
                return ab(this.G, a.G) && ab(this.H, a.H) && ab(this.Cc, a.Cc) && ab(this.Zc, a.Zc);
            case Sf:
                return ab(this.Me, a.Me) && ab(this.zf, a.zf) && ab(this.oa, a.oa) && ab(this.va, a.va) && ab(this.radiusX, a.radiusX) &&
                    ab(this.radiusY, a.radiusY);
            case Tf:
                return this.um === a.um && this.$x === a.$x && ab(this.Zj, a.Zj) && ab(this.G, a.G) && ab(this.H, a.H) && ab(this.radiusX, a.radiusX) && ab(this.radiusY, a.radiusY);
            default:
                return !1
        }
    };
    Zf.prototype.qc = function (a) {
        a.Oe === Zf ? this.type = a : D.Xj(this, a)
    };
    Zf.prototype.toString = function (a) {
        void 0 === a && (a = -1);
        var b = "";
        switch (this.type) {
            case Ff:
                b = 0 > a ? "M" + this.G.toString() + " " + this.H.toString() : "M" + this.G.toFixed(a) + " " + this.H.toFixed(a);
                break;
            case xf:
                b = 0 > a ? "L" + this.G.toString() + " " + this.H.toString() : "L" + this.G.toFixed(a) + " " + this.H.toFixed(a);
                break;
            case Gf:
                b = 0 > a ? "C" + this.Cc.toString() + " " + this.Zc.toString() + " " + this.Uh.toString() + " " + this.Vh.toString() + " " + this.G.toString() + " " + this.H.toString() : "C" + this.Cc.toFixed(a) + " " + this.Zc.toFixed(a) + " " + this.Uh.toFixed(a) +
                " " + this.Vh.toFixed(a) + " " + this.G.toFixed(a) + " " + this.H.toFixed(a);
                break;
            case Rf:
                b = 0 > a ? "Q" + this.Cc.toString() + " " + this.Zc.toString() + " " + this.G.toString() + " " + this.H.toString() : "Q" + this.Cc.toFixed(a) + " " + this.Zc.toFixed(a) + " " + this.G.toFixed(a) + " " + this.H.toFixed(a);
                break;
            case Sf:
                b = 0 > a ? "B" + this.Me.toString() + " " + this.zf.toString() + " " + this.oa.toString() + " " + this.va.toString() + " " + this.radiusX : "B" + this.Me.toFixed(a) + " " + this.zf.toFixed(a) + " " + this.oa.toFixed(a) + " " + this.va.toFixed(a) + " " + this.radiusX;
                break;
            case Tf:
                b = 0 > a ? "A" + this.radiusX.toString() + " " + this.radiusY.toString() + " " + this.Zj.toString() + " " + (this.$x ? 1 : 0) + " " + (this.um ? 1 : 0) + " " + this.G.toString() + " " + this.H.toString() : "A" + this.radiusX.toFixed(a) + " " + this.radiusY.toFixed(a) + " " + this.Zj.toFixed(a) + " " + (this.$x ? 1 : 0) + " " + (this.um ? 1 : 0) + " " + this.G.toFixed(a) + " " + this.H.toFixed(a);
                break;
            default:
                b = this.type.toString()
        }
        return b + (this.ii ? "z" : "")
    };
    var Ff;
    Zf.Move = Ff = D.s(Zf, "Move", 0);
    var xf;
    Zf.Line = xf = D.s(Zf, "Line", 1);
    var Gf;
    Zf.Bezier = Gf = D.s(Zf, "Bezier", 2);
    var Rf;
    Zf.QuadraticBezier = Rf = D.s(Zf, "QuadraticBezier", 3);
    var Sf;
    Zf.Arc = Sf = D.s(Zf, "Arc", 4);
    var Tf;
    Zf.SvgArc = Tf = D.s(Zf, "SvgArc", 4);
    Zf.prototype.freeze = function () {
        this.J = !0;
        return this
    };
    Zf.prototype.Xa = function () {
        this.J = !1;
        return this
    };
    Zf.prototype.close = Zf.prototype.close = function () {
        this.ii = !0;
        return this
    };
    function Uf(a, b) {
        if (null !== a.yg && !1 === b.ob)return a.yg;
        var c = a.radiusX, d = a.radiusY;
        void 0 === d && (d = c);
        if (0 === c || 0 === d)return a.yg = [], a.yg;
        var e = a.Rd, g = a.ff, h = We(c < d ? c : d, a.Me, a.Me + a.zf, !1);
        if (c !== d) {
            var k = D.Sf();
            k.reset();
            c < d ? k.scale(1, d / c) : k.scale(c / d, 1);
            Df(h, k);
            D.Je(k)
        }
        c = h.length;
        for (d = 0; d < c; d++)k = h[d], k[0] += e, k[1] += g, k[2] += e, k[3] += g, k[4] += e, k[5] += g, k[6] += e, k[7] += g;
        a.yg = h;
        return a.yg
    }

    function Vf(a, b, c, d) {
        function e(a, b, c, d) {
            return (a * d < b * c ? -1 : 1) * Math.acos((a * c + b * d) / (Math.sqrt(a * a + b * b) * Math.sqrt(c * c + d * d)))
        }

        if (null !== a.yg && !1 === b.ob)return a.yg;
        b = a.Eh;
        var g = a.Pg;
        if (0 === b || 0 === g)return a.yg = [], a.yg;
        var h = Math.PI / 180 * a.Rd, k = a.sp, l = a.Lo, m = a.Bb, n = a.Ib, p = Math.cos(h), q = Math.sin(h), r = p * (c - m) / 2 + q * (d - n) / 2, h = -q * (c - m) / 2 + p * (d - n) / 2, s = r * r / (b * b) + h * h / (g * g);
        1 < s && (b *= Math.sqrt(s), g *= Math.sqrt(s));
        s = (k === l ? -1 : 1) * Math.sqrt((b * b * g * g - b * b * h * h - g * g * r * r) / (b * b * h * h + g * g * r * r));
        isNaN(s) && (s = 0);
        k = s * b * h / g;
        s = s * -g *
            r / b;
        isNaN(k) && (k = 0);
        isNaN(s) && (s = 0);
        c = (c + m) / 2 + p * k - q * s;
        d = (d + n) / 2 + q * k + p * s;
        n = e(1, 0, (r - k) / b, (h - s) / g);
        p = (r - k) / b;
        m = (h - s) / g;
        r = (-r - k) / b;
        k = (-h - s) / g;
        h = e(p, m, r, k);
        r = (p * r + m * k) / (Math.sqrt(p * p + m * m) * Math.sqrt(r * r + k * k));
        -1 >= r ? h = Math.PI : 1 <= r && (h = 0);
        !l && 0 < h && (h -= 2 * Math.PI);
        l && 0 > h && (h += 2 * Math.PI);
        l = b > g ? 1 : b / g;
        r = b > g ? g / b : 1;
        b = We(b > g ? b : g, n, n + h, !0);
        g = D.Sf();
        g.reset();
        g.translate(c, d);
        g.rotate(a.Rd, 0, 0);
        g.scale(l, r);
        Df(b, g);
        D.Je(g);
        a.yg = b;
        return a.yg
    }

    D.defineProperty(Zf, {Vx: "isClosed"}, function () {
        return this.ii
    }, function (a) {
        this.ii !== a && (this.ii = a, this.ob = !0)
    });
    D.defineProperty(Zf, {type: "type"}, function () {
        return this.da
    }, function (a) {
        v && D.Da(a, Zf, Zf, "type");
        this.J && D.pa(this, a);
        this.da = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {G: "endX"}, function () {
        return this.Bb
    }, function (a) {
        v && D.p(a, Zf, "endX");
        this.J && D.pa(this, a);
        this.Bb = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {H: "endY"}, function () {
        return this.Ib
    }, function (a) {
        v && D.p(a, Zf, "endY");
        this.J && D.pa(this, a);
        this.Ib = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {Cc: "point1X"}, function () {
        return this.Rd
    }, function (a) {
        v && D.p(a, Zf, "point1X");
        this.J && D.pa(this, a);
        this.Rd = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {Zc: "point1Y"}, function () {
        return this.ff
    }, function (a) {
        v && D.p(a, Zf, "point1Y");
        this.J && D.pa(this, a);
        this.ff = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {Uh: "point2X"}, function () {
        return this.Eh
    }, function (a) {
        v && D.p(a, Zf, "point2X");
        this.J && D.pa(this, a);
        this.Eh = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {Vh: "point2Y"}, function () {
        return this.Pg
    }, function (a) {
        v && D.p(a, Zf, "point2Y");
        this.J && D.pa(this, a);
        this.Pg = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {oa: "centerX"}, function () {
        return this.Rd
    }, function (a) {
        v && D.p(a, Zf, "centerX");
        this.J && D.pa(this, a);
        this.Rd = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {va: "centerY"}, function () {
        return this.ff
    }, function (a) {
        v && D.p(a, Zf, "centerY");
        this.J && D.pa(this, a);
        this.ff = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {radiusX: "radiusX"}, function () {
        return this.Eh
    }, function (a) {
        v && D.p(a, Zf, "radiusX");
        0 > a && D.ua(a, ">= zero", Zf, "radiusX");
        this.J && D.pa(this, a);
        this.Eh = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {radiusY: "radiusY"}, function () {
        return this.Pg
    }, function (a) {
        v && D.p(a, Zf, "radiusY");
        0 > a && D.ua(a, ">= zero", Zf, "radiusY");
        this.J && D.pa(this, a);
        this.Pg = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {Me: "startAngle"}, function () {
        return this.Bb
    }, function (a) {
        this.Bb !== a && (this.J && D.pa(this, a), v && D.p(a, Zf, "startAngle"), a %= 360, 0 > a && (a += 360), this.Bb = a, this.ob = !0)
    });
    D.defineProperty(Zf, {zf: "sweepAngle"}, function () {
        return this.Ib
    }, function (a) {
        v && D.p(a, Zf, "sweepAngle");
        this.J && D.pa(this, a);
        360 < a && (a = 360);
        -360 > a && (a = -360);
        this.Ib = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {um: "isClockwiseArc"}, function () {
        return this.Lo
    }, function (a) {
        this.J && D.pa(this, a);
        this.Lo = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {$x: "isLargeArc"}, function () {
        return this.sp
    }, function (a) {
        this.J && D.pa(this, a);
        this.sp = a;
        this.ob = !0
    });
    D.defineProperty(Zf, {Zj: "xAxisRotation"}, function () {
        return this.Rd
    }, function (a) {
        v && D.p(a, Zf, "xAxisRotation");
        a %= 360;
        0 > a && (a += 360);
        this.J && D.pa(this, a);
        this.Rd = a;
        this.ob = !0
    });
    function ag() {
        this.ca = null;
        this.pA = (new N(0, 0)).freeze();
        this.xz = (new N(0, 0)).freeze();
        this.Bv = this.yw = 0;
        this.Cv = 1;
        this.mw = "";
        this.hx = this.Qv = !1;
        this.Nv = this.Dv = 0;
        this.ak = this.Yv = this.iw = !1;
        this.Tr = null;
        this.ex = 0;
        this.Tg = this.bx = null
    }

    D.ka("InputEvent", ag);
    ag.prototype.copy = function () {
        var a = new ag;
        a.ca = this.ca;
        a.pA.assign(this.se);
        a.xz.assign(this.ha);
        a.yw = this.yw;
        a.Bv = this.Bv;
        a.Cv = this.Cv;
        a.mw = this.mw;
        a.Qv = this.Qv;
        a.hx = this.hx;
        a.Dv = this.Dv;
        a.Nv = this.Nv;
        a.iw = this.iw;
        a.Yv = this.Yv;
        a.ak = this.ak;
        a.Tr = this.Tr;
        a.ex = this.ex;
        a.bx = this.bx;
        a.Tg = this.Tg;
        return a
    };
    ag.prototype.toString = function () {
        var a = "^";
        0 !== this.Md && (a += "M:" + this.Md);
        0 !== this.button && (a += "B:" + this.button);
        "" !== this.key && (a += "K:" + this.key);
        0 !== this.Pe && (a += "C:" + this.Pe);
        0 !== this.km && (a += "D:" + this.km);
        this.Nc && (a += "h");
        this.bubbles && (a += "b");
        null !== this.ha && (a += "@" + this.ha.toString());
        return a
    };
    D.defineProperty(ag, {g: "diagram"}, function () {
        return this.ca
    }, function (a) {
        this.ca = a
    });
    D.defineProperty(ag, {se: "viewPoint"}, function () {
        return this.pA
    }, function (a) {
        D.l(a, N, ag, "viewPoint");
        this.pA.assign(a)
    });
    D.defineProperty(ag, {ha: "documentPoint"}, function () {
        return this.xz
    }, function (a) {
        D.l(a, N, ag, "documentPoint");
        this.xz.assign(a)
    });
    ag.prototype.getMultiTouchViewPoint = ag.prototype.Rx = function (a, b) {
        var c = this.g;
        if (null === c)return b;
        bg(c, this.event, a, b);
        return b
    };
    ag.prototype.getMultiTouchDocumentPoint = function (a, b) {
        var c = this.g;
        if (null === c)return b;
        bg(c, this.event, a, b);
        b.assign(c.bC(b));
        return b
    };
    D.defineProperty(ag, {Md: "modifiers"}, function () {
        return this.yw
    }, function (a) {
        this.yw = a
    });
    D.defineProperty(ag, {button: "button"}, function () {
        return this.Bv
    }, function (a) {
        this.Bv = a;
        if (null === this.event)switch (a) {
            case 0:
                this.buttons = 1;
                break;
            case 1:
                this.buttons = 4;
                break;
            case 2:
                this.buttons = 2
        }
    });
    D.defineProperty(ag, {buttons: "buttons"}, function () {
        return this.Cv
    }, function (a) {
        this.Cv = a
    });
    D.defineProperty(ag, {key: "key"}, function () {
        return this.mw
    }, function (a) {
        this.mw = a
    });
    D.defineProperty(ag, {lm: "down"}, function () {
        return this.Qv
    }, function (a) {
        this.Qv = a
    });
    D.defineProperty(ag, {up: "up"}, function () {
        return this.hx
    }, function (a) {
        this.hx = a
    });
    D.defineProperty(ag, {Pe: "clickCount"}, function () {
        return this.Dv
    }, function (a) {
        this.Dv = a
    });
    D.defineProperty(ag, {km: "delta"}, function () {
        return this.Nv
    }, function (a) {
        this.Nv = a
    });
    D.defineProperty(ag, {Cu: "isMultiTouch"}, function () {
        return this.iw
    }, function (a) {
        this.iw = a
    });
    D.defineProperty(ag, {Nc: "handled"}, function () {
        return this.Yv
    }, function (a) {
        this.Yv = a
    });
    D.defineProperty(ag, {bubbles: "bubbles"}, function () {
        return this.ak
    }, function (a) {
        this.ak = a
    });
    D.defineProperty(ag, {event: "event"}, function () {
        return this.Tr
    }, function (a) {
        this.Tr = a
    });
    D.w(ag, {Nj: "isTouchEvent"}, function () {
        var a = window.TouchEvent;
        return a && this.event instanceof a ? !0 : (a = window.PointerEvent) && this.event instanceof a && "touch" === this.event.pointerType
    });
    D.w(ag, {Yk: "isMac"}, function () {
        return D.Yk
    });
    D.defineProperty(ag, {timestamp: "timestamp"}, function () {
        return this.ex
    }, function (a) {
        this.ex = a
    });
    D.defineProperty(ag, {jh: "targetDiagram"}, function () {
        return this.bx
    }, function (a) {
        this.bx = a
    });
    D.defineProperty(ag, {Xe: "targetObject"}, function () {
        return this.Tg
    }, function (a) {
        this.Tg = a
    });
    D.defineProperty(ag, {control: "control"}, function () {
        return 0 !== (this.Md & 1)
    }, function (a) {
        this.Md = a ? this.Md | 1 : this.Md & -2
    });
    D.defineProperty(ag, {shift: "shift"}, function () {
        return 0 !== (this.Md & 4)
    }, function (a) {
        this.Md = a ? this.Md | 4 : this.Md & -5
    });
    D.defineProperty(ag, {alt: "alt"}, function () {
        return 0 !== (this.Md & 2)
    }, function (a) {
        this.Md = a ? this.Md | 2 : this.Md & -3
    });
    D.defineProperty(ag, {Lu: "meta"}, function () {
        return 0 !== (this.Md & 8)
    }, function (a) {
        this.Md = a ? this.Md | 8 : this.Md & -9
    });
    D.defineProperty(ag, {left: "left"}, function () {
        var a = this.event;
        return null !== a && a instanceof MouseEvent && ("mousedown" === a.type || "mouseup" === a.type) ? 0 === this.button : 0 !== (this.buttons & 1)
    }, function (a) {
        this.buttons = a ? this.buttons | 1 : this.buttons & -2
    });
    D.defineProperty(ag, {right: "right"}, function () {
        var a = this.event;
        return null !== a && a instanceof MouseEvent && ("mousedown" === a.type || "mouseup" === a.type) ? 2 === this.button : 0 !== (this.buttons & 2)
    }, function (a) {
        this.buttons = a ? this.buttons | 2 : this.buttons & -3
    });
    D.defineProperty(ag, {cM: "middle"}, function () {
        var a = this.event;
        return null !== a && a instanceof MouseEvent && ("mousedown" === a.type || "mouseup" === a.type) ? 1 === this.button : 0 !== (this.buttons & 4)
    }, function (a) {
        this.buttons = a ? this.buttons | 4 : this.buttons & -5
    });
    function cg() {
        this.ca = null;
        this.ac = "";
        this.Iw = this.$w = null;
        this.mr = !1
    }

    D.ka("DiagramEvent", cg);
    cg.prototype.copy = function () {
        var a = new cg;
        a.ca = this.ca;
        a.ac = this.ac;
        a.$w = this.$w;
        a.Iw = this.Iw;
        a.mr = this.mr;
        return a
    };
    cg.prototype.toString = function () {
        var a = "*" + this.name;
        null !== this.TB && (a += ":" + this.TB.toString());
        null !== this.xB && (a += "(" + this.xB.toString() + ")");
        return a
    };
    D.defineProperty(cg, {g: "diagram"}, function () {
        return this.ca
    }, function (a) {
        this.ca = a
    });
    D.defineProperty(cg, {name: "name"}, function () {
        return this.ac
    }, function (a) {
        this.ac = a
    });
    D.defineProperty(cg, {TB: "subject"}, function () {
        return this.$w
    }, function (a) {
        this.$w = a
    });
    D.defineProperty(cg, {xB: "parameter"}, function () {
        return this.Iw
    }, function (a) {
        this.Iw = a
    });
    D.defineProperty(cg, {cancel: "cancel"}, function () {
        return this.mr
    }, function (a) {
        this.mr !== a && D.Qn("DiagramEvent.cancel", "2.0");
        this.mr = a
    });
    function dg() {
        this.nr = eg;
        this.mn = this.xw = "";
        this.Ns = this.Os = this.Ss = this.Ts = this.Rs = this.ca = this.xe = null
    }

    D.ka("ChangedEvent", dg);
    var fg;
    dg.Transaction = fg = D.s(dg, "Transaction", -1);
    var eg;
    dg.Property = eg = D.s(dg, "Property", 0);
    var pg;
    dg.Insert = pg = D.s(dg, "Insert", 1);
    var qg;
    dg.Remove = qg = D.s(dg, "Remove", 2);
    dg.prototype.clear = dg.prototype.clear = function () {
        this.Ns = this.Os = this.Ss = this.Ts = this.Rs = this.ca = this.xe = null
    };
    dg.prototype.copy = function () {
        var a = new dg;
        a.nr = this.nr;
        a.xw = this.xw;
        a.mn = this.mn;
        a.xe = this.xe;
        a.ca = this.ca;
        a.Rs = this.Rs;
        var b = this.Ts;
        a.Ts = D.Sa(b) && "function" === typeof b.V ? b.V() : b;
        b = this.Ss;
        a.Ss = D.Sa(b) && "function" === typeof b.V ? b.V() : b;
        b = this.Os;
        a.Os = D.Sa(b) && "function" === typeof b.V ? b.V() : b;
        b = this.Ns;
        a.Ns = D.Sa(b) && "function" === typeof b.V ? b.V() : b;
        return a
    };
    dg.prototype.qc = function (a) {
        a.Oe === dg ? this.Kc = a : D.Xj(this, a)
    };
    dg.prototype.toString = function () {
        var a = "", a = this.Kc === fg ? a + "* " : this.Kc === eg ? a + (null !== this.ga ? "!m" : "!d") : a + ((null !== this.ga ? "!m" : "!d") + this.Kc);
        this.propertyName && "string" === typeof this.propertyName && (a += " " + this.propertyName);
        this.yf && this.yf !== this.propertyName && (a += " " + this.yf);
        a += ": ";
        this.Kc === fg ? null !== this.oldValue && (a += " " + this.oldValue) : (null !== this.object && (a += ha(this.object)), null !== this.oldValue && (a += "  old: " + ha(this.oldValue)), null !== this.Tj && (a += " " + this.Tj), null !== this.newValue &&
        (a += "  new: " + ha(this.newValue)), null !== this.Rj && (a += " " + this.Rj));
        return a
    };
    dg.prototype.getValue = dg.prototype.na = function (a) {
        return a ? this.oldValue : this.newValue
    };
    dg.prototype.getParam = function (a) {
        return a ? this.Tj : this.Rj
    };
    dg.prototype.canUndo = dg.prototype.canUndo = function () {
        return null !== this.ga || null !== this.g ? !0 : !1
    };
    dg.prototype.undo = dg.prototype.undo = function () {
        this.canUndo() && (null !== this.ga ? this.ga.Hn(this, !0) : null !== this.g && this.g.Hn(this, !0))
    };
    dg.prototype.canRedo = dg.prototype.canRedo = function () {
        return null !== this.ga || null !== this.g ? !0 : !1
    };
    dg.prototype.redo = dg.prototype.redo = function () {
        this.canRedo() && (null !== this.ga ? this.ga.Hn(this, !1) : null !== this.g && this.g.Hn(this, !1))
    };
    D.defineProperty(dg, {ga: "model"}, function () {
        return this.xe
    }, function (a) {
        this.xe = a
    });
    D.defineProperty(dg, {g: "diagram"}, function () {
        return this.ca
    }, function (a) {
        this.ca = a
    });
    D.defineProperty(dg, {Kc: "change"}, function () {
        return this.nr
    }, function (a) {
        v && D.Da(a, dg, dg, "change");
        this.nr = a
    });
    D.defineProperty(dg, {yf: "modelChange"}, function () {
        return this.xw
    }, function (a) {
        v && D.h(a, "string", dg, "modelChange");
        this.xw = a
    });
    D.defineProperty(dg, {propertyName: "propertyName"}, function () {
        return this.mn
    }, function (a) {
        v && "string" !== typeof a && D.h(a, "function", dg, "propertyName");
        this.mn = a
    });
    D.w(dg, {cG: "isTransactionFinished"}, function () {
        return this.nr === fg && ("CommittedTransaction" === this.mn || "FinishedUndo" === this.mn || "FinishedRedo" === this.mn)
    });
    D.defineProperty(dg, {object: "object"}, function () {
        return this.Rs
    }, function (a) {
        this.Rs = a
    });
    D.defineProperty(dg, {oldValue: "oldValue"}, function () {
        return this.Ts
    }, function (a) {
        this.Ts = a
    });
    D.defineProperty(dg, {Tj: "oldParam"}, function () {
        return this.Ss
    }, function (a) {
        this.Ss = a
    });
    D.defineProperty(dg, {newValue: "newValue"}, function () {
        return this.Os
    }, function (a) {
        this.Os = a
    });
    D.defineProperty(dg, {Rj: "newParam"}, function () {
        return this.Ns
    }, function (a) {
        this.Ns = a
    });
    function M(a) {
        1 < arguments.length && D.k("Model constructor can only take one optional argument, the Array of node data.");
        D.vc(this);
        this.Cr = this.ac = "";
        this.bj = !1;
        this.Vz = {};
        this.ye = [];
        this.Gc = new ma(null, Object);
        this.xk = "key";
        this.Qo = this.xp = null;
        this.tr = this.ur = !1;
        this.dr = null;
        this.gn = "category";
        this.Ag = new ma(null, L);
        this.tk = null;
        this.tj = !1;
        this.oA = null;
        this.ra = new rg;
        void 0 !== a && (this.pg = a)
    }

    D.ka("Model", M);
    M.prototype.cloneProtected = function (a) {
        a.ac = this.ac;
        a.Cr = this.Cr;
        a.bj = this.bj;
        a.xk = this.xk;
        a.xp = this.xp;
        a.Qo = this.Qo;
        a.ur = this.ur;
        a.tr = this.tr;
        a.dr = this.dr;
        a.gn = this.gn
    };
    M.prototype.copy = function () {
        var a = new this.constructor;
        this.cloneProtected(a);
        return a
    };
    M.prototype.clear = M.prototype.clear = function () {
        this.ye = [];
        this.Gc.clear();
        this.Ag.clear();
        this.ra.clear()
    };
    f = M.prototype;
    f.toString = function (a) {
        void 0 === a && (a = 0);
        if (1 < a)return this.WB();
        var b = ("" !== this.name ? this.name : "") + " Model";
        if (0 < a) {
            b += "\n node data:";
            a = this.pg;
            for (var c = D.cb(a), d = 0; d < c; d++)var e = D.La(a, d), b = b + (" " + this.Ab(e) + ":" + ha(e))
        }
        return b
    };
    f.Bo = function () {
        var a = "";
        "" !== this.name && (a += ',\n  "name": ' + this.quote(this.name));
        "" !== this.im && (a += ',\n  "dataFormat": ' + this.quote(this.im));
        this.qb && (a += ',\n  "isReadOnly": ' + this.qb);
        "key" !== this.Sj && "string" === typeof this.Sj && (a += ',\n  "nodeKeyProperty": ' + this.quote(this.Sj));
        this.EA && (a += ',\n  "copiesArrays": true');
        this.DA && (a += ',\n  "copiesArrayObjects": true');
        "category" !== this.po && "string" === typeof this.po && (a += ',\n  "nodeCategoryProperty": ' + this.quote(this.po));
        return a
    };
    f.Uu = function (a) {
        a.name && (this.name = a.name);
        a.dataFormat && (this.im = a.dataFormat);
        a.isReadOnly && (this.qb = a.isReadOnly);
        a.nodeKeyProperty && (this.Sj = a.nodeKeyProperty);
        a.copiesArrays && (this.EA = a.copiesArrays);
        a.copiesArrayObjects && (this.DA = a.copiesArrayObjects);
        a.nodeCategoryProperty && (this.po = a.nodeCategoryProperty)
    };
    function sg(a) {
        return ',\n  "modelData": ' + tg(a, a.al)
    }

    function ug(a, b) {
        var c = b.modelData;
        D.Sa(c) && (a.Xu(c), a.al = c)
    }

    f.iC = function () {
        var a = this.al, b = !1, c;
        for (c in a)if (!vg(c, a[c])) {
            b = !0;
            break
        }
        a = "";
        b && (a = sg(this));
        return a + ',\n  "nodeDataArray": ' + wg(this, this.pg, !0)
    };
    f.AB = function (a) {
        ug(this, a);
        a = a.nodeDataArray;
        D.isArray(a) && (this.Xu(a), this.pg = a)
    };
    function xg(a, b, c, d) {
        if (b === c)return !0;
        if (typeof b !== typeof c || "function" === typeof b || "function" === typeof c)return !1;
        if (Array.isArray(b) && Array.isArray(c)) {
            if (d.na(b) === c)return !0;
            d.add(b, c);
            if (b.length !== c.length)return !1;
            for (var e = 0; e < b.length; e++)if (!xg(a, b[e], c[e], d))return !1;
            return !0
        }
        if (D.Sa(b) && D.Sa(c)) {
            if (d.na(b) === c)return !0;
            d.add(b, c);
            for (e in b) {
                var g = b[e];
                if (!vg(e, g)) {
                    var h = c[e];
                    if (void 0 === h || !xg(a, g, h, d))return !1
                }
            }
            for (var k in c)if (h = c[k], !vg(k, h) && (g = b[k], void 0 === g || !xg(a, g, h, d)))return !1;
            return !0
        }
        return !1
    }

    function yg(a, b, c) {
        a[c] !== b[c] && D.k("Model.computeJsonDifference: Model." + c + ' is not the same in both models: "' + a[c] + '" and "' + b[c] + '"')
    }

    f.jC = function (a) {
        yg(this, a, "nodeKeyProperty");
        this instanceof zg && yg(this, a, "nodeParentKeyProperty");
        for (var b = new L, c = new L, d = (new L).Tc(this.Gc.eG), e = new ma, g = a.pg, h = 0; h < g.length; h++) {
            var k = g[h], l = a.Ab(k);
            if (void 0 !== l) {
                d.remove(l);
                var m = this.He(l);
                null === m ? (b.add(l), c.add(k)) : xg(this, m, k, e) || c.add(k)
            } else this.lB(k), l = this.Ab(k), b.add(l), c.add(k)
        }
        g = "";
        xg(this, this.al, a.al, e) || (g += sg(this));
        0 < b.count && (g += this.az + wg(this, b.oc(), !0));
        0 < c.count && (g += this.rC + wg(this, c.oc(), !0));
        0 < d.count && (g += this.cz +
            wg(this, d.oc(), !0));
        return g
    };
    M.prototype.computeJsonDifference = M.prototype.computeJSONDifference = function (a, b) {
        D.l(a, M, M, "computeJsonDifference:newmodel");
        void 0 === b && (b = this.constructor === M ? "go.Model" : this.constructor === X ? "go.GraphLinksModel" : this.constructor === zg ? "go.TreeModel" : D.tf(this));
        return '{ "class": ' + this.quote(b) + ', "incremental": 1' + this.Bo() + this.jC(a) + "}"
    };
    f = M.prototype;
    f.az = ',\n  "insertedNodeKeys": ';
    f.rC = ',\n  "modifiedNodeData": ';
    f.cz = ',\n  "removedNodeKeys": ';
    f.hC = function (a, b) {
        var c = this, d = !1, e = new L, g = new L, h = new L;
        a.eg.each(function (a) {
            a.ga === c && ("nodeDataArray" === a.yf ? a.Kc === pg ? e.add(a.newValue) : a.Kc === qg && h.add(a.oldValue) : c.le(a.object) ? g.add(a.object) : c.al === a.object && a.Kc === eg && (d = !0))
        });
        var k = new L;
        e.each(function (a) {
            k.add(c.Ab(a));
            b || g.add(a)
        });
        var l = new L;
        h.each(function (a) {
            l.add(c.Ab(a));
            b && g.add(a)
        });
        var m = "";
        d && (m += sg(this));
        0 < k.count && (m += (b ? this.cz : this.az) + wg(this, k.oc(), !0));
        0 < g.count && (m += this.rC + wg(this, g.oc(), !0));
        0 < l.count && (m += (b ?
                this.az : this.cz) + wg(this, l.oc(), !0));
        return m
    };
    f.zB = function (a) {
        ug(this, a);
        var b = a.insertedNodeKeys, c = a.modifiedNodeData, d = new ma;
        if (D.isArray(c))for (var e = 0; e < c.length; e++) {
            var g = D.La(c, e), h = this.Ab(g);
            void 0 !== h && null !== h && d.set(h, g)
        }
        if (D.isArray(b))for (var e = D.cb(b), k = 0; k < e; k++)g = D.La(b, k), h = this.He(g), null === h && (h = (h = d.get(g)) ? h : this.copyNodeData({}), this.Ly(h, g), this.Zl(h));
        if (D.isArray(c))for (e = D.cb(c), k = 0; k < e; k++)if (g = D.La(c, k), h = this.Ab(g), h = this.He(h), null !== h)for (var l in g)"__gohashid" !== l && l !== this.Sj && l !== this.Dq && this.setDataProperty(h,
            l, g[l]);
        a = a.removedNodeKeys;
        if (D.isArray(a))for (e = D.cb(a), k = 0; k < e; k++)g = D.La(a, k), h = this.He(g), null !== h && this.Cy(h)
    };
    M.prototype.toIncrementalJson = M.prototype.toIncrementalJSON = function (a, b) {
        D.l(a, dg, M, "toIncrementalJson:e");
        a.Kc !== fg && D.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:" + a.toString());
        var c = a.object;
        if (!(a.cG && c instanceof Ag))return '{ "incremental": 0 }';
        void 0 === b && (b = this.constructor === M ? "go.Model" : this.constructor === X ? "go.GraphLinksModel" : this.constructor === zg ? "go.TreeModel" : D.tf(this));
        return '{ "class": ' + this.quote(b) + ', "incremental": 1' + this.Bo() + this.hC(c, "FinishedUndo" ===
                a.propertyName) + "}"
    };
    M.prototype.toJson = M.prototype.toJSON = M.prototype.WB = function (a) {
        void 0 === a && (a = this.constructor === M ? "go.Model" : this.constructor === X ? "go.GraphLinksModel" : this.constructor === zg ? "go.TreeModel" : D.tf(this));
        return '{ "class": ' + this.quote(a) + this.Bo() + this.iC() + "}"
    };
    M.prototype.applyIncrementalJson = M.prototype.applyIncrementalJSON = function (a) {
        var b = null;
        if ("string" === typeof a)if (window.JSON && window.JSON.parse)try {
            b = window.JSON.parse(a)
        } catch (c) {
            v && D.trace("JSON.parse error: " + c.toString())
        } else D.trace("WARNING: no JSON.parse available"); else"object" === typeof a ? b = a : D.k("Unable to modify a Model from: " + a);
        var d = b.incremental;
        "number" !== typeof d && D.k("Unable to apply non-incremental changes to Model: " + a);
        0 !== d && (this.Zb("applyIncrementalJson"), this.zB(b), this.Gd("applyIncrementalJson"))
    };
    M.fromJson = M.fromJSON = function (a, b) {
        void 0 === b && (b = null);
        null !== b && D.l(b, M, M, "fromJson:model");
        var c = null;
        if ("string" === typeof a)if (window.JSON && window.JSON.parse)try {
            c = window.JSON.parse(a)
        } catch (d) {
            v && D.trace("JSON.parse error: " + d.toString())
        } else D.trace("WARNING: no JSON.parse available"); else"object" === typeof a ? c = a : D.k("Unable to construct a Model from: " + a);
        if (null === b) {
            var e;
            e = null;
            var g = c["class"];
            if ("string" === typeof g)try {
                var h = null;
                0 === g.indexOf("go.") ? (g = g.substr(3), h = aa[g]) : (h = aa[g],
                void 0 === h && (h = window[g]));
                "function" === typeof h && (e = new h)
            } catch (k) {
            }
            null === e || e instanceof M ? b = e : D.k("Unable to construct a Model of declared class: " + c["class"])
        }
        null === b && (b = new X);
        b.Uu(c);
        b.AB(c);
        return b
    };
    M.prototype.replaceJsonObjects = M.prototype.Xu = function (a) {
        if (D.isArray(a))for (var b = D.cb(a), c = 0; c < b; c++) {
            var d = D.La(a, c);
            D.Sa(d) && D.QE(a, c, this.Xu(d))
        } else if (D.Sa(a)) {
            for (c in a)d = a[c], D.Sa(d) && (d = this.Xu(d), a[c] = d);
            if ("object" === typeof a) {
                d = a;
                c = a["class"];
                if ("NaN" === c)d = NaN; else if ("Date" === c)d = new Date(a.value); else if ("go.Point" === c)d = new N(Bg(a.x), Bg(a.y)); else if ("go.Size" === c)d = new Ba(Bg(a.width), Bg(a.height)); else if ("go.Rect" === c)d = new C(Bg(a.x), Bg(a.y), Bg(a.width), Bg(a.height)); else if ("go.Margin" ===
                    c)d = new Kb(Bg(a.top), Bg(a.right), Bg(a.bottom), Bg(a.left)); else if ("go.Spot" === c)d = "string" === typeof a["enum"] ? bc(a["enum"]) : new Q(Bg(a.x), Bg(a.y), Bg(a.offsetX), Bg(a.offsetY)); else if ("go.Brush" === c) {
                    if (d = new Aa, d.type = Ga(Aa, a.type), "string" === typeof a.color && (d.color = a.color), a.start instanceof Q && (d.start = a.start), a.end instanceof Q && (d.end = a.end), "number" === typeof a.startRadius && (d.gv = Bg(a.startRadius)), "number" === typeof a.endRadius && (d.fu = Bg(a.endRadius)), a = a.colorStops, D.Sa(a))for (b in a)d.addColorStop(parseFloat(b),
                        a[b])
                } else"go.Geometry" === c ? (b = null, b = "string" === typeof a.path ? zf(a.path) : new Ze, b.type = Ga(Ze, a.type), "number" === typeof a.startX && (b.la = Bg(a.startX)), "number" === typeof a.startY && (b.ja = Bg(a.startY)), "number" === typeof a.endX && (b.G = Bg(a.endX)), "number" === typeof a.endY && (b.H = Bg(a.endY)), a.spot1 instanceof Q && (b.C = a.spot1), a.spot2 instanceof Q && (b.D = a.spot2), d = b) : "go.EnumValue" === c && (b = a.classType, 0 === b.indexOf("go.") && (b = b.substr(3)), d = Ga(aa[b], a.name));
                a = d
            }
        }
        return a
    };
    M.prototype.quote = function (a) {
        for (var b = "", c = a.length, d = 0; d < c; d++) {
            var e = a[d];
            if ('"' === e || "\\" === e)b += "\\" + e; else if ("\b" === e)b += "\\b"; else if ("\f" === e)b += "\\f"; else if ("\n" === e)b += "\\n"; else if ("\r" === e)b += "\\r"; else if ("\t" === e)b += "\\t"; else var g = a.charCodeAt(d), b = 16 > g ? b + ("\\u000" + a.charCodeAt(d).toString(16)) : 32 > g ? b + ("\\u00" + a.charCodeAt(d).toString(16)) : 8232 === g ? b + "\\u2028" : 8233 === g ? b + "\\u2029" : b + e
        }
        return '"' + b + '"'
    };
    M.prototype.writeJsonValue = M.prototype.lv = function (a) {
        return void 0 === a ? "undefined" : null === a ? "null" : !0 === a ? "true" : !1 === a ? "false" : "string" === typeof a ? this.quote(a) : "number" === typeof a ? Infinity === a ? "9e9999" : -Infinity === a ? "-9e9999" : isNaN(a) ? '{"class":"NaN"}' : a.toString() : a instanceof Date ? '{"class":"Date", "value":"' + a.toJSON() + '"}' : a instanceof Number ? this.lv(a.valueOf()) : D.isArray(a) ? wg(this, a) : D.Sa(a) ? tg(this, a) : "function" === typeof a ? "null" : a.toString()
    };
    function wg(a, b, c) {
        void 0 === c && (c = !1);
        var d = D.cb(b);
        if (0 >= d)return "[]";
        var e = new xa;
        e.add("[ ");
        c && 1 < d && e.add("\n");
        for (var g = 0; g < d; g++) {
            var h = D.La(b, g);
            void 0 !== h && (0 < g && (e.add(","), c && e.add("\n")), e.add(a.lv(h)))
        }
        c && 1 < d && e.add("\n");
        e.add(" ]");
        return e.toString()
    }

    function vg(a, b) {
        return void 0 === b || "__gohashid" === a || "_" === a[0] || "function" === typeof b ? !0 : !1
    }

    function Cg(a) {
        return isNaN(a) ? "NaN" : Infinity === a ? "9e9999" : -Infinity === a ? "-9e9999" : a
    }

    function tg(a, b) {
        var c = b;
        if (c instanceof N)b = {
            "class": "go.Point",
            x: Cg(c.x),
            y: Cg(c.y)
        }; else if (c instanceof Ba)b = {
            "class": "go.Size",
            width: Cg(c.width),
            height: Cg(c.height)
        }; else if (c instanceof C)b = {
            "class": "go.Rect",
            x: Cg(c.x),
            y: Cg(c.y),
            width: Cg(c.width),
            height: Cg(c.height)
        }; else if (c instanceof Kb)b = {
            "class": "go.Margin",
            top: Cg(c.top),
            right: Cg(c.right),
            bottom: Cg(c.bottom),
            left: Cg(c.left)
        }; else if (c instanceof Q)b = c.Vc() ? {
            "class": "go.Spot",
            x: Cg(c.x),
            y: Cg(c.y),
            offsetX: Cg(c.offsetX),
            offsetY: Cg(c.offsetY)
        } :
        {"class": "go.Spot", "enum": c.toString()}; else if (c instanceof Aa) {
            b = {"class": "go.Brush", type: c.type.name};
            if (c.type === Dg)b.color = c.color; else if (c.type === Wg || c.type === Hd)b.start = c.start, b.end = c.end, c.type === Hd && (0 !== c.gv && (b.startRadius = Cg(c.gv)), isNaN(c.fu) || (b.endRadius = Cg(c.fu)));
            if (null !== c.Mk) {
                for (var d = {}, c = c.Mk.j; c.next();)d[c.key] = c.value;
                b.colorStops = d
            }
        } else if (c instanceof Ze)b = {
            "class": "go.Geometry",
            type: c.type.name
        }, 0 !== c.la && (b.startX = Cg(c.la)), 0 !== c.ja && (b.startY = Cg(c.ja)), 0 !== c.G && (b.endX =
            Cg(c.G)), 0 !== c.H && (b.endY = Cg(c.H)), c.C.O(dc) || (b.spot1 = c.C), c.D.O(uc) || (b.spot2 = c.D), c.type === $e && (b.path = yf(c)); else if (c instanceof ya)b = {
            "class": "go.EnumValue",
            classType: D.tf(c.Oe),
            name: c.name
        }; else if (c instanceof P || c instanceof E || c instanceof Xg || c instanceof M || c instanceof Yg || c instanceof oa || c instanceof Zg || c instanceof ta || c instanceof rg || c instanceof Ag)return D.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: " + c.toString()),
            "{}";
        var d = "{", c = !0, e;
        for (e in b) {
            var g = D.vb(b, e);
            if (!vg(e, g))if (c ? c = !1 : d += ", ", d += '"' + e + '":', "points" === e && g instanceof K && g.da === N) {
                for (var h = "[", g = g.j; g.next();) {
                    var k = g.value;
                    1 < h.length && (h += ",");
                    h += a.lv(k.x);
                    h += ",";
                    h += a.lv(k.y)
                }
                h += "]";
                d += h
            } else d += a.lv(g)
        }
        return d + "}"
    }

    function Bg(a) {
        return "number" === typeof a ? a : "NaN" === a ? NaN : "9e9999" === a ? Infinity : "-9e9999" === a ? -Infinity : parseFloat(a)
    }

    D.defineProperty(M, {name: "name"}, function () {
        return this.ac
    }, function (a) {
        var b = this.ac;
        b !== a && (D.h(a, "string", M, "name"), this.ac = a, this.i("name", b, a))
    });
    D.defineProperty(M, {im: "dataFormat"}, function () {
        return this.Cr
    }, function (a) {
        var b = this.Cr;
        b !== a && (D.h(a, "string", M, "dataFormat"), this.Cr = a, this.i("dataFormat", b, a))
    });
    D.defineProperty(M, {qb: "isReadOnly"}, function () {
        return this.bj
    }, function (a) {
        var b = this.bj;
        b !== a && (D.h(a, "boolean", M, "isReadOnly"), this.bj = a, this.i("isReadOnly", b, a))
    });
    D.defineProperty(M, {al: "modelData"}, function () {
        return this.Vz
    }, function (a) {
        var b = this.Vz;
        b !== a && (D.h(a, "object", M, "modelData"), this.Vz = a, this.i("modelData", b, a), this.Nb(a))
    });
    M.prototype.addChangedListener = M.prototype.Bn = function (a) {
        D.h(a, "function", M, "addChangedListener:listener");
        null === this.tk && (this.tk = new K("function"));
        this.tk.add(a)
    };
    M.prototype.removeChangedListener = M.prototype.Vu = function (a) {
        D.h(a, "function", M, "removeChangedListener:listener");
        null !== this.tk && (this.tk.remove(a), 0 === this.tk.count && (this.tk = null))
    };
    M.prototype.wx = function (a) {
        this.Eb || this.ra.MF(a);
        if (null !== this.tk) {
            var b = this.tk, c = b.length;
            if (1 === c)b = b.ea(0), b(a); else if (0 !== c)for (var d = b.oc(), e = 0; e < c; e++)b = d[e], b(a)
        }
    };
    M.prototype.raiseChangedEvent = M.prototype.jd = function (a, b, c, d, e, g, h) {
        $g(this, "", a, b, c, d, e, g, h)
    };
    M.prototype.raiseChanged = M.prototype.i = function (a, b, c, d, e) {
        $g(this, "", eg, a, this, b, c, d, e)
    };
    M.prototype.raiseDataChanged = M.prototype.yB = function (a, b, c, d, e, g) {
        $g(this, "", eg, b, a, c, d, e, g)
    };
    function $g(a, b, c, d, e, g, h, k, l) {
        void 0 === k && (k = null);
        void 0 === l && (l = null);
        var m = new dg;
        m.ga = a;
        m.Kc = c;
        m.yf = b;
        m.propertyName = d;
        m.object = e;
        m.oldValue = g;
        m.Tj = k;
        m.newValue = h;
        m.Rj = l;
        a.wx(m)
    }

    D.defineProperty(M, {ra: "undoManager"}, function () {
        return this.oA
    }, function (a) {
        var b = this.oA;
        b !== a && (D.l(a, rg, M, "undoManager"), null !== b && b.dK(this), this.oA = a, null !== a && a.TH(this))
    });
    D.defineProperty(M, {Eb: "skipsUndoManager"}, function () {
        return this.tj
    }, function (a) {
        D.h(a, "boolean", M, "skipsUndoManager");
        this.tj = a
    });
    M.prototype.Hn = function (a, b) {
        if (null !== a && a.ga === this)if (a.Kc === eg) {
            var c = a.object, d = a.propertyName, e = a.na(b);
            D.Ta(c, d, e)
        } else a.Kc === pg ? (c = a.Rj, "nodeDataArray" === a.yf ? (d = a.newValue, D.Sa(d) && "number" === typeof c && (e = this.Ab(d), b ? (D.La(this.ye, c) === d && D.Xg(this.ye, c), void 0 !== e && this.Gc.remove(e)) : (D.La(this.ye, c) !== d && D.Kh(this.ye, c, d), void 0 !== e && this.Gc.add(e, d)))) : "" === a.yf ? (d = a.object, !D.isArray(d) && a.propertyName && (d = D.vb(a.object, a.propertyName)), D.isArray(d) && "number" === typeof c && (e = a.newValue,
            b ? D.Xg(d, c) : D.Kh(d, c, e))) : D.k("unknown ChangedEvent.Insert modelChange: " + a.toString())) : a.Kc === qg ? (c = a.Tj, "nodeDataArray" === a.yf ? (d = a.oldValue, D.Sa(d) && "number" === typeof c && (e = this.Ab(d), b ? (D.La(this.ye, c) !== d && D.Kh(this.ye, c, d), void 0 !== e && this.Gc.add(e, d)) : (D.La(this.ye, c) === d && D.Xg(this.ye, c), void 0 !== e && this.Gc.remove(e)))) : "" === a.yf ? (d = a.object, !D.isArray(d) && a.propertyName && (d = D.vb(a.object, a.propertyName)), D.isArray(d) && "number" === typeof c && (e = a.oldValue, b ? D.Kh(d, c, e) : D.Xg(d, c))) : D.k("unknown ChangedEvent.Remove modelChange: " +
            a.toString())) : a.Kc !== fg && D.k("unknown ChangedEvent: " + a.toString())
    };
    M.prototype.startTransaction = M.prototype.Zb = function (a) {
        return this.ra.Zb(a)
    };
    M.prototype.commitTransaction = M.prototype.Gd = function (a) {
        return this.ra.Gd(a)
    };
    M.prototype.rollbackTransaction = M.prototype.Jq = function () {
        return this.ra.Jq()
    };
    M.prototype.updateTargetBindings = M.prototype.Nb = function (a, b) {
        void 0 === b && (b = "");
        $g(this, "SourceChanged", fg, b, a, null, null)
    };
    D.defineProperty(M, {Sj: "nodeKeyProperty"}, function () {
        return this.xk
    }, function (a) {
        var b = this.xk;
        b !== a && (ah(a, M, "nodeKeyProperty"), "" === a && D.k("Model.nodeKeyProperty may not be the empty string"), 0 < this.Gc.count && D.k("Cannot set Model.nodeKeyProperty when there is existing node data"), this.xk = a, this.i("nodeKeyProperty", b, a))
    });
    function ah(a, b, c) {
        "string" !== typeof a && "function" !== typeof a && D.jc(a, "string or function", b, c)
    }

    M.prototype.getKeyForNodeData = M.prototype.Ab = function (a) {
        if (null !== a) {
            var b = this.xk;
            if ("" !== b && (b = D.vb(a, b), void 0 !== b)) {
                if (bh(b))return b;
                D.k("Key value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    M.prototype.setKeyForNodeData = M.prototype.Ly = function (a, b) {
        void 0 !== b && null !== b && bh(b) || D.jc(b, "number or string", M, "setKeyForNodeData:key");
        if (null !== a) {
            var c = this.xk;
            if ("" !== c)if (this.le(a)) {
                var d = D.vb(a, c);
                d !== b && null === this.He(b) && (D.Ta(a, c, b), this.Gc.remove(d), this.Gc.add(b, a), $g(this, "nodeKey", eg, c, a, d, b), "string" === typeof c && this.Nb(a, c), this.Wu(d, b))
            } else D.Ta(a, c, b)
        }
    };
    D.defineProperty(M, {WL: "makeUniqueKeyFunction"}, function () {
        return this.xp
    }, function (a) {
        var b = this.xp;
        b !== a && (null !== a && D.h(a, "function", M, "makeUniqueKeyFunction"), this.xp = a, this.i("makeUniqueKeyFunction", b, a))
    });
    function bh(a) {
        return "number" === typeof a || "string" === typeof a
    }

    M.prototype.containsNodeData = M.prototype.le = function (a) {
        var b = this.Ab(a);
        return void 0 === b ? !1 : this.Gc.na(b) === a
    };
    M.prototype.findNodeDataForKey = M.prototype.He = function (a) {
        null === a && D.k("Model.findNodeDataForKey:key must not be null");
        return void 0 !== a && bh(a) ? this.Gc.na(a) : null
    };
    D.defineProperty(M, {pg: "nodeDataArray"}, function () {
        return this.ye
    }, function (a) {
        var b = this.ye;
        if (b !== a) {
            D.Yt(a, M, "nodeDataArray");
            this.Gc.clear();
            this.dC();
            for (var c = D.cb(a), d = 0; d < c; d++) {
                var e = D.La(a, d);
                if (!D.Sa(e)) {
                    D.k("Model.nodeDataArray must only contain Objects, not: " + e);
                    return
                }
                D.pq(e)
            }
            this.ye = a;
            for (var g = new K(Object), d = 0; d < c; d++) {
                var e = D.La(a, d), h = this.Ab(e);
                void 0 === h ? g.add(e) : null !== this.Gc.na(h) ? g.add(e) : this.Gc.add(h, e)
            }
            for (d = g.j; d.next();)e = d.value, this.lB(e), g = this.Ab(e), void 0 !== g &&
            this.Gc.add(g, e);
            $g(this, "nodeDataArray", eg, "nodeDataArray", this, b, a);
            for (d = 0; d < c; d++)e = D.La(a, d), this.Iq(e), this.Hq(e);
            this.UE();
            D.oJ(a) || (this.qb = !0)
        }
    });
    M.prototype.makeNodeDataKeyUnique = M.prototype.lB = function (a) {
        if (null !== a) {
            var b = this.xk;
            if ("" !== b) {
                var c = this.Ab(a);
                if (void 0 === c || this.Gc.contains(c)) {
                    var d = this.xp;
                    if (null !== d && (c = d(this, a), void 0 !== c && null !== c && !this.Gc.contains(c))) {
                        D.Ta(a, b, c);
                        return
                    }
                    if ("string" === typeof c) {
                        for (d = 2; this.Gc.contains(c + d);)d++;
                        D.Ta(a, b, c + d)
                    } else if (void 0 === c || "number" === typeof c) {
                        for (d = -this.Gc.count - 1; this.Gc.contains(d);)d--;
                        D.Ta(a, b, d)
                    } else D.k("Model.getKeyForNodeData returned something other than a string or a number: " +
                        c)
                }
            }
        }
    };
    M.prototype.addNodeData = M.prototype.Zl = function (a) {
        null !== a && (D.pq(a), this.le(a) || ch(this, a, !0))
    };
    function ch(a, b, c) {
        var d = a.Ab(b);
        if (void 0 === d || a.Gc.na(d) !== b)a.lB(b), d = a.Ab(b), void 0 === d ? D.k("Model.makeNodeDataKeyUnique failed on " + b + ".  Data not added to Model.") : (a.Gc.add(d, b), d = null, c && (d = D.cb(a.ye), D.Kh(a.ye, d, b)), $g(a, "nodeDataArray", pg, "nodeDataArray", a, null, b, null, d), a.Iq(b), a.Hq(b))
    }

    M.prototype.addNodeDataCollection = function (a) {
        if (D.isArray(a))for (var b = D.cb(a), c = 0; c < b; c++)this.Zl(D.La(a, c)); else for (a = a.j; a.next();)this.Zl(a.value)
    };
    M.prototype.removeNodeData = M.prototype.Cy = function (a) {
        null !== a && dh(this, a, !0)
    };
    function dh(a, b, c) {
        var d = a.Ab(b);
        void 0 !== d && a.Gc.remove(d);
        d = null;
        if (c) {
            d = D.cm(a.ye, b);
            if (0 > d)return;
            D.Xg(a.ye, d)
        }
        $g(a, "nodeDataArray", qg, "nodeDataArray", a, b, null, d, null);
        a.kv(b)
    }

    M.prototype.removeNodeDataCollection = function (a) {
        if (D.isArray(a))for (var b = D.cb(a), c = 0; c < b; c++)this.Cy(D.La(a, c)); else for (a = a.j; a.next();)this.Cy(a.value)
    };
    f = M.prototype;
    f.Wu = function (a, b) {
        var c = eh(this, a);
        c instanceof L && this.Ag.add(b, c)
    };
    f.dC = function () {
    };
    f.Iq = function () {
    };
    f.Hq = function () {
    };
    f.kv = function () {
    };
    function fh(a, b, c) {
        if (void 0 !== b) {
            var d = a.Ag.na(b);
            null === d && (d = new L(Object), a.Ag.add(b, d));
            d.add(c)
        }
    }

    function gh(a, b, c) {
        if (void 0 !== b) {
            var d = a.Ag.na(b);
            d instanceof L && (void 0 === c || null === c ? a.Ag.remove(b) : (d.remove(c), 0 === d.count && a.Ag.remove(b)))
        }
    }

    function eh(a, b) {
        if (void 0 === b)return null;
        var c = a.Ag.na(b);
        return c instanceof L ? c : null
    }

    M.prototype.clearUnresolvedReferences = M.prototype.UE = function (a) {
        void 0 === a ? this.Ag.clear() : this.Ag.remove(a)
    };
    D.defineProperty(M, {nL: "copyNodeDataFunction"}, function () {
        return this.Qo
    }, function (a) {
        var b = this.Qo;
        b !== a && (null !== a && D.h(a, "function", M, "copyNodeDataFunction"), this.Qo = a, this.i("copyNodeDataFunction", b, a))
    });
    D.defineProperty(M, {EA: "copiesArrays"}, function () {
        return this.ur
    }, function (a) {
        var b = this.ur;
        b !== a && (null !== a && D.h(a, "boolean", M, "copiesArrays"), this.ur = a, this.i("copiesArrays", b, a))
    });
    D.defineProperty(M, {DA: "copiesArrayObjects"}, function () {
        return this.tr
    }, function (a) {
        var b = this.tr;
        b !== a && (null !== a && D.h(a, "boolean", M, "copiesArrayObjects"), this.tr = a, this.i("copiesArrayObjects", b, a))
    });
    M.prototype.copyNodeData = function (a) {
        if (null === a)return null;
        var b = null, b = this.Qo, b = null !== b ? b(a, this) : hh(this, a, !0);
        D.Sa(b) && D.vc(b);
        return b
    };
    function hh(a, b, c) {
        if (a.EA && Array.isArray(b)) {
            var d = [];
            for (c = 0; c < b.length; c++) {
                var e = hh(a, b[c], a.DA);
                d.push(e)
            }
            D.vc(d);
            return d
        }
        if (c && D.Sa(b)) {
            c = (c = b.constructor) ? new c : {};
            for (d in b)if ("__gohashid" !== d) {
                var e = D.vb(b, d), g;
                g = e;
                g instanceof P || g instanceof E || g instanceof Xg || g instanceof ih || g instanceof jh || g instanceof Yg || g instanceof oa || g instanceof Zg || g instanceof ag || g instanceof cg ? ("_" !== d[0] && D.trace('Warning: found GraphObject or Diagram reference when copying model data on property "' +
                    d + '" of data object: ' + b.toString() + "  \nModel data should not have any references to a Diagram or any part of a diagram, such as: " + g.toString()), g = !0) : g = g instanceof M || g instanceof rg || g instanceof Ag || g instanceof dg ? !0 : !1;
                g || (e = hh(a, e, !1));
                D.Ta(c, d, e)
            }
            D.vc(c);
            return c
        }
        return b instanceof N ? b.copy() : b instanceof Ba ? b.copy() : b instanceof C ? b.copy() : b instanceof Q ? b.copy() : b instanceof Kb ? b.copy() : b
    }

    D.defineProperty(M, {VH: "afterCopyFunction"}, function () {
        return this.dr
    }, function (a) {
        var b = this.dr;
        b !== a && (null !== a && D.h(a, "function", M, "afterCopyFunction"), this.dr = a, this.i("afterCopyFunction", b, a))
    });
    var kh = !1;
    M.prototype.setDataProperty = function (a, b, c) {
        v && (D.h(a, "object", M, "setDataProperty:data"), D.h(b, "string", M, "setDataProperty:propname"), "" === b && D.k("Model.setDataProperty: property name must not be an empty string when setting " + a + " to " + c));
        if (this.le(a))if (b === this.Sj)this.Ly(a, c); else {
            if (b === this.po) {
                this.Jy(a, c);
                return
            }
        } else!kh && a instanceof P && (kh = !0, D.trace('Model.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), D.trace("  Is that really your intent?"));
        var d = D.vb(a, b);
        d !== c &&
        (D.Ta(a, b, c), this.yB(a, b, d, c))
    };
    M.prototype.addArrayItem = function (a, b) {
        this.aB(a, -1, b)
    };
    M.prototype.insertArrayItem = M.prototype.aB = function (a, b, c) {
        v && (D.Yt(a, M, "insertArrayItem:arr"), D.p(b, M, "insertArrayItem:idx"));
        a === this.ye && D.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray");
        0 > b && (b = D.cb(a));
        D.Kh(a, b, c);
        $g(this, "", pg, "", a, null, c, null, b)
    };
    M.prototype.removeArrayItem = M.prototype.AG = function (a, b) {
        void 0 === b && (b = -1);
        v && (D.Yt(a, M, "removeArrayItem:arr"), D.p(b, M, "removeArrayItem:idx"));
        a === this.ye && D.k("Model.removeArrayItem should not be called on the Model.nodeDataArray");
        -1 === b && (b = D.cb(a) - 1);
        var c = D.La(a, b);
        D.Xg(a, b);
        $g(this, "", qg, "", a, c, null, b, null)
    };
    D.defineProperty(M, {po: "nodeCategoryProperty"}, function () {
        return this.gn
    }, function (a) {
        var b = this.gn;
        b !== a && (ah(a, M, "nodeCategoryProperty"), this.gn = a, this.i("nodeCategoryProperty", b, a))
    });
    M.prototype.getCategoryForNodeData = M.prototype.TA = function (a) {
        if (null === a)return "";
        var b = this.gn;
        if ("" === b)return "";
        b = D.vb(a, b);
        if (void 0 === b)return "";
        if ("string" === typeof b)return b;
        D.k("getCategoryForNodeData found a non-string category for " + a + ": " + b);
        return ""
    };
    M.prototype.setCategoryForNodeData = M.prototype.Jy = function (a, b) {
        D.h(b, "string", M, "setCategoryForNodeData:cat");
        if (null !== a) {
            var c = this.gn;
            if ("" !== c)if (this.le(a)) {
                var d = D.vb(a, c);
                void 0 === d && (d = "");
                d !== b && (D.Ta(a, c, b), $g(this, "nodeCategory", eg, c, a, d, b))
            } else D.Ta(a, c, b)
        }
    };
    function X(a, b) {
        M.call(this);
        2 < arguments.length && D.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data.");
        this.cf = [];
        this.ki = new L(Object);
        this.qd = new ma(null, Object);
        this.Jl = "";
        this.sl = this.Po = this.yp = null;
        this.li = "from";
        this.mi = "to";
        this.cn = this.bn = "";
        this.an = "category";
        this.Lg = "";
        this.Bp = "isGroup";
        this.Bh = "group";
        this.vr = !1;
        void 0 !== a && (this.pg = a);
        void 0 !== b && (this.bh = b)
    }

    D.Ra(X, M);
    D.ka("GraphLinksModel", X);
    X.prototype.cloneProtected = function (a) {
        M.prototype.cloneProtected.call(this, a);
        a.Jl = this.Jl;
        a.yp = this.yp;
        a.Po = this.Po;
        a.li = this.li;
        a.mi = this.mi;
        a.bn = this.bn;
        a.cn = this.cn;
        a.an = this.an;
        a.Lg = this.Lg;
        a.Bp = this.Bp;
        a.Bh = this.Bh;
        a.vr = this.vr
    };
    X.prototype.clear = X.prototype.clear = function () {
        M.prototype.clear.call(this);
        this.cf = [];
        this.qd.clear();
        this.ki.clear()
    };
    f = X.prototype;
    f.toString = function (a) {
        void 0 === a && (a = 0);
        if (2 <= a)return this.WB();
        var b = ("" !== this.name ? this.name : "") + " GraphLinksModel";
        if (0 < a) {
            b += "\n node data:";
            a = this.pg;
            for (var c = D.cb(a), d = 0, d = 0; d < c; d++)var e = D.La(a, d), b = b + (" " + this.Ab(e) + ":" + ha(e));
            b += "\n link data:";
            a = this.bh;
            c = D.cb(a);
            for (d = 0; d < c; d++)e = D.La(a, d), b += " " + this.rm(e) + "--\x3e" + this.sm(e)
        }
        return b
    };
    f.Bo = function () {
        var a = M.prototype.Bo.call(this), b = "";
        "category" !== this.Gu && "string" === typeof this.Gu && (b += ',\n  "linkCategoryProperty": ' + this.quote(this.Gu));
        "" !== this.Qj && "string" === typeof this.Qj && (b += ',\n  "linkKeyProperty": ' + this.quote(this.Qj));
        "from" !== this.fo && "string" === typeof this.fo && (b += ',\n  "linkFromKeyProperty": ' + this.quote(this.fo));
        "to" !== this.ho && "string" === typeof this.ho && (b += ',\n  "linkToKeyProperty": ' + this.quote(this.ho));
        "" !== this.Hu && "string" === typeof this.Hu && (b += ',\n  "linkFromPortIdProperty": ' +
            this.quote(this.Hu));
        "" !== this.Ju && "string" === typeof this.Ju && (b += ',\n  "linkToPortIdProperty": ' + this.quote(this.Ju));
        "" !== this.Iu && "string" === typeof this.Iu && (b += ',\n  "linkLabelKeysProperty": ' + this.quote(this.Iu));
        "isGroup" !== this.Dq && "string" === typeof this.Dq && (b += ',\n  "nodeIsGroupProperty": ' + this.quote(this.Dq));
        "group" !== this.Qu && "string" === typeof this.Qu && (b += ',\n  "nodeGroupKeyProperty": ' + this.quote(this.Qu));
        return a + b
    };
    f.Uu = function (a) {
        M.prototype.Uu.call(this, a);
        a.linkKeyProperty && (this.Qj = a.linkKeyProperty);
        a.linkFromKeyProperty && (this.fo = a.linkFromKeyProperty);
        a.linkToKeyProperty && (this.ho = a.linkToKeyProperty);
        a.linkFromPortIdProperty && (this.Hu = a.linkFromPortIdProperty);
        a.linkToPortIdProperty && (this.Ju = a.linkToPortIdProperty);
        a.linkCategoryProperty && (this.Gu = a.linkCategoryProperty);
        a.linkLabelKeysProperty && (this.Iu = a.linkLabelKeysProperty);
        a.nodeIsGroupProperty && (this.Dq = a.nodeIsGroupProperty);
        a.nodeGroupKeyProperty &&
        (this.Qu = a.nodeGroupKeyProperty)
    };
    f.iC = function () {
        var a = M.prototype.iC.call(this), b = ',\n  "linkDataArray": ' + wg(this, this.bh, !0);
        return a + b
    };
    f.AB = function (a) {
        M.prototype.AB.call(this, a);
        a = a.linkDataArray;
        D.isArray(a) && (this.Xu(a), this.bh = a)
    };
    f.jC = function (a) {
        if (!(a instanceof X))return D.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel"), "";
        "" === this.Qj && D.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");
        var b = M.prototype.jC.call(this, a);
        yg(this, a, "linkKeyProperty");
        yg(this, a, "linkFromKeyProperty");
        yg(this, a, "linkToKeyProperty");
        yg(this, a, "linkLabelKeysProperty");
        yg(this, a, "nodeIsGroupProperty");
        yg(this, a, "nodeGroupKeyProperty");
        for (var c = new L, d = new L, e = (new L).Tc(this.qd.eG),
                 g = new ma, h = a.bh, k = 0; k < h.length; k++) {
            var l = h[k], m = a.Gf(l);
            if (void 0 !== m) {
                e.remove(m);
                var n = this.lq(m);
                null === n ? (c.add(m), d.add(l)) : xg(this, n, l, g) || d.add(l)
            } else this.kB(l), m = this.Gf(l), c.add(m), d.add(l)
        }
        a = b;
        0 < c.count && (a += this.$y + wg(this, c.oc(), !0));
        0 < d.count && (a += this.qC + wg(this, d.oc(), !0));
        0 < e.count && (a += this.bz + wg(this, e.oc(), !0));
        return a
    };
    f.$y = ',\n  "insertedLinkKeys": ';
    f.qC = ',\n  "modifiedLinkData": ';
    f.bz = ',\n  "removedLinkKeys": ';
    f.hC = function (a, b) {
        "" === this.Qj && D.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");
        var c = M.prototype.hC.call(this, a, b), d = this, e = new L, g = new L, h = new L;
        a.eg.each(function (a) {
            a.ga === d && ("linkDataArray" === a.yf ? a.Kc === pg ? e.add(a.newValue) : a.Kc === qg && h.add(a.oldValue) : d.Nh(a.object) && g.add(a.object))
        });
        var k = new L;
        e.each(function (a) {
            k.add(d.Gf(a));
            b || g.add(a)
        });
        var l = new L;
        h.each(function (a) {
            l.add(d.Gf(a));
            b && g.add(a)
        });
        0 < k.count && (c += (b ? this.bz : this.$y) +
            wg(this, k.oc(), !0));
        0 < g.count && (c += this.qC + wg(this, g.oc(), !0));
        0 < l.count && (c += (b ? this.$y : this.bz) + wg(this, l.oc(), !0));
        return c
    };
    f.zB = function (a) {
        M.prototype.zB.call(this, a);
        var b = a.insertedLinkKeys, c = a.modifiedLinkData, d = new ma;
        if (D.isArray(c))for (var e = 0; e < c.length; e++) {
            var g = D.La(c, e), h = this.Gf(g);
            void 0 !== h && null !== h && d.set(h, g)
        }
        if (D.isArray(b))for (var e = D.cb(b), k = 0; k < e; k++)g = D.La(b, k), h = this.lq(g), null === h && (h = (h = d.get(g)) ? h : this.Ax({}), this.WG(h, g), this.Rt(h));
        if (D.isArray(c))for (e = D.cb(c), k = 0; k < e; k++)if (g = D.La(c, k), h = this.Gf(g), h = this.lq(h), null !== h)for (var l in g)"__gohashid" !== l && l !== this.Qj && this.setDataProperty(h,
            l, g[l]);
        a = a.removedLinkKeys;
        if (D.isArray(a))for (e = D.cb(a), k = 0; k < e; k++)g = D.La(a, k), h = this.lq(g), null !== h && this.By(h)
    };
    f.Hn = function (a, b) {
        if (a.Kc === pg) {
            var c = a.Rj;
            if ("linkDataArray" === a.yf) {
                var d = a.newValue;
                if (D.Sa(d) && "number" === typeof c) {
                    var e = this.Gf(d);
                    b ? (this.ki.remove(d), D.La(this.cf, c) === d && D.Xg(this.cf, c), void 0 !== e && this.qd.remove(e)) : (this.ki.add(d), D.La(this.cf, c) !== d && D.Kh(this.cf, c, d), void 0 !== e && this.qd.add(e, d))
                }
                return
            }
            if ("linkLabelKeys" === a.yf) {
                d = this.Uk(a.object);
                D.isArray(d) && "number" === typeof c && (b ? (c = D.cm(d, a.newValue), 0 <= c && D.Xg(d, c)) : 0 > D.cm(d, a.newValue) && D.Kh(d, c, a.newValue));
                return
            }
        } else if (a.Kc ===
            qg) {
            c = a.Tj;
            if ("linkDataArray" === a.yf) {
                d = a.oldValue;
                D.Sa(d) && "number" === typeof c && (e = this.Gf(d), b ? (this.ki.add(d), D.La(this.cf, c) !== d && D.Kh(this.cf, c, d), void 0 !== e && this.qd.add(e, d)) : (this.ki.remove(d), D.La(this.cf, c) === d && D.Xg(this.cf, c), void 0 !== e && this.qd.remove(e)));
                return
            }
            if ("linkLabelKeys" === a.yf) {
                d = this.Uk(a.object);
                D.isArray(d) && "number" === typeof c && (b ? 0 > D.cm(d, a.newValue) && D.Kh(d, c, a.newValue) : (c = D.cm(d, a.newValue), 0 <= c && D.Xg(d, c)));
                return
            }
        }
        M.prototype.Hn.call(this, a, b)
    };
    D.defineProperty(X, {vA: "archetypeNodeData"}, function () {
        return this.sl
    }, function (a) {
        var b = this.sl;
        b !== a && (null !== a && D.l(a, Object, X, "archetypeNodeData"), this.sl = a, this.i("archetypeNodeData", b, a))
    });
    X.prototype.io = function (a) {
        if (void 0 !== a) {
            var b = this.sl;
            if (null !== b) {
                var c = this.He(a);
                null === c && (c = this.copyNodeData(b), D.Ta(c, this.xk, a), this.Zl(c))
            }
            return a
        }
    };
    D.defineProperty(X, {fo: "linkFromKeyProperty"}, function () {
        return this.li
    }, function (a) {
        var b = this.li;
        b !== a && (ah(a, X, "linkFromKeyProperty"), this.li = a, this.i("linkFromKeyProperty", b, a))
    });
    X.prototype.getFromKeyForLinkData = X.prototype.rm = function (a) {
        if (null !== a) {
            var b = this.li;
            if ("" !== b && (b = D.vb(a, b), void 0 !== b)) {
                if (bh(b))return b;
                D.k("FromKey value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    X.prototype.setFromKeyForLinkData = X.prototype.JB = function (a, b) {
        null === b && (b = void 0);
        void 0 === b || bh(b) || D.jc(b, "number or string", X, "setFromKeyForLinkData:key");
        if (null !== a) {
            var c = this.li;
            if ("" !== c)if (b = this.io(b), this.Nh(a)) {
                var d = D.vb(a, c);
                d !== b && (gh(this, d, a), D.Ta(a, c, b), null === this.He(b) && fh(this, b, a), $g(this, "linkFromKey", eg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ta(a, c, b)
        }
    };
    D.defineProperty(X, {ho: "linkToKeyProperty"}, function () {
        return this.mi
    }, function (a) {
        var b = this.mi;
        b !== a && (ah(a, X, "linkToKeyProperty"), this.mi = a, this.i("linkToKeyProperty", b, a))
    });
    X.prototype.getToKeyForLinkData = X.prototype.sm = function (a) {
        if (null !== a) {
            var b = this.mi;
            if ("" !== b && (b = D.vb(a, b), void 0 !== b)) {
                if (bh(b))return b;
                D.k("ToKey value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    X.prototype.setToKeyForLinkData = X.prototype.PB = function (a, b) {
        null === b && (b = void 0);
        void 0 === b || bh(b) || D.jc(b, "number or string", X, "setToKeyForLinkData:key");
        if (null !== a) {
            var c = this.mi;
            if ("" !== c)if (b = this.io(b), this.Nh(a)) {
                var d = D.vb(a, c);
                d !== b && (gh(this, d, a), D.Ta(a, c, b), null === this.He(b) && fh(this, b, a), $g(this, "linkToKey", eg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ta(a, c, b)
        }
    };
    D.defineProperty(X, {Hu: "linkFromPortIdProperty"}, function () {
        return this.bn
    }, function (a) {
        var b = this.bn;
        b !== a && (ah(a, X, "linkFromPortIdProperty"), a !== this.fo && a !== this.ho || D.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: " + a), this.bn = a, this.i("linkFromPortIdProperty", b, a))
    });
    X.prototype.getFromPortIdForLinkData = X.prototype.RI = function (a) {
        if (null === a)return "";
        var b = this.bn;
        if ("" === b)return "";
        a = D.vb(a, b);
        return void 0 === a ? "" : a
    };
    X.prototype.setFromPortIdForLinkData = X.prototype.KB = function (a, b) {
        D.h(b, "string", X, "setFromPortIdForLinkData:portname");
        if (null !== a) {
            var c = this.bn;
            if ("" !== c)if (this.Nh(a)) {
                var d = D.vb(a, c);
                void 0 === d && (d = "");
                d !== b && (D.Ta(a, c, b), $g(this, "linkFromPortId", eg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ta(a, c, b)
        }
    };
    D.defineProperty(X, {Ju: "linkToPortIdProperty"}, function () {
        return this.cn
    }, function (a) {
        var b = this.cn;
        b !== a && (ah(a, X, "linkToPortIdProperty"), a !== this.fo && a !== this.ho || D.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: " + a), this.cn = a, this.i("linkToPortIdProperty", b, a))
    });
    X.prototype.getToPortIdForLinkData = X.prototype.VI = function (a) {
        if (null === a)return "";
        var b = this.cn;
        if ("" === b)return "";
        a = D.vb(a, b);
        return void 0 === a ? "" : a
    };
    X.prototype.setToPortIdForLinkData = X.prototype.QB = function (a, b) {
        D.h(b, "string", X, "setToPortIdForLinkData:portname");
        if (null !== a) {
            var c = this.cn;
            if ("" !== c)if (this.Nh(a)) {
                var d = D.vb(a, c);
                void 0 === d && (d = "");
                d !== b && (D.Ta(a, c, b), $g(this, "linkToPortId", eg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ta(a, c, b)
        }
    };
    D.defineProperty(X, {Iu: "linkLabelKeysProperty"}, function () {
        return this.Lg
    }, function (a) {
        var b = this.Lg;
        b !== a && (ah(a, X, "linkLabelKeysProperty"), this.Lg = a, this.i("linkLabelKeysProperty", b, a))
    });
    X.prototype.getLabelKeysForLinkData = X.prototype.Uk = function (a) {
        if (null === a)return D.Eo;
        var b = this.Lg;
        if ("" === b)return D.Eo;
        a = D.vb(a, b);
        return void 0 === a ? D.Eo : a
    };
    X.prototype.setLabelKeysForLinkData = X.prototype.XG = function (a, b) {
        D.Yt(b, X, "setLabelKeysForLinkData:arr");
        if (null !== a) {
            var c = this.Lg;
            if ("" !== c)if (this.Nh(a)) {
                var d = D.vb(a, c);
                void 0 === d && (d = D.Eo);
                if (d !== b) {
                    for (var e = D.cb(d), g = 0; g < e; g++) {
                        var h = D.La(d, g);
                        gh(this, h, a)
                    }
                    D.Ta(a, c, b);
                    e = D.cb(b);
                    for (g = 0; g < e; g++)h = D.La(b, g), null === this.He(h) && fh(this, h, a);
                    $g(this, "linkLabelKeys", eg, c, a, d, b);
                    "string" === typeof c && this.Nb(a, c)
                }
            } else D.Ta(a, c, b)
        }
    };
    X.prototype.addLabelKeyForLinkData = X.prototype.JE = function (a, b) {
        if (null !== b && void 0 !== b && (bh(b) || D.jc(b, "number or string", X, "addLabelKeyForLinkData:key"), null !== a)) {
            var c = this.Lg;
            if ("" !== c) {
                var d = D.vb(a, c);
                if (void 0 === d)c = [], c.push(b), this.XG(a, c); else if (D.isArray(d)) {
                    var e = D.cm(d, b);
                    0 <= e || (e = D.cb(d), D.Kh(d, Infinity, b), this.Nh(a) && (null === this.He(b) && fh(this, b, a), $g(this, "linkLabelKeys", pg, c, a, null, b, null, e)))
                } else D.k(c + " property is not an Array; cannot addLabelKeyForLinkData: " + a)
            }
        }
    };
    X.prototype.removeLabelKeyForLinkData = X.prototype.cK = function (a, b) {
        if (null !== b && void 0 !== b && (bh(b) || D.jc(b, "number or string", X, "removeLabelKeyForLinkData:key"), null !== a)) {
            var c = this.Lg;
            if ("" !== c) {
                var d = D.vb(a, c);
                if (D.isArray(d)) {
                    var e = D.cm(d, b);
                    0 > e || (D.Xg(d, e), this.Nh(a) && (gh(this, b, a), $g(this, "linkLabelKeys", qg, c, a, b, null, e, null)))
                } else void 0 !== d && D.k(c + " property is not an Array; cannot removeLabelKeyforLinkData: " + a)
            }
        }
    };
    D.defineProperty(X, {bh: "linkDataArray"}, function () {
        return this.cf
    }, function (a) {
        var b = this.cf;
        if (b !== a) {
            D.Yt(a, X, "linkDataArray");
            this.qd.clear();
            for (var c = D.cb(a), d = 0; d < c; d++) {
                var e = D.La(a, d);
                if (!D.Sa(e)) {
                    D.k("GraphLinksModel.linkDataArray must only contain Objects, not: " + e);
                    return
                }
                D.pq(e)
            }
            this.cf = a;
            if ("" !== this.Qj) {
                for (var g = new K(Object), d = 0; d < c; d++) {
                    var e = D.La(a, d), h = this.Gf(e);
                    void 0 === h ? g.add(e) : null !== this.qd.na(h) ? g.add(e) : this.qd.add(h, e)
                }
                for (d = g.j; d.next();)e = d.value, this.kB(e), g = this.Gf(e),
                void 0 !== g && this.qd.add(g, e)
            }
            g = new L(Object);
            for (d = 0; d < c; d++)e = D.La(a, d), g.add(e);
            this.ki = g;
            $g(this, "linkDataArray", eg, "linkDataArray", this, b, a);
            for (d = 0; d < c; d++)e = D.La(a, d), lh(this, e)
        }
    });
    D.defineProperty(X, {Qj: "linkKeyProperty"}, function () {
        return this.Jl
    }, function (a) {
        var b = this.Jl;
        if (b !== a) {
            ah(a, X, "linkKeyProperty");
            this.Jl = a;
            this.qd.clear();
            for (var c = D.cb(this.bh), d = 0; d < c; d++) {
                var e = D.La(this.bh, d), g = this.Gf(e);
                void 0 !== g && this.qd.add(g, e)
            }
            this.i("linkKeyProperty", b, a)
        }
    });
    X.prototype.getKeyForLinkData = X.prototype.Gf = function (a) {
        if (null !== a) {
            var b = this.Jl;
            if ("" !== b && (b = D.vb(a, b), void 0 !== b)) {
                if (bh(b))return b;
                D.k("Key value for link data " + a + " is not a number or a string: " + b)
            }
        }
    };
    X.prototype.setKeyForLinkData = X.prototype.WG = function (a, b) {
        void 0 !== b && null !== b && bh(b) || D.jc(b, "number or string", X, "setKeyForLinkData:key");
        if (null !== a) {
            var c = this.Jl;
            if ("" !== c)if (this.Nh(a)) {
                var d = D.vb(a, c);
                d !== b && null === this.lq(b) && (D.Ta(a, c, b), this.qd.remove(d), this.qd.add(b, a), $g(this, "linkKey", eg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ta(a, c, b)
        }
    };
    D.defineProperty(X, {XL: "makeUniqueLinkKeyFunction"}, function () {
        return this.yp
    }, function (a) {
        var b = this.yp;
        b !== a && (null !== a && D.h(a, "function", X, "makeUniqueLinkKeyFunction"), this.yp = a, this.i("makeUniqueLinkKeyFunction", b, a))
    });
    X.prototype.findLinkDataForKey = X.prototype.lq = function (a) {
        null === a && D.k("GraphLinksModel.findLinkDataForKey:key must not be null");
        return void 0 !== a && bh(a) ? this.qd.na(a) : null
    };
    X.prototype.makeLinkDataKeyUnique = X.prototype.kB = function (a) {
        if (null !== a) {
            var b = this.Jl;
            if ("" !== b) {
                var c = this.Gf(a);
                if (void 0 === c || this.qd.contains(c)) {
                    var d = this.yp;
                    if (null !== d && (c = d(this, a), void 0 !== c && null !== c && !this.qd.contains(c))) {
                        D.Ta(a, b, c);
                        return
                    }
                    if ("string" === typeof c) {
                        for (d = 2; this.qd.contains(c + d);)d++;
                        D.Ta(a, b, c + d)
                    } else if (void 0 === c || "number" === typeof c) {
                        for (d = -this.qd.count - 1; this.qd.contains(d);)d--;
                        D.Ta(a, b, d)
                    } else D.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: " +
                        c)
                }
            }
        }
    };
    X.prototype.containsLinkData = X.prototype.Nh = function (a) {
        return null === a ? !1 : this.ki.contains(a)
    };
    X.prototype.addLinkData = X.prototype.Rt = function (a) {
        null !== a && (D.pq(a), this.Nh(a) || mh(this, a, !0))
    };
    function mh(a, b, c) {
        if ("" !== a.Qj) {
            var d = a.Gf(b);
            if (void 0 !== d && a.qd.na(d) === b)return;
            a.kB(b);
            d = a.Gf(b);
            if (void 0 === d) {
                D.k("GraphLinksModel.makeLinkDataKeyUnique failed on " + b + ". Data not added to model.");
                return
            }
            a.qd.add(d, b)
        }
        a.ki.add(b);
        d = null;
        c && (d = D.cb(a.cf), D.Kh(a.cf, d, b));
        $g(a, "linkDataArray", pg, "linkDataArray", a, null, b, null, d);
        lh(a, b)
    }

    X.prototype.addLinkDataCollection = function (a) {
        if (D.isArray(a))for (var b = D.cb(a), c = 0; c < b; c++)this.Rt(D.La(a, c)); else for (a = a.j; a.next();)this.Rt(a.value)
    };
    X.prototype.removeLinkData = X.prototype.By = function (a) {
        null !== a && nh(this, a, !0)
    };
    function nh(a, b, c) {
        a.ki.remove(b);
        var d = a.Gf(b);
        void 0 !== d && a.qd.remove(d);
        d = null;
        if (c) {
            d = D.cm(a.cf, b);
            if (0 > d)return;
            D.Xg(a.cf, d)
        }
        $g(a, "linkDataArray", qg, "linkDataArray", a, b, null, d, null);
        c = a.rm(b);
        gh(a, c, b);
        c = a.sm(b);
        gh(a, c, b);
        d = a.Uk(b);
        if (D.isArray(d))for (var e = D.cb(d), g = 0; g < e; g++)c = D.La(d, g), gh(a, c, b)
    }

    X.prototype.removeLinkDataCollection = function (a) {
        if (D.isArray(a))for (var b = D.cb(a), c = 0; c < b; c++)this.By(D.La(a, c)); else for (a = a.j; a.next();)this.By(a.value)
    };
    function lh(a, b) {
        var c = a.rm(b), c = a.io(c);
        null === a.He(c) && fh(a, c, b);
        c = a.sm(b);
        c = a.io(c);
        null === a.He(c) && fh(a, c, b);
        var d = a.Uk(b);
        if (D.isArray(d))for (var e = D.cb(d), g = 0; g < e; g++)c = D.La(d, g), null === a.He(c) && fh(a, c, b)
    }

    D.defineProperty(X, {mL: "copyLinkDataFunction"}, function () {
        return this.Po
    }, function (a) {
        var b = this.Po;
        b !== a && (null !== a && D.h(a, "function", X, "copyLinkDataFunction"), this.Po = a, this.i("copyLinkDataFunction", b, a))
    });
    X.prototype.copyLinkData = X.prototype.Ax = function (a) {
        if (null === a)return null;
        var b = null, b = this.Po, b = null !== b ? b(a, this) : hh(this, a, !0);
        D.Sa(b) && (D.vc(b), "" !== this.li && D.Ta(b, this.li, void 0), "" !== this.mi && D.Ta(b, this.mi, void 0), "" !== this.Lg && D.Ta(b, this.Lg, []));
        return b
    };
    D.defineProperty(X, {Dq: "nodeIsGroupProperty"}, function () {
        return this.Bp
    }, function (a) {
        var b = this.Bp;
        b !== a && (ah(a, X, "nodeIsGroupProperty"), this.Bp = a, this.i("nodeIsGroupProperty", b, a))
    });
    X.prototype.isGroupForNodeData = X.prototype.eB = function (a) {
        if (null === a)return !1;
        var b = this.Bp;
        return "" === b ? !1 : D.vb(a, b) ? !0 : !1
    };
    D.defineProperty(X, {Qu: "nodeGroupKeyProperty"}, function () {
        return this.Bh
    }, function (a) {
        var b = this.Bh;
        b !== a && (ah(a, X, "nodeGroupKeyProperty"), this.Bh = a, this.i("nodeGroupKeyProperty", b, a))
    });
    D.defineProperty(X, {Ln: "copiesGroupKeyOfNodeData"}, function () {
        return this.vr
    }, function (a) {
        this.vr !== a && (D.h(a, "boolean", X, "copiesGroupKeyOfNodeData"), this.vr = a)
    });
    X.prototype.getGroupKeyForNodeData = X.prototype.Un = function (a) {
        if (null !== a) {
            var b = this.Bh;
            if ("" !== b && (b = D.vb(a, b), void 0 !== b)) {
                if (bh(b))return b;
                D.k("GroupKey value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    X.prototype.setGroupKeyForNodeData = X.prototype.LB = function (a, b) {
        null === b && (b = void 0);
        void 0 === b || bh(b) || D.jc(b, "number or string", X, "setGroupKeyForNodeData:key");
        if (null !== a) {
            var c = this.Bh;
            if ("" !== c)if (this.le(a)) {
                var d = D.vb(a, c);
                d !== b && (gh(this, d, a), D.Ta(a, c, b), null === this.He(b) && fh(this, b, a), $g(this, "nodeGroupKey", eg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ta(a, c, b)
        }
    };
    X.prototype.copyNodeData = function (a) {
        if (null === a)return null;
        a = M.prototype.copyNodeData.call(this, a);
        this.Ln || "" === this.Bh || void 0 === D.vb(a, this.Bh) || D.Ta(a, this.Bh, void 0);
        return a
    };
    X.prototype.setDataProperty = function (a, b, c) {
        v && (D.h(a, "object", X, "setDataProperty:data"), D.h(b, "string", X, "setDataProperty:propname"), "" === b && D.k("GraphLinksModel.setDataProperty: property name must not be an empty string when setting " + a + " to " + c));
        if (this.le(a))if (b === this.Sj)this.Ly(a, c); else {
            if (b === this.po) {
                this.Jy(a, c);
                return
            }
            if (b === this.Qu) {
                this.LB(a, c);
                return
            }
            b === this.Dq && D.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: " + b)
        } else if (this.Nh(a)) {
            if (b ===
                this.fo) {
                this.JB(a, c);
                return
            }
            if (b === this.ho) {
                this.PB(a, c);
                return
            }
            if (b === this.Hu) {
                this.KB(a, c);
                return
            }
            if (b === this.Ju) {
                this.QB(a, c);
                return
            }
            if (b === this.Qj) {
                this.WG(a, c);
                return
            }
            if (b === this.Gu) {
                this.VG(a, c);
                return
            }
            if (b === this.Iu) {
                this.XG(a, c);
                return
            }
        } else!kh && a instanceof P && (kh = !0, D.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), D.trace("  Is that really your intent?"));
        var d = D.vb(a, b);
        d !== c && (D.Ta(a, b, c), this.yB(a, b, d, c))
    };
    f = X.prototype;
    f.Wu = function (a, b) {
        M.prototype.Wu.call(this, a, b);
        for (var c = this.Gc.j; c.next();)this.EB(c.value, a, b);
        for (c = this.ki.j; c.next();) {
            var d = c.value, e = a, g = b;
            if (this.rm(d) === e) {
                var h = this.li;
                D.Ta(d, h, g);
                $g(this, "linkFromKey", eg, h, d, e, g);
                "string" === typeof h && this.Nb(d, h)
            }
            this.sm(d) === e && (h = this.mi, D.Ta(d, h, g), $g(this, "linkToKey", eg, h, d, e, g), "string" === typeof h && this.Nb(d, h));
            h = this.Uk(d);
            if (D.isArray(h))for (var k = D.cb(h), l = this.Lg, m = 0; m < k; m++)D.La(h, m) === e && (D.QE(h, m, g), $g(this, "linkLabelKeys", pg, l, d, e, g, m,
                m))
        }
    };
    f.EB = function (a, b, c) {
        if (this.Un(a) === b) {
            var d = this.Bh;
            D.Ta(a, d, c);
            $g(this, "nodeGroupKey", eg, d, a, b, c);
            "string" === typeof d && this.Nb(a, d)
        }
    };
    f.dC = function () {
        M.prototype.dC.call(this);
        for (var a = this.bh, b = D.cb(a), c = 0; c < b; c++) {
            var d = D.La(a, c);
            lh(this, d)
        }
    };
    f.Iq = function (a) {
        M.prototype.Iq.call(this, a);
        a = this.Ab(a);
        var b = eh(this, a);
        if (null !== b) {
            for (var c = new K(Object), b = b.j; b.next();) {
                var d = b.value;
                if (this.le(d)) {
                    if (this.Un(d) === a) {
                        var e = this.Bh;
                        $g(this, "nodeGroupKey", eg, e, d, a, a);
                        "string" === typeof e && this.Nb(d, e);
                        c.add(d)
                    }
                } else if (this.rm(d) === a && (e = this.li, $g(this, "linkFromKey", eg, e, d, a, a), "string" === typeof e && this.Nb(d, e), c.add(d)), this.sm(d) === a && (e = this.mi, $g(this, "linkToKey", eg, e, d, a, a), "string" === typeof e && this.Nb(d, e), c.add(d)), e = this.Uk(d), D.isArray(e))for (var g =
                    D.cb(e), h = this.Lg, k = 0; k < g; k++)D.La(e, k) === a && ($g(this, "linkLabelKeys", pg, h, d, a, a, k, k), c.add(d))
            }
            for (c = c.j; c.next();)gh(this, a, c.value)
        }
    };
    f.Hq = function (a) {
        M.prototype.Hq.call(this, a);
        var b = this.Un(a);
        null === this.He(b) && fh(this, b, a)
    };
    f.kv = function (a) {
        M.prototype.kv.call(this, a);
        var b = this.Un(a);
        gh(this, b, a)
    };
    D.defineProperty(X, {Gu: "linkCategoryProperty"}, function () {
        return this.an
    }, function (a) {
        var b = this.an;
        b !== a && (ah(a, X, "linkCategoryProperty"), this.an = a, this.i("linkCategoryProperty", b, a))
    });
    X.prototype.getCategoryForLinkData = X.prototype.Qx = function (a) {
        if (null === a)return "";
        var b = this.an;
        if ("" === b)return "";
        b = D.vb(a, b);
        if (void 0 === b)return "";
        if ("string" === typeof b)return b;
        D.k("getCategoryForLinkData found a non-string category for " + a + ": " + b);
        return ""
    };
    X.prototype.setCategoryForLinkData = X.prototype.VG = function (a, b) {
        D.h(b, "string", X, "setCategoryForLinkData:cat");
        if (null !== a) {
            var c = this.an;
            if ("" !== c)if (this.Nh(a)) {
                var d = D.vb(a, c);
                void 0 === d && (d = "");
                d !== b && (D.Ta(a, c, b), $g(this, "linkCategory", eg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ta(a, c, b)
        }
    };
    function zg(a) {
        1 < arguments.length && D.k("TreeModel constructor can only take one optional argument, the Array of node data.");
        M.call(this);
        this.Ch = "parent";
        this.wr = !1;
        this.kn = "parentLinkCategory";
        void 0 !== a && (this.pg = a)
    }

    D.Ra(zg, M);
    D.ka("TreeModel", zg);
    zg.prototype.cloneProtected = function (a) {
        M.prototype.cloneProtected.call(this, a);
        a.Ch = this.Ch;
        a.wr = this.wr;
        a.kn = this.kn
    };
    zg.prototype.toString = function (a) {
        void 0 === a && (a = 0);
        if (2 <= a)return this.WB();
        var b = ("" !== this.name ? this.name : "") + " TreeModel";
        if (0 < a) {
            b += "\n node data:";
            a = this.pg;
            for (var c = D.cb(a), d = 0; d < c; d++)var e = D.La(a, d), b = b + (" " + this.Ab(e) + ":" + ha(e))
        }
        return b
    };
    zg.prototype.Bo = function () {
        var a = M.prototype.Bo.call(this), b = "";
        "parent" !== this.Ru && "string" === typeof this.Ru && (b += ',\n  "nodeParentKeyProperty": ' + this.quote(this.Ru));
        return a + b
    };
    zg.prototype.Uu = function (a) {
        M.prototype.Uu.call(this, a);
        a.nodeParentKeyProperty && (this.Ru = a.nodeParentKeyProperty)
    };
    zg.prototype.io = function (a) {
        return a
    };
    D.defineProperty(zg, {Ru: "nodeParentKeyProperty"}, function () {
        return this.Ch
    }, function (a) {
        var b = this.Ch;
        b !== a && (ah(a, zg, "nodeParentKeyProperty"), this.Ch = a, this.i("nodeParentKeyProperty", b, a))
    });
    D.defineProperty(zg, {Mn: "copiesParentKeyOfNodeData"}, function () {
        return this.wr
    }, function (a) {
        this.wr !== a && (D.h(a, "boolean", zg, "copiesParentKeyOfNodeData"), this.wr = a)
    });
    zg.prototype.getParentKeyForNodeData = zg.prototype.Wn = function (a) {
        if (null !== a) {
            var b = this.Ch;
            if ("" !== b && (b = D.vb(a, b), void 0 !== b)) {
                if (bh(b))return b;
                D.k("ParentKey value for node data " + a + " is not a number or a string: " + b)
            }
        }
    };
    zg.prototype.setParentKeyForNodeData = zg.prototype.Ji = function (a, b) {
        null === b && (b = void 0);
        void 0 === b || bh(b) || D.jc(b, "number or string", zg, "setParentKeyForNodeData:key");
        if (null !== a) {
            var c = this.Ch;
            if ("" !== c)if (b = this.io(b), this.le(a)) {
                var d = D.vb(a, c);
                d !== b && (gh(this, d, a), D.Ta(a, c, b), null === this.He(b) && fh(this, b, a), $g(this, "nodeParentKey", eg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ta(a, c, b)
        }
    };
    D.defineProperty(zg, {rM: "parentLinkCategoryProperty"}, function () {
        return this.kn
    }, function (a) {
        var b = this.kn;
        b !== a && (ah(a, zg, "parentLinkCategoryProperty"), this.kn = a, this.i("parentLinkCategoryProperty", b, a))
    });
    zg.prototype.getParentLinkCategoryForNodeData = zg.prototype.TI = function (a) {
        if (null === a)return "";
        var b = this.kn;
        if ("" === b)return "";
        b = D.vb(a, b);
        if (void 0 === b)return "";
        if ("string" === typeof b)return b;
        D.k("getParentLinkCategoryForNodeData found a non-string category for " + a + ": " + b);
        return ""
    };
    zg.prototype.setParentLinkCategoryForNodeData = zg.prototype.oK = function (a, b) {
        D.h(b, "string", zg, "setParentLinkCategoryForNodeData:cat");
        if (null !== a) {
            var c = this.kn;
            if ("" !== c)if (this.le(a)) {
                var d = D.vb(a, c);
                void 0 === d && (d = "");
                d !== b && (D.Ta(a, c, b), $g(this, "parentLinkCategory", eg, c, a, d, b), "string" === typeof c && this.Nb(a, c))
            } else D.Ta(a, c, b)
        }
    };
    zg.prototype.copyNodeData = function (a) {
        if (null === a)return null;
        a = M.prototype.copyNodeData.call(this, a);
        this.Mn || "" === this.Ch || void 0 === D.vb(a, this.Ch) || D.Ta(a, this.Ch, void 0);
        return a
    };
    zg.prototype.setDataProperty = function (a, b, c) {
        v && (D.h(a, "object", zg, "setDataProperty:data"), D.h(b, "string", zg, "setDataProperty:propname"), "" === b && D.k("TreeModel.setDataProperty: property name must not be an empty string when setting " + a + " to " + c));
        if (this.le(a))if (b === this.Sj)this.Ly(a, c); else {
            if (b === this.po) {
                this.Jy(a, c);
                return
            }
            if (b === this.Ru) {
                this.Ji(a, c);
                return
            }
        } else!kh && a instanceof P && (kh = !0, D.trace('TreeModel.setDataProperty is modifying a GraphObject, "' + a.toString() + '"'), D.trace("  Is that really your intent?"));
        var d = D.vb(a, b);
        d !== c && (D.Ta(a, b, c), this.yB(a, b, d, c))
    };
    f = zg.prototype;
    f.Wu = function (a, b) {
        M.prototype.Wu.call(this, a, b);
        for (var c = this.Gc.j; c.next();)this.EB(c.value, a, b)
    };
    f.EB = function (a, b, c) {
        if (this.Wn(a) === b) {
            var d = this.Ch;
            D.Ta(a, d, c);
            $g(this, "nodeParentKey", eg, d, a, b, c);
            "string" === typeof d && this.Nb(a, d)
        }
    };
    f.Iq = function (a) {
        M.prototype.Iq.call(this, a);
        a = this.Ab(a);
        var b = eh(this, a);
        if (null !== b) {
            for (var c = new K(Object), b = b.j; b.next();) {
                var d = b.value;
                if (this.le(d) && this.Wn(d) === a) {
                    var e = this.Ch;
                    $g(this, "nodeParentKey", eg, e, d, a, a);
                    "string" === typeof e && this.Nb(d, e);
                    c.add(d)
                }
            }
            for (c = c.j; c.next();)gh(this, a, c.value)
        }
    };
    f.Hq = function (a) {
        M.prototype.Hq.call(this, a);
        var b = this.Wn(a), b = this.io(b);
        null === this.He(b) && fh(this, b, a)
    };
    f.kv = function (a) {
        M.prototype.kv.call(this, a);
        var b = this.Wn(a);
        gh(this, b, a)
    };
    function oh(a, b, c) {
        D.vc(this);
        this.J = !1;
        void 0 === a ? a = "" : D.h(a, "string", oh, "constructor:targetprop");
        void 0 === b ? b = a : D.h(b, "string", oh, "constructor:sourceprop");
        void 0 === c ? c = null : null !== c && D.h(c, "function", oh, "constructor:conv");
        this.kE = -1;
        this.Tg = null;
        this.Up = a;
        this.Tp = this.Ft = 0;
        this.Xw = null;
        this.ms = !1;
        this.Lp = b;
        this.sr = c;
        this.Fs = ph;
        this.lr = null;
        this.Gz = new L
    }

    D.ka("Binding", oh);
    oh.prototype.copy = function () {
        var a = new oh;
        a.Up = this.Up;
        a.Ft = this.Ft;
        a.Tp = this.Tp;
        a.Xw = this.Xw;
        a.ms = this.ms;
        a.Lp = this.Lp;
        a.sr = this.sr;
        a.Fs = this.Fs;
        a.lr = this.lr;
        return a
    };
    var ph;
    oh.OneWay = ph = D.s(oh, "OneWay", 1);
    var qh;
    oh.TwoWay = qh = D.s(oh, "TwoWay", 2);
    oh.parseEnum = function (a, b) {
        D.h(a, "function", oh, "parseEnum:ctor");
        D.Da(b, a, oh, "parseEnum:defval");
        return function (c) {
            c = Ga(a, c);
            return null === c ? b : c
        }
    };
    oh.prototype.qc = function (a) {
        a.Oe === oh ? this.mode = a : D.Xj(this, a)
    };
    var ha;
    oh.toString = ha = function (a) {
        var b = a;
        D.Sa(a) && (a.text ? b = a.text : a.name ? b = a.name : void 0 !== a.key ? b = a.key : void 0 !== a.id ? b = a.id : a.constructor === Object && (a.Text ? b = a.Text : a.Name ? b = a.Name : void 0 !== a.Key ? b = a.Key : void 0 !== a.Id ? b = a.Id : void 0 !== a.ID && (b = a.ID)));
        return void 0 === b ? "undefined" : null === b ? "null" : b.toString()
    };
    oh.prototype.toString = function () {
        return "Binding(" + this.hv + ":" + this.$G + (-1 !== this.Cm ? " " + this.Cm : "") + " " + this.mode.name + ")"
    };
    oh.prototype.freeze = function () {
        this.J = !0;
        return this
    };
    oh.prototype.Xa = function () {
        this.J = !1;
        return this
    };
    D.defineProperty(oh, {Cm: null}, function () {
        return this.kE
    }, function (a) {
        this.J && D.pa(this);
        D.h(a, "number", oh, "targetId");
        this.kE = a
    });
    D.defineProperty(oh, {hv: "targetProperty"}, function () {
        return this.Up
    }, function (a) {
        this.J && D.pa(this);
        D.h(a, "string", oh, "targetProperty");
        this.Up = a
    });
    D.defineProperty(oh, {Uq: "sourceName"}, function () {
        return this.Xw
    }, function (a) {
        this.J && D.pa(this);
        null !== a && D.h(a, "string", oh, "sourceName");
        this.Xw = a;
        null !== a && (this.ms = !1)
    });
    D.defineProperty(oh, {by: "isToModel"}, function () {
        return this.ms
    }, function (a) {
        this.J && D.pa(this);
        D.h(a, "boolean", oh, "isToModel");
        this.ms = a
    });
    D.defineProperty(oh, {$G: "sourceProperty"}, function () {
        return this.Lp
    }, function (a) {
        this.J && D.pa(this);
        D.h(a, "string", oh, "sourceProperty");
        this.Lp = a
    });
    D.defineProperty(oh, {mI: "converter"}, function () {
        return this.sr
    }, function (a) {
        this.J && D.pa(this);
        null !== a && D.h(a, "function", oh, "converter");
        this.sr = a
    });
    D.defineProperty(oh, {aI: "backConverter"}, function () {
        return this.lr
    }, function (a) {
        this.J && D.pa(this);
        null !== a && D.h(a, "function", oh, "backConverter");
        this.lr = a
    });
    D.defineProperty(oh, {mode: "mode"}, function () {
        return this.Fs
    }, function (a) {
        this.J && D.pa(this);
        D.Da(a, oh, oh, "mode");
        this.Fs = a
    });
    oh.prototype.makeTwoWay = oh.prototype.FJ = function (a) {
        void 0 === a && (a = null);
        null !== a && D.h(a, "function", oh, "makeTwoWay");
        this.mode = qh;
        this.aI = a;
        return this
    };
    oh.prototype.ofObject = oh.prototype.py = function (a) {
        void 0 === a && (a = "");
        v && D.h(a, "string", oh, "ofObject:srcname");
        this.Uq = a;
        this.by = !1;
        return this
    };
    oh.prototype.ofModel = function () {
        this.Uq = null;
        this.by = !0;
        return this
    };
    function rh(a, b, c) {
        a = a.Uq;
        var d = null;
        return d = null === a || "" === a ? b : "/" === a ? c.Z : "." === a ? c : ".." === a ? c.Q : b.Hd(a)
    }

    oh.prototype.updateTarget = oh.prototype.pH = function (a, b, c) {
        var d = this.Lp;
        if (void 0 === c || "" === d || d === c) {
            c = this.Up;
            var e = this.sr;
            if (null === e && "" === c)D.trace("Binding error: target property is the empty string: " + this.toString()); else {
                v && "string" === typeof c && ("function" !== typeof a.setAttribute && 0 < c.length && "_" !== c[0] && !D.Tx(a, c) ? D.trace("Binding error: undefined target property: " + c + " on " + a.toString()) : "name" === c && a instanceof P && D.trace("Binding error: cannot modify GraphObject.name on " + a.toString()));
                var g = b;
                "" !== d && (g = D.vb(b, d));
                if (void 0 !== g)if (null === e)"" !== c && D.Ta(a, c, g); else try {
                    if ("" !== c) {
                        var h = e(g, a);
                        v && void 0 === h && D.trace('Binding warning: conversion function returned undefined when setting target property "' + c + '" on ' + a.toString() + ", function is: " + e);
                        D.Ta(a, c, h)
                    } else e(g, a)
                } catch (k) {
                    v && D.trace("Binding error: " + k.toString() + ' setting target property "' + c + '" on ' + a.toString() + " with conversion function: " + e)
                }
            }
        }
    };
    oh.prototype.updateSource = oh.prototype.Oy = function (a, b, c, d) {
        if (this.Fs === qh) {
            var e = this.Up;
            if (void 0 === c || e === c) {
                c = this.Lp;
                var g = this.lr, h = a;
                "" !== e && (h = D.vb(a, e));
                if (void 0 !== h && !this.Gz.contains(a))try {
                    this.Gz.add(a);
                    var k = null !== d ? d.g : null, l = null !== k ? k.ga : null;
                    if (null === g)if ("" !== c)null !== l ? (v && l.Sj === c && l.le(b) && D.trace("Binding error: cannot have TwoWay Binding on node data key property: " + this.toString()), l.setDataProperty(b, c, h)) : D.Ta(b, c, h); else {
                        if (null !== l && null !== d && 0 <= d.Eu && null !== d.Q &&
                            Array.isArray(d.Q.$k)) {
                            var m = d.Eu, n = d.Q.$k;
                            l.AG(n, m);
                            l.aB(n, m, h)
                        }
                    } else try {
                        if ("" !== c) {
                            var p = g(h, b, l);
                            null !== l ? (v && (l.Sj === c && l.le(b) && D.trace("Binding error: cannot have TwoWay Binding on node data key property: " + this.toString()), void 0 === p && D.trace('Binding warning: conversion function returned undefined when setting source property "' + c + '" on ' + b.toString() + ", function is: " + g)), l.setDataProperty(b, c, p)) : D.Ta(b, c, p)
                        } else p = g(h, b, l), void 0 !== p && null !== l && null !== d && 0 <= d.Eu && null !== d.Q && Array.isArray(d.Q.$k) &&
                        (m = d.Eu, n = d.Q.$k, l.AG(n, m), l.aB(n, m, p))
                    } catch (q) {
                        v && D.trace("Binding error: " + q.toString() + ' setting source property "' + c + '" on ' + b.toString() + " with conversion function: " + g)
                    }
                } finally {
                    this.Gz.remove(a)
                }
            }
        }
    };
    function Ag() {
        this.vH = (new K(dg)).freeze();
        this.ac = "";
        this.nD = !1
    }

    D.ka("Transaction", Ag);
    Ag.prototype.toString = function (a) {
        var b = "Transaction: " + this.name + " " + this.eg.count.toString() + (this.yu ? "" : ", incomplete");
        if (void 0 !== a && 0 < a) {
            a = this.eg.count;
            for (var c = 0; c < a; c++) {
                var d = this.eg.ea(c);
                null !== d && (b += "\n  " + d.toString())
            }
        }
        return b
    };
    Ag.prototype.clear = Ag.prototype.clear = function () {
        var a = this.eg;
        a.Xa();
        for (var b = a.count - 1; 0 <= b; b--) {
            var c = a.ea(b);
            null !== c && c.clear()
        }
        a.clear();
        a.freeze()
    };
    Ag.prototype.canUndo = Ag.prototype.canUndo = function () {
        return this.yu
    };
    Ag.prototype.undo = Ag.prototype.undo = function () {
        if (this.canUndo())for (var a = this.eg.count - 1; 0 <= a; a--) {
            var b = this.eg.ea(a);
            null !== b && b.undo()
        }
    };
    Ag.prototype.canRedo = Ag.prototype.canRedo = function () {
        return this.yu
    };
    Ag.prototype.redo = Ag.prototype.redo = function () {
        if (this.canRedo())for (var a = this.eg.count, b = 0; b < a; b++) {
            var c = this.eg.ea(b);
            null !== c && c.redo()
        }
    };
    D.w(Ag, {eg: "changes"}, function () {
        return this.vH
    });
    D.defineProperty(Ag, {name: "name"}, function () {
        return this.ac
    }, function (a) {
        this.ac = a
    });
    D.defineProperty(Ag, {yu: "isComplete"}, function () {
        return this.nD
    }, function (a) {
        this.nD = a
    });
    function rg() {
        this.Wz = new L(M);
        this.of = !1;
        this.zH = (new K(Ag)).freeze();
        this.uh = -1;
        this.CD = 999;
        this.Wf = !1;
        this.Mv = null;
        this.Wl = 0;
        this.kz = !1;
        v && (this.kz = !0);
        this.Ah = (new K("string")).freeze();
        this.Ap = new K("number");
        this.Hz = !0;
        this.Rz = !1
    }

    D.ka("UndoManager", rg);
    rg.prototype.toString = function (a) {
        for (var b = "UndoManager " + this.Ij + "<" + this.history.count + "<=" + this.kG, b = b + "[", c = this.pG.count, d = 0; d < c; d++)0 < d && (b += " "), b += this.pG.ea(d);
        b += "]";
        if (void 0 !== a && 0 < a)for (c = this.history.count, d = 0; d < c; d++)b += "\n " + this.history.ea(d).toString(a - 1);
        return b
    };
    rg.prototype.clear = rg.prototype.clear = function () {
        var a = this.history;
        a.Xa();
        for (var b = a.count - 1; 0 <= b; b--) {
            var c = a.ea(b);
            null !== c && c.clear()
        }
        a.clear();
        this.uh = -1;
        a.freeze();
        this.Wf = !1;
        this.Mv = null;
        this.Wl = 0;
        this.Ah.Xa();
        this.Ah.clear();
        this.Ah.freeze();
        this.Ap.clear()
    };
    rg.prototype.addModel = rg.prototype.TH = function (a) {
        this.Wz.add(a)
    };
    rg.prototype.removeModel = rg.prototype.dK = function (a) {
        this.Wz.remove(a)
    };
    rg.prototype.startTransaction = rg.prototype.Zb = function (a) {
        void 0 === a && (a = "");
        null === a && (a = "");
        if (this.jb)return !1;
        !0 === this.Hz && (this.Hz = !1, this.Wl++, this.sd("StartingFirstTransaction", a, this.Dj), 0 < this.Wl && this.Wl--);
        this.isEnabled && (this.Ah.Xa(), this.Ah.add(a), this.Ah.freeze(), null === this.Dj ? this.Ap.add(0) : this.Ap.add(this.Dj.eg.count));
        this.Wl++;
        var b = 1 === this.Zh;
        b && this.sd("StartedTransaction", a, this.Dj);
        return b
    };
    rg.prototype.commitTransaction = rg.prototype.Gd = function (a) {
        void 0 === a && (a = "");
        return sh(this, !0, a)
    };
    rg.prototype.rollbackTransaction = rg.prototype.Jq = function () {
        return sh(this, !1, "")
    };
    function sh(a, b, c) {
        if (a.jb)return !1;
        a.xA && 1 > a.Zh && D.trace("Ending transaction without having started a transaction: " + c);
        var d = 1 === a.Zh;
        d && b && a.sd("CommittingTransaction", c, a.Dj);
        var e = 0;
        if (0 < a.Zh && (a.Wl--, a.isEnabled)) {
            var g = a.Ah.count;
            0 < g && ("" === c && (c = a.Ah.ea(0)), a.Ah.Xa(), a.Ah.kd(g - 1), a.Ah.freeze());
            g = a.Ap.count;
            0 < g && (e = a.Ap.ea(g - 1), a.Ap.kd(g - 1))
        }
        g = a.Dj;
        if (d) {
            if (b) {
                a.Rz = !1;
                if (a.isEnabled && null !== g) {
                    b = g;
                    b.yu = !0;
                    b.name = c;
                    d = a.history;
                    d.Xa();
                    for (e = d.count - 1; e > a.Ij; e--)g = d.ea(e), null !== g && g.clear(),
                        d.kd(e), a.Rz = !0;
                    e = a.kG;
                    0 === e && (e = 1);
                    0 < e && d.count >= e && (g = d.ea(0), null !== g && g.clear(), d.kd(0), a.uh--);
                    d.add(b);
                    a.uh++;
                    d.freeze();
                    g = b
                }
                a.sd("CommittedTransaction", c, g)
            } else {
                a.Wf = !0;
                try {
                    a.isEnabled && null !== g && (g.yu = !0, g.undo())
                } finally {
                    a.sd("RolledBackTransaction", c, g), a.Wf = !1
                }
                null !== g && g.clear()
            }
            a.Mv = null;
            return !0
        }
        if (a.isEnabled && !b && null !== g) {
            a = e;
            c = g.eg;
            for (b = c.count - 1; b >= a; b--)d = c.ea(b), null !== d && d.undo(), c.Xa(), c.kd(b);
            c.freeze()
        }
        return !1
    }

    rg.prototype.canUndo = rg.prototype.canUndo = function () {
        if (!this.isEnabled || 0 < this.Zh || this.jb)return !1;
        var a = this.lH;
        return null !== a && a.canUndo() ? !0 : !1
    };
    rg.prototype.undo = rg.prototype.undo = function () {
        if (this.canUndo()) {
            var a = this.lH;
            try {
                this.sd("StartingUndo", "Undo", a), this.Wf = !0, this.uh--, a.undo()
            } catch (b) {
                D.trace("undo error: " + b.toString())
            } finally {
                this.Wf = !1, this.sd("FinishedUndo", "Undo", a)
            }
        }
    };
    rg.prototype.canRedo = rg.prototype.canRedo = function () {
        if (!this.isEnabled || 0 < this.Zh || this.jb)return !1;
        var a = this.kH;
        return null !== a && a.canRedo() ? !0 : !1
    };
    rg.prototype.redo = rg.prototype.redo = function () {
        if (this.canRedo()) {
            var a = this.kH;
            try {
                this.sd("StartingRedo", "Redo", a), this.Wf = !0, this.uh++, a.redo()
            } catch (b) {
                D.trace("redo error: " + b.toString())
            } finally {
                this.Wf = !1, this.sd("FinishedRedo", "Redo", a)
            }
        }
    };
    rg.prototype.sd = function (a, b, c) {
        void 0 === c && (c = null);
        var d = new dg;
        d.Kc = fg;
        d.propertyName = a;
        d.object = c;
        d.oldValue = b;
        for (a = this.PJ; a.next();)b = a.value, d.ga = b, b.wx(d)
    };
    rg.prototype.handleChanged = rg.prototype.MF = function (a) {
        if (this.isEnabled && !this.jb && !this.skipsEvent(a)) {
            var b = this.Dj;
            null === b && (this.Mv = b = new Ag);
            var c = a.copy(), b = b.eg;
            b.Xa();
            b.add(c);
            b.freeze();
            this.xA && 0 >= this.Zh && !this.Hz && (a = a.g, null !== a && !1 === a.ao || D.trace("Change not within a transaction: " + c.toString()))
        }
    };
    rg.prototype.skipsEvent = function (a) {
        if (null === a || 0 > a.Kc.value)return !0;
        a = a.object;
        if (a instanceof P) {
            if (a = a.layer, null !== a && a.Wc)return !0
        } else if (a instanceof Xg && a.Wc)return !0;
        return !1
    };
    D.w(rg, {PJ: "models"}, function () {
        return this.Wz.j
    });
    D.defineProperty(rg, {isEnabled: "isEnabled"}, function () {
        return this.of
    }, function (a) {
        this.of = a
    });
    D.w(rg, {lH: "transactionToUndo"}, function () {
        return 0 <= this.Ij && this.Ij <= this.history.count - 1 ? this.history.ea(this.Ij) : null
    });
    D.w(rg, {kH: "transactionToRedo"}, function () {
        return this.Ij < this.history.count - 1 ? this.history.ea(this.Ij + 1) : null
    });
    D.w(rg, {jb: "isUndoingRedoing"}, function () {
        return this.Wf
    });
    D.w(rg, {history: "history"}, function () {
        return this.zH
    });
    D.defineProperty(rg, {kG: "maxHistoryLength"}, function () {
        return this.CD
    }, function (a) {
        this.CD = a
    });
    D.w(rg, {Ij: "historyIndex"}, function () {
        return this.uh
    });
    D.w(rg, {Dj: "currentTransaction"}, function () {
        return this.Mv
    });
    D.w(rg, {Zh: "transactionLevel"}, function () {
        return this.Wl
    });
    D.w(rg, {ZF: "isInTransaction"}, function () {
        return 0 < this.Wl
    });
    D.defineProperty(rg, {xA: "checksTransactionLevel"}, function () {
        return this.kz
    }, function (a) {
        this.kz = a
    });
    D.w(rg, {pG: "nestedTransactionNames"}, function () {
        return this.Ah
    });
    function oa() {
        0 < arguments.length && D.wd(oa);
        D.vc(this);
        this.ca = null;
        this.AC = !1;
        this.VC = this.BC = !0;
        this.DC = this.EC = this.WC = this.FC = !1;
        this.Ml = this.ez = null;
        this.DE = 1.05;
        this.SC = 1;
        this.Sz = NaN;
        this.yD = null;
        this.sA = NaN;
        this.rA = Kd;
        this.sj = null;
        this.aE = 0
    }

    D.ka("CommandHandler", oa);
    var th = null, Kh = "";
    oa.prototype.toString = function () {
        return "CommandHandler"
    };
    D.w(oa, {g: "diagram"}, function () {
        return this.ca
    });
    oa.prototype.$c = function (a) {
        v && null !== a && D.l(a, E, oa, "setDiagram");
        this.ca = a
    };
    oa.prototype.doKeyDown = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.U, c = D.Yk ? b.Lu : b.control, d = b.shift, e = b.alt, g = b.key;
            !c || "C" !== g && "Insert" !== g ? c && "X" === g || d && "Del" === g ? this.canCutSelection() && this.cutSelection() : c && "V" === g || d && "Insert" === g ? this.canPasteSelection() && this.pasteSelection() : c && "Y" === g || e && d && "Backspace" === g ? this.canRedo() && this.redo() : c && "Z" === g || e && "Backspace" === g ? this.canUndo() && this.undo() : "Del" === g || "Backspace" === g ? this.canDeleteSelection() && this.deleteSelection() : c && "A" === g ? this.canSelectAll() &&
            this.selectAll() : "Esc" === g ? this.canStopCommand() && this.stopCommand() : "Up" === g ? a.Be && (c ? a.scroll("pixel", "up") : a.scroll("line", "up")) : "Down" === g ? a.Be && (c ? a.scroll("pixel", "down") : a.scroll("line", "down")) : "Left" === g ? a.Ae && (c ? a.scroll("pixel", "left") : a.scroll("line", "left")) : "Right" === g ? a.Ae && (c ? a.scroll("pixel", "right") : a.scroll("line", "right")) : "PageUp" === g ? d && a.Ae ? a.scroll("page", "left") : a.Be && a.scroll("page", "up") : "PageDown" === g ? d && a.Ae ? a.scroll("page", "right") : a.Be && a.scroll("page", "down") : "Home" ===
            g ? c && a.Be ? a.scroll("document", "up") : !c && a.Ae && a.scroll("document", "left") : "End" === g ? c && a.Be ? a.scroll("document", "down") : !c && a.Ae && a.scroll("document", "right") : " " === g ? this.canScrollToPart() && this.scrollToPart() : "Subtract" === g ? this.canDecreaseZoom() && this.decreaseZoom() : "Add" === g ? this.canIncreaseZoom() && this.increaseZoom() : c && "0" === g ? this.canResetZoom() && this.resetZoom() : d && "Z" === g ? this.canZoomToFit() && this.zoomToFit() : c && !d && "G" === g ? this.canGroupSelection() && this.groupSelection() : c && d && "G" === g ? this.canUngroupSelection() &&
            this.ungroupSelection() : b.event && 113 === b.event.which ? this.canEditTextBlock() && this.editTextBlock() : b.event && 93 === b.event.which ? this.canShowContextMenu() && this.showContextMenu() : b.bubbles = !0 : this.canCopySelection() && this.copySelection()
        }
    };
    oa.prototype.doKeyUp = function () {
        var a = this.g;
        null !== a && (a.U.bubbles = !0)
    };
    oa.prototype.stopCommand = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.hb;
            b instanceof Lh && a.Ef && a.yx();
            null !== b && b.doCancel()
        }
    };
    oa.prototype.canStopCommand = function () {
        return !0
    };
    oa.prototype.selectAll = function () {
        var a = this.g;
        if (null !== a) {
            a.qa();
            try {
                a.mc = "wait";
                a.Ja("ChangingSelection");
                for (var b = a.Ii; b.next();)b.value.ib = !0;
                for (var c = a.qg; c.next();)c.value.ib = !0;
                for (var d = a.links; d.next();)d.value.ib = !0
            } finally {
                a.Ja("ChangedSelection"), a.mc = ""
            }
        }
    };
    oa.prototype.canSelectAll = function () {
        var a = this.g;
        return null !== a && a.Ef
    };
    oa.prototype.deleteSelection = function () {
        var a = this.g;
        if (null !== a && !a.Ja("SelectionDeleting", a.selection))try {
            a.mc = "wait";
            a.Zb("Delete");
            a.Ja("ChangingSelection");
            for (var b = new L(F), c = a.selection.j; c.next();)Mh(b, c.value, !0, this.vI ? Infinity : 0, this.iF, function (a) {
                return a.canDelete()
            });
            a.DB(b, !0);
            a.Ja("SelectionDeleted", b)
        } finally {
            a.Ja("ChangedSelection"), a.Gd("Delete"), a.mc = ""
        }
    };
    oa.prototype.canDeleteSelection = function () {
        var a = this.g;
        return null === a || a.qb || a.Kf || !a.Cn || 0 === a.selection.count ? !1 : !0
    };
    function Mh(a, b, c, d, e, g) {
        void 0 === g && (g = null);
        if (!(a.contains(b) || null !== g && !g(b) || b instanceof ba))if (a.add(b), b instanceof G) {
            if (c && b instanceof I)for (var h = b.Oc; h.next();)Mh(a, h.value, c, d, e, g);
            if (e)for (h = b.Kd; h.next();) {
                var k = h.value;
                if (!a.contains(k)) {
                    var l = k.Y, m = k.ba;
                    null !== l && a.contains(l) && null !== m && a.contains(m) ? Mh(a, k, c, d, e, g) : null !== l && null !== m || Mh(a, k, c, d, e, g)
                }
            }
            if (1 < d)for (b = b.xF(); b.next();)Mh(a, b.value, c, d - 1, e, g)
        } else if (b instanceof J)for (b = b.wf; b.next();)Mh(a, b.value, c, d, e, g)
    }

    oa.prototype.eq = function (a, b, c) {
        var d = new ma(F, F);
        for (a = a.j; a.next();)Nh(this, a.value, b, d, c);
        if (null !== b) {
            c = b.ga;
            a = !1;
            null !== b.nb.Fe && (a = b.nb.Fe.Fj);
            for (var e = new L(J), g = new ma(J, J), h = d.j; h.next();) {
                var k = h.value;
                if (k instanceof J) {
                    var l = k;
                    a || null !== l.Y && null !== l.ba || e.add(l)
                } else if (c instanceof zg && k instanceof G && null !== k.data) {
                    var l = c, m = k, k = h.key, n = k.Sk();
                    null !== n && (n = d.na(n), null !== n ? (l.Ji(m.data, l.Ab(n.data)), l = b.fg(m.data), k = k.Sn(), null !== k && null !== l && g.add(k, l)) : l.Ji(m.data, void 0))
                }
            }
            0 < e.count &&
            b.DB(e, !1);
            if (0 < g.count)for (c = g.j; c.next();)d.add(c.key, c.value)
        }
        if (null !== b && null !== this.g && (b = b.ga, c = b.VH, null !== c)) {
            var p = new ma;
            d.each(function (a) {
                null !== a.key.data && p.add(a.key.data, a.value.data)
            });
            c(p, b, this.g.ga)
        }
        for (b = d.j; b.next();)b.value.Nb();
        return d
    };
    function Nh(a, b, c, d, e) {
        if (null === b || e && !b.canCopy())return null;
        if (d.contains(b))return d.na(b);
        var g = null, h = b.data;
        if (null !== h && null !== c) {
            var k = c.ga;
            b instanceof J ? k instanceof X && (h = k.Ax(h), D.Sa(h) && (k.Rt(h), g = c.fg(h))) : (h = k.copyNodeData(h), D.Sa(h) && (k.Zl(h), g = c.Ph(h)))
        } else Oh(b), g = b.copy(), null !== g && (null !== c ? c.add(g) : null !== h && null !== a.g && a.nI && (k = a.g.ga, h = g instanceof J && k instanceof X ? k.Ax(h) : k.copyNodeData(h), D.Sa(h) && (g.data = h)));
        if (!(g instanceof F))return null;
        g.ib = !1;
        g.ah = !1;
        d.add(b, g);
        if (b instanceof G) {
            for (h = b.Kd; h.next();) {
                k = h.value;
                if (k.Y === b) {
                    var l = d.na(k);
                    null !== l && (l.Y = g)
                }
                k.ba === b && (l = d.na(k), null !== l && (l.ba = g))
            }
            if (b instanceof I && g instanceof I)for (h = g, b = b.Oc; b.next();)k = Nh(a, b.value, c, d, e), k instanceof J || null === k || (k.Ka = h)
        } else if (b instanceof J && g instanceof J)for (h = b.Y, null !== h && (h = d.na(h), null !== h && (g.Y = h)), h = b.ba, null !== h && (h = d.na(h), null !== h && (g.ba = h)), b = b.wf; b.next();)h = Nh(a, b.value, c, d, e), null !== h && h instanceof G && (h.Xb = g);
        return g
    }

    oa.prototype.copySelection = function () {
        var a = this.g;
        if (null !== a) {
            for (var b = new L(F), a = a.selection.j; a.next();)Mh(b, a.value, !0, this.qI ? Infinity : 0, this.oI, function (a) {
                return a.canCopy()
            });
            this.copyToClipboard(b)
        }
    };
    oa.prototype.canCopySelection = function () {
        var a = this.g;
        return null !== a && a.Lk && a.tA && 0 !== a.selection.count ? !0 : !1
    };
    oa.prototype.cutSelection = function () {
        this.copySelection();
        this.deleteSelection()
    };
    oa.prototype.canCutSelection = function () {
        var a = this.g;
        return null !== a && !a.qb && !a.Kf && a.Lk && a.Cn && a.tA && 0 !== a.selection.count ? !0 : !1
    };
    oa.prototype.copyToClipboard = function (a) {
        var b = this.g;
        if (null !== b) {
            var c = null;
            if (null === a)th = null, Kh = ""; else {
                var c = b.ga, d = !1, e = !1, g = null;
                try {
                    if (c instanceof zg) {
                        var h = c, d = h.Mn;
                        h.Mn = this.$E
                    }
                    c instanceof X && (h = c, e = h.Ln, h.Ln = this.ZE);
                    g = b.eq(a, null, !0)
                } finally {
                    c instanceof zg && (c.Mn = d), c instanceof X && (c.Ln = e), c = new K(F), c.Tc(g), th = c, Kh = b.ga.im
                }
            }
            b.Ja("ClipboardChanged", c)
        }
    };
    oa.prototype.pasteFromClipboard = function () {
        var a = new L(F), b = th;
        if (null === b)return a;
        var c = this.g;
        if (null === c || Kh !== c.ga.im)return a;
        var d = c.ga, e = !1, g = !1, h = null;
        try {
            if (d instanceof zg) {
                var k = d, e = k.Mn;
                k.Mn = this.$E
            }
            d instanceof X && (k = d, g = k.Ln, k.Ln = this.ZE);
            h = c.eq(b, c, !1)
        } finally {
            for (d instanceof zg && (d.Mn = e), d instanceof X && (d.Ln = g), b = h.j; b.next();)c = b.value, d = b.key, c.location.F() || (d.location.F() ? c.location = d.location : !c.position.F() && d.position.F() && (c.position = d.position)), a.add(c)
        }
        return a
    };
    oa.prototype.pasteSelection = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b)try {
            b.mc = "wait";
            b.Zb("Paste");
            b.Ja("ChangingSelection");
            var c = this.pasteFromClipboard();
            0 < c.count && Ph(b);
            for (var d = c.j; d.next();)d.value.ib = !0;
            b.Ja("ChangedSelection");
            if (null !== a) {
                var e = b.computePartsBounds(b.selection);
                if (e.F()) {
                    var g = b.nb.Fe;
                    null === g && (g = new Qh, g.$c(b));
                    var h = g.computeEffectiveCollection(b.selection);
                    g.moveParts(h, new N(a.x - e.oa, a.y - e.va), !1)
                }
            }
            b.Ja("ClipboardPasted", c)
        } finally {
            b.Gd("Paste"), b.mc =
                ""
        }
    };
    oa.prototype.canPasteSelection = function () {
        var a = this.g;
        return null === a || a.qb || a.Kf || !a.Yp || !a.tA || null === th || Kh !== a.ga.im ? !1 : !0
    };
    oa.prototype.undo = function () {
        var a = this.g;
        null !== a && a.ra.undo()
    };
    oa.prototype.canUndo = function () {
        var a = this.g;
        return null === a || a.qb || a.Kf ? !1 : a.ME && a.ra.canUndo()
    };
    oa.prototype.redo = function () {
        var a = this.g;
        null !== a && a.ra.redo()
    };
    oa.prototype.canRedo = function () {
        var a = this.g;
        return null === a || a.qb || a.Kf ? !1 : a.ME && a.ra.canRedo()
    };
    oa.prototype.decreaseZoom = function (a) {
        void 0 === a && (a = 1 / this.Sy);
        D.p(a, oa, "decreaseZoom:factor");
        var b = this.g;
        null !== b && b.dm === Rh && (a *= b.scale, a < b.Sh || a > b.Rh || (b.scale = a))
    };
    oa.prototype.canDecreaseZoom = function (a) {
        void 0 === a && (a = 1 / this.Sy);
        D.p(a, oa, "canDecreaseZoom:factor");
        var b = this.g;
        if (null === b || b.dm !== Rh)return !1;
        a *= b.scale;
        return a < b.Sh || a > b.Rh ? !1 : b.vx
    };
    oa.prototype.increaseZoom = function (a) {
        void 0 === a && (a = this.Sy);
        D.p(a, oa, "increaseZoom:factor");
        var b = this.g;
        null !== b && b.dm === Rh && (a *= b.scale, a < b.Sh || a > b.Rh || (b.scale = a))
    };
    oa.prototype.canIncreaseZoom = function (a) {
        void 0 === a && (a = this.Sy);
        D.p(a, oa, "canIncreaseZoom:factor");
        var b = this.g;
        if (null === b || b.dm !== Rh)return !1;
        a *= b.scale;
        return a < b.Sh || a > b.Rh ? !1 : b.vx
    };
    oa.prototype.resetZoom = function (a) {
        void 0 === a && (a = this.Ex);
        D.p(a, oa, "resetZoom:newscale");
        var b = this.g;
        null === b || a < b.Sh || a > b.Rh || (b.scale = a)
    };
    oa.prototype.canResetZoom = function (a) {
        void 0 === a && (a = this.Ex);
        D.p(a, oa, "canResetZoom:newscale");
        var b = this.g;
        return null === b || a < b.Sh || a > b.Rh ? !1 : b.vx
    };
    oa.prototype.zoomToFit = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.scale, c = a.position;
            b === this.sA && !isNaN(this.Sz) && a.fd.O(this.rA) ? (a.scale = this.Sz, a.position = this.yD, this.sA = NaN, this.rA = Kd) : (this.Sz = b, this.yD = c.copy(), a.zoomToFit(), this.sA = a.scale, this.rA = a.fd.copy())
        }
    };
    oa.prototype.canZoomToFit = function () {
        var a = this.g;
        return null === a ? !1 : a.vx
    };
    oa.prototype.scrollToPart = function (a) {
        void 0 === a && (a = null);
        null !== a && D.l(a, F, oa, "part");
        var b = this.g;
        if (null !== b) {
            if (null === a) {
                try {
                    null !== this.sj && (this.sj.next() ? a = this.sj.value : this.sj = null)
                } catch (c) {
                    this.sj = null
                }
                null === a && (0 < b.tm.count ? this.sj = b.tm.j : 0 < b.selection.count && (this.sj = b.selection.j), null !== this.sj && this.sj.next() && (a = this.sj.value))
            }
            if (null !== a) {
                var d = b.Wa;
                d.qo("Scroll To Part");
                var e = this.lK;
                if (0 < e) {
                    var g = Sh(this, a, [a]), h = function () {
                        b.Zb();
                        for (var a = g.pop(); 0 < g.length && a instanceof G && a.Bc && (!(a instanceof I) || a.ud);)a = g.pop();
                        0 < g.length ? (a instanceof F && b.PG(a.$), a instanceof G && !a.Bc && (a.Bc = !0), a instanceof I && !a.ud && (a.ud = !0)) : (a instanceof F && b.SE(a.$), b.CB("LayoutCompleted", k));
                        b.Gd("Scroll To Part")
                    }, k = function () {
                        setTimeout(h, (d.isEnabled ? d.duration : 0) + e)
                    };
                    b.mx("LayoutCompleted", k);
                    h()
                } else {
                    var l = b.position.copy();
                    b.SE(a.$);
                    l.Uc(b.position) && d.Yh()
                }
            }
        }
    };
    function Sh(a, b, c) {
        if (b.isVisible())return c;
        if (b instanceof ba)Sh(a, b.Df, c); else if (b instanceof J) {
            var d = b.Y;
            null !== d && Sh(a, d, c);
            b = b.ba;
            null !== b && Sh(a, b, c)
        } else b instanceof G && (d = b.Xb, null !== d && Sh(a, d, c), d = b.Sk(), null !== d && (d.Bc || d.Wq || c.push(d), Sh(a, d, c))), b = b.Ka, null !== b && (b.ud || b.Ry || c.push(b), Sh(a, b, c));
        return c
    }

    oa.prototype.canScrollToPart = function (a) {
        void 0 === a && (a = null);
        if (null !== a && !(a instanceof F))return !1;
        a = this.g;
        return null === a || 0 === a.selection.count && 0 === a.tm.count ? !1 : a.Ae && a.Be
    };
    oa.prototype.collapseTree = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b)try {
            b.Zb("Collapse Tree");
            b.Wa.qo("Collapse Tree");
            var c = new K(G);
            if (null !== a && a.Bc)a.collapseTree(), c.add(a); else for (var d = b.selection.j; d.next();) {
                var e = d.value;
                e instanceof G && (a = e, a.Bc && (a.collapseTree(), c.add(a)))
            }
            b.Ja("TreeCollapsed", c)
        } finally {
            b.Gd("Collapse Tree")
        }
    };
    oa.prototype.canCollapseTree = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.qb)return !1;
        if (null !== a) {
            if (!(a instanceof G && a.Bc))return !1;
            if (0 < a.Ox().count)return !0
        } else for (a = b.selection.j; a.next();)if (b = a.value, b instanceof G && b.Bc && 0 < b.Ox().count)return !0;
        return !1
    };
    oa.prototype.expandTree = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b)try {
            b.Zb("Expand Tree");
            b.Wa.qo("Expand Tree");
            var c = new K(G);
            if (null === a || a.Bc)for (var d = b.selection.j; d.next();) {
                var e = d.value;
                e instanceof G && (a = e, a.Bc || (a.expandTree(), c.add(a)))
            } else a.expandTree(), c.add(a);
            b.Ja("TreeExpanded", c)
        } finally {
            b.Gd("Expand Tree")
        }
    };
    oa.prototype.canExpandTree = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.qb)return !1;
        if (null !== a) {
            if (!(a instanceof G) || a.Bc)return !1;
            if (0 < a.Ox().count)return !0
        } else for (a = b.selection.j; a.next();)if (b = a.value, b instanceof G && !b.Bc && 0 < b.Ox().count)return !0;
        return !1
    };
    oa.prototype.groupSelection = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.ga;
            if (b instanceof X) {
                var c = this.NE;
                if (null !== c) {
                    var d = null;
                    try {
                        a.mc = "wait";
                        a.Zb("Group");
                        a.Ja("ChangingSelection");
                        for (var e = new K(F), g = a.selection.j; g.next();) {
                            var h = g.value;
                            h.pe() && h.canGroup() && e.add(h)
                        }
                        for (var k = new K(F), l = e.j; l.next();) {
                            for (var m = l.value, g = !1, n = e.j; n.next();)if (m.Gi(n.value)) {
                                g = !0;
                                break
                            }
                            g || k.add(m)
                        }
                        if (0 < k.count) {
                            var p = k.first().Ka;
                            if (null !== p)for (; null !== p;) {
                                for (var e = !1, q = k.j; q.next();)if (!q.value.Gi(p)) {
                                    e = !0;
                                    break
                                }
                                if (e)p = p.Ka; else break
                            }
                            if (c instanceof I)Oh(c), d = c.copy(), null !== d && a.add(d); else if (b.eB(c)) {
                                var r = b.copyNodeData(c);
                                D.Sa(r) && (b.Zl(r), d = a.Nx(r))
                            }
                            if (null !== d) {
                                null !== p && this.isValidMember(p, d) && (d.Ka = p);
                                for (var s = k.j; s.next();) {
                                    var u = s.value;
                                    this.isValidMember(d, u) && (u.Ka = d)
                                }
                                a.select(d)
                            }
                        }
                        a.Ja("ChangedSelection");
                        a.Ja("SelectionGrouped", d)
                    } finally {
                        a.Gd("Group"), a.mc = ""
                    }
                }
            }
        }
    };
    oa.prototype.canGroupSelection = function () {
        var a = this.g;
        if (null === a || a.qb || a.Kf || !a.Yp || !a.px || !(a.ga instanceof X) || null === this.NE)return !1;
        for (a = a.selection.j; a.next();) {
            var b = a.value;
            if (b.pe() && b.canGroup())return !0
        }
        return !1
    };
    function Th(a) {
        var b = D.mb();
        for (a = a.j; a.next();) {
            var c = a.value;
            c instanceof J || b.push(c)
        }
        a = new L(F);
        for (var c = b.length, d = 0; d < c; d++) {
            for (var e = b[d], g = !0, h = 0; h < c; h++)if (e.Gi(b[h])) {
                g = !1;
                break
            }
            g && a.add(e)
        }
        D.za(b);
        return a
    }

    oa.prototype.isValidMember = function (a, b) {
        if (null === b || a === b || b instanceof J)return !1;
        if (null !== a) {
            if (a === b || a.Gi(b))return !1;
            var c = a.nB;
            if (null !== c && !c(a, b) || null === a.data && null !== b.data || null !== a.data && null === b.data)return !1
        }
        c = this.nB;
        return null !== c ? c(a, b) : !0
    };
    oa.prototype.ungroupSelection = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b) {
            var c = b.ga;
            if (c instanceof X)try {
                b.mc = "wait";
                b.Zb("Ungroup");
                b.Ja("ChangingSelection");
                var d = new K(I);
                if (null !== a)d.add(a); else for (var e = b.selection.j; e.next();) {
                    var g = e.value;
                    g instanceof I && (a = g, a.canUngroup() && d.add(a))
                }
                if (0 < d.count) {
                    b.yx();
                    for (var h = d.j; h.next();) {
                        var k = h.value;
                        k.expandSubGraph();
                        var l = k.Ka, m = null !== l && null !== l.data ? c.Ab(l.data) : void 0, n = new K(F);
                        n.Tc(k.Oc);
                        for (var p = n.j; p.next();) {
                            var q =
                                p.value;
                            q.ib = !0;
                            if (!(q instanceof J)) {
                                var r = q.data;
                                null !== r ? c.LB(r, m) : q.Ka = l
                            }
                        }
                        b.remove(k)
                    }
                }
                b.Ja("ChangedSelection");
                b.Ja("SelectionUngrouped", d, n)
            } finally {
                b.Gd("Ungroup"), b.mc = ""
            }
        }
    };
    oa.prototype.canUngroupSelection = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.qb || b.Kf || !b.Cn || !b.ux || !(b.ga instanceof X))return !1;
        if (null !== a) {
            if (!(a instanceof I))return !1;
            if (a.canUngroup())return !0
        } else for (a = b.selection.j; a.next();)if (b = a.value, b instanceof I && b.canUngroup())return !0;
        return !1
    };
    oa.prototype.addTopLevelParts = function (a, b) {
        for (var c = !0, d = Th(a).j; d.next();) {
            var e = d.value;
            null !== e.Ka && (!b || this.isValidMember(null, e) ? e.Ka = null : c = !1)
        }
        return c
    };
    oa.prototype.collapseSubGraph = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b)try {
            b.Zb("Collapse SubGraph");
            b.Wa.qo("Collapse SubGraph");
            var c = new K(I);
            if (null !== a && a.ud)a.collapseSubGraph(), c.add(a); else for (var d = b.selection.j; d.next();) {
                var e = d.value;
                e instanceof I && (a = e, a.ud && (a.collapseSubGraph(), c.add(a)))
            }
            b.Ja("SubGraphCollapsed", c)
        } finally {
            b.Gd("Collapse SubGraph")
        }
    };
    oa.prototype.canCollapseSubGraph = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.qb)return !1;
        if (null !== a)return a instanceof I && a.ud ? !0 : !1;
        for (a = b.selection.j; a.next();)if (b = a.value, b instanceof I && b.ud)return !0;
        return !1
    };
    oa.prototype.expandSubGraph = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null !== b)try {
            b.Zb("Expand SubGraph");
            b.Wa.qo("Expand SubGraph");
            var c = new K(I);
            if (null === a || a.ud)for (var d = b.selection.j; d.next();) {
                var e = d.value;
                e instanceof I && (a = e, a.ud || (a.expandSubGraph(), c.add(a)))
            } else a.expandSubGraph(), c.add(a);
            b.Ja("SubGraphExpanded", c)
        } finally {
            b.Gd("Expand SubGraph")
        }
    };
    oa.prototype.canExpandSubGraph = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.qb)return !1;
        if (null !== a)return a instanceof I && !a.ud ? !0 : !1;
        for (a = b.selection.j; a.next();)if (b = a.value, b instanceof I && !b.ud)return !0;
        return !1
    };
    oa.prototype.editTextBlock = function (a) {
        void 0 === a && (a = null);
        null !== a && D.l(a, na, oa, "editTextBlock");
        var b = this.g;
        if (null !== b) {
            var c = b.nb.UB;
            if (null !== c) {
                if (null === a) {
                    a = null;
                    for (var d = b.selection.j; d.next();) {
                        var e = d.value;
                        if (e.canEdit()) {
                            a = e;
                            break
                        }
                    }
                    if (null === a)return;
                    a = a.hu(function (a) {
                        return a instanceof na && a.MA
                    })
                }
                null !== a && (b.hb = null, c.lh = a, b.hb = c)
            }
        }
    };
    oa.prototype.canEditTextBlock = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b || b.qb || b.Kf || !b.tx || null === b.nb.UB)return !1;
        if (null !== a) {
            if (!(a instanceof na))return !1;
            a = a.Z;
            if (null !== a && a.canEdit())return !0
        } else for (b = b.selection.j; b.next();)if (a = b.value, a.canEdit() && (a = a.hu(function (a) {
                return a instanceof na && a.MA
            }), null !== a))return !0;
        return !1
    };
    oa.prototype.showContextMenu = function (a) {
        var b = this.g;
        if (null !== b) {
            var c = b.nb.CA;
            if (null !== c && (void 0 === a && (a = 0 < b.selection.count ? b.selection.first() : b), a = c.findObjectWithContextMenu(a), null !== a)) {
                var d = new ag, e = null;
                a instanceof P ? e = a.eb(kc) : b.pJ || (e = b.ub, e = new N(e.x + e.width / 2, e.y + e.height / 2));
                null !== e && (d.g = b, d.se = b.aC(e), d.ha = e, d.left = !1, d.right = !0, d.up = !0, b.U = d);
                b.hb = c;
                Uh(c, !1, a)
            }
        }
    };
    oa.prototype.canShowContextMenu = function (a) {
        var b = this.g;
        if (null === b)return !1;
        var c = b.nb.CA;
        if (null === c)return !1;
        void 0 === a && (a = 0 < b.selection.count ? b.selection.first() : b);
        return null === c.findObjectWithContextMenu(a) ? !1 : !0
    };
    D.defineProperty(oa, {nI: "copiesClipboardData"}, function () {
        return this.AC
    }, function (a) {
        D.h(a, "boolean", oa, "copiesClipboardData");
        this.AC = a
    });
    D.defineProperty(oa, {oI: "copiesConnectedLinks"}, function () {
        return this.BC
    }, function (a) {
        D.h(a, "boolean", oa, "copiesConnectedLinks");
        this.BC = a
    });
    D.defineProperty(oa, {iF: "deletesConnectedLinks"}, function () {
        return this.VC
    }, function (a) {
        D.h(a, "boolean", oa, "deletesConnectedLinks");
        this.VC = a
    });
    D.defineProperty(oa, {qI: "copiesTree"}, function () {
        return this.FC
    }, function (a) {
        D.h(a, "boolean", oa, "copiesTree");
        this.FC = a
    });
    D.defineProperty(oa, {vI: "deletesTree"}, function () {
        return this.WC
    }, function (a) {
        D.h(a, "boolean", oa, "deletesTree");
        this.WC = a
    });
    D.defineProperty(oa, {$E: "copiesParentKey"}, function () {
        return this.EC
    }, function (a) {
        D.h(a, "boolean", oa, "copiesParentKey");
        this.EC = a
    });
    D.defineProperty(oa, {ZE: "copiesGroupKey"}, function () {
        return this.DC
    }, function (a) {
        D.h(a, "boolean", oa, "copiesGroupKey");
        this.DC = a
    });
    D.defineProperty(oa, {NE: "archetypeGroupData"}, function () {
        return this.ez
    }, function (a) {
        null !== a && D.l(a, Object, oa, "archetypeGroupData");
        var b = this.g;
        null !== b && (b = b.ga, b instanceof X && (a instanceof I || b.eB(a) || D.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: " + a)));
        this.ez = a
    });
    D.defineProperty(oa, {nB: "memberValidation"}, function () {
        return this.Ml
    }, function (a) {
        null !== a && D.h(a, "function", oa, "memberValidation");
        this.Ml = a
    });
    D.defineProperty(oa, {Ex: "defaultScale"}, function () {
        return this.SC
    }, function (a) {
        D.p(a, oa, "defaultScale");
        0 < a || D.k("defaultScale must be larger than zero, not: " + a);
        this.SC = a
    });
    D.defineProperty(oa, {Sy: "zoomFactor"}, function () {
        return this.DE
    }, function (a) {
        D.p(a, oa, "zoomFactor");
        1 < a || D.k("zoomFactor must be larger than 1.0, not: " + a);
        this.DE = a
    });
    D.defineProperty(oa, {lK: "scrollToPartPause"}, function () {
        return this.aE
    }, function (a) {
        D.p(a, oa, "scrollToPartPause");
        this.aE = a
    });
    function Yg() {
        0 < arguments.length && D.wd(Yg);
        D.vc(this);
        this.ca = null;
        this.ac = "";
        this.of = !0;
        this.lD = !1;
        this.xE = null;
        this.kx = -1
    }

    D.ka("Tool", Yg);
    Yg.prototype.$c = function (a) {
        v && null !== a && D.l(a, E, Yg, "setDiagram");
        this.ca = a
    };
    Yg.prototype.toString = function () {
        return "" !== this.name ? this.name + " Tool" : D.tf(Object.getPrototypeOf(this))
    };
    Yg.prototype.updateAdornments = function () {
    };
    Yg.prototype.canStart = function () {
        return this.isEnabled
    };
    Yg.prototype.doStart = function () {
    };
    Yg.prototype.doActivate = function () {
        this.wa = !0
    };
    Yg.prototype.doDeactivate = function () {
        this.wa = !1
    };
    Yg.prototype.doStop = function () {
    };
    Yg.prototype.doCancel = function () {
        this.stopTool()
    };
    Yg.prototype.stopTool = function () {
        var a = this.g;
        null !== a && a.hb === this && (a.hb = null, a.mc = "")
    };
    Yg.prototype.doMouseDown = function () {
        !this.wa && this.canStart() && this.doActivate()
    };
    Yg.prototype.doMouseMove = function () {
    };
    Yg.prototype.doMouseUp = function () {
        this.stopTool()
    };
    Yg.prototype.doMouseWheel = function () {
    };
    Yg.prototype.canStartMultiTouch = function () {
        return !0
    };
    Yg.prototype.standardPinchZoomStart = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.U, c = b.Rx(0, D.Fb(NaN, NaN)), d = b.Rx(1, D.Fb(NaN, NaN));
            if (c.F() && d.F() && (this.doCancel(), a.su("hasGestureZoom"))) {
                a.ND = a.scale;
                var e = d.x - c.x, g = d.y - c.y;
                a.fE = Math.sqrt(e * e + g * g);
                b.bubbles = !1
            }
            D.A(c);
            D.A(d)
        }
    };
    Yg.prototype.standardPinchZoomMove = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.U, c = b.Rx(0, D.Fb(NaN, NaN)), d = b.Rx(1, D.Fb(NaN, NaN));
            if (c.F() && d.F() && (this.doCancel(), a.su("hasGestureZoom"))) {
                var e = d.x - c.x, g = d.y - c.y, g = Math.sqrt(e * e + g * g) / a.fE, e = new N((Math.min(d.x, c.x) + Math.max(d.x, c.x)) / 2, (Math.min(d.y, c.y) + Math.max(d.y, c.y)) / 2), g = a.ND * g, h = a.xb;
                if (g !== a.scale && h.canResetZoom(g)) {
                    var k = a.Gm;
                    a.Gm = e;
                    h.resetZoom(g);
                    a.Gm = k
                }
                b.bubbles = !1
            }
            D.A(c);
            D.A(d)
        }
    };
    Yg.prototype.doKeyDown = function () {
        var a = this.g;
        null !== a && "Esc" === a.U.key && this.doCancel()
    };
    Yg.prototype.doKeyUp = function () {
    };
    Yg.prototype.startTransaction = Yg.prototype.Zb = function (a) {
        void 0 === a && (a = this.name);
        this.Tf = null;
        var b = this.g;
        return null === b ? !1 : b.Zb(a)
    };
    Yg.prototype.stopTransaction = Yg.prototype.fl = function () {
        var a = this.g;
        return null === a ? !1 : null === this.Tf ? a.Jq() : a.Gd(this.Tf)
    };
    Yg.prototype.standardMouseSelect = function () {
        var a = this.g;
        if (null !== a && a.Ef) {
            var b = a.U, c = a.ju(b.ha, !1);
            if (null !== c)if (D.Yk ? b.Lu : b.control) {
                a.Ja("ChangingSelection");
                for (b = c; null !== b && !b.canSelect();)b = b.Ka;
                null !== b && (b.ib = !b.ib);
                a.Ja("ChangedSelection")
            } else if (b.shift) {
                if (!c.ib) {
                    a.Ja("ChangingSelection");
                    for (b = c; null !== b && !b.canSelect();)b = b.Ka;
                    null !== b && (b.ib = !0);
                    a.Ja("ChangedSelection")
                }
            } else {
                if (!c.ib) {
                    for (b = c; null !== b && !b.canSelect();)b = b.Ka;
                    null !== b && a.select(b)
                }
            } else!b.left || (D.Yk ? b.Lu : b.control) ||
            b.shift || a.yx()
        }
    };
    Yg.prototype.standardMouseClick = function (a, b) {
        void 0 === a && (a = null);
        void 0 === b && (b = function (a) {
            return !a.layer.Wc
        });
        var c = this.g;
        if (null === c)return !1;
        var d = c.U, e = c.Ie(d.ha, a, b);
        d.Xe = e;
        Vh(e, d, c);
        return d.Nc
    };
    function Vh(a, b, c) {
        b.Nc = !1;
        if (null === a || a.zu()) {
            var d = 0;
            b.left ? d = 1 === b.Pe ? 1 : 2 === b.Pe ? 2 : 1 : b.right && 1 === b.Pe && (d = 3);
            var e = "";
            if (null !== a) {
                switch (d) {
                    case 1:
                        e = "ObjectSingleClicked";
                        break;
                    case 2:
                        e = "ObjectDoubleClicked";
                        break;
                    case 3:
                        e = "ObjectContextClicked"
                }
                0 !== d && c.Ja(e, a)
            } else {
                switch (d) {
                    case 1:
                        e = "BackgroundSingleClicked";
                        break;
                    case 2:
                        e = "BackgroundDoubleClicked";
                        break;
                    case 3:
                        e = "BackgroundContextClicked"
                }
                0 !== d && c.Ja(e)
            }
            if (null !== a)for (; null !== a;) {
                c = null;
                switch (d) {
                    case 1:
                        c = a.click;
                        break;
                    case 2:
                        c = a.eu ? a.eu :
                            a.click;
                        break;
                    case 3:
                        c = a.BA
                }
                if (null !== c && (c(b, a), b.Nc))break;
                a = a.Q
            } else {
                a = null;
                switch (d) {
                    case 1:
                        a = c.click;
                        break;
                    case 2:
                        a = c.eu ? c.eu : c.click;
                        break;
                    case 3:
                        a = c.BA
                }
                null !== a && a(b)
            }
        }
    }

    Yg.prototype.standardMouseOver = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.U;
            if (null !== b.g && !0 !== a.Wa.xc) {
                var c = a.Eb;
                a.Eb = !0;
                var d = a.Ie(b.ha, null, null);
                b.Xe = d;
                var e = !1;
                if (d !== a.Ro) {
                    var g = a.Ro, h = g;
                    a.Ro = d;
                    this.doCurrentObjectChanged(g, d);
                    for (b.Nc = !1; null !== g;) {
                        var k = g.Nu;
                        if (null !== k) {
                            if (d === g)break;
                            if (null !== d && d.vm(g))break;
                            k(b, g, d);
                            e = !0;
                            if (b.Nc)break
                        }
                        g = g.Q
                    }
                    g = h;
                    for (b.Nc = !1; null !== d;) {
                        k = d.Mu;
                        if (null !== k) {
                            if (g === d)break;
                            if (null !== g && g.vm(d))break;
                            k(b, d, g);
                            e = !0;
                            if (b.Nc)break
                        }
                        d = d.Q
                    }
                    d = a.Ro
                }
                if (null !== d) {
                    g =
                        d;
                    for (h = ""; null !== g;) {
                        h = g.cursor;
                        if ("" !== h)break;
                        g = g.Q
                    }
                    a.mc = h;
                    b.Nc = !1;
                    for (g = d; null !== g;) {
                        d = g.rB;
                        if (null !== d && (d(b, g), e = !0, b.Nc))break;
                        g = g.Q
                    }
                } else a.mc = "", d = a.rB, null !== d && (d(b), e = !0);
                e && a.Te();
                a.Eb = c
            }
        }
    };
    Yg.prototype.doCurrentObjectChanged = function () {
    };
    Yg.prototype.standardMouseWheel = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.U, c = b.km;
            if (0 !== c && a.fd.F()) {
                var d = a.xb, e = a.nb.Ou;
                if ((e === Wh && !b.shift || e === Xh && b.control) && (0 < c ? d.canIncreaseZoom() : d.canDecreaseZoom()))e = a.Gm, a.Gm = b.se, 0 < c ? d.increaseZoom() : d.decreaseZoom(), a.Gm = e, b.bubbles = !1; else if (e === Wh && b.shift || e === Xh && !b.control) {
                    var d = a.position.copy(), e = 0 < c ? c : -c, g = b.event.deltaX, h = b.event.deltaY;
                    void 0 === g || void 0 === h || 0 === g && 0 === h || b.shift ? !b.shift && a.Be ? (g = a.av, e = e / 40 * g, 0 < c ? a.scroll("pixel",
                        "up", e) : a.scroll("pixel", "down", e)) : b.shift && a.Ae && (g = a.$u, e = e / 40 * g, 0 < c ? a.scroll("pixel", "left", e) : a.scroll("pixel", "right", e)) : (0 !== g && a.Ae && (0 < g ? a.scroll("pixel", "left", -g) : a.scroll("pixel", "right", g)), 0 !== h && a.Be && (0 < h ? a.scroll("pixel", "up", -h) : a.scroll("pixel", "down", h)));
                    a.position.O(d) || (b.bubbles = !1)
                }
            }
        }
    };
    Yg.prototype.standardWaitAfter = function (a, b) {
        D.h(a, "number", Yg, "standardWaitAfter:delay");
        this.cancelWaitAfter();
        var c = this, d = b.copy();
        this.kx = D.setTimeout(function () {
            c.doWaitAfter(d)
        }, a)
    };
    Yg.prototype.cancelWaitAfter = function () {
        -1 !== this.kx && D.clearTimeout(this.kx);
        this.kx = -1
    };
    Yg.prototype.doWaitAfter = function () {
    };
    Yg.prototype.findToolHandleAt = function (a, b) {
        var c = this.g;
        if (null === c)return null;
        c = c.Ie(a, function (a) {
            for (; null !== a && !(a.Q instanceof ba);)a = a.Q;
            return a
        });
        return null === c ? null : c.Z.Fd === b ? c : null
    };
    Yg.prototype.isBeyondDragSize = function (a, b) {
        var c = this.g;
        if (null === c)return !1;
        void 0 === a && (a = c.Lc.se);
        void 0 === b && (b = c.U.se);
        var d = c.nb.zI, e = d.width, d = d.height;
        c.Lc.Nj && (e += 6, d += 6);
        return Math.abs(b.x - a.x) > e || Math.abs(b.y - a.y) > d
    };
    D.w(Yg, {g: "diagram"}, function () {
        return this.ca
    });
    D.defineProperty(Yg, {name: "name"}, function () {
        return this.ac
    }, function (a) {
        D.h(a, "string", Yg, "name");
        this.ac = a
    });
    D.defineProperty(Yg, {isEnabled: "isEnabled"}, function () {
        return this.of
    }, function (a) {
        D.h(a, "boolean", Yg, "isEnabled");
        this.of = a
    });
    D.defineProperty(Yg, {wa: "isActive"}, function () {
        return this.lD
    }, function (a) {
        D.h(a, "boolean", Yg, "isActive");
        this.lD = a
    });
    D.defineProperty(Yg, {Tf: "transactionResult"}, function () {
        return this.xE
    }, function (a) {
        null !== a && D.h(a, "string", Yg, "transactionResult");
        this.xE = a
    });
    function Qh() {
        Yg.call(this);
        0 < arguments.length && D.wd(Qh);
        this.name = "Dragging";
        this.CC = this.pD = !0;
        this.gs = this.aD = !1;
        this.tD = !0;
        this.Iz = (new Ba(NaN, NaN)).freeze();
        this.Jz = dc;
        this.Kz = (new N(NaN, NaN)).freeze();
        this.$C = !1;
        this.Cw = this.Bw = this.yz = this.zC = this.ZC = this.KC = this.qj = null;
        this.Nr = this.rD = !1;
        this.Op = new N(NaN, NaN);
        this.Yw = new N;
        this.ax = !1;
        this.oD = !0;
        this.Xo = 100;
        this.ek = [];
        this.yH = (new L(F)).freeze()
    }

    D.Ra(Qh, Yg);
    D.ka("DraggingTool", Qh);
    D.defineProperty(Qh, {UF: "isCopyEnabled"}, function () {
        return this.pD
    }, function (a) {
        D.h(a, "boolean", Qh, "isCopyEnabled");
        this.pD = a
    });
    D.defineProperty(Qh, {pI: "copiesEffectiveCollection"}, function () {
        return this.CC
    }, function (a) {
        D.h(a, "boolean", Qh, "copiesEffectiveCollection");
        this.CC = a
    });
    D.defineProperty(Qh, {AI: "dragsTree"}, function () {
        return this.aD
    }, function (a) {
        D.h(a, "boolean", Qh, "dragsTree");
        this.aD = a
    });
    D.defineProperty(Qh, {Xx: "isGridSnapEnabled"}, function () {
        return this.gs
    }, function (a) {
        D.h(a, "boolean", Qh, "isGridSnapEnabled");
        this.gs = a
    });
    D.defineProperty(Qh, {jJ: "isComplexRoutingRealtime"}, function () {
        return this.oD
    }, function (a) {
        D.h(a, "boolean", Qh, "isComplexRoutingRealtime");
        this.oD = a
    });
    D.defineProperty(Qh, {lJ: "isGridSnapRealtime"}, function () {
        return this.tD
    }, function (a) {
        D.h(a, "boolean", Qh, "isGridSnapRealtime");
        this.tD = a
    });
    D.defineProperty(Qh, {KF: "gridSnapCellSize"}, function () {
        return this.Iz
    }, function (a) {
        D.l(a, Ba, Qh, "gridSnapCellSize");
        this.Iz.O(a) || (this.Iz = a = a.V())
    });
    D.defineProperty(Qh, {WI: "gridSnapCellSpot"}, function () {
        return this.Jz
    }, function (a) {
        D.l(a, Q, Qh, "gridSnapCellSpot");
        this.Jz.O(a) || (this.Jz = a = a.V())
    });
    D.defineProperty(Qh, {XI: "gridSnapOrigin"}, function () {
        return this.Kz
    }, function (a) {
        D.l(a, N, Qh, "gridSnapOrigin");
        this.Kz.O(a) || (this.Kz = a = a.V())
    });
    D.defineProperty(Qh, {Fj: "dragsLink"}, function () {
        return this.$C
    }, function (a) {
        D.h(a, "boolean", Qh, "dragsLink");
        this.$C = a
    });
    D.defineProperty(Qh, {On: "currentPart"}, function () {
        return this.KC
    }, function (a) {
        null !== a && D.l(a, F, Qh, "currentPart");
        this.KC = a
    });
    D.defineProperty(Qh, {lc: "copiedParts"}, function () {
        return this.zC
    }, function (a) {
        this.zC = a
    });
    D.defineProperty(Qh, {gc: "draggedParts"}, function () {
        return this.ZC
    }, function (a) {
        this.ZC = a
    });
    D.w(Qh, {DL: "draggingParts"}, function () {
        return null !== this.lc ? this.lc.Yj() : null !== this.gc ? this.gc.Yj() : this.yH
    });
    D.defineProperty(Qh, {td: "draggedLink"}, function () {
        return this.yz
    }, function (a) {
        null !== a && D.l(a, J, Qh, "draggedLink");
        this.yz !== a && (this.yz = a, null !== a ? (this.Bw = a.Mc, this.Cw = a.ld) : this.Cw = this.Bw = null)
    });
    D.defineProperty(Qh, {Wx: "isDragOutStarted"}, function () {
        return this.rD
    }, function (a) {
        this.rD = a
    });
    D.defineProperty(Qh, {el: "startPoint"}, function () {
        return this.Yw
    }, function (a) {
        D.l(a, N, Qh, "startPoint");
        this.Yw.O(a) || (this.Yw = a = a.V())
    });
    D.defineProperty(Qh, {dF: "delay"}, function () {
        return this.Xo
    }, function (a) {
        D.h(a, "number", Qh, "delay");
        this.Xo = a
    });
    Qh.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a || a.qb && !a.Vt || !a.am && !a.Lk && !a.Vt || !a.Ef)return !1;
        var b = a.U;
        return !b.left || a.hb !== this && (!this.isBeyondDragSize() || b.Nj && b.timestamp - a.Lc.timestamp < this.Xo) ? !1 : null !== this.findDraggablePart()
    };
    Qh.prototype.findDraggablePart = function () {
        var a = this.g;
        if (null === a)return null;
        a = a.ju(a.Lc.ha, !1);
        if (null === a)return null;
        for (; null !== a && !a.canSelect();)a = a.Ka;
        return null !== a && (a.canMove() || a.canCopy()) ? a : null
    };
    Qh.prototype.standardMouseSelect = function () {
        var a = this.g;
        if (null !== a && a.Ef) {
            var b = a.ju(a.Lc.ha, !1);
            if (null !== b) {
                for (; null !== b && !b.canSelect();)b = b.Ka;
                this.On = b;
                this.On.ib || (a.Ja("ChangingSelection"), b = a.U, (D.Yk ? b.Lu : b.control) || b.shift || Ph(a), this.On.ib = !0, a.Ja("ChangedSelection"))
            }
        }
    };
    Qh.prototype.doActivate = function () {
        var a = this.g;
        if (null !== a) {
            null === this.On && this.standardMouseSelect();
            var b = this.On;
            null !== b && (b.canMove() || b.canCopy()) && (this.wa = !0, this.Op.set(a.position), Yh(this, a.selection), this.ek.length = 0, this.gc = this.computeEffectiveCollection(a.selection), a.fv = !0, Zh(this, this.gc), this.Zb("Drag"), this.el = a.Lc.ha, a.lf = !0, a.Vt && (this.Wx = !0, this.Nr = !1, $h = this, ai = this.g, this.doSimulatedDragOut()))
        }
    };
    function Yh(a, b) {
        if (a.Fj) {
            var c = a.g;
            null !== c && c.Dn && (c.ga instanceof X && 1 === b.count && b.first() instanceof J ? (a.td = b.first(), a.td.canRelinkFrom() && a.td.canRelinkTo() && a.td.$t(), a.qj = c.nb.zG, null === a.qj && (a.qj = new bi, a.qj.$c(c))) : (a.td = null, a.qj = null))
        }
    }

    Qh.prototype.computeEffectiveCollection = function (a) {
        var b = null !== this.g && this.g.hb === this, c = new ma(F);
        if (null === a)return c;
        for (var d = a.j; d.next();)ci(this, c, d.value, b);
        if (null !== this.td && this.Fj)return c;
        for (d = a.j; d.next();)a = d.value, a instanceof J && (b = a.Y, null === b || c.contains(b) ? (b = a.ba, null === b || c.contains(b) || c.remove(a)) : c.remove(a));
        return c
    };
    function pi(a) {
        return void 0 === a ? new Ci(Jd) : new Ci(a.copy())
    }

    function ci(a, b, c, d) {
        if (!b.contains(c) && (!d || c.canMove() || c.canCopy()))if (c instanceof G) {
            b.add(c, pi(c.location));
            if (c instanceof I)for (var e = c.Oc; e.next();)ci(a, b, e.value, d);
            for (e = c.Kd; e.next();) {
                var g = e.value;
                if (!b.contains(g)) {
                    var h = g.Y, k = g.ba;
                    null !== h && b.contains(h) && null !== k && b.contains(k) && ci(a, b, g, d)
                }
            }
            if (a.AI)for (c = c.xF(); c.next();)ci(a, b, c.value, d)
        } else if (c instanceof J)for (g = c, b.add(g, pi()), c = g.wf; c.next();)ci(a, b, c.value, d); else c instanceof ba || b.add(c, pi(c.location))
    }

    Qh.prototype.doDeactivate = function () {
        this.wa = !1;
        var a = this.g;
        null !== a && Di(a);
        Ei(this);
        Fi(this, this.gc);
        this.gc = this.On = null;
        this.Nr = this.Wx = !1;
        if (0 < Gi.count) {
            for (var b = Gi.length, c = 0; c < b; c++) {
                var d = Gi.ea(c);
                Hi(d);
                Ii(d);
                Ei(d);
                null !== d.g && Di(d.g)
            }
            Gi.clear()
        }
        Hi(this);
        this.Op.n(NaN, NaN);
        $h = ai = null;
        Ii(this);
        a.lf = !1;
        a.mc = "";
        a.fv = !1;
        this.fl()
    };
    function Ei(a) {
        var b = a.g;
        if (null !== b) {
            var c = b.Eb;
            b.Eb = !0;
            Ji(a, b.U, null);
            b.Eb = c
        }
        a.ek.length = 0
    }

    function Ki() {
        var a = $h;
        Ii(a);
        Li(a);
        var b = a.g;
        null !== b && a.Op.F() && (b.position = a.Op);
        null !== b && Di(b)
    }

    Qh.prototype.doCancel = function () {
        Ii(this);
        Li(this);
        var a = this.g;
        null !== a && this.Op.F() && (a.position = this.Op);
        this.stopTool()
    };
    function Zh(a, b) {
        if (null !== b) {
            a.ax = !0;
            for (var c = b.j; c.next();) {
                var d = c.key;
                d instanceof J && (d.Am = !0)
            }
        }
    }

    function Fi(a, b) {
        if (null !== b) {
            for (var c = b.j; c.next();) {
                var d = c.key;
                d instanceof J && (d.Am = !1, Mi(d) && d.hc())
            }
            a.ax = !1
        }
    }

    Qh.prototype.doKeyDown = function () {
        var a = this.g;
        null !== a && (a = a.U, null !== a && this.wa && ("Esc" === a.key ? this.doCancel() : this.doMouseMove()))
    };
    Qh.prototype.doKeyUp = function () {
        var a = this.g;
        null !== a && null !== a.U && this.wa && this.doMouseMove()
    };
    function Ni(a, b) {
        for (var c = Infinity, d = Infinity, e = -Infinity, g = -Infinity, h = a.j; h.next();) {
            var k = h.value;
            if (k.pe() && k.isVisible()) {
                var l = k.location, k = l.x, l = l.y;
                isNaN(k) || isNaN(l) || (k < c && (c = k), l < d && (d = l), k > e && (e = k), l > g && (g = l))
            }
        }
        Infinity === c ? b.n(0, 0, 0, 0) : b.n(c, d, e - c, g - d)
    }

    function Oi(a, b) {
        if (null === a.lc) {
            var c = a.g;
            if (!(null === c || b && (c.qb || c.Kf)) && null !== a.gc) {
                var d = c.ra;
                d.isEnabled && d.ZF ? null !== d.Dj && 0 < d.Dj.eg.count && (c.ra.Jq(), c.Zb("Drag")) : Li(a);
                c.Eb = !b;
                c.br = !b;
                a.el = c.Lc.ha;
                d = a.pI ? a.gc.Yj() : c.selection;
                d = c.eq(d, c, !0);
                for (c = d.j; c.next();)c.value.location = c.key.location;
                c = D.Rf();
                Ni(d, c);
                D.Kb(c);
                for (var c = new ma(F), e = a.gc.j; e.next();) {
                    var g = e.key;
                    g.pe() && g.canCopy() && (g = d.na(g), null !== g && (g.kf(), c.add(g, pi(g.location))))
                }
                for (d = d.j; d.next();)e = d.value, e instanceof J &&
                e.canCopy() && c.add(e, pi());
                a.lc = c;
                Yh(a, c.Yj());
                null !== a.td && (c = a.td, d = c.so, c.bl(a.el.x - (d.x + d.width / 2), a.el.y - (d.y + d.height / 2)))
            }
        }
    }

    function Ii(a) {
        var b = a.g;
        if (null !== b) {
            if (null !== a.lc && (b.DB(a.lc.Yj(), !1), a.lc = null, null !== a.gc))for (var c = a.gc.j; c.next();)c.key instanceof J && (c.value.point = new N(0, 0));
            b.Eb = !1;
            b.br = !1;
            a.el = b.Lc.ha
        }
    }

    function Hi(a) {
        if (null !== a.td) {
            if (a.Fj && null !== a.qj) {
                var b = a.qj;
                null !== b.g && (b.g.remove(b.de), b.g.remove(b.ee))
            }
            a.td = null;
            a.qj = null
        }
    }

    function Pi(a, b, c) {
        var d = a.g;
        if (null !== d) {
            var e = a.el, g = D.P();
            g.assign(d.U.ha);
            a.moveParts(b, g.xo(e), c);
            D.A(g)
        }
    }

    Qh.prototype.moveParts = function (a, b, c) {
        if (null !== a && (D.l(a, ma, Qh, "moveParts:parts"), 0 !== a.count)) {
            var d = D.P(), e = D.P();
            e.assign(b);
            isNaN(e.x) && (e.x = 0);
            isNaN(e.y) && (e.y = 0);
            (b = this.ax) || Zh(this, a);
            for (var g = new K(Qi), h = new K(Qa), k = a.j; k.next();) {
                var l = k.key;
                if (l.pe()) {
                    var m = Ri(this, l, a);
                    if (null !== m)g.add(new Qi(l, k.value, m)); else if (!c || l.canMove()) {
                        m = k.value.point;
                        d.assign(m);
                        var n = D.P(), p = this.computeMove(l, d.add(e), a, n);
                        l.location = p;
                        k.value.YG = n.xo(m);
                        D.A(n)
                    }
                } else k.key instanceof J && h.add(k.bb)
            }
            for (c =
                     g.j; c.next();)g = c.value, m = g.info.point, d.assign(m), g.Yc.location = d.add(g.YI.YG);
            c = D.P();
            m = D.P();
            for (h = h.j; h.next();)if (k = h.value, g = k.key, g instanceof J)if (g.Am)l = g.Y, n = g.ba, null !== this.td && this.Fj ? (k = k.value.point, a.add(g, pi(e)), l = e.x - k.x, k = e.y - k.y, g.bl(l, k)) : (null !== l && (c.assign(l.location), p = a.na(l), null !== p && c.xo(p.point)), null !== n && (m.assign(n.location), p = a.na(n), null !== p && m.xo(p.point)), null !== l && null !== n ? c.Uc(m) ? (k = k.value.point, l = d, l.assign(c), l.xo(k), a.add(g, pi(c)), g.bl(l.x, l.y)) : (g.Am = !1,
                g.hc()) : (k = k.value.point, n = null !== l ? c : null !== n ? m : e, a.add(g, pi(n)), l = n.x - k.x, k = n.y - k.y, g.bl(l, k))); else if (null === g.Y || null === g.ba)k = k.value.point, a.add(g, pi(e)), l = e.x - k.x, k = e.y - k.y, g.bl(l, k);
            D.A(d);
            D.A(e);
            D.A(c);
            D.A(m);
            b || (Si(this.g), Fi(this, a))
        }
    };
    function Ri(a, b, c) {
        b = b.Ka;
        if (null !== b) {
            a = Ri(a, b, c);
            if (null !== a)return a;
            a = c.na(b);
            if (null !== a)return a
        }
        return null
    }

    function Li(a) {
        if (null !== a.gc) {
            for (var b = a.g, c = a.gc.j; c.next();) {
                var d = c.key;
                d.pe() && (d.location = c.value.point)
            }
            for (c = a.gc.j; c.next();)if (d = c.key, d instanceof J && d.Am) {
                var e = c.value.point;
                a.gc.add(d, pi());
                d.bl(-e.x, -e.y)
            }
            b.jg()
        }
    }

    Qh.prototype.computeMove = function (a, b, c, d) {
        void 0 === d && (d = new N);
        d.assign(b);
        if (null === a)return d;
        void 0 === c && (c = null);
        var e = b;
        if (this.Xx && (this.lJ || null === c || null !== this.g && this.g.U.up) && (e = D.P(), c = e, c.assign(b), null !== a)) {
            var g = this.g;
            if (null !== g) {
                var h = g.Xn, k = this.KF, g = k.width, k = k.height, l = this.XI, m = l.x, l = l.y, n = this.WI;
                if (null !== h) {
                    var p = h.Sx;
                    isNaN(g) && (g = p.width);
                    isNaN(k) && (k = p.height);
                    h = h.JF;
                    isNaN(m) && (m = h.x);
                    isNaN(l) && (l = h.y)
                }
                h = D.Fb(0, 0);
                h.dv(0, 0, g, k, n);
                fb(b.x, b.y, m + h.x, l + h.y, g, k, c);
                D.A(h)
            }
        }
        c =
            null !== a.jF ? a.jF(a, b, e) : e;
        k = a.OJ;
        g = k.x;
        isNaN(g) && (g = a.location.x);
        k = k.y;
        isNaN(k) && (k = a.location.y);
        h = a.IJ;
        m = h.x;
        isNaN(m) && (m = a.location.x);
        h = h.y;
        isNaN(h) && (h = a.location.y);
        d.n(Math.max(g, Math.min(c.x, m)), Math.max(k, Math.min(c.y, h)));
        e !== b && D.A(e);
        return d
    };
    function Ti(a, b) {
        if (null === b)return !0;
        var c = b.Z;
        return null === c || c instanceof ba || c.layer.Wc || a.gc && a.gc.contains(c) || a.lc && a.lc.contains(c) ? !0 : !1
    }

    function Ui(a, b) {
        var c = a.g;
        if (null !== c) {
            a.Fj && (null !== a.td && (a.td.Y = null, a.td.ba = null), Vi(a, !1));
            var d = Wi(c, b, null, function (b) {
                return !Ti(a, b)
            }), e = c.U;
            e.Xe = d;
            var g = c.Eb, h = !1;
            try {
                c.Eb = !0;
                h = Ji(a, e, d);
                if (!a.wa && null === $h)return;
                if (null === d) {
                    var k = c.SJ;
                    null !== k && (k(e), h = !0)
                }
                if (!a.wa && null === $h)return;
                a.doDragOver(b, d);
                if (!a.wa && null === $h)return
            } finally {
                c.Eb = g, h && c.jg()
            }
            (c.Ae || c.Be) && c.JA(e.se)
        }
    }

    function Ji(a, b, c) {
        var d = !1, e = a.ek.length, g = 0 < e ? a.ek[0] : null;
        if (c === g)return !1;
        b.Nc = !1;
        for (var h = 0; h < e; h++) {
            var k = a.ek[h], l = k.RJ;
            if (null !== l && (l(b, k, c), d = !0, b.Nc))break
        }
        a.ek.length = 0;
        if (!a.wa && null === $h || null === c)return d;
        for (b.Nc = !1; null !== c;)a.ek.push(c), c = Xi(c);
        e = a.ek.length;
        for (h = 0; h < e && (k = a.ek[h], l = k.QJ, null === l || (l(b, k, g), d = !0, !b.Nc)); h++);
        return d
    }

    function Xi(a) {
        var b = a.Q;
        return null !== b ? b : a instanceof F && !(a instanceof I) && (a = a.Ka, null !== a && a.$I) ? a : null
    }

    function Yi(a, b, c) {
        var d = a.qj;
        if (null === d)return null;
        var e = a.g.Rn(b, d.xG, function (a) {
            return d.findValidLinkablePort(a, c)
        });
        a = D.P();
        for (var g = Infinity, h = null, e = e.j; e.next();) {
            var k = e.value;
            if (null !== k.Z) {
                var l = k.eb(kc, a), l = b.Ff(l);
                l < g && (h = k, g = l)
            }
        }
        D.A(a);
        return h
    }

    function Vi(a, b) {
        var c = a.td;
        if (null !== c && !(2 > c.ta)) {
            var d = a.g;
            if (null !== d && !d.qb) {
                var e = a.qj;
                if (null !== e) {
                    var g = null, h = null;
                    null === c.Y && (g = Yi(a, c.m(0), !1), null !== g && (h = g.Z));
                    var k = null, l = null;
                    null === c.ba && (k = Yi(a, c.m(c.ta - 1), !0), null !== k && (l = k.Z));
                    e.isValidLink(h, g, l, k) ? b ? (c.fq = c.m(0), c.gq = c.m(c.ta - 1), c.Am = !1, c.Y = h, null !== g && (c.gg = g.vd), c.ba = l, null !== k && (c.mh = k.vd), c.Mc !== a.Bw && d.Ja("LinkRelinked", c, a.Bw), c.ld !== a.Cw && d.Ja("LinkRelinked", c, a.Cw)) : Zi(e, h, g, l, k) : Zi(e, null, null, null, null)
                }
            }
        }
    }

    Qh.prototype.doDragOver = function () {
    };
    function $i(a, b) {
        var c = a.g;
        if (null !== c) {
            a.Fj && Vi(a, !0);
            Ei(a);
            var d = Wi(c, b, null, function (b) {
                return !Ti(a, b)
            }), e = c.U;
            e.Xe = d;
            if (null !== d) {
                e.Nc = !1;
                for (var g = d; null !== g;) {
                    var h = g.oB;
                    if (null !== h && (h(e, g), e.Nc))break;
                    g = Xi(g)
                }
            } else g = c.oB, null !== g && g(e);
            if (a.wa || null !== $h) {
                for (e = (a.lc || a.gc).j; e.next();)g = e.key, g instanceof G && g.Kd.each(function (a) {
                    a.Am = !1
                });
                a.doDropOnto(b, d);
                if (a.wa || null !== $h) {
                    d = D.Rf();
                    for (e = c.selection.j; e.next();)g = e.value, g instanceof G && aj(c, g.getAvoidableRect(d));
                    D.Kb(d)
                }
            }
        }
    }

    function aj(a, b) {
        var c = !1;
        a.ub.Ok(b) && (c = !0);
        c = a.PA(b, function (a) {
            return a.Z
        }, function (a) {
            return a instanceof J
        }, !0, function (a) {
            return a instanceof J
        }, c);
        if (0 !== c.count)for (c = c.j; c.next();) {
            var d = c.value;
            d.Kj && d.hc()
        }
    }

    Qh.prototype.doDropOnto = function () {
    };
    Qh.prototype.doMouseMove = function () {
        if (this.wa) {
            var a = this.g;
            null !== a && null !== this.On && null !== this.gc && (this.mayCopy() ? (a.mc = "copy", Oi(this, !1), Zh(this, this.lc), Pi(this, this.lc, !1), Fi(this, this.lc)) : this.mayMove() ? (a.mc = "default", Ii(this), Pi(this, this.gc, !0)) : this.mayDragOut() ? (a.mc = "no-drop", Oi(this, !1), Pi(this, this.lc, !1)) : Ii(this), Ui(this, a.U.ha))
        }
    };
    Qh.prototype.doMouseUp = function () {
        if (this.wa) {
            var a = this.g;
            if (null !== a) {
                var b = !1, c = this.mayCopy();
                c && null !== this.lc ? (Ii(this), Oi(this, !0), Zh(this, this.lc), Pi(this, this.lc, !1), Fi(this, this.lc), null !== this.lc && a.SG(this.lc.Yj())) : (b = !0, Ii(this), this.mayMove() && (Pi(this, this.gc, !0), Ui(this, a.U.ha)));
                this.Nr = !0;
                $i(this, a.U.ha);
                if (this.wa) {
                    this.lc = null;
                    if (b && null !== this.gc)for (b = this.gc.j; b.next();) {
                        var d = b.key;
                        d instanceof G && (d = d.Ka, null === d || null === d.placeholder || this.gc.contains(d) || d.placeholder.K())
                    }
                    a.Ac();
                    Fi(this, this.gc);
                    this.Tf = c ? "Copy" : "Move";
                    a.Ja(c ? "SelectionCopied" : "SelectionMoved", a.selection)
                }
                this.stopTool()
            }
        }
    };
    Qh.prototype.mayCopy = function () {
        if (!this.UF)return !1;
        var a = this.g;
        if (null === a || a.qb || a.Kf || !a.Yp || !a.Lk || (D.Yk ? !a.U.alt : !a.U.control))return !1;
        for (a = a.selection.j; a.next();) {
            var b = a.value;
            if (b.pe() && b.canCopy())return !0
        }
        return null !== this.td && this.Fj && this.td.canCopy() ? !0 : !1
    };
    Qh.prototype.mayDragOut = function () {
        if (!this.UF)return !1;
        var a = this.g;
        if (null === a || !a.Vt || !a.Lk || a.am)return !1;
        for (a = a.selection.j; a.next();) {
            var b = a.value;
            if (b.pe() && b.canCopy())return !0
        }
        return null !== this.td && this.Fj && this.td.canCopy() ? !0 : !1
    };
    Qh.prototype.mayMove = function () {
        var a = this.g;
        if (null === a || a.qb || !a.am)return !1;
        for (a = a.selection.j; a.next();) {
            var b = a.value;
            if (b.pe() && b.canMove())return !0
        }
        return null !== this.td && this.Fj && this.td.canMove() ? !0 : !1
    };
    var Gi = new K(Qh), $h = null, ai = null;
    Qh.prototype.getDraggingSource = function () {
        return $h
    };
    Qh.prototype.mayDragIn = function () {
        var a = this.g;
        if (null === a || !a.LE || a.qb || a.Kf || !a.Yp)return !1;
        var b = $h;
        return null === b || null === b.g || b.g.ga.im !== a.ga.im ? !1 : !0
    };
    Qh.prototype.doSimulatedDragEnter = function () {
        if (this.mayDragIn()) {
            var a = this.g;
            a.Wa.Yh();
            bj(a);
            a.Wa.Yh();
            a = $h;
            null !== a && null !== a.g && (a.g.mc = "copy")
        }
    };
    Qh.prototype.doSimulatedDragLeave = function () {
        var a = $h;
        null !== a && a.doSimulatedDragOut();
        this.doCancel()
    };
    Qh.prototype.doSimulatedDragOver = function () {
        var a = this.g;
        if (null !== a) {
            var b = $h;
            null !== b && null !== b.gc && this.mayDragIn() && (a.mc = "copy", cj(this, b.gc.Yj(), !1), Pi(this, this.lc, !1), Ui(this, a.U.ha))
        }
    };
    Qh.prototype.doSimulatedDrop = function () {
        var a = this.g;
        if (null !== a) {
            var b = $h;
            if (null !== b) {
                var c = b.g;
                b.Nr = !0;
                Ii(this);
                this.mayDragIn() && (this.Zb("Drop"), cj(this, b.gc.Yj(), !0), Pi(this, this.lc, !1), null !== this.lc && a.SG(this.lc.Yj()), $i(this, a.U.ha), a.Ac(), b = a.selection, null !== this.lc ? this.Tf = "ExternalCopy" : b = new L(F), this.lc = null, a.doFocus(), a.Ja("ExternalObjectsDropped", b, c), this.fl())
            }
        }
    };
    function cj(a, b, c) {
        if (null === a.lc) {
            var d = a.g;
            if (null !== d && !d.qb && !d.Kf) {
                d.Eb = !c;
                d.br = !c;
                a.el = d.U.ha;
                c = d.eq(b, d, !0);
                var e = D.Rf();
                Ni(b, e);
                var d = e.x + e.width / 2, g = e.y + e.height / 2;
                D.Kb(e);
                var e = a.Yw, h = new ma(F), k = D.P();
                for (b = b.j; b.next();) {
                    var l = b.value, m = c.na(l);
                    l.pe() && l.canCopy() ? (l = l.location, k.n(e.x - (d - l.x), e.y - (g - l.y)), m.location = k, m.kf(), h.add(m, pi(k))) : l instanceof J && l.canCopy() && (m.bl(e.x - d, e.y - g), h.add(m, pi()))
                }
                D.A(k);
                a.lc = h;
                Yh(a, h.Yj());
                null !== a.td && (c = a.td, d = c.so, c.bl(a.el.x - (d.x + d.width / 2),
                    a.el.y - (d.y + d.height / 2)))
            }
        }
    }

    Qh.prototype.doSimulatedDragOut = function () {
        var a = this.g;
        null !== a && (this.mayCopy() || this.mayMove() ? a.mc = "" : a.mc = "no-drop")
    };
    function Ci(a) {
        this.point = a;
        this.YG = Jd
    }

    D.ka("DraggingInfo", Ci);
    function Qi(a, b, c) {
        this.Yc = a;
        this.info = b;
        this.YI = c
    }

    function dj() {
        0 < arguments.length && D.wd(dj);
        Yg.call(this);
        this.XD = 100;
        this.wD = !1;
        var a = new J, b = new y;
        b.Lf = !0;
        b.stroke = "blue";
        a.add(b);
        b = new y;
        b.Vq = "Standard";
        b.fill = "blue";
        b.stroke = "blue";
        a.add(b);
        a.Nf = "Tool";
        this.qE = a;
        a = new G;
        b = new y;
        b.vd = "";
        b.Jb = "Rectangle";
        b.fill = null;
        b.stroke = "magenta";
        b.lb = 2;
        b.Ea = Zd;
        a.add(b);
        a.dl = !1;
        a.Nf = "Tool";
        this.oE = a;
        this.pE = b;
        a = new G;
        b = new y;
        b.vd = "";
        b.Jb = "Rectangle";
        b.fill = null;
        b.stroke = "magenta";
        b.lb = 2;
        b.Ea = Zd;
        a.add(b);
        a.dl = !1;
        a.Nf = "Tool";
        this.rE = a;
        this.sE = b;
        this.VD = this.UD =
            this.QD = this.PD = this.RD = null;
        this.sD = !0;
        this.LH = new ma(P, "boolean");
        this.YD = this.Kl = this.lE = null
    }

    D.Ra(dj, Yg);
    D.ka("LinkingBaseTool", dj);
    dj.prototype.doStop = function () {
        var a = this.g;
        null !== a && Di(a);
        this.hh = this.gh = this.fh = this.eh = this.tc = null;
        this.Py.clear();
        this.Qf = null
    };
    D.defineProperty(dj, {xG: "portGravity"}, function () {
        return this.XD
    }, function (a) {
        D.h(a, "number", dj, "portGravity");
        0 <= a && (this.XD = a)
    });
    D.defineProperty(dj, {xq: "isUnconnectedLinkValid"}, function () {
        return this.wD
    }, function (a) {
        D.h(a, "boolean", dj, "isUnconnectedLinkValid");
        this.wD = a
    });
    D.defineProperty(dj, {kh: "temporaryLink"}, function () {
        return this.qE
    }, function (a) {
        D.l(a, J, dj, "temporaryLink");
        this.qE = a
    });
    D.defineProperty(dj, {de: "temporaryFromNode"}, function () {
        return this.oE
    }, function (a) {
        D.l(a, G, dj, "temporaryFromNode");
        this.oE = a
    });
    D.defineProperty(dj, {yo: "temporaryFromPort"}, function () {
        return this.pE
    }, function (a) {
        D.l(a, P, dj, "temporaryFromPort");
        this.pE = a
    });
    D.defineProperty(dj, {ee: "temporaryToNode"}, function () {
        return this.rE
    }, function (a) {
        D.l(a, G, dj, "temporaryToNode");
        this.rE = a
    });
    D.defineProperty(dj, {zo: "temporaryToPort"}, function () {
        return this.sE
    }, function (a) {
        D.l(a, P, dj, "temporaryToPort");
        this.sE = a
    });
    D.defineProperty(dj, {tc: "originalLink"}, function () {
        return this.RD
    }, function (a) {
        null !== a && D.l(a, J, dj, "originalLink");
        this.RD = a
    });
    D.defineProperty(dj, {eh: "originalFromNode"}, function () {
        return this.PD
    }, function (a) {
        null !== a && D.l(a, G, dj, "originalFromNode");
        this.PD = a
    });
    D.defineProperty(dj, {fh: "originalFromPort"}, function () {
        return this.QD
    }, function (a) {
        null !== a && D.l(a, P, dj, "originalFromPort");
        this.QD = a
    });
    D.defineProperty(dj, {gh: "originalToNode"}, function () {
        return this.UD
    }, function (a) {
        null !== a && D.l(a, G, dj, "originalToNode");
        this.UD = a
    });
    D.defineProperty(dj, {hh: "originalToPort"}, function () {
        return this.VD
    }, function (a) {
        null !== a && D.l(a, P, dj, "originalToPort");
        this.VD = a
    });
    D.defineProperty(dj, {ae: "isForwards"}, function () {
        return this.sD
    }, function (a) {
        D.h(a, "boolean", dj, "isForwards");
        this.sD = a
    });
    D.w(dj, {Py: "validPortsCache"}, function () {
        return this.LH
    });
    D.defineProperty(dj, {Qf: "targetPort"}, function () {
        return this.lE
    }, function (a) {
        null !== a && D.l(a, P, dj, "targetPort");
        this.lE = a
    });
    dj.prototype.copyPortProperties = function (a, b, c, d, e) {
        if (null !== a && null !== b && null !== c && null !== d) {
            d.Ea = b.$.size;
            e ? (d.Hb = b.Hb, d.Em = b.Em) : (d.Gb = b.Gb, d.pm = b.pm);
            c.Of = kc;
            var g = D.P();
            c.location = b.eb(kc, g);
            D.A(g);
            d.angle = b.qm();
            null !== this.wy && this.wy(a, b, c, d, e)
        }
    };
    dj.prototype.setNoTargetPortProperties = function (a, b, c) {
        null !== b && (b.Ea = Zd, b.Gb = cc, b.Hb = cc);
        null !== a && null !== this.g && (a.location = this.g.U.ha);
        null !== this.wy && this.wy(null, null, a, b, c)
    };
    dj.prototype.doMouseDown = function () {
        this.wa && this.doMouseMove()
    };
    dj.prototype.doMouseMove = function () {
        if (this.wa) {
            var a = this.g;
            if (null !== a) {
                this.Qf = this.findTargetPort(this.ae);
                if (null !== this.Qf && this.Qf.Z instanceof G) {
                    var b = this.Qf.Z;
                    this.ae ? this.copyPortProperties(b, this.Qf, this.ee, this.zo, !0) : this.copyPortProperties(b, this.Qf, this.de, this.yo, !1)
                } else this.ae ? this.setNoTargetPortProperties(this.ee, this.zo, !0) : this.setNoTargetPortProperties(this.de, this.yo, !1);
                (a.Ae || a.Be) && a.JA(a.U.se)
            }
        }
    };
    dj.prototype.findValidLinkablePort = function (a, b) {
        if (null === a)return null;
        var c = a.Z;
        if (!(c instanceof G))return null;
        for (; null !== a;) {
            var d = b ? a.gH : a.zF;
            if (!0 === d && (null !== a.vd || a instanceof G) && (b ? this.isValidTo(c, a) : this.isValidFrom(c, a)))return a;
            if (!1 === d)break;
            a = a.Q
        }
        return null
    };
    dj.prototype.findTargetPort = function (a) {
        var b = this.g, c = b.U.ha, d = this.xG;
        0 >= d && (d = .1);
        for (var e = this, g = b.Rn(c, d, function (b) {
            return e.findValidLinkablePort(b, a)
        }, null, !0), d = Infinity, b = null, g = g.j; g.next();) {
            var h = g.value, k = h.Z;
            if (k instanceof G) {
                var l = h.eb(kc, D.P()), m = c.x - l.x, n = c.y - l.y;
                D.A(l);
                l = m * m + n * n;
                l < d && (m = this.Py.na(h), null !== m ? m && (b = h, d = l) : a && this.isValidLink(this.eh, this.fh, k, h) || !a && this.isValidLink(k, h, this.gh, this.hh) ? (this.Py.add(h, !0), b = h, d = l) : this.Py.add(h, !1))
            }
        }
        return null !== b && (c = b.Z,
        c instanceof G && (null === c.layer || c.layer.Wt)) ? b : null
    };
    dj.prototype.isValidFrom = function (a, b) {
        if (null === a || null === b)return this.xq;
        if (null !== this.g && this.g.hb === this && (null !== a.layer && !a.layer.Wt || !0 !== b.zF))return !1;
        var c = b.RA;
        if (Infinity > c) {
            if (null !== this.tc && a === this.eh && b === this.fh)return !0;
            var d = b.vd;
            null === d && (d = "");
            if (a.Mx(d).count >= c)return !1
        }
        return !0
    };
    dj.prototype.isValidTo = function (a, b) {
        if (null === a || null === b)return this.xq;
        if (null !== this.g && this.g.hb === this && (null !== a.layer && !a.layer.Wt || !0 !== b.gH))return !1;
        var c = b.BK;
        if (Infinity > c) {
            if (null !== this.tc && a === this.gh && b === this.hh)return !0;
            var d = b.vd;
            null === d && (d = "");
            if (a.$g(d).count >= c)return !1
        }
        return !0
    };
    dj.prototype.isInSameNode = function (a, b) {
        if (null === a || null === b)return !1;
        if (a === b)return !0;
        var c = a.Z, d = b.Z;
        return null !== c && c === d
    };
    dj.prototype.isLinked = function (a, b) {
        if (null === a || null === b)return !1;
        var c = a.Z;
        if (!(c instanceof G))return !1;
        var d = a.vd;
        null === d && (d = "");
        var e = b.Z;
        if (!(e instanceof G))return !1;
        var g = b.vd;
        null === g && (g = "");
        for (e = e.$g(g); e.next();)if (g = e.value, g.Y === c && g.gg === d)return !0;
        return !1
    };
    dj.prototype.isValidLink = function (a, b, c, d) {
        if (!this.isValidFrom(a, b) || !this.isValidTo(c, d) || !(null === b || null === d || (b.NI && d.AK || !this.isInSameNode(b, d)) && (b.MI && d.zK || !this.isLinked(b, d))) || null !== this.tc && (null !== a && this.isLabelDependentOnLink(a, this.tc) || null !== c && this.isLabelDependentOnLink(c, this.tc)) || null !== a && null !== c && (null === a.data && null !== c.data || null !== a.data && null === c.data) || !this.isValidCycle(a, c, this.tc))return !1;
        if (null !== a) {
            var e = a.ky;
            if (null !== e && !e(a, b, c, d, this.tc))return !1
        }
        if (null !==
            c && (e = c.ky, null !== e && !e(a, b, c, d, this.tc)))return !1;
        e = this.ky;
        return null !== e ? e(a, b, c, d, this.tc) : !0
    };
    dj.prototype.isLabelDependentOnLink = function (a, b) {
        if (null === a)return !1;
        var c = a.Xb;
        if (null === c)return !1;
        if (c === b)return !0;
        var d = new L(G);
        d.add(a);
        return ej(this, c, b, d)
    };
    function ej(a, b, c, d) {
        if (b === c)return !0;
        var e = b.Y;
        if (null !== e && e.Jf && (d.add(e), ej(a, e.Xb, c, d)))return !0;
        b = b.ba;
        return null !== b && b.Jf && (d.add(b), ej(a, b.Xb, c, d)) ? !0 : !1
    }

    dj.prototype.isValidCycle = function (a, b, c) {
        void 0 === c && (c = null);
        if (null === a || null === b)return this.xq;
        var d = null !== this.g ? this.g.HK : fj;
        if (d !== fj) {
            if (d === gj) {
                if (null !== c && !c.Xc)return !0;
                for (d = b.Kd; d.next();) {
                    var e = d.value;
                    if (e !== c && e.Xc && e.ba === b)return !1
                }
                return !hj(this, a, b, c, !0)
            }
            if (d === ij) {
                if (null !== c && !c.Xc)return !0;
                for (d = a.Kd; d.next();)if (e = d.value, e !== c && e.Xc && e.Y === a)return !1;
                return !hj(this, a, b, c, !0)
            }
            if (d === jj)return a === b ? a = !0 : (d = new L(G), d.add(b), a = kj(this, d, a, b, c)), !a;
            if (d === lj)return !hj(this,
                a, b, c, !1);
            if (d === mj)return a === b ? a = !0 : (d = new L(G), d.add(b), a = nj(this, d, a, b, c)), !a
        }
        return !0
    };
    function hj(a, b, c, d, e) {
        if (b === c)return !0;
        if (null === b || null === c)return !1;
        for (var g = b.Kd; g.next();) {
            var h = g.value;
            if (h !== d && (!e || h.Xc) && h.ba === b && (h = h.Y, h !== b && hj(a, h, c, d, e)))return !0
        }
        return !1
    }

    function kj(a, b, c, d, e) {
        if (c === d)return !0;
        if (null === c || null === d || b.contains(c))return !1;
        b.add(c);
        for (var g = c.Kd; g.next();) {
            var h = g.value;
            if (h !== e && h.ba === c && (h = h.Y, h !== c && kj(a, b, h, d, e)))return !0
        }
        return !1
    }

    function nj(a, b, c, d, e) {
        if (c === d)return !0;
        if (null === c || null === d || b.contains(c))return !1;
        b.add(c);
        for (var g = c.Kd; g.next();) {
            var h = g.value;
            if (h !== e) {
                var k = h.Y, h = h.ba, k = k === c ? h : k;
                if (k !== c && nj(a, b, k, d, e))return !0
            }
        }
        return !1
    }

    D.defineProperty(dj, {ky: "linkValidation"}, function () {
        return this.Kl
    }, function (a) {
        null !== a && D.h(a, "function", dj, "linkValidation");
        this.Kl = a
    });
    D.defineProperty(dj, {wy: "portTargeted"}, function () {
        return this.YD
    }, function (a) {
        null !== a && D.h(a, "function", dj, "portTargeted");
        this.YD = a
    });
    function pa() {
        0 < arguments.length && D.wd(pa);
        dj.call(this);
        this.name = "Linking";
        this.gz = {};
        this.fz = null;
        this.fa = oj;
        this.gE = null
    }

    D.Ra(pa, dj);
    D.ka("LinkingTool", pa);
    var oj;
    pa.Either = oj = D.s(pa, "Either", 0);
    var pj;
    pa.ForwardsOnly = pj = D.s(pa, "ForwardsOnly", 0);
    var qj;
    pa.BackwardsOnly = qj = D.s(pa, "BackwardsOnly", 0);
    D.defineProperty(pa, {XH: "archetypeLinkData"}, function () {
        return this.gz
    }, function (a) {
        null !== a && D.l(a, Object, pa, "archetypeLinkData");
        a instanceof P && D.l(a, J, pa, "archetypeLinkData");
        this.gz = a
    });
    D.defineProperty(pa, {OE: "archetypeLabelNodeData"}, function () {
        return this.fz
    }, function (a) {
        null !== a && D.l(a, Object, pa, "archetypeLabelNodeData");
        a instanceof P && D.l(a, G, pa, "archetypeLabelNodeData");
        this.fz = a
    });
    D.defineProperty(pa, {direction: "direction"}, function () {
        return this.fa
    }, function (a) {
        D.Da(a, pa, pa, "direction");
        this.fa = a
    });
    D.defineProperty(pa, {aH: "startObject"}, function () {
        return this.gE
    }, function (a) {
        null !== a && D.l(a, P, pa, "startObject");
        this.gE = a
    });
    pa.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a || a.qb || a.Kf || !a.Wt)return !1;
        var b = a.ga;
        return (b instanceof X || b instanceof zg) && a.U.left && (a.hb === this || this.isBeyondDragSize()) ? null !== this.findLinkablePort() : !1
    };
    pa.prototype.findLinkablePort = function () {
        var a = this.g;
        if (null === a)return null;
        var b = this.aH;
        null === b && (b = a.Ie(a.Lc.ha, null, null));
        if (null === b || !(b.Z instanceof G))return null;
        a = this.direction;
        if (a === oj || a === pj) {
            var c = this.findValidLinkablePort(b, !1);
            if (null !== c)return this.ae = !0, c
        }
        if (a === oj || a === qj)if (c = this.findValidLinkablePort(b, !0), null !== c)return this.ae = !1, c;
        return null
    };
    pa.prototype.doActivate = function () {
        var a = this.g;
        if (null !== a) {
            var b = this.findLinkablePort();
            null !== b && (this.Zb(this.name), a.lf = !0, a.mc = "pointer", this.ae ? (null === this.ee || this.ee.location.F() || (this.ee.location = a.U.ha), this.fh = b, b = this.fh.Z, b instanceof G && (this.eh = b), this.copyPortProperties(this.eh, this.fh, this.de, this.yo, !1)) : (null === this.de || this.de.location.F() || (this.de.location = a.U.ha), this.hh = b, b = this.hh.Z, b instanceof G && (this.gh = b), this.copyPortProperties(this.gh, this.hh, this.ee, this.zo, !0)),
                a.add(this.de), a.add(this.ee), null !== this.kh && (null !== this.de && (this.kh.Y = this.de), null !== this.ee && (this.kh.ba = this.ee), this.kh.hc(), a.add(this.kh)), this.wa = !0)
        }
    };
    pa.prototype.doDeactivate = function () {
        this.wa = !1;
        var a = this.g;
        null !== a && (a.remove(this.kh), a.remove(this.de), a.remove(this.ee), a.lf = !1, a.mc = "", this.fl())
    };
    pa.prototype.doStop = function () {
        dj.prototype.doStop.call(this);
        this.aH = null
    };
    pa.prototype.doMouseUp = function () {
        if (this.wa) {
            var a = this.g;
            if (null === a)return;
            var b = this.Tf = null, c = null, d = null, e = null, g = this.Qf = this.findTargetPort(this.ae);
            if (null !== g) {
                var h = g.Z;
                h instanceof G && (this.ae ? (null !== this.eh && (b = this.eh, c = this.fh), d = h, e = g) : (b = h, c = g, null !== this.gh && (d = this.gh, e = this.hh)))
            } else this.ae ? null !== this.eh && this.xq && (b = this.eh, c = this.fh) : null !== this.gh && this.xq && (d = this.gh, e = this.hh);
            null !== b || null !== d ? (h = this.insertLink(b, c, d, e), null !== h ? (null === g && (this.ae ? h.gq = a.U.ha : h.fq =
                a.U.ha), a.Ef && a.select(h), this.Tf = this.name, a.Ja("LinkDrawn", h)) : (a.ga.UE(), this.doNoLink(b, c, d, e))) : this.ae ? this.doNoLink(this.eh, this.fh, null, null) : this.doNoLink(null, null, this.gh, this.hh)
        }
        this.stopTool()
    };
    pa.prototype.insertLink = function (a, b, c, d) {
        var e = this.g;
        if (null === e)return null;
        var g = e.ga;
        if (g instanceof zg) {
            var h = a;
            b = c;
            e.ce || (h = c, b = a);
            if (null !== h && null !== b)return g.Ji(b.data, g.Ab(h.data)), b.Sn()
        } else if (g instanceof X)if (h = "", null !== a && (null === b && (b = a), h = b.vd, null === h && (h = "")), b = "", null !== c && (null === d && (d = c), b = d.vd, null === b && (b = "")), d = this.XH, d instanceof J) {
            if (Oh(d), g = d.copy(), null !== g)return g.Y = a, g.gg = h, g.ba = c, g.mh = b, e.add(g), a = this.OE, a instanceof G && (Oh(a), a = a.copy(), null !== a && (a.Xb = g, e.add(a))),
                g
        } else if (null !== d && (d = g.Ax(d), D.Sa(d)))return null !== a && g.JB(d, g.Ab(a.data)), g.KB(d, h), null !== c && g.PB(d, g.Ab(c.data)), g.QB(d, b), g.Rt(d), a = this.OE, null === a || a instanceof G || (a = g.copyNodeData(a), D.Sa(a) && (g.Zl(a), a = g.Ab(a), void 0 !== a && g.JE(d, a))), g = e.fg(d);
        return null
    };
    pa.prototype.doNoLink = function () {
    };
    function bi() {
        0 < arguments.length && D.wd(bi);
        dj.call(this);
        this.name = "Relinking";
        var a = new y;
        a.Jb = "Diamond";
        a.Ea = ae;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.cursor = "pointer";
        a.Ue = 0;
        this.fD = a;
        a = new y;
        a.Jb = "Diamond";
        a.Ea = ae;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.cursor = "pointer";
        a.Ue = -1;
        this.tE = a;
        this.pc = null;
        this.SD = new C
    }

    D.Ra(bi, dj);
    D.ka("RelinkingTool", bi);
    bi.prototype.updateAdornments = function (a) {
        if (null !== a && a instanceof J) {
            var b = "RelinkFrom", c = null;
            if (a.ib && null !== this.g && !this.g.qb) {
                var d = a.to;
                null !== d && a.canRelinkFrom() && a.$.F() && a.isVisible() && d.$.F() && d.Pj() && (c = a.kq(b), null === c && (c = this.makeAdornment(d, !1), a.Yl(b, c)))
            }
            null === c && a.Uj(b);
            b = "RelinkTo";
            c = null;
            a.ib && null !== this.g && !this.g.qb && (d = a.to, null !== d && a.canRelinkTo() && a.$.F() && a.isVisible() && d.$.F() && d.Pj() && (c = a.kq(b), null === c && (c = this.makeAdornment(d, !0), a.Yl(b, c))));
            null === c && a.Uj(b)
        }
    };
    bi.prototype.makeAdornment = function (a, b) {
        var c = new ba;
        c.type = rj;
        var d = b ? this.yK : this.LI;
        null !== d && c.add(d.copy());
        c.zb = a;
        return c
    };
    D.defineProperty(bi, {LI: "fromHandleArchetype"}, function () {
        return this.fD
    }, function (a) {
        null !== a && D.l(a, P, bi, "fromHandleArchetype");
        this.fD = a
    });
    D.defineProperty(bi, {yK: "toHandleArchetype"}, function () {
        return this.tE
    }, function (a) {
        null !== a && D.l(a, P, bi, "toHandleArchetype");
        this.tE = a
    });
    D.w(bi, {handle: "handle"}, function () {
        return this.pc
    });
    bi.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a || a.qb || a.Kf || !a.Dn)return !1;
        var b = a.ga;
        if (!(b instanceof X || b instanceof zg) || !a.U.left)return !1;
        b = this.findToolHandleAt(a.Lc.ha, "RelinkFrom");
        null === b && (b = this.findToolHandleAt(a.Lc.ha, "RelinkTo"));
        return null !== b
    };
    bi.prototype.doActivate = function () {
        var a = this.g;
        if (null !== a) {
            if (null === this.tc) {
                var b = this.findToolHandleAt(a.Lc.ha, "RelinkFrom");
                null === b && (b = this.findToolHandleAt(a.Lc.ha, "RelinkTo"));
                if (null === b)return;
                var c = b.Z;
                if (!(c instanceof ba && c.Df instanceof J))return;
                this.pc = b;
                this.ae = null === c || "RelinkTo" === c.Fd;
                this.tc = c.Df
            }
            this.Zb(this.name);
            a.lf = !0;
            a.mc = "pointer";
            this.fh = this.tc.Mc;
            this.eh = this.tc.Y;
            this.hh = this.tc.ld;
            this.gh = this.tc.ba;
            this.SD.set(this.tc.$);
            null !== this.tc && 0 < this.tc.ta && (null === this.tc.Y &&
            (null !== this.yo && (this.yo.Ea = Yd), null !== this.de && (this.de.location = this.tc.m(0))), null === this.tc.ba && (null !== this.zo && (this.zo.Ea = Yd), null !== this.ee && (this.ee.location = this.tc.m(this.tc.ta - 1))));
            this.copyPortProperties(this.eh, this.fh, this.de, this.yo, !1);
            this.copyPortProperties(this.gh, this.hh, this.ee, this.zo, !0);
            a.add(this.de);
            a.add(this.ee);
            null !== this.kh && (null !== this.de && (this.kh.Y = this.de), null !== this.ee && (this.kh.ba = this.ee), this.copyLinkProperties(this.tc, this.kh), this.kh.hc(), a.add(this.kh));
            this.wa = !0
        }
    };
    bi.prototype.copyLinkProperties = function (a, b) {
        if (null !== a && null !== b) {
            b.Tt = a.Tt;
            b.FA = a.FA;
            var c = a.jf;
            if (c === sj || c === tj)c = Mj;
            b.jf = c;
            b.Dx = a.Dx;
            b.Ey = a.Ey;
            b.Sq = a.Sq;
            b.Gb = a.Gb;
            b.pm = a.pm;
            b.qu = a.qu;
            b.ru = a.ru;
            b.Hb = a.Hb;
            b.Em = a.Em;
            b.iv = a.iv;
            b.jv = a.jv
        }
    };
    bi.prototype.doDeactivate = function () {
        this.wa = !1;
        var a = this.g;
        null !== a && (a.remove(this.kh), a.remove(this.de), a.remove(this.ee), a.lf = !1, a.mc = "", this.fl())
    };
    bi.prototype.doStop = function () {
        dj.prototype.doStop.call(this);
        this.pc = null
    };
    bi.prototype.doMouseUp = function () {
        if (this.wa) {
            var a = this.g;
            if (null === a)return;
            this.Tf = null;
            var b = this.eh, c = this.fh, d = this.gh, e = this.hh, g = this.tc;
            this.Qf = this.findTargetPort(this.ae);
            if (null !== this.Qf) {
                var h = this.Qf.Z;
                h instanceof G && (this.ae ? (d = h, e = this.Qf) : (b = h, c = this.Qf))
            } else this.xq ? this.ae ? e = d = null : c = b = null : g = null;
            null !== g ? (this.reconnectLink(g, this.ae ? d : b, this.ae ? e : c, this.ae), null === this.Qf && (this.ae ? g.gq = a.U.ha : g.fq = a.U.ha, g.hc()), a.Ef && (g.ib = !0), this.Tf = this.name, a.Ja("LinkRelinked", g, this.ae ?
                this.hh : this.fh)) : this.doNoRelink(this.tc, this.ae);
            Nj(this.tc, this.SD)
        }
        this.stopTool()
    };
    bi.prototype.reconnectLink = function (a, b, c, d) {
        if (null === this.g)return !1;
        c = null !== c && null !== c.vd ? c.vd : "";
        d ? (a.ba = b, a.mh = c) : (a.Y = b, a.gg = c);
        return !0
    };
    bi.prototype.doNoRelink = function () {
    };
    function Zi(a, b, c, d, e) {
        null !== a.g && (null !== b ? (a.copyPortProperties(b, c, a.de, a.yo, !1), a.g.add(a.de)) : a.g.remove(a.de), null !== d ? (a.copyPortProperties(d, e, a.ee, a.zo, !0), a.g.add(a.ee)) : a.g.remove(a.ee))
    }

    function Oj() {
        0 < arguments.length && D.wd(Oj);
        Yg.call(this);
        this.name = "LinkReshaping";
        var a = new y;
        a.Jb = "Rectangle";
        a.Ea = $d;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        this.zl = a;
        a = new y;
        a.Jb = "Diamond";
        a.Ea = $d;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        this.DD = a;
        this.ZD = 3;
        this.dz = this.pc = null;
        this.Dp = new N;
        this.Ew = null
    }

    D.Ra(Oj, Yg);
    D.ka("LinkReshapingTool", Oj);
    var Pj;
    Oj.None = Pj = D.s(Oj, "None", 0);
    var Qj;
    Oj.Horizontal = Qj = D.s(Oj, "Horizontal", 1);
    var Rj;
    Oj.Vertical = Rj = D.s(Oj, "Vertical", 2);
    var Sj;
    Oj.All = Sj = D.s(Oj, "All", 3);
    Oj.prototype.getReshapingBehavior = Oj.prototype.EF = function (a) {
        return a && a.aA ? a.aA : Pj
    };
    Oj.prototype.setReshapingBehavior = Oj.prototype.cv = function (a, b) {
        D.l(a, P, Oj, "setReshapingBehavior:obj");
        D.Da(b, Oj, Oj, "setReshapingBehavior:behavior");
        a.aA = b
    };
    Oj.prototype.updateAdornments = function (a) {
        if (null !== a && a instanceof J) {
            if (a.ib && null !== this.g && !this.g.qb) {
                var b = a.path;
                if (null !== b && a.canReshape() && a.$.F() && a.isVisible() && b.$.F() && b.Pj()) {
                    var c = a.kq(this.name);
                    if (null === c || c.MD !== a.ta || c.CE !== a.Yu)c = this.makeAdornment(b), null !== c && (c.MD = a.ta, c.CE = a.Yu, a.Yl(this.name, c));
                    if (null !== c) {
                        c.location = a.position;
                        return
                    }
                }
            }
            a.Uj(this.name)
        }
    };
    Oj.prototype.makeAdornment = function (a) {
        var b = a.Z, c = b.ta, d = b.ic, e = null;
        if (null !== b.points && 1 < c) {
            e = new ba;
            e.type = rj;
            var c = b.ku, g = b.hy, h = d ? 1 : 0;
            if (b.Yu && b.jf !== Tj)for (var k = c + h; k < g - h; k++) {
                var l = this.makeResegmentHandle(a, k);
                null !== l && (l.Ue = k, l.HB = .5, l.RA = 999, e.add(l))
            }
            for (k = c + 1; k < g; k++)if (l = this.makeHandle(a, k), null !== l) {
                l.Ue = k;
                if (k !== c)if (k === c + 1 && d) {
                    var h = b.m(c), m = b.m(c + 1);
                    ab(h.x, m.x) && ab(h.y, m.y) && (m = b.m(c - 1));
                    ab(h.x, m.x) ? (this.cv(l, Rj), l.cursor = "n-resize") : ab(h.y, m.y) && (this.cv(l, Qj), l.cursor = "w-resize")
                } else k ===
                g - 1 && d ? (h = b.m(g - 1), m = b.m(g), ab(h.x, m.x) && ab(h.y, m.y) && (h = b.m(g + 1)), ab(h.x, m.x) ? (this.cv(l, Rj), l.cursor = "n-resize") : ab(h.y, m.y) && (this.cv(l, Qj), l.cursor = "w-resize")) : k !== g && (this.cv(l, Sj), l.cursor = "move");
                e.add(l)
            }
            e.zb = a
        }
        return e
    };
    Oj.prototype.makeHandle = function () {
        var a = this.uu;
        return null === a ? null : a.copy()
    };
    D.defineProperty(Oj, {uu: "handleArchetype"}, function () {
        return this.zl
    }, function (a) {
        null !== a && D.l(a, P, Oj, "handleArchetype");
        this.zl = a
    });
    Oj.prototype.makeResegmentHandle = function () {
        var a = this.NJ;
        return null === a ? null : a.copy()
    };
    D.defineProperty(Oj, {NJ: "midHandleArchetype"}, function () {
        return this.DD
    }, function (a) {
        null !== a && D.l(a, P, Oj, "midHandleArchetype");
        this.DD = a
    });
    D.w(Oj, {handle: "handle"}, function () {
        return this.pc
    });
    D.w(Oj, {Ut: "adornedLink"}, function () {
        return this.dz
    });
    Oj.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        return null !== a && !a.qb && a.qx && a.U.left ? null !== this.findToolHandleAt(a.Lc.ha, this.name) : !1
    };
    Oj.prototype.doActivate = function () {
        var a = this.g;
        if (null !== a && (this.pc = this.findToolHandleAt(a.Lc.ha, this.name), null !== this.pc)) {
            var b = this.pc.Z.Df;
            if (b instanceof J) {
                this.dz = b;
                a.lf = !0;
                this.Zb(this.name);
                if (b.Yu && 999 === this.pc.RA) {
                    var c = b.points.copy(), d = this.pc.eb(kc);
                    c.$d(this.pc.Ue + 1, d);
                    b.ic && c.$d(this.pc.Ue + 1, d);
                    b.points = c;
                    b.oe();
                    this.pc = this.findToolHandleAt(a.Lc.ha, this.name);
                    if (null === this.pc) {
                        this.doDeactivate();
                        return
                    }
                }
                this.Dp = b.m(this.pc.Ue);
                this.Ew = b.points.copy();
                this.wa = !0
            }
        }
    };
    Oj.prototype.doDeactivate = function () {
        this.fl();
        this.dz = this.pc = null;
        var a = this.g;
        null !== a && (a.lf = !1);
        this.wa = !1
    };
    Oj.prototype.doCancel = function () {
        var a = this.Ut;
        null !== a && (a.points = this.Ew);
        this.stopTool()
    };
    Oj.prototype.doMouseMove = function () {
        var a = this.g;
        this.wa && null !== a && (a = this.computeReshape(a.U.ha), this.reshape(a))
    };
    Oj.prototype.doMouseUp = function () {
        var a = this.g;
        if (this.wa && null !== a) {
            var b = this.computeReshape(a.U.ha);
            this.reshape(b);
            b = this.Ut;
            if (null !== b && b.Yu) {
                var c = this.handle.Ue, d = b.m(c - 1), e = b.m(c), g = b.m(c + 1);
                if (b.ic) {
                    if (c > b.ku + 1 && c < b.hy - 1) {
                        var h = b.m(c - 2);
                        if (Math.abs(d.x - e.x) < this.Wh && Math.abs(d.y - e.y) < this.Wh && (Uj(this, h, d, e, g, !0) || Uj(this, h, d, e, g, !1))) {
                            var k = b.points.copy();
                            Uj(this, h, d, e, g, !0) ? (k.tg(c - 2, new N(h.x, (g.y + h.y) / 2)), k.tg(c + 1, new N(g.x, (g.y + h.y) / 2))) : (k.tg(c - 2, new N((g.x + h.x) / 2, h.y)), k.tg(c + 1,
                                new N((g.x + h.x) / 2, g.y)));
                            k.kd(c);
                            k.kd(c - 1);
                            b.points = k;
                            b.oe()
                        } else h = b.m(c + 2), Math.abs(e.x - g.x) < this.Wh && Math.abs(e.y - g.y) < this.Wh && (Uj(this, d, e, g, h, !0) || Uj(this, d, e, g, h, !1)) && (k = b.points.copy(), Uj(this, d, e, g, h, !0) ? (k.tg(c - 1, new N(d.x, (d.y + h.y) / 2)), k.tg(c + 2, new N(h.x, (d.y + h.y) / 2))) : (k.tg(c - 1, new N((d.x + h.x) / 2, d.y)), k.tg(c + 2, new N((d.x + h.x) / 2, h.y))), k.kd(c + 1), k.kd(c), b.points = k, b.oe())
                    }
                } else h = D.P(), eb(d.x, d.y, g.x, g.y, e.x, e.y, h) && h.Ff(e) < this.Wh * this.Wh && (k = b.points.copy(), k.kd(c), b.points = k, b.oe()),
                    D.A(h)
            }
            a.Ac();
            this.Tf = this.name;
            a.Ja("LinkReshaped", this.Ut, this.Ew)
        }
        this.stopTool()
    };
    function Uj(a, b, c, d, e, g) {
        return g ? Math.abs(b.y - c.y) < a.Wh && Math.abs(c.y - d.y) < a.Wh && Math.abs(d.y - e.y) < a.Wh : Math.abs(b.x - c.x) < a.Wh && Math.abs(c.x - d.x) < a.Wh && Math.abs(d.x - e.x) < a.Wh
    }

    D.defineProperty(Oj, {Wh: "resegmentingDistance"}, function () {
        return this.ZD
    }, function (a) {
        D.h(a, "number", Oj, "resegmentingDistance");
        this.ZD = a
    });
    Oj.prototype.reshape = function (a) {
        var b = this.Ut;
        b.zm();
        var c = this.handle.Ue, d = this.EF(this.handle);
        if (b.ic)if (c === b.ku + 1)c = b.ku + 1, d === Rj ? (b.ia(c, b.m(c - 1).x, a.y), b.ia(c + 1, b.m(c + 2).x, a.y)) : d === Qj && (b.ia(c, a.x, b.m(c - 1).y), b.ia(c + 1, a.x, b.m(c + 2).y)); else if (c === b.hy - 1)c = b.hy - 1, d === Rj ? (b.ia(c - 1, b.m(c - 2).x, a.y), b.ia(c, b.m(c + 1).x, a.y)) : d === Qj && (b.ia(c - 1, a.x, b.m(c - 2).y), b.ia(c, a.x, b.m(c + 1).y)); else {
            var d = c, e = b.m(d), g = b.m(d - 1), h = b.m(d + 1);
            ab(g.x, e.x) && ab(e.y, h.y) ? (ab(g.x, b.m(d - 2).x) && !ab(g.y, b.m(d - 2).y) ? (b.B(d,
                a.x, g.y), c++, d++) : b.ia(d - 1, a.x, g.y), ab(h.y, b.m(d + 2).y) && !ab(h.x, b.m(d + 2).x) ? b.B(d + 1, h.x, a.y) : b.ia(d + 1, h.x, a.y)) : ab(g.y, e.y) && ab(e.x, h.x) ? (ab(g.y, b.m(d - 2).y) && !ab(g.x, b.m(d - 2).x) ? (b.B(d, g.x, a.y), c++, d++) : b.ia(d - 1, g.x, a.y), ab(h.x, b.m(d + 2).x) && !ab(h.y, b.m(d + 2).y) ? b.B(d + 1, a.x, h.y) : b.ia(d + 1, a.x, h.y)) : ab(g.x, e.x) && ab(e.x, h.x) ? (ab(g.x, b.m(d - 2).x) && !ab(g.y, b.m(d - 2).y) ? (b.B(d, a.x, g.y), c++, d++) : b.ia(d - 1, a.x, g.y), ab(h.x, b.m(d + 2).x) && !ab(h.y, b.m(d + 2).y) ? b.B(d + 1, a.x, h.y) : b.ia(d + 1, a.x, h.y)) : ab(g.y, e.y) && ab(e.y,
                h.y) && (ab(g.y, b.m(d - 2).y) && !ab(g.x, b.m(d - 2).x) ? (b.B(d, g.x, a.y), c++, d++) : b.ia(d - 1, g.x, a.y), ab(h.y, b.m(d + 2).y) && !ab(h.x, b.m(d + 2).x) ? b.B(d + 1, h.x, a.y) : b.ia(d + 1, h.x, a.y));
            b.ia(c, a.x, a.y)
        } else b.ia(c, a.x, a.y), 1 === c && b.computeSpot(!0).be() && (e = b.Y, g = b.Mc, null === e || e.isVisible() || (e = e.findVisibleNode(), e !== b.Y && (g = e.nm(""))), d = g.eb(kc, D.P()), e = b.getLinkPointFromPoint(e, g, d, a, !0, D.P()), b.ia(0, e.x, e.y), D.A(d), D.A(e)), c === b.ta - 2 && b.computeSpot(!1).be() && (c = b.ba, e = b.ld, null === c || c.isVisible() || (c = c.findVisibleNode(),
        c !== b.ba && (e = c.nm(""))), d = e.eb(kc, D.P()), e = b.getLinkPointFromPoint(c, e, d, a, !1, D.P()), b.ia(b.ta - 1, e.x, e.y), D.A(d), D.A(e));
        b.Bj()
    };
    Oj.prototype.computeReshape = function (a) {
        var b = this.Ut, c = this.handle.Ue;
        switch (this.EF(this.handle)) {
            case Sj:
                return a;
            case Rj:
                return b = b.m(c), new N(b.x, a.y);
            case Qj:
                return b = b.m(c), new N(a.x, b.y);
            default:
            case Pj:
                return b.m(c)
        }
    };
    D.w(Oj, {lM: "originalPoint"}, function () {
        return this.Dp
    });
    D.w(Oj, {mM: "originalPoints"}, function () {
        return this.Ew
    });
    function Vj() {
        0 < arguments.length && D.wd(Vj);
        Yg.call(this);
        this.name = "Resizing";
        this.oi = (new Ba(1, 1)).freeze();
        this.ni = (new Ba(9999, 9999)).freeze();
        this.bk = (new Ba(NaN, NaN)).freeze();
        this.gs = !1;
        this.Rc = null;
        var a = new y;
        a.Ih = kc;
        a.Jb = "Rectangle";
        a.Ea = $d;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.lb = 1;
        a.cursor = "pointer";
        this.zl = a;
        this.pc = null;
        this.Dp = new N;
        this.OD = new Ba;
        this.TD = new N;
        this.Fz = new Ba(0, 0);
        this.Ez = new Ba(Infinity, Infinity);
        this.Dz = new Ba(1, 1);
        this.LD = !0
    }

    D.Ra(Vj, Yg);
    D.ka("ResizingTool", Vj);
    Vj.prototype.updateAdornments = function (a) {
        if (!(null === a || a instanceof J)) {
            if (a.ib && null !== this.g && !this.g.qb) {
                var b = a.JG;
                if (null !== b && a.canResize() && a.$.F() && a.isVisible() && b.$.F() && b.Pj()) {
                    var c = a.kq(this.name);
                    if (null === c || c.zb !== b)c = this.makeAdornment(b);
                    if (null !== c) {
                        var d = b.qm();
                        c.angle = d;
                        var e = b.eb(c.Of, D.P()), g = b.Gj();
                        c.location = e;
                        D.A(e);
                        e = c.placeholder;
                        if (null !== e) {
                            var b = b.Ga, h = D.Dm();
                            h.n(b.width * g, b.height * g);
                            e.Ea = h;
                            D.Tk(h)
                        }
                        this.updateResizeHandles(c, d);
                        a.Yl(this.name, c);
                        return
                    }
                }
            }
            a.Uj(this.name)
        }
    };
    Vj.prototype.makeAdornment = function (a) {
        var b = null, b = a.Z.IG;
        if (null === b) {
            b = new ba;
            b.type = Wj;
            b.Of = kc;
            var c = new Xj;
            c.Lf = !0;
            b.add(c);
            b.add(this.makeHandle(a, dc));
            b.add(this.makeHandle(a, ic));
            b.add(this.makeHandle(a, uc));
            b.add(this.makeHandle(a, sc));
            b.add(this.makeHandle(a, ad));
            b.add(this.makeHandle(a, id));
            b.add(this.makeHandle(a, jd));
            b.add(this.makeHandle(a, hd))
        } else if (Oh(b), b = b.copy(), null === b)return null;
        b.zb = a;
        return b
    };
    Vj.prototype.makeHandle = function (a, b) {
        var c = this.uu;
        if (null === c)return null;
        c = c.copy();
        c.alignment = b;
        return c
    };
    Vj.prototype.updateResizeHandles = function (a, b) {
        if (null !== a)if (!a.alignment.gd() && ("pointer" === a.cursor || 0 < a.cursor.indexOf("resize")))a:{
            var c = a.alignment;
            c.be() && (c = kc);
            var d = b;
            if (0 >= c.x)d = 0 >= c.y ? d + 225 : 1 <= c.y ? d + 135 : d + 180; else if (1 <= c.x)0 >= c.y ? d += 315 : 1 <= c.y && (d += 45); else if (0 >= c.y)d += 270; else if (1 <= c.y)d += 90; else break a;
            0 > d ? d += 360 : 360 <= d && (d -= 360);
            a.cursor = 22.5 > d ? "e-resize" : 67.5 > d ? "se-resize" : 112.5 > d ? "s-resize" : 157.5 > d ? "sw-resize" : 202.5 > d ? "w-resize" : 247.5 > d ? "nw-resize" : 292.5 > d ? "n-resize" : 337.5 > d ?
                "ne-resize" : "e-resize"
        } else if (a instanceof x)for (c = a.elements; c.next();)this.updateResizeHandles(c.value, b)
    };
    D.defineProperty(Vj, {uu: "handleArchetype"}, function () {
        return this.zl
    }, function (a) {
        null !== a && D.l(a, P, Vj, "handleArchetype");
        this.zl = a
    });
    D.w(Vj, {handle: "handle"}, function () {
        return this.pc
    });
    D.defineProperty(Vj, {zb: "adornedObject"}, function () {
        return this.Rc
    }, function (a) {
        null !== a && D.l(a, P, Vj, "adornedObject");
        this.Rc = a
    });
    Vj.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        return null !== a && !a.qb && a.Xt && a.U.left ? null !== this.findToolHandleAt(a.Lc.ha, this.name) : !1
    };
    Vj.prototype.doActivate = function () {
        var a = this.g;
        null !== a && (this.pc = this.findToolHandleAt(a.Lc.ha, this.name), null !== this.pc && (this.Rc = this.pc.Z.zb, this.Dp.set(this.zb.eb(this.handle.alignment.sG())), this.TD.set(this.Rc.Z.location), this.OD.set(this.Rc.Ea), this.Dz = this.computeCellSize(), this.Fz = this.computeMinSize(), this.Ez = this.computeMaxSize(), a.lf = !0, this.LD = a.Wa.isEnabled, a.Wa.isEnabled = !1, this.Zb(this.name), this.wa = !0))
    };
    Vj.prototype.doDeactivate = function () {
        var a = this.g;
        null !== a && (this.fl(), this.Rc = this.pc = null, this.wa = a.lf = !1, a.Wa.isEnabled = this.LD)
    };
    Vj.prototype.doCancel = function () {
        null !== this.zb && (this.zb.Ea = this.tG, this.zb.Z.location = this.WJ);
        this.stopTool()
    };
    Vj.prototype.doMouseMove = function () {
        var a = this.g;
        if (this.wa && null !== a) {
            var b = this.Fz, c = this.Ez, d = this.Dz, e = this.zb.CF(a.U.ha, D.P()), g = this.computeReshape(), b = this.computeResize(e, this.handle.alignment, b, c, d, g);
            this.resize(b);
            a.jg();
            D.A(e)
        }
    };
    Vj.prototype.doMouseUp = function () {
        var a = this.g;
        if (this.wa && null !== a) {
            var b = this.Fz, c = this.Ez, d = this.Dz, e = this.zb.CF(a.U.ha, D.P()), g = this.computeReshape(), b = this.computeResize(e, this.handle.alignment, b, c, d, g);
            this.resize(b);
            D.A(e);
            a.Ac();
            this.Tf = this.name;
            a.Ja("PartResized", this.zb, this.tG)
        }
        this.stopTool()
    };
    Vj.prototype.resize = function (a) {
        if (null !== this.g) {
            var b = this.zb, c = b.Z;
            b.Ea = a.size;
            c.kf();
            a = this.zb.eb(this.handle.alignment.sG());
            c instanceof I ? (a = c.position.copy().xo(a).add(this.Dp), c.move(a)) : c.location = c.location.copy().xo(a).add(this.Dp)
        }
    };
    Vj.prototype.computeResize = function (a, b, c, d, e, g) {
        b.be() && (b = kc);
        var h = this.zb.Ga, k = h.x, l = h.y, m = h.x + h.width, n = h.y + h.height, p = 1;
        if (!g) {
            var p = h.width, q = h.height;
            0 >= p && (p = 1);
            0 >= q && (q = 1);
            p = q / p
        }
        q = D.P();
        fb(a.x, a.y, k, l, e.width, e.height, q);
        a = h.copy();
        0 >= b.x ? 0 >= b.y ? (a.x = Math.max(q.x, m - d.width), a.x = Math.min(a.x, m - c.width), a.width = Math.max(m - a.x, c.width), a.y = Math.max(q.y, n - d.height), a.y = Math.min(a.y, n - c.height), a.height = Math.max(n - a.y, c.height), g || (b = a.height / a.width, p < b ? (a.height = p * a.width, a.y = n - a.height) : (a.width =
            a.height / p, a.x = m - a.width))) : 1 <= b.y ? (a.x = Math.max(q.x, m - d.width), a.x = Math.min(a.x, m - c.width), a.width = Math.max(m - a.x, c.width), a.height = Math.max(Math.min(q.y - l, d.height), c.height), g || (b = a.height / a.width, p < b ? a.height = p * a.width : (a.width = a.height / p, a.x = m - a.width))) : (a.x = Math.max(q.x, m - d.width), a.x = Math.min(a.x, m - c.width), a.width = m - a.x, g || (a.height = p * a.width, a.y = l + .5 * (n - l - a.height))) : 1 <= b.x ? 0 >= b.y ? (a.width = Math.max(Math.min(q.x - k, d.width), c.width), a.y = Math.max(q.y, n - d.height), a.y = Math.min(a.y, n - c.height),
            a.height = Math.max(n - a.y, c.height), g || (b = a.height / a.width, p < b ? (a.height = p * a.width, a.y = n - a.height) : a.width = a.height / p)) : 1 <= b.y ? (a.width = Math.max(Math.min(q.x - k, d.width), c.width), a.height = Math.max(Math.min(q.y - l, d.height), c.height), g || (b = a.height / a.width, p < b ? a.height = p * a.width : a.width = a.height / p)) : (a.width = Math.max(Math.min(q.x - k, d.width), c.width), g || (a.height = p * a.width, a.y = l + .5 * (n - l - a.height))) : 0 >= b.y ? (a.y = Math.max(q.y, n - d.height), a.y = Math.min(a.y, n - c.height), a.height = n - a.y, g || (a.width = a.height / p, a.x =
            k + .5 * (m - k - a.width))) : 1 <= b.y && (a.height = Math.max(Math.min(q.y - l, d.height), c.height), g || (a.width = a.height / p, a.x = k + .5 * (m - k - a.width)));
        D.A(q);
        return a
    };
    Vj.prototype.computeReshape = function () {
        var a = Yj;
        this.zb instanceof y && (a = Zj(this.zb));
        return !(a === ak || a === bk || null !== this.g && this.g.U.shift)
    };
    Vj.prototype.computeMinSize = function () {
        var a = this.zb.kg.copy(), b = this.kg;
        !isNaN(b.width) && b.width > a.width && (a.width = b.width);
        !isNaN(b.height) && b.height > a.height && (a.height = b.height);
        return a
    };
    Vj.prototype.computeMaxSize = function () {
        var a = this.zb.mf.copy(), b = this.mf;
        !isNaN(b.width) && b.width < a.width && (a.width = b.width);
        !isNaN(b.height) && b.height < a.height && (a.height = b.height);
        return a
    };
    Vj.prototype.computeCellSize = function () {
        var a = new Ba(NaN, NaN), b = this.zb.Z;
        if (null !== b) {
            var c = b.eK;
            !isNaN(c.width) && 0 < c.width && (a.width = c.width);
            !isNaN(c.height) && 0 < c.height && (a.height = c.height)
        }
        c = this.$p;
        isNaN(a.width) && !isNaN(c.width) && 0 < c.width && (a.width = c.width);
        isNaN(a.height) && !isNaN(c.height) && 0 < c.height && (a.height = c.height);
        b = this.g;
        (isNaN(a.width) || isNaN(a.height)) && b && (c = b.nb.Fe, null !== c && c.Xx && (c = c.KF, isNaN(a.width) && !isNaN(c.width) && 0 < c.width && (a.width = c.width), isNaN(a.height) && !isNaN(c.height) &&
        0 < c.height && (a.height = c.height)), b = b.Xn, null !== b && b.visible && this.Xx && (c = b.Sx, isNaN(a.width) && !isNaN(c.width) && 0 < c.width && (a.width = c.width), isNaN(a.height) && !isNaN(c.height) && 0 < c.height && (a.height = c.height)));
        if (isNaN(a.width) || 0 === a.width || Infinity === a.width)a.width = 1;
        if (isNaN(a.height) || 0 === a.height || Infinity === a.height)a.height = 1;
        return a
    };
    D.defineProperty(Vj, {kg: "minSize"}, function () {
        return this.oi
    }, function (a) {
        D.l(a, Ba, Vj, "minSize");
        if (!this.oi.O(a)) {
            var b = a.width;
            isNaN(b) && (b = 0);
            a = a.height;
            isNaN(a) && (a = 0);
            this.oi.n(b, a)
        }
    });
    D.defineProperty(Vj, {mf: "maxSize"}, function () {
        return this.ni
    }, function (a) {
        D.l(a, Ba, Vj, "maxSize");
        if (!this.ni.O(a)) {
            var b = a.width;
            isNaN(b) && (b = Infinity);
            a = a.height;
            isNaN(a) && (a = Infinity);
            this.ni.n(b, a)
        }
    });
    D.defineProperty(Vj, {$p: "cellSize"}, function () {
        return this.bk
    }, function (a) {
        D.l(a, Ba, Vj, "cellSize");
        this.bk.O(a) || this.bk.assign(a)
    });
    D.defineProperty(Vj, {Xx: "isGridSnapEnabled"}, function () {
        return this.gs
    }, function (a) {
        D.h(a, "boolean", Vj, "isGridSnapEnabled");
        this.gs = a
    });
    D.w(Vj, {tG: "originalDesiredSize"}, function () {
        return this.OD
    });
    D.w(Vj, {WJ: "originalLocation"}, function () {
        return this.TD
    });
    function ck() {
        0 < arguments.length && D.wd(ck);
        Yg.call(this);
        this.name = "Rotating";
        this.eE = 45;
        this.dE = 2;
        this.Rc = null;
        var a = new y;
        a.Jb = "Ellipse";
        a.Ea = ae;
        a.fill = "lightblue";
        a.stroke = "dodgerblue";
        a.lb = 1;
        a.cursor = "pointer";
        this.zl = a;
        this.pc = null;
        this.Dw = 0;
        this.$D = new N
    }

    D.Ra(ck, Yg);
    D.ka("RotatingTool", ck);
    ck.prototype.updateAdornments = function (a) {
        if (!(null === a || a instanceof J)) {
            if (a.ib && null !== this.g && !this.g.qb) {
                var b = a.NG;
                if (null !== b && a.canRotate() && a.$.F() && a.isVisible() && b.$.F() && b.Pj()) {
                    var c = a.kq(this.name);
                    if (null === c || c.zb !== b)c = this.makeAdornment(b);
                    if (null !== c) {
                        c.angle = b.qm();
                        var d = null, e = null;
                        b === a || b === a.xf ? (d = a.xf, e = a.Of) : (d = b, e = kc);
                        for (var g = d.Ga, e = D.Fb(g.width * e.x + e.offsetX, g.height * e.y + e.offsetY); null !== d && d !== b;)d.transform.wb(e), d = d.Q;
                        var d = e.y, g = Math.max(e.x - b.Ga.width, 0), h = D.P();
                        c.location = b.eb(new Q(1, 0, 50 + g, d), h);
                        D.A(h);
                        D.A(e);
                        a.Yl(this.name, c);
                        return
                    }
                }
            }
            a.Uj(this.name)
        }
    };
    ck.prototype.makeAdornment = function (a) {
        var b = null, b = a.Z.gK;
        if (null === b) {
            b = new ba;
            b.type = dk;
            b.Of = kc;
            var c = this.uu;
            null !== c && b.add(c.copy())
        } else if (Oh(b), b = b.copy(), null === b)return null;
        b.zb = a;
        return b
    };
    D.defineProperty(ck, {uu: "handleArchetype"}, function () {
        return this.zl
    }, function (a) {
        null !== a && D.l(a, P, ck, "handleArchetype");
        this.zl = a
    });
    D.w(ck, {handle: "handle"}, function () {
        return this.pc
    });
    D.defineProperty(ck, {zb: "adornedObject"}, function () {
        return this.Rc
    }, function (a) {
        null !== a && D.l(a, P, ck, "adornedObject");
        this.Rc = a
    });
    ck.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        return null !== a && !a.qb && a.sx && a.U.left ? null !== this.findToolHandleAt(a.Lc.ha, this.name) : !1
    };
    ck.prototype.doActivate = function () {
        var a = this.g;
        if (null !== a && (this.pc = this.findToolHandleAt(a.Lc.ha, this.name), null !== this.pc)) {
            this.Rc = this.pc.Z.zb;
            var b = this.Rc.Z, c = b.xf;
            this.$D = this.Rc === b || this.Rc === c ? c.eb(b.Of) : this.Rc.eb(kc);
            this.Dw = this.Rc.angle;
            a.lf = !0;
            a.HA = !0;
            this.Zb(this.name);
            this.wa = !0
        }
    };
    ck.prototype.doDeactivate = function () {
        var a = this.g;
        null !== a && (this.fl(), this.Rc = this.pc = null, this.wa = a.lf = !1)
    };
    ck.prototype.doCancel = function () {
        var a = this.g;
        null !== a && (a.HA = !1);
        this.rotate(this.Dw);
        this.stopTool()
    };
    ck.prototype.doMouseMove = function () {
        var a = this.g;
        this.wa && null !== a && (a = this.computeRotate(a.U.ha), this.rotate(a))
    };
    ck.prototype.doMouseUp = function () {
        var a = this.g;
        if (this.wa && null !== a) {
            a.HA = !1;
            var b = this.computeRotate(a.U.ha);
            this.rotate(b);
            a.Ac();
            this.Tf = this.name;
            a.Ja("PartRotated", this.Rc, this.Dw)
        }
        this.stopTool()
    };
    ck.prototype.rotate = function (a) {
        v && D.p(a, ck, "rotate:newangle");
        null !== this.Rc && (this.Rc.angle = a)
    };
    ck.prototype.computeRotate = function (a) {
        a = this.$D.Wb(a);
        var b = this.Rc.Q;
        null !== b && (a -= b.qm(), 360 <= a ? a -= 360 : 0 > a && (a += 360));
        var b = Math.min(Math.abs(this.sK), 180), c = Math.min(Math.abs(this.rK), b / 2);
        (null === this.g || !this.g.U.shift) && 0 < b && 0 < c && (a % b < c ? a = Math.floor(a / b) * b : a % b > b - c && (a = (Math.floor(a / b) + 1) * b));
        360 <= a ? a -= 360 : 0 > a && (a += 360);
        return a
    };
    D.defineProperty(ck, {sK: "snapAngleMultiple"}, function () {
        return this.eE
    }, function (a) {
        D.h(a, "number", ck, "snapAngleMultiple");
        this.eE = a
    });
    D.defineProperty(ck, {rK: "snapAngleEpsilon"}, function () {
        return this.dE
    }, function (a) {
        D.h(a, "number", ck, "snapAngleEpsilon");
        this.dE = a
    });
    D.w(ck, {kM: "originalAngle"}, function () {
        return this.Dw
    });
    function ek() {
        Yg.call(this);
        0 < arguments.length && D.wd(ek);
        this.name = "ClickSelecting"
    }

    D.Ra(ek, Yg);
    D.ka("ClickSelectingTool", ek);
    ek.prototype.canStart = function () {
        return !this.isEnabled || null === this.g || this.isBeyondDragSize() ? !1 : !0
    };
    ek.prototype.doMouseUp = function () {
        this.wa && (this.standardMouseSelect(), !this.standardMouseClick() && null !== this.g && this.g.U.Nj && this.g.nb.doToolTip());
        this.stopTool()
    };
    function fk() {
        Yg.call(this);
        0 < arguments.length && D.wd(fk);
        this.name = "Action";
        this.Fo = null
    }

    D.Ra(fk, Yg);
    D.ka("ActionTool", fk);
    fk.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a)return !1;
        var b = a.U, c = a.Ie(b.ha, function (a) {
            for (; null !== a.Q && !a.xu;)a = a.Q;
            return a
        });
        if (null !== c) {
            if (!c.xu)return !1;
            this.Fo = c;
            a.Ro = a.Ie(b.ha, null, null);
            return !0
        }
        return !1
    };
    fk.prototype.doMouseDown = function () {
        if (this.wa) {
            var a = this.g.U, b = this.Fo;
            null !== b && (a.Xe = b, null !== b.FE && b.FE(a, b))
        } else this.canStart() && this.doActivate()
    };
    fk.prototype.doMouseMove = function () {
        if (this.wa) {
            var a = this.g.U, b = this.Fo;
            null !== b && (a.Xe = b, null !== b.GE && b.GE(a, b))
        }
    };
    fk.prototype.doMouseUp = function () {
        if (this.wa) {
            var a = this.g, b = a.U, c = this.Fo;
            if (null === c)return;
            b.Xe = c;
            null !== c.HE && c.HE(b, c);
            this.isBeyondDragSize() || Vh(c, b, a)
        }
        this.stopTool()
    };
    fk.prototype.doCancel = function () {
        var a = this.g;
        if (null !== a) {
            var a = a.U, b = this.Fo;
            if (null === b)return;
            a.Xe = b;
            null !== b.EE && b.EE(a, b)
        }
        this.stopTool()
    };
    fk.prototype.doStop = function () {
        this.Fo = null
    };
    function ra() {
        Yg.call(this);
        0 < arguments.length && D.wd(ra);
        this.name = "ClickCreating";
        this.sl = null;
        this.qD = !0;
        this.eD = new N(0, 0)
    }

    D.Ra(ra, Yg);
    D.ka("ClickCreatingTool", ra);
    ra.prototype.canStart = function () {
        if (!this.isEnabled || null === this.vA)return !1;
        var a = this.g;
        if (null === a || a.qb || a.Kf || !a.Yp || !a.U.left || this.isBeyondDragSize())return !1;
        if (this.kJ) {
            if (1 === a.U.Pe && (this.eD = a.U.se.copy()), 2 !== a.U.Pe || this.isBeyondDragSize(this.eD))return !1
        } else if (1 !== a.U.Pe)return !1;
        return a.hb !== this && null !== a.ju(a.U.ha, !0) ? !1 : !0
    };
    ra.prototype.doMouseUp = function () {
        var a = this.g;
        this.wa && null !== a && this.insertPart(a.U.ha);
        this.stopTool()
    };
    ra.prototype.insertPart = function (a) {
        var b = this.g;
        if (null === b)return null;
        var c = this.vA;
        if (null === c)return null;
        this.Zb(this.name);
        var d = null;
        c instanceof F ? c.pe() && (Oh(c), d = c.copy(), null !== d && b.add(d)) : null !== c && (c = b.ga.copyNodeData(c), D.Sa(c) && (b.ga.Zl(c), d = b.Ph(c)));
        null !== d && (d.location = a, b.Ef && b.select(d));
        b.Ac();
        this.Tf = this.name;
        b.Ja("PartCreated", d);
        this.fl();
        return d
    };
    D.defineProperty(ra, {vA: "archetypeNodeData"}, function () {
        return this.sl
    }, function (a) {
        null !== a && D.l(a, Object, ra, "archetypeNodeData");
        this.sl = a
    });
    D.defineProperty(ra, {kJ: "isDoubleClick"}, function () {
        return this.qD
    }, function (a) {
        D.h(a, "boolean", ra, "isDoubleClick");
        this.qD = a
    });
    function gk() {
        this.zE = this.BD = this.Mz = this.gA = null
    }

    D.ka("HTMLInfo", gk);
    D.defineProperty(gk, {jB: "mainElement"}, function () {
        return this.BD
    }, function (a) {
        null !== a && D.l(a, HTMLElement, gk, "mainElement");
        this.BD = a
    });
    D.defineProperty(gk, {show: "show"}, function () {
        return this.gA
    }, function (a) {
        this.gA !== a && (null !== a && D.h(a, "function", gk, "show"), this.gA = a)
    });
    D.defineProperty(gk, {Yn: "hide"}, function () {
        return this.Mz
    }, function (a) {
        this.Mz !== a && (null !== a && D.h(a, "function", gk, "hide"), this.Mz = a)
    });
    D.defineProperty(gk, {fC: "valueFunction"}, function () {
        return this.zE
    }, function (a) {
        this.zE = a
    });
    function hk(a, b, c) {
        this.text = a;
        this.WE = b;
        this.visible = c
    }

    function ik() {
        Yg.call(this);
        0 < arguments.length && D.wd(ik);
        this.name = "ContextMenu";
        this.JC = this.oz = this.GC = null;
        this.HD = new N;
        this.qz = this.Pm = null;
        var a = this;
        this.nA = function () {
            a.stopTool()
        };
        jk(this)
    }

    D.Ra(ik, Yg);
    D.ka("ContextMenuTool", ik);
    function jk(a) {
        var b = new gk;
        b.show = function (a, b, c) {
            c.showDefaultContextMenu()
        };
        b.Yn = function (a, b) {
            b.hideDefaultContextMenu()
        };
        a.Pm = b;
        a.nA = function () {
            a.stopTool()
        };
        if (!1 === D.cF) {
            var b = D.createElement("div"), c = D.createElement("div");
            b.style.cssText = "top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";
            c.style.cssText = "z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";
            var d = D.createElement("style");
            window.document.getElementsByTagName("head")[0].appendChild(d);
            d.sheet.insertRule(".goCXul { list-style: none; }", 0);
            d.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }", 0);
            d.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }", 0);
            b.addEventListener("contextmenu", kk, !1);
            b.addEventListener("selectstart", kk, !1);
            c.addEventListener("contextmenu", kk, !1);
            window.document.body && (window.document.body.appendChild(b), window.document.body.appendChild(c));
            D.bu = b;
            D.au = c;
            D.cF = !0
        }
    }

    function kk(a) {
        a.preventDefault();
        return !1
    }

    ik.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        return null === a || this.isBeyondDragSize() || !a.U.right ? !1 : null !== this.Pm && a.U.Nj || null !== this.findObjectWithContextMenu() ? !0 : !1
    };
    ik.prototype.doStart = function () {
        var a = this.g;
        null !== a && this.HD.set(a.Lc.ha)
    };
    ik.prototype.doStop = function () {
        this.hideContextMenu();
        this.Cx = null
    };
    ik.prototype.findObjectWithContextMenu = function (a) {
        void 0 === a && (a = null);
        var b = this.g;
        if (null === b)return null;
        var c = b.U, d = null;
        a instanceof E || (d = a instanceof P ? a : b.Ie(c.ha, null, function (a) {
            return !a.layer.Wc
        }));
        if (null !== d) {
            for (a = d; null !== a;) {
                if (null !== a.contextMenu)return a;
                a = a.Q
            }
            if (null !== this.Pm && b.U.Nj)return d.Z
        } else if (null !== b.contextMenu)return b;
        return null
    };
    ik.prototype.doActivate = function () {
    };
    ik.prototype.doMouseDown = function () {
        Yg.prototype.doMouseDown.call(this);
        null !== this.g && this.g.nb.nf.contains(this) && lk(this)
    };
    ik.prototype.doMouseUp = function () {
        lk(this)
    };
    function lk(a) {
        var b = a.g;
        if (null !== b)if (a.wa) {
            var c = a.gm;
            if (null !== c) {
                if (!(c instanceof gk)) {
                    var d = b.Ie(b.U.ha, null, null);
                    null !== d && d.vm(c) && a.standardMouseClick(null, null)
                }
                a.stopTool();
                a.canStart() && (b.hb = a, a.doMouseUp())
            }
        } else a.canStart() && (Uh(a, !0), a.wa || a.stopTool())
    }

    function Uh(a, b, c) {
        void 0 === c && (c = null);
        b && a.standardMouseSelect();
        if (!a.standardMouseClick())if (a.wa = !0, b = a.Pm, null === c && (c = a.findObjectWithContextMenu()), null !== c) {
            var d = c.contextMenu;
            null !== d ? (a.Cx = c instanceof P ? c : null, a.showContextMenu(d, a.Cx)) : null !== b && a.showContextMenu(b, a.Cx)
        } else null !== b && a.showContextMenu(b, null)
    }

    ik.prototype.doMouseMove = function () {
        this.wa && null !== this.g && this.g.nb.doMouseMove()
    };
    ik.prototype.showContextMenu = function (a, b) {
        !v || a instanceof ba || a instanceof gk || D.k("showContextMenu:contextMenu must be an Adornment or HTMLInfo.");
        null !== b && D.l(b, P, ik, "showContextMenu:obj");
        var c = this.g;
        if (null !== c) {
            a !== this.gm && this.hideContextMenu();
            if (a instanceof ba) {
                a.Nf = "Tool";
                a.dl = !1;
                a.scale = 1 / c.scale;
                a.Fd = this.name;
                null !== a.placeholder && (a.placeholder.scale = c.scale);
                c.add(a);
                if (null !== b) {
                    var c = null, d = b.om();
                    null !== d && (c = d.data);
                    a.zb = b;
                    a.data = c
                } else a.data = c.ga;
                a.kf();
                this.positionContextMenu(a,
                    b)
            } else a instanceof gk && a.show(b, c, this);
            this.gm = a
        }
    };
    ik.prototype.positionContextMenu = function (a) {
        if (null === a.placeholder) {
            var b = this.g;
            if (null !== b) {
                var c = b.U.ha.copy(), d = a.Fa, e = b.ub;
                b.U.Nj && (c.x -= d.width);
                c.x + d.width > e.right && (c.x -= d.width + 5);
                c.x < e.x && (c.x = e.x);
                c.y + d.height > e.bottom && (c.y -= d.height + 5);
                c.y < e.y && (c.y = e.y);
                a.position = c
            }
        }
    };
    ik.prototype.hideContextMenu = function () {
        var a = this.g;
        if (null !== a) {
            var b = this.gm;
            null !== b && (b instanceof ba ? (a.remove(b), null !== this.oz && this.oz.Uj(b.Fd), b.data = null, b.zb = null) : b instanceof gk && (null !== b.Yn ? b.Yn(a, this) : null !== b.jB && (b.jB.style.display = "none")), this.gm = null, this.standardMouseOver())
        }
    };
    function mk(a) {
        if (null === a.g)return null;
        a = new K(hk);
        a.add(new hk("Copy", function (a) {
            a.xb.copySelection()
        }, function (a) {
            return a.xb.canCopySelection()
        }));
        a.add(new hk("Cut", function (a) {
            a.xb.cutSelection()
        }, function (a) {
            return a.xb.canCutSelection()
        }));
        a.add(new hk("Delete", function (a) {
            a.xb.deleteSelection()
        }, function (a) {
            return a.xb.canDeleteSelection()
        }));
        a.add(new hk("Paste", function (a) {
            a.xb.pasteSelection(a.U.ha)
        }, function (a) {
            return a.xb.canPasteSelection()
        }));
        a.add(new hk("Select All", function (a) {
                a.xb.selectAll()
            },
            function (a) {
                return a.xb.canSelectAll()
            }));
        a.add(new hk("Undo", function (a) {
            a.xb.undo()
        }, function (a) {
            return a.xb.canUndo()
        }));
        a.add(new hk("Redo", function (a) {
            a.xb.redo()
        }, function (a) {
            return a.xb.canRedo()
        }));
        a.add(new hk("Scroll To Part", function (a) {
            a.xb.scrollToPart()
        }, function (a) {
            return a.xb.canScrollToPart()
        }));
        a.add(new hk("Zoom To Fit", function (a) {
            a.xb.zoomToFit()
        }, function (a) {
            return a.xb.canZoomToFit()
        }));
        a.add(new hk("Reset Zoom", function (a) {
            a.xb.resetZoom()
        }, function (a) {
            return a.xb.canResetZoom()
        }));
        a.add(new hk("Group Selection", function (a) {
            a.xb.groupSelection()
        }, function (a) {
            return a.xb.canGroupSelection()
        }));
        a.add(new hk("Ungroup Selection", function (a) {
            a.xb.ungroupSelection()
        }, function (a) {
            return a.xb.canUngroupSelection()
        }));
        a.add(new hk("Edit Text", function (a) {
            a.xb.editTextBlock()
        }, function (a) {
            return a.xb.canEditTextBlock()
        }));
        return a
    }

    ik.prototype.showDefaultContextMenu = function () {
        var a = this.g;
        if (null !== a) {
            null === this.qz && (this.qz = mk(this));
            D.bu.innerHTML = "";
            D.au.addEventListener("click", this.nA, !1);
            var b = this, c = D.createElement("ul");
            c.className = "goCXul";
            D.bu.appendChild(c);
            c.innerHTML = "";
            for (var d = this.qz.j; d.next();) {
                var e = d.value, g = e.visible;
                if ("function" === typeof e.WE && ("function" !== typeof g || g(a))) {
                    g = D.createElement("li");
                    g.className = "goCXli";
                    var h = D.createElement("a");
                    h.className = "goCXa";
                    h.href = "#";
                    h.wH = e.WE;
                    h.addEventListener("click",
                        function (c) {
                            this.wH(a);
                            b.stopTool();
                            c.preventDefault();
                            return !1
                        }, !1);
                    h.textContent = e.text;
                    g.appendChild(h);
                    c.appendChild(g)
                }
            }
            D.bu.style.display = "block";
            D.au.style.display = "block"
        }
    };
    ik.prototype.hideDefaultContextMenu = function () {
        null !== this.gm && this.gm === this.Pm && (D.bu.style.display = "none", D.au.style.display = "none", D.au.removeEventListener("click", this.nA, !1), this.gm = null)
    };
    D.defineProperty(ik, {gm: "currentContextMenu"}, function () {
        return this.GC
    }, function (a) {
        !v || null === a || a instanceof ba || a instanceof gk || D.k("ContextMenuTool.currentContextMenu must be an Adornment or HTMLInfo.");
        this.GC = a;
        this.oz = a instanceof ba ? a.Df : null
    });
    D.defineProperty(ik, {BL: "defaultTouchContextMenu"}, function () {
        return this.Pm
    }, function (a) {
        !v || null === a || a instanceof ba || a instanceof gk || D.k("ContextMenuTool.defaultTouchContextMenu must be an Adornment or HTMLInfo.");
        this.Pm = a
    });
    D.defineProperty(ik, {Cx: "currentObject"}, function () {
        return this.JC
    }, function (a) {
        null !== a && D.l(a, P, ik, "currentObject");
        this.JC = a
    });
    D.w(ik, {eM: "mouseDownPoint"}, function () {
        return this.HD
    });
    function nk() {
        Yg.call(this);
        0 < arguments.length && D.wd(nk);
        this.name = "DragSelecting";
        this.Xo = 175;
        this.vD = !1;
        var a = new F;
        a.Nf = "Tool";
        a.dl = !1;
        var b = new y;
        b.name = "SHAPE";
        b.Jb = "Rectangle";
        b.fill = null;
        b.stroke = "magenta";
        a.add(b);
        this.Lm = a
    }

    D.Ra(nk, Yg);
    D.ka("DragSelectingTool", nk);
    nk.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a || !a.Ef)return !1;
        var b = a.U;
        return !b.left || a.hb !== this && (!this.isBeyondDragSize() || b.timestamp - a.Lc.timestamp < this.dF || null !== a.ju(b.ha, !0)) ? !1 : !0
    };
    nk.prototype.doActivate = function () {
        var a = this.g;
        null !== a && (this.wa = !0, a.lf = !0, a.Eb = !0, a.add(this.Lh), this.doMouseMove())
    };
    nk.prototype.doDeactivate = function () {
        var a = this.g;
        null !== a && (Di(a), a.remove(this.Lh), a.Eb = !1, this.wa = a.lf = !1)
    };
    nk.prototype.doMouseMove = function () {
        var a = this.g;
        if (null !== a && this.wa && null !== this.Lh) {
            var b = this.computeBoxBounds(), c = this.Lh.Hd("SHAPE");
            null === c && (c = this.Lh.Wd());
            c.Ea = b.size;
            this.Lh.position = b.position;
            (a.Ae || a.Be) && a.JA(a.U.se)
        }
    };
    nk.prototype.doMouseUp = function () {
        if (this.wa) {
            var a = this.g;
            a.remove(this.Lh);
            try {
                a.mc = "wait", this.selectInRect(this.computeBoxBounds())
            } finally {
                a.mc = ""
            }
        }
        this.stopTool()
    };
    nk.prototype.computeBoxBounds = function () {
        var a = this.g;
        return null === a ? new C(0, 0, 0, 0) : new C(a.Lc.ha, a.U.ha)
    };
    nk.prototype.selectInRect = function (a) {
        var b = this.g;
        if (null !== b) {
            var c = b.U;
            b.Ja("ChangingSelection");
            a = b.Rk(a, null, function (a) {
                return a instanceof F ? a.canSelect() : !1
            }, this.sJ);
            if (D.Yk ? c.Lu : c.control)if (c.shift)for (a = a.j; a.next();)c = a.value, c.ib && (c.ib = !1); else for (a = a.j; a.next();)c = a.value, c.ib = !c.ib; else {
                if (!c.shift) {
                    for (var c = new K(F), d = b.selection.j; d.next();) {
                        var e = d.value;
                        a.contains(e) || c.add(e)
                    }
                    for (c = c.j; c.next();)c.value.ib = !1
                }
                for (a = a.j; a.next();)c = a.value, c.ib || (c.ib = !0)
            }
            b.Ja("ChangedSelection")
        }
    };
    D.defineProperty(nk, {dF: "delay"}, function () {
        return this.Xo
    }, function (a) {
        D.h(a, "number", nk, "delay");
        this.Xo = a
    });
    D.defineProperty(nk, {sJ: "isPartialInclusion"}, function () {
        return this.vD
    }, function (a) {
        D.h(a, "boolean", nk, "isPartialInclusion");
        this.vD = a
    });
    D.defineProperty(nk, {Lh: "box"}, function () {
        return this.Lm
    }, function (a) {
        null !== a && D.l(a, F, nk, "box");
        this.Lm = a
    });
    function ok() {
        Yg.call(this);
        0 < arguments.length && D.wd(ok);
        this.name = "Panning";
        this.Zz = new N;
        this.ak = !1;
        var a = this;
        this.iE = function () {
            window.document.removeEventListener("scroll", a.iE, !1);
            a.stopTool()
        }
    }

    D.Ra(ok, Yg);
    D.ka("PanningTool", ok);
    ok.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        return null === a || !a.Ae && !a.Be || !a.U.left || a.hb !== this && !this.isBeyondDragSize() ? !1 : !0
    };
    ok.prototype.doActivate = function () {
        var a = this.g;
        null !== a && (this.ak ? (a.U.bubbles = !0, window.document.addEventListener("scroll", this.iE, !1)) : (a.mc = "move", a.lf = !0, this.Zz = a.position.copy()), this.wa = !0)
    };
    ok.prototype.doDeactivate = function () {
        var a = this.g;
        null !== a && (a.mc = "", this.wa = a.lf = !1)
    };
    ok.prototype.doCancel = function () {
        var a = this.g;
        null !== a && (a.position = this.Zz, a.lf = !1);
        this.stopTool()
    };
    ok.prototype.doMouseMove = function () {
        this.move()
    };
    ok.prototype.doMouseUp = function () {
        this.move();
        this.stopTool()
    };
    ok.prototype.move = function () {
        var a = this.g;
        if (this.wa && a)if (this.ak)a.U.bubbles = !0; else {
            var b = a.position, c = a.Lc.ha, d = a.U.ha, e = b.x + c.x - d.x, c = b.y + c.y - d.y;
            a.Ae || (e = b.x);
            a.Be || (c = b.y);
            a.position = new N(e, c)
        }
    };
    D.defineProperty(ok, {bubbles: "bubbles"}, function () {
        return this.ak
    }, function (a) {
        D.h(a, "boolean", ok, "bubbles");
        this.ak = a
    });
    D.w(ok, {nM: "originalPosition"}, function () {
        return this.Zz
    });
    function pk() {
        0 < arguments.length && D.wd(pk);
        Yg.call(this);
        this.name = "TextEditing";
        this.lA = this.Dk = null;
        this.hE = qk;
        this.Ul = null;
        this.Za = rk;
        this.Pl = null;
        this.ED = 1;
        this.bE = !0;
        var a = new gk;
        this.LC = null;
        this.TC = a;
        this.rz = null;
        sk(this, a)
    }

    D.ka("TextEditingTool", pk);
    D.Ra(pk, Yg);
    var tk;
    pk.LostFocus = tk = D.s(pk, "LostFocus", 0);
    var uk;
    pk.MouseDown = uk = D.s(pk, "MouseDown", 1);
    var vk;
    pk.Tab = vk = D.s(pk, "Tab", 2);
    var wk;
    pk.Enter = wk = D.s(pk, "Enter", 3);
    pk.SingleClick = D.s(pk, "SingleClick", 0);
    var qk;
    pk.SingleClickSelected = qk = D.s(pk, "SingleClickSelected", 1);
    var xk;
    pk.DoubleClick = xk = D.s(pk, "DoubleClick", 2);
    var rk;
    pk.StateNone = rk = D.s(pk, "StateNone", 0);
    var yk;
    pk.StateActive = yk = D.s(pk, "StateActive", 1);
    var zk;
    pk.StateEditing = zk = D.s(pk, "StateEditing", 2);
    var Ak;
    pk.StateValidating = Ak = D.s(pk, "StateValidating", 3);
    var Bk;
    pk.StateInvalid = Bk = D.s(pk, "StateInvalid", 4);
    var Ck;
    pk.StateValidated = Ck = D.s(pk, "StateValidated", 5);
    function sk(a, b) {
        var c = D.createElement("textarea");
        a.rz = c;
        c.addEventListener("input", function () {
            if (null !== a.lh) {
                var b = a.KJ(this.value), c = this.xK;
                this.style.width = 20 + b.Fa.width * c + "px";
                this.style.height = 10 + b.Fa.height * c + "px";
                this.rows = b.zJ
            }
        }, !1);
        c.addEventListener("keydown", function (b) {
            if (null !== a.lh) {
                var c = b.which;
                13 === c ? (!1 === a.lh.ay && b.preventDefault(), a.acceptText(wk)) : 9 === c ? (a.acceptText(vk), b.preventDefault()) : 27 === c && (a.doCancel(), null !== a.g && a.g.doFocus())
            }
        }, !1);
        c.addEventListener("focus", function () {
                Dk(a)
            },
            !1);
        c.addEventListener("blur", function () {
            Ek(a)
        }, !1);
        b.fC = function () {
            return c.value
        };
        b.jB = c;
        b.show = function (a, b, g) {
            if (g.state === Bk)c.style.border = "3px solid red", c.focus(); else {
                var h = a.eb(kc), k = b.position, l = b.scale, m = a.Gj() * l;
                m < g.nG && (m = g.nG);
                var n = a.Ga.width * m + 6, p = a.Ga.height * m + 2, q = (h.x - k.x) * l, h = (h.y - k.y) * l;
                c.value = a.text;
                b.Ej.style.font = a.font;
                c.style.cssText = "position: absolute;z-index: 100;font: inherit;fontSize: " + 100 * m + "%;lineHeight: normal;width: " + n + "px;height: " + p + "px;left: " + ((q - n / 2 | 0) - 1) +
                    "px;top: " + ((h - p / 2 | 0) - 1) + "px;text-align: " + a.textAlign + ";margin: 0;padding: 1px;border: 0;outline: none;white-space: pre-wrap;overflow: hidden;";
                c.xK = m;
                b.Ej.appendChild(c);
                c.focus();
                g.Iy && (c.select(), c.setSelectionRange(0, 9999))
            }
        };
        b.Yn = function (a) {
            a.Ej.removeChild(c)
        }
    }

    D.defineProperty(pk, {lh: "textBlock"}, function () {
        return this.lA
    }, function (a) {
        null !== a && D.l(a, na, pk, "textBlock");
        this.lA = a
    });
    D.defineProperty(pk, {Cj: "currentTextEditor"}, function () {
        return this.LC
    }, function (a) {
        this.LC = a
    });
    D.defineProperty(pk, {uI: "defaultTextEditor"}, function () {
        return this.TC
    }, function (a) {
        !v || a instanceof HTMLElement || a instanceof gk || D.k("TextEditingTool.defaultTextEditor must be an Element or HTMLInfo.");
        this.TC = a
    });
    D.defineProperty(pk, {bH: "starting"}, function () {
        return this.hE
    }, function (a) {
        D.Da(a, pk, pk, "starting");
        this.hE = a
    });
    pk.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a || a.qb || !a.U.left || this.isBeyondDragSize())return !1;
        var b = a.Ie(a.U.ha, null, function (a) {
            return a instanceof na
        });
        if (null === b || !b.MA || !b.Z.canEdit())return !1;
        b = b.Z;
        return null === b || this.bH === qk && !b.ib || this.bH === xk && 2 > a.U.Pe ? !1 : !0
    };
    pk.prototype.doStart = function () {
        this.wa || null === this.lh || this.doActivate()
    };
    pk.prototype.doActivate = function () {
        if (!this.wa) {
            var a = this.g;
            if (null !== a) {
                var b = this.lh;
                null === b && (b = a.Ie(a.U.ha, function (a) {
                    return a instanceof na ? a : null
                }));
                if (null !== b && (this.lh = b, null !== b.Z)) {
                    this.wa = !0;
                    this.Za = yk;
                    var c = this.uI;
                    null !== b.fH && (c = b.fH);
                    this.Dk = this.lh.copy();
                    var d = new C(this.lh.eb(dc), this.lh.eb(uc));
                    a.PG(d);
                    if (c instanceof gk)c.show(b, a, this); else {
                        c.style.position = "absolute";
                        c.style.zIndex = "100";
                        c.textEditingTool = this;
                        if ("function" === typeof c.onActivate)c.onActivate();
                        a.Ej.appendChild(c);
                        "function" === typeof c.focus && c.focus();
                        "function" === typeof c.select && this.Iy && (c.select(), c.setSelectionRange(0, 9999))
                    }
                    this.Cj = c
                }
            }
        }
    };
    pk.prototype.doCancel = function () {
        null !== this.Pl && this.Cj instanceof HTMLElement && (this.Cj.style.border = this.Pl, this.Pl = null);
        this.stopTool()
    };
    pk.prototype.doMouseUp = function () {
        !this.wa && this.canStart() && this.doActivate()
    };
    pk.prototype.doMouseDown = function () {
        this.wa && this.acceptText(uk)
    };
    pk.prototype.acceptText = function (a) {
        switch (a) {
            case uk:
                if (this.Za === Ck)this.Cj instanceof HTMLElement && this.Cj.focus(); else if (this.Za === yk || this.Za === Bk || this.Za === zk)this.Za = Ak, Fk(this);
                break;
            case tk:
            case wk:
            case vk:
                if (wk === a && !0 === this.lA.ay)break;
                if (this.Za === yk || this.Za === Bk || this.Za === zk)this.Za = Ak, Fk(this)
        }
    };
    function Fk(a) {
        var b = a.lh, c = a.g, d = a.Cj;
        if (null !== b && null !== d) {
            var e = b.text, g = "";
            d instanceof gk ? null !== d.fC && (g = d.fC()) : (g = d.value, g = "function" === typeof g ? g() : g);
            a.isValidText(b, e, g) ? (a.Zb(a.name), a.Za = Ck, d instanceof gk ? d.show(b, c, a) : null !== a.Pl && (d.style.border = a.Pl, a.Pl = null), a.Tf = a.name, b.text = g, null !== b.eH && b.eH(b, e, g), null !== c && c.Ja("TextEdited", b, e), a.fl(), a.stopTool(), null !== c && c.doFocus()) : (a.Za = Bk, null !== b.OA && b.OA(a, e, g), d instanceof gk ? d.show(b, c, a) : (null === a.Pl && (a.Pl = d.style.border,
                d.style.border = "3px solid red"), "function" === typeof d.focus && d.focus()))
        }
    }

    pk.prototype.doDeactivate = function () {
        var a = this.g;
        if (null !== a) {
            this.Za = rk;
            this.lh = null;
            if (null !== this.Cj) {
                var b = this.Cj;
                if (b instanceof gk)b.Yn(a, this); else {
                    if ("function" === typeof b.onDeactivate)b.onDeactivate();
                    null !== b && a.Ej.removeChild(b)
                }
            }
            this.wa = !1
        }
    };
    pk.prototype.doFocus = function () {
        v && D.Qn("TextEditingTool.doFocus", "2.0");
        Dk(this)
    };
    pk.prototype.doBlur = function () {
        v && D.Qn("TextEditingTool.doBlur", "2.0");
        Ek(this)
    };
    function Dk(a) {
        if (null !== a.Cj) {
            var b = a.rz;
            a.Za === yk && (a.Za = zk);
            "function" === typeof b.select && a.Iy && (b.select(), b.setSelectionRange(0, 9999))
        }
    }

    function Ek(a) {
        if (null !== a.Cj) {
            var b = a.rz;
            "function" === typeof b.focus && b.focus();
            "function" === typeof b.select && a.Iy && (b.select(), b.setSelectionRange(0, 9999))
        }
    }

    pk.prototype.isValidText = function (a, b, c) {
        D.l(a, na, pk, "isValidText:textblock");
        var d = this.VB;
        if (null !== d && !d(a, b, c))return !1;
        d = a.VB;
        return null === d || d(a, b, c) ? !0 : !1
    };
    D.defineProperty(pk, {VB: "textValidation"}, function () {
        return this.Ul
    }, function (a) {
        null !== a && D.h(a, "function", pk, "textValidation");
        this.Ul = a
    });
    D.defineProperty(pk, {nG: "minimumEditorScale"}, function () {
        return this.ED
    }, function (a) {
        null !== a && D.h(a, "number", pk, "minimumEditorScale");
        this.ED = a
    });
    D.defineProperty(pk, {Iy: "selectsTextOnActivate"}, function () {
        return this.bE
    }, function (a) {
        null !== a && D.h(a, "boolean", pk, "selectsTextOnActivate");
        this.bE = a
    });
    D.defineProperty(pk, {state: "state"}, function () {
        return this.Za
    }, function (a) {
        this.Za !== a && (D.Da(a, pk, pk, "starting"), this.Za = a)
    });
    pk.prototype.measureTemporaryTextBlock = pk.prototype.KJ = function (a) {
        var b = this.Dk;
        b.text = a;
        Gk(b, this.lh.tp, Infinity);
        return b
    };
    function Lh() {
        Yg.call(this);
        this.name = "ToolManager";
        this.BH = new K(Yg);
        this.CH = new K(Yg);
        this.DH = new K(Yg);
        this.iD = this.jD = 850;
        this.YC = (new Ba(2, 2)).Oa();
        this.uE = 5E3;
        this.JD = Xh;
        this.gD = Tk;
        this.Lv = this.MC = null;
        this.yn = -1
    }

    D.Ra(Lh, Yg);
    D.ka("ToolManager", Lh);
    var Xh;
    Lh.WheelScroll = Xh = D.s(Lh, "WheelScroll", 0);
    var Wh;
    Lh.WheelZoom = Wh = D.s(Lh, "WheelZoom", 1);
    Lh.WheelNone = D.s(Lh, "WheelNone", 2);
    var Tk;
    Lh.GestureZoom = Tk = D.s(Lh, "GestureZoom", 3);
    var Uk;
    Lh.GestureCancel = Uk = D.s(Lh, "GestureCancel", 4);
    var Vk;
    Lh.GestureNone = Vk = D.s(Lh, "GestureNone", 5);
    D.defineProperty(Lh, {Ou: "mouseWheelBehavior"}, function () {
        return this.JD
    }, function (a) {
        D.Da(a, Lh, Lh, "mouseWheelBehavior");
        this.JD = a
    });
    D.defineProperty(Lh, {oq: "gestureBehavior"}, function () {
        return this.gD
    }, function (a) {
        D.Da(a, Lh, Lh, "gestureBehavior");
        this.gD = a
    });
    Lh.prototype.initializeStandardTools = function () {
        this.NH = new fk;
        this.zG = new bi;
        this.CJ = new Oj;
        this.LG = new Vj;
        this.iK = new ck;
        this.jG = new pa;
        this.Fe = new Qh;
        this.yI = new nk;
        this.XJ = new ok;
        this.CA = new ik;
        this.UB = new pk;
        this.cI = new ra;
        this.dI = new ek
    };
    Lh.prototype.updateAdornments = function (a) {
        var b = this.hm;
        if (b instanceof ba && this.Lv === a) {
            var c = b.zb;
            (null !== a ? c.Z === a : null === c) ? this.showToolTip(b, c) : this.hideToolTip()
        }
    };
    Lh.prototype.doMouseDown = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.U;
            b.Nj && this.oq === Uk && (b.bubbles = !1);
            if (b.Cu) {
                this.cancelWaitAfter();
                if (this.oq === Vk) {
                    b.bubbles = !0;
                    return
                }
                if (this.oq === Uk)return;
                if (a.hb.canStartMultiTouch()) {
                    a.hb.standardPinchZoomStart();
                    return
                }
            }
            var c = a.ra;
            c.xA && 0 !== c.Zh && D.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");
            for (var c = this.nf.length, d = 0; d < c; d++) {
                var e = this.nf.ea(d);
                null === e.g && e.$c(this.g);
                if (e.canStart()) {
                    a.doFocus();
                    a.hb = e;
                    a.hb === e && (e.wa || e.doActivate(), e.doMouseDown());
                    return
                }
            }
            1 === a.U.button && (this.Ou === Xh ? this.Ou = Wh : this.Ou === Wh && (this.Ou = Xh));
            this.doActivate();
            this.standardWaitAfter(this.OF, b)
        }
    };
    Lh.prototype.doMouseMove = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.U;
            if (b.Cu) {
                if (this.oq === Vk) {
                    b.bubbles = !0;
                    return
                }
                if (this.oq === Uk)return;
                if (a.hb.canStartMultiTouch()) {
                    a.hb.standardPinchZoomMove();
                    return
                }
            }
            if (this.wa)for (var c = this.lg.length, d = 0; d < c; d++) {
                var e = this.lg.ea(d);
                null === e.g && e.$c(this.g);
                if (e.canStart()) {
                    a.doFocus();
                    a.hb = e;
                    a.hb === e && (e.wa || e.doActivate(), e.doMouseMove());
                    return
                }
            }
            Wk(this, a);
            null === b.event || "mousemove" !== b.event.type && b.event.cancelable || (b.bubbles = !0)
        }
    };
    function Wk(a, b) {
        a.standardMouseOver();
        a.isBeyondDragSize() && a.standardWaitAfter(a.wa ? a.OF : a.cJ, b.U)
    }

    Lh.prototype.doCurrentObjectChanged = function (a, b) {
        var c = this.hm;
        null === c || null !== b && c instanceof ba && (b === c || b.vm(c)) || this.hideToolTip()
    };
    Lh.prototype.doWaitAfter = function (a) {
        var b = this.g;
        null !== b && b.Mb && (this.doMouseHover(), this.wa || this.doToolTip(), a.Nj && !b.U.Nc && (a = a.copy(), a.button = 2, a.buttons = 2, b.U = a, b.Et = !0, b.doMouseUp()))
    };
    Lh.prototype.doMouseHover = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.U;
            null === b.Xe && (b.Xe = a.Ie(b.ha, null, null));
            var c = b.Xe;
            if (null !== c)for (b.Nc = !1; null !== c;) {
                a = this.wa ? c.pB : c.qB;
                if (null !== a && (a(b, c), b.Nc))break;
                c = c.Q
            } else c = this.wa ? a.pB : a.qB, null !== c && c(b)
        }
    };
    Lh.prototype.doToolTip = function () {
        var a = this.g;
        if (null !== a) {
            var b = a.U;
            null === b.Xe && (b.Xe = a.Ie(b.ha, null, null));
            b = b.Xe;
            if (null !== b) {
                if (a = this.hm, !(a instanceof ba) || b !== a && !b.vm(a)) {
                    for (; null !== b;) {
                        a = b.XB;
                        if (null !== a) {
                            this.showToolTip(a, b);
                            return
                        }
                        b = b.Q
                    }
                    this.hideToolTip()
                }
            } else a = a.XB, null !== a ? this.showToolTip(a, null) : this.hideToolTip()
        }
    };
    Lh.prototype.showToolTip = function (a, b) {
        !v || a instanceof ba || a instanceof gk || D.k("showToolTip:tooltip must be an Adornment or HTMLInfo.");
        null !== b && D.l(b, P, Lh, "showToolTip:obj");
        var c = this.g;
        if (null !== c) {
            a !== this.hm && this.hideToolTip();
            if (a instanceof ba) {
                a.Nf = "Tool";
                a.dl = !1;
                a.scale = 1 / c.scale;
                a.Fd = "ToolTip";
                null !== a.placeholder && (a.placeholder.scale = c.scale);
                c.add(a);
                if (null !== b) {
                    var c = null, d = b.om();
                    null !== d && (c = d.data);
                    a.zb = b;
                    a.data = c
                } else a.data = c.ga;
                a.kf();
                this.positionToolTip(a, b)
            } else a instanceof gk && a !== this.hm && a.show(b, c, this);
            this.hm = a;
            -1 !== this.yn && (D.clearTimeout(this.yn), this.yn = -1);
            c = this.CK;
            if (0 < c && Infinity !== c) {
                var e = this;
                this.yn = D.setTimeout(function () {
                    e.hideToolTip()
                }, c)
            }
        }
    };
    Lh.prototype.positionToolTip = function (a) {
        if (null === a.placeholder) {
            var b = this.g;
            if (null !== b) {
                var c = b.U.ha.copy(), d = a.Fa, e = b.ub;
                b.U.Nj && (c.x -= d.width);
                c.x + d.width > e.right && (c.x -= d.width + 5);
                c.x < e.x && (c.x = e.x);
                c.y = c.y + 20 + d.height > e.bottom ? c.y - (d.height + 5) : c.y + 20;
                c.y < e.y && (c.y = e.y);
                a.position = c
            }
        }
    };
    Lh.prototype.hideToolTip = function () {
        -1 !== this.yn && (D.clearTimeout(this.yn), this.yn = -1);
        var a = this.g;
        if (null !== a) {
            var b = this.hm;
            null !== b && (b instanceof ba ? (a.remove(b), null !== this.Lv && this.Lv.Uj(b.Fd), b.data = null, b.zb = null) : b instanceof gk && null !== b.Yn && b.Yn(a, this), this.hm = null)
        }
    };
    D.defineProperty(Lh, {hm: "currentToolTip"}, function () {
        return this.MC
    }, function (a) {
        !v || null === a || a instanceof ba || a instanceof gk || D.k("ToolManager.currentToolTip must be an Adornment or HTMLInfo.");
        this.MC = a;
        this.Lv = null !== a && a instanceof ba ? a.Df : null
    });
    Lh.prototype.doMouseUp = function () {
        this.cancelWaitAfter();
        var a = this.g;
        if (null !== a) {
            if (this.wa)for (var b = this.mg.length, c = 0; c < b; c++) {
                var d = this.mg.ea(c);
                null === d.g && d.$c(this.g);
                if (d.canStart()) {
                    a.doFocus();
                    a.hb = d;
                    a.hb === d && (d.wa || d.doActivate(), d.doMouseUp());
                    return
                }
            }
            a.doFocus();
            this.doDeactivate()
        }
    };
    Lh.prototype.doMouseWheel = function () {
        this.standardMouseWheel()
    };
    Lh.prototype.doKeyDown = function () {
        var a = this.g;
        null !== a && a.xb.doKeyDown()
    };
    Lh.prototype.doKeyUp = function () {
        var a = this.g;
        null !== a && a.xb.doKeyUp()
    };
    Lh.prototype.doCancel = function () {
        null !== $h && $h.doCancel();
        Yg.prototype.doCancel.call(this)
    };
    Lh.prototype.findTool = function (a) {
        D.h(a, "string", Lh, "findTool:name");
        for (var b = this.nf.length, c = 0; c < b; c++) {
            var d = this.nf.ea(c);
            if (d.name === a)return d
        }
        b = this.lg.length;
        for (c = 0; c < b; c++)if (d = this.lg.ea(c), d.name === a)return d;
        b = this.mg.length;
        for (c = 0; c < b; c++)if (d = this.mg.ea(c), d.name === a)return d;
        return null
    };
    Lh.prototype.replaceTool = function (a, b) {
        D.h(a, "string", Lh, "replaceTool:name");
        null !== b && (D.l(b, Yg, Lh, "replaceTool:newtool"), b.g && b.g !== this.g && D.k("Cannot share tools between Diagrams: " + b.toString()), b.$c(this.g));
        for (var c = this.nf.length, d = 0; d < c; d++) {
            var e = this.nf.ea(d);
            if (e.name === a)return null !== b ? this.nf.tg(d, b) : this.nf.kd(d), e
        }
        c = this.lg.length;
        for (d = 0; d < c; d++)if (e = this.lg.ea(d), e.name === a)return null !== b ? this.lg.tg(d, b) : this.lg.kd(d), e;
        c = this.mg.length;
        for (d = 0; d < c; d++)if (e = this.mg.ea(d), e.name ===
            a)return null !== b ? this.mg.tg(d, b) : this.mg.kd(d), e;
        return null
    };
    function al(a, b, c, d) {
        D.h(b, "string", Lh, "replaceStandardTool:name");
        D.l(d, K, Lh, "replaceStandardTool:list");
        null !== c && (D.l(c, Yg, Lh, "replaceStandardTool:newtool"), c.g && c.g !== a.g && D.k("Cannot share tools between Diagrams: " + c.toString()), c.name = b, c.$c(a.g));
        a.findTool(b) ? a.replaceTool(b, c) : null !== c && d.add(c)
    }

    D.w(Lh, {nf: "mouseDownTools"}, function () {
        return this.BH
    });
    D.w(Lh, {lg: "mouseMoveTools"}, function () {
        return this.CH
    });
    D.w(Lh, {mg: "mouseUpTools"}, function () {
        return this.DH
    });
    D.defineProperty(Lh, {cJ: "hoverDelay"}, function () {
        return this.jD
    }, function (a) {
        D.h(a, "number", Lh, "hoverDelay");
        this.jD = a
    });
    D.defineProperty(Lh, {OF: "holdDelay"}, function () {
        return this.iD
    }, function (a) {
        D.h(a, "number", Lh, "holdDelay");
        this.iD = a
    });
    D.defineProperty(Lh, {zI: "dragSize"}, function () {
        return this.YC
    }, function (a) {
        D.l(a, Ba, Lh, "dragSize");
        this.YC = a.V()
    });
    D.defineProperty(Lh, {CK: "toolTipDuration"}, function () {
        return this.uE
    }, function (a) {
        D.h(a, "number", Lh, "toolTipDuration");
        this.uE = a
    });
    D.defineProperty(Lh, {NH: "actionTool"}, function () {
        return this.findTool("Action")
    }, function (a) {
        al(this, "Action", a, this.nf)
    });
    D.defineProperty(Lh, {zG: "relinkingTool"}, function () {
        return this.findTool("Relinking")
    }, function (a) {
        al(this, "Relinking", a, this.nf)
    });
    D.defineProperty(Lh, {CJ: "linkReshapingTool"}, function () {
        return this.findTool("LinkReshaping")
    }, function (a) {
        al(this, "LinkReshaping", a, this.nf)
    });
    D.defineProperty(Lh, {LG: "resizingTool"}, function () {
        return this.findTool("Resizing")
    }, function (a) {
        al(this, "Resizing", a, this.nf)
    });
    D.defineProperty(Lh, {iK: "rotatingTool"}, function () {
        return this.findTool("Rotating")
    }, function (a) {
        al(this, "Rotating", a, this.nf)
    });
    D.defineProperty(Lh, {jG: "linkingTool"}, function () {
        return this.findTool("Linking")
    }, function (a) {
        al(this, "Linking", a, this.lg)
    });
    D.defineProperty(Lh, {Fe: "draggingTool"}, function () {
        return this.findTool("Dragging")
    }, function (a) {
        al(this, "Dragging", a, this.lg)
    });
    D.defineProperty(Lh, {yI: "dragSelectingTool"}, function () {
        return this.findTool("DragSelecting")
    }, function (a) {
        al(this, "DragSelecting", a, this.lg)
    });
    D.defineProperty(Lh, {XJ: "panningTool"}, function () {
        return this.findTool("Panning")
    }, function (a) {
        al(this, "Panning", a, this.lg)
    });
    D.defineProperty(Lh, {CA: "contextMenuTool"}, function () {
        return this.findTool("ContextMenu")
    }, function (a) {
        al(this, "ContextMenu", a, this.mg)
    });
    D.defineProperty(Lh, {UB: "textEditingTool"}, function () {
        return this.findTool("TextEditing")
    }, function (a) {
        al(this, "TextEditing", a, this.mg)
    });
    D.defineProperty(Lh, {cI: "clickCreatingTool"}, function () {
        return this.findTool("ClickCreating")
    }, function (a) {
        al(this, "ClickCreating", a, this.mg)
    });
    D.defineProperty(Lh, {dI: "clickSelectingTool"}, function () {
        return this.findTool("ClickSelecting")
    }, function (a) {
        al(this, "ClickSelecting", a, this.mg)
    });
    function jh() {
        this.NC = bl;
        this.Hr = this.Ir = this.ca = null;
        this.Jm = this.Jr = this.Kr = 0;
        this.Io = this.xc = this.op = this.ok = !1;
        this.pk = this.of = !0;
        this.Jv = this.Iv = this.IC = null;
        this.HC = 0;
        this.Kv = null;
        this.xv = new L("string");
        this.Az = 600;
        this.EH = new N(0, 0);
        this.wC = this.vC = this.yE = !1;
        this.hn = new ma(P, cl)
    }

    D.ka("AnimationManager", jh);
    jh.prototype.$c = function (a) {
        this.ca = a
    };
    function bl(a, b, c, d) {
        a /= d / 2;
        return 1 > a ? c / 2 * a * a + b : -c / 2 * (--a * (a - 2) - 1) + b
    }

    D.w(jh, {gL: "animationReasons"}, function () {
        return this.xv
    });
    jh.prototype.canStart = function () {
        return !0
    };
    jh.prototype.prepareAutomaticAnimation = jh.prototype.qo = function (a) {
        this.of && (this.pk || this.ca.ao) && (this.xv.add(a), this.canStart(a) && (this.ok && this.Yh(), this.xc = !0))
    };
    function dl(a) {
        if (a.of && (a.xv.clear(), a.xc))if (!a.Io)a.xc = !1; else if (0 === a.Jm) {
            var b = +new Date;
            a.Jm = b;
            requestAnimationFrame(function () {
                if (!1 !== a.xc && !a.ok && a.Jm === b) {
                    var c = a.ca;
                    c.Hj("temporaryPixelRatio") && (c.Ck = 1);
                    el(c);
                    a.xc = !1;
                    c.Ja("AnimationStarting");
                    fl(a, b)
                }
            })
        }
    }

    function gl(a, b, c, d, e, g) {
        if (a.xc && (v && D.l(b, P, jh, "addPropToAnimation:obj"), !("position" === c && d.O(e) || b instanceof F && !b.SF))) {
            var h = a.hn;
            if (h.contains(b)) {
                var h = h.na(b), k = h.start, l = h.end;
                void 0 === k[c] && (k[c] = hl(d));
                h.Bx && void 0 !== l[c] ? h.gu[c] = hl(e) : (g || (h.gu[c] = hl(e)), l[c] = hl(e));
                g && 0 === c.indexOf("position:") && b instanceof F && (h.gu.location = hl(b.location))
            } else k = new ka, l = new ka, k[c] = hl(d), l[c] = hl(e), d = l, e = k.position, e instanceof N && !e.F() && a.xv.contains("Expand SubGraph") && e.assign(d.position), k =
                new cl(k, l, g), g && 0 === c.indexOf("position:") && b instanceof F && (k.gu.location = hl(b.location)), h.add(b, k);
            a.Io = !0
        }
    }

    function hl(a) {
        return a instanceof N ? a.copy() : a instanceof Ba ? a.copy() : a
    }

    function fl(a, b) {
        var c;

        function d() {
            if (!1 !== g.ok && g.Jm === b) {
                var a = +new Date, c = a > s ? m : a - r;
                il(g);
                jl(g, e, q, h, c, m);
                g.Iv && g.Iv();
                bj(e);
                kl(g);
                a > s ? ll(g) : requestAnimationFrame(d)
            }
        }

        void 0 === c && (c = new ka);
        var e = a.ca;
        if (null !== e) {
            a.ok = !0;
            var g = a, h = c.JL || a.NC, k = c.iM || null, l = c.jM || null, m = c.duration || a.Az, n = a.EH;
            for (c = a.hn.j; c.next();) {
                var p = c.value.start.position;
                p instanceof N && (p.F() || p.assign(n))
            }
            a.IC = h;
            a.Iv = k;
            a.Jv = l;
            a.HC = m;
            a.Kv = a.hn;
            var q = a.Kv;
            for (c = q.j; c.next();)k = c.value.end, k["position:placeholder"] && (l =
                k["position:placeholder"], n = l.eb(dc), n.x += l.padding.left, n.y += l.padding.top, k["position:placeholder"] = n);
            il(a);
            jl(a, e, q, h, 0, m);
            bj(a.ca);
            kl(a);
            var r = +new Date, s = r + m;
            g.Jm === b && requestAnimationFrame(function () {
                d()
            })
        }
    }

    function il(a) {
        if (!a.op) {
            var b = a.ca;
            a.yE = b.Eb;
            a.vC = b.Ve;
            a.wC = b.fv;
            b.Eb = !0;
            b.Ve = !0;
            b.fv = !0;
            a.op = !0
        }
    }

    function kl(a) {
        var b = a.ca;
        b.Eb = a.yE;
        b.Ve = a.vC;
        b.fv = a.wC;
        a.op = !1
    }

    function jl(a, b, c, d, e, g) {
        for (c = c.j; c.next();) {
            var h = c.key, k = c.value, l = k.start, k = k.end, m;
            for (m in k)if (("position" !== m || !k["position:placeholder"] && !k["position:node"]) && void 0 !== ml[m])ml[m](h, l[m], k[m], d, e, g)
        }
        d = b.dB;
        b.dB = !0;
        m = a.NC;
        0 !== a.Kr && 0 !== a.Jr && (c = a.Kr, b.Cb = m(e, c, a.Jr - c, g));
        null !== a.Ir && null !== a.Hr && (c = a.Ir, a = a.Hr, b.sb = new N(m(e, c.x, a.x - c.x, g), m(e, c.y, a.y - c.y, g)));
        b.dB = d
    }

    jh.prototype.stopAnimation = jh.prototype.Yh = function () {
        !0 === this.xc && (this.xc = !1, this.Jm = 0, this.Io && this.ca.Te());
        this.ok && this.of && ll(this)
    };
    function ll(a) {
        a.ok = !1;
        a.Io = !1;
        il(a);
        for (var b = a.ca, c = a.IC, d = a.HC, e = a.Kv.j; e.next();) {
            var g = e.key, h = e.value, k = h.start, l = h.end, m = h.gu, n;
            for (n in l)if (void 0 !== ml[n]) {
                var p = n;
                !h.Bx || "position:node" !== p && "position:placeholder" !== p || (p = "position");
                ml[p](g, k[n], void 0 !== m[n] ? m[n] : h.Bx ? k[n] : l[n], c, d, d)
            }
            h.Bx && void 0 !== m.location && g instanceof F && (g.location = m.location);
            h.zy && g instanceof F && g.Ld(!1)
        }
        for (c = a.ca.links; c.next();)d = c.value, null !== d.Ip && (d.points = d.Ip, d.Ip = null);
        b.ly.clear();
        b.Ck = null;
        b.Ac();
        b.qa();
        b.jg();
        nl(b);
        kl(a);
        a.Jv && a.Jv();
        a.Jm = 0;
        a.Kv = null;
        a.Jv = null;
        a.Iv = null;
        a.Ir = null;
        a.Hr = null;
        a.Kr = 0;
        a.Jr = 0;
        a.hn = new ma(P, cl);
        b.Ja("AnimationFinished");
        b.Te()
    }

    function ol(a, b, c) {
        var d = b.$, e = c.$, g = null;
        c instanceof I && (g = c.placeholder);
        null !== g ? (d = g.eb(dc), d.x += g.padding.left, d.y += g.padding.top, gl(a, b, "position", d, b.position, !1)) : gl(a, b, "position", new N(e.x + e.width / 2 - d.width / 2, e.y + e.height / 2 - d.height / 2), b.position, !1);
        gl(a, b, "scale", .01, b.scale, !1);
        if (b instanceof I)for (b = b.Oc; b.next();)g = b.value, g instanceof G && ol(a, g, c)
    }

    function pl(a, b, c) {
        if (b.isVisible()) {
            var d = null;
            c instanceof I && (d = c.placeholder);
            null !== d ? gl(a, b, "position:placeholder", b.position, d, !0) : gl(a, b, "position:node", b.position, c, !0);
            gl(a, b, "scale", b.scale, .01, !0);
            a.xc && (d = a.hn, d.contains(b) && (d.na(b).zy = !0));
            if (b instanceof I)for (b = b.Oc; b.next();)d = b.value, d instanceof G && pl(a, d, c)
        }
    }

    function ql(a, b, c) {
        a.xc && (null === a.Ir && b.F() && null === a.Hr && (a.Ir = b.copy()), a.Hr = c.copy(), a.Io = !0)
    }

    function rl(a, b, c) {
        a.xc && a.ca.ao && (0 === a.Kr && 0 === a.Jr && (a.Kr = b), a.Jr = c, a.Io = !0)
    }

    D.defineProperty(jh, {isEnabled: "isEnabled"}, function () {
        return this.of
    }, function (a) {
        D.h(a, "boolean", jh, "isEnabled");
        this.of = a
    });
    D.defineProperty(jh, {duration: "duration"}, function () {
        return this.Az
    }, function (a) {
        D.h(a, "number", jh, "duration");
        1 > a && D.ua(a, ">= 1", jh, "duration");
        this.Az = a
    });
    D.w(jh, {vf: "isAnimating"}, function () {
        return this.ok
    });
    D.w(jh, {tJ: "isTicking"}, function () {
        return this.op
    });
    D.defineProperty(jh, {$F: "isInitial"}, function () {
        return this.pk
    }, function (a) {
        D.h(a, "boolean", jh, "isInitial");
        this.pk = a
    });
    function cl(a, b, c) {
        this.start = a;
        this.end = b;
        this.gu = new ka;
        this.Bx = c;
        this.zy = !1
    }

    var ml = {
        opacity: function (a, b, c, d, e, g) {
            a.opacity = d(e, b, c - b, g)
        }, position: function (a, b, c, d, e, g) {
            e !== g ? a.My(d(e, b.x, c.x - b.x, g), d(e, b.y, c.y - b.y, g)) : a.position = new N(d(e, b.x, c.x - b.x, g), d(e, b.y, c.y - b.y, g))
        }, "position:node": function (a, b, c, d, e, g) {
            var h = a.$, k = c.$;
            c = k.x + k.width / 2 - h.width / 2;
            h = k.y + k.height / 2 - h.height / 2;
            e !== g ? a.My(d(e, b.x, c - b.x, g), d(e, b.y, h - b.y, g)) : a.position = new N(d(e, b.x, c - b.x, g), d(e, b.y, h - b.y, g))
        }, "position:placeholder": function (a, b, c, d, e, g) {
            e !== g ? a.My(d(e, b.x, c.x - b.x, g), d(e, b.y, c.y - b.y, g)) :
                a.position = new N(d(e, b.x, c.x - b.x, g), d(e, b.y, c.y - b.y, g))
        }, scale: function (a, b, c, d, e, g) {
            a.scale = d(e, b, c - b, g)
        }, visible: function (a, b, c, d, e, g) {
            a.visible = e !== g ? b : c
        }
    };

    function Xg() {
        0 < arguments.length && D.wd(Xg);
        D.vc(this);
        this.ca = null;
        this.rb = new K(F);
        this.ac = "";
        this.Hc = 1;
        this.Qz = !1;
        this.Ql = this.qA = this.pl = this.ol = this.nl = this.ml = this.kl = this.ll = this.jl = this.rl = this.il = this.ql = this.hl = this.gl = !0;
        this.Nz = !1;
        this.Fw = []
    }

    D.ka("Layer", Xg);
    Xg.prototype.$c = function (a) {
        this.ca = a
    };
    Xg.prototype.toString = function (a) {
        void 0 === a && (a = 0);
        var b = 'Layer "' + this.name + '"';
        if (0 >= a)return b;
        for (var c = 0, d = 0, e = 0, g = 0, h = 0, k = this.rb.j; k.next();) {
            var l = k.value;
            l instanceof I ? e++ : l instanceof G ? d++ : l instanceof J ? g++ : l instanceof ba ? h++ : c++
        }
        k = "";
        0 < c && (k += c + " Parts ");
        0 < d && (k += d + " Nodes ");
        0 < e && (k += e + " Groups ");
        0 < g && (k += g + " Links ");
        0 < h && (k += h + " Adornments ");
        if (1 < a)for (a = this.rb.j; a.next();)c = a.value, k += "\n    " + c.toString(), d = c.data, null !== d && D.Jd(d) && (k += " #" + D.Jd(d)), c instanceof G ? k += " " +
            ha(d) : c instanceof J && (k += " " + ha(c.Y) + " " + ha(c.ba));
        return b + " " + this.rb.count + ": " + k
    };
    Xg.prototype.findObjectAt = Xg.prototype.Ie = function (a, b, c) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        if (!1 === this.Ql)return null;
        v && !a.F() && D.k("findObjectAt: Point must have a real value, not: " + a.toString());
        var d = !1;
        null !== this.g && this.g.ub.Pa(a) && (d = !0);
        for (var e = D.P(), g = this.rb.o, h = g.length; h--;) {
            var k = g[h];
            if ((!0 !== d || !1 !== sl(k)) && k.isVisible() && (e.assign(a), gb(e, k.Jh), k = k.Ie(e, b, c), null !== k && (null !== b && (k = b(k)), null !== k && (null === c || c(k)))))return D.A(e), k
        }
        D.A(e);
        return null
    };
    Xg.prototype.findObjectsAt = Xg.prototype.iu = function (a, b, c, d) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        d instanceof K || d instanceof L || (d = new L(P));
        if (!1 === this.Ql)return d;
        v && !a.F() && D.k("findObjectsAt: Point must have a real value, not: " + a.toString());
        var e = !1;
        null !== this.g && this.g.ub.Pa(a) && (e = !0);
        for (var g = D.P(), h = this.rb.o, k = h.length; k--;) {
            var l = h[k];
            if ((!0 !== e || !1 !== sl(l)) && l.isVisible()) {
                g.assign(a);
                gb(g, l.Jh);
                var m = l;
                l.iu(g, b, c, d) && (null !== b && (m = b(m)), null === m || null !== c && !c(m) || (d instanceof L && d.add(m), d instanceof K && d.add(m)))
            }
        }
        D.A(g);
        return d
    };
    Xg.prototype.findObjectsIn = Xg.prototype.Rk = function (a, b, c, d, e) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        void 0 === d && (d = !1);
        e instanceof K || e instanceof L || (e = new L(P));
        if (!1 === this.Ql)return e;
        v && !a.F() && D.k("findObjectsIn: Rect must have a real value, not: " + a.toString());
        var g = !1;
        null !== this.g && this.g.ub.Ok(a) && (g = !0);
        for (var h = this.rb.o, k = h.length; k--;) {
            var l = h[k];
            if ((!0 !== g || !1 !== sl(l)) && l.isVisible()) {
                var m = l;
                l.Rk(a, b, c, d, e) && (null !== b && (m = b(m)), null === m || null !== c && !c(m) || (e instanceof L && e.add(m),
                e instanceof K && e.add(m)))
            }
        }
        return e
    };
    Xg.prototype.PA = function (a, b, c, d, e, g, h) {
        if (!1 === this.Ql)return e;
        for (var k = this.rb.o, l = k.length; l--;) {
            var m = k[l];
            if ((!0 !== h || !1 !== sl(m)) && g(m) && m.isVisible()) {
                var n = m;
                m.Rk(a, b, c, d, e) && (null !== b && (n = b(n)), null === n || null !== c && !c(n) || (e instanceof L && e.add(n), e instanceof K && e.add(n)))
            }
        }
        return e
    };
    Xg.prototype.findObjectsNear = Xg.prototype.Rn = function (a, b, c, d, e, g) {
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        void 0 === e && (e = !0);
        if (!1 !== e && !0 !== e) {
            if (e instanceof K || e instanceof L)g = e;
            e = !0
        }
        g instanceof K || g instanceof L || (g = new L(P));
        if (!1 === this.Ql)return g;
        v && !a.F() && D.k("findObjectsNear: Point must have a real value, not: " + a.toString());
        var h = !1;
        null !== this.g && this.g.ub.Pa(a) && (h = !0);
        for (var k = D.P(), l = D.P(), m = this.rb.o, n = m.length; n--;) {
            var p = m[n];
            if ((!0 !== h || !1 !== sl(p)) && p.isVisible()) {
                k.assign(a);
                gb(k, p.Jh);
                l.n(a.x + b, a.y);
                gb(l, p.Jh);
                var q = p;
                p.Rn(k, l, c, d, e, g) && (null !== c && (q = c(q)), null === q || null !== d && !d(q) || (g instanceof L && g.add(q), g instanceof K && g.add(q)))
            }
        }
        D.A(k);
        D.A(l);
        return g
    };
    f = Xg.prototype;
    f.Pf = function (a, b) {
        if (this.visible) {
            var c;
            c = void 0 === b ? a.ub : b;
            for (var d = this.rb.o, e = d.length, g = 0; g < e; g++) {
                var h = d[g];
                h.AD = g;
                if (!(h instanceof J && !1 === h.vg)) {
                    if (h instanceof ba) {
                        var k = h;
                        if (null !== k.Df)continue
                    }
                    if (Nb(h.$, c))for (h.Pf(!0), tl(h), h = h.ox; h.next();)k = h.value, Gk(k, Infinity, Infinity), k.rc(), k.Pf(!0); else h.Pf(!1), null !== h.ox && 0 < h.ox.count && tl(h)
                }
            }
        }
    };
    f.Ge = function (a, b, c) {
        if (this.visible && 0 !== this.Hc && (void 0 === c && (c = !0), c || !this.Wc)) {
            c = this.rb.o;
            var d = c.length;
            if (0 !== d) {
                1 !== this.Hc && (a.globalAlpha = this.Hc);
                var e = this.Fw;
                e.length = 0;
                for (var g = b.scale, h = 0; h < d; h++) {
                    var k = c[h];
                    if (sl(k)) {
                        if (k instanceof J) {
                            var l = k;
                            l.ic && e.push(l);
                            if (!1 === l.vg)continue
                        }
                        l = k.$;
                        1 < l.width * g || 1 < l.height * g ? k.Ge(a, b) : ul(k, a)
                    }
                }
                a.globalAlpha = 1
            }
        }
    };
    function vl(a, b, c, d) {
        if (a.visible && 0 !== a.Hc) {
            1 !== a.Hc && (b.globalAlpha = a.Hc);
            var e = a.Fw;
            e.length = 0;
            var g = c.scale;
            a = a.rb.o;
            for (var h = a.length, k = d.length, l = 0; l < h; l++) {
                var m = a[l];
                if (sl(m)) {
                    if (m instanceof J) {
                        var n = m;
                        n.ic && e.push(n);
                        if (!1 === n.vg)continue
                    }
                    var n = wl(m, m.$), p;
                    a:{
                        p = n;
                        for (var q = d, r = k, s = 2 / g, u = 4 / g, t = 0; t < r; t++) {
                            var z = q[t];
                            if (0 !== z.width && 0 !== z.height && p.QF(z.x - s, z.y - s, z.width + u, z.height + u)) {
                                p = !0;
                                break a
                            }
                        }
                        p = !1
                    }
                    p && (1 < n.width * g || 1 < n.height * g ? m.Ge(b, c) : ul(m, b))
                }
            }
            b.globalAlpha = 1
        }
    }

    f.i = function (a, b, c, d, e) {
        var g = this.g;
        null !== g && g.jd(eg, a, this, b, c, d, e)
    };
    f.rq = function (a, b, c) {
        var d = this.rb;
        b.nw = this;
        if (a >= d.count)a = d.count; else if (d.ea(a) === b)return -1;
        d.$d(a, b);
        b.vu(c);
        d = this.g;
        null !== d && (c ? d.qa() : d.rq(b));
        xl(this, a, b);
        return a
    };
    f.uf = function (a, b, c) {
        if (!c && b.layer !== this && null !== b.layer)return b.layer.uf(a, b, c);
        var d = this.rb;
        if (0 > a || a >= d.length) {
            if (a = d.indexOf(b), 0 > a)return -1
        } else if (d.ea(a) !== b && (a = d.indexOf(b), 0 > a))return -1;
        b.wu(c);
        d.kd(a);
        d = this.g;
        null !== d && (c ? d.qa() : d.uf(b));
        b.nw = null;
        return a
    };
    function xl(a, b, c) {
        b = yl(a, b, c);
        if (c instanceof I && null !== c && isNaN(c.Do)) {
            if (0 !== c.Oc.count) {
                for (var d = -1, e = a.rb.o, g = e.length, h = 0; h < g; h++) {
                    var k = e[h];
                    if (k === c && (b = h, 0 <= d))break;
                    if (0 > d && k.Ka === c && (d = h, 0 <= b))break
                }
                !(0 > d) && d < b && (e = a.rb, e.kd(b), e.$d(d, c))
            }
            c = c.Ka;
            null !== c && xl(a, -1, c)
        }
    }

    function yl(a, b, c) {
        var d = c.Do;
        if (isNaN(d))return b;
        a = a.rb;
        var e = a.count;
        if (1 >= e)return b;
        0 > b && (b = a.indexOf(c));
        if (0 > b)return -1;
        for (var g = b - 1, h = NaN; 0 <= g;) {
            h = a.ea(g).Do;
            if (!isNaN(h))break;
            g--
        }
        for (var k = b + 1, l = NaN; k < e;) {
            l = a.ea(k).Do;
            if (!isNaN(l))break;
            k++
        }
        if (!isNaN(h) && h > d)for (; ;) {
            if (-1 === g || h <= d) {
                g++;
                if (g === b)break;
                a.kd(b);
                a.$d(g, c);
                return g
            }
            for (h = NaN; 0 <= --g && (h = a.ea(g).Do, isNaN(h)););
        } else if (!isNaN(l) && l < d)for (; ;) {
            if (k === e || l >= d) {
                k--;
                if (k === b)break;
                a.kd(b);
                a.$d(k, c);
                return k
            }
            for (l = NaN; ++k < e && (l = a.ea(k).Do,
                isNaN(l)););
        }
        return b
    }

    f.clear = function () {
        for (var a = this.rb.oc(), b = a.length, c = 0; c < b; c++)a[c].Pf(!1), this.uf(-1, a[c], !1)
    };
    D.w(Xg, {Ii: "parts"}, function () {
        return this.rb.j
    });
    D.w(Xg, {sM: "partsBackwards"}, function () {
        return this.rb.bo
    });
    D.w(Xg, {g: "diagram"}, function () {
        return this.ca
    });
    D.defineProperty(Xg, {name: "name"}, function () {
        return this.ac
    }, function (a) {
        D.h(a, "string", Xg, "name");
        var b = this.ac;
        if (b !== a) {
            var c = this.g;
            if (null !== c)for ("" === b && D.k("Cannot rename default Layer to: " + a), c = c.co; c.next();)c.value.name === a && D.k("Layer.name is already present in this diagram: " + a);
            this.ac = a;
            this.i("name", b, a);
            for (a = this.rb.j; a.next();)a.value.Nf = this.ac
        }
    });
    D.defineProperty(Xg, {opacity: "opacity"}, function () {
        return this.Hc
    }, function (a) {
        var b = this.Hc;
        b !== a && (D.h(a, "number", Xg, "opacity"), (0 > a || 1 < a) && D.ua(a, "0 <= value <= 1", Xg, "opacity"), this.Hc = a, this.i("opacity", b, a), a = this.g, null !== a && a.qa())
    });
    D.defineProperty(Xg, {Wc: "isTemporary"}, function () {
        return this.Qz
    }, function (a) {
        var b = this.Qz;
        b !== a && (D.h(a, "boolean", Xg, "isTemporary"), this.Qz = a, this.i("isTemporary", b, a))
    });
    D.defineProperty(Xg, {visible: "visible"}, function () {
        return this.qA
    }, function (a) {
        var b = this.qA;
        if (b !== a) {
            D.h(a, "boolean", Xg, "visible");
            this.qA = a;
            this.i("visible", b, a);
            for (b = this.rb.j; b.next();)b.value.Ld(a);
            a = this.g;
            null !== a && a.qa()
        }
    });
    D.defineProperty(Xg, {sg: "pickable"}, function () {
        return this.Ql
    }, function (a) {
        var b = this.Ql;
        b !== a && (D.h(a, "boolean", Xg, "pickable"), this.Ql = a, this.i("pickable", b, a))
    });
    D.defineProperty(Xg, {TF: "isBoundsIncluded"}, function () {
        return this.Nz
    }, function (a) {
        this.Nz !== a && (this.Nz = a, null !== this.g && this.g.Ac())
    });
    D.defineProperty(Xg, {Lk: "allowCopy"}, function () {
        return this.gl
    }, function (a) {
        var b = this.gl;
        b !== a && (D.h(a, "boolean", Xg, "allowCopy"), this.gl = a, this.i("allowCopy", b, a))
    });
    D.defineProperty(Xg, {Cn: "allowDelete"}, function () {
        return this.hl
    }, function (a) {
        var b = this.hl;
        b !== a && (D.h(a, "boolean", Xg, "allowDelete"), this.hl = a, this.i("allowDelete", b, a))
    });
    D.defineProperty(Xg, {tx: "allowTextEdit"}, function () {
        return this.ql
    }, function (a) {
        var b = this.ql;
        b !== a && (D.h(a, "boolean", Xg, "allowTextEdit"), this.ql = a, this.i("allowTextEdit", b, a))
    });
    D.defineProperty(Xg, {px: "allowGroup"}, function () {
        return this.il
    }, function (a) {
        var b = this.il;
        b !== a && (D.h(a, "boolean", Xg, "allowGroup"), this.il = a, this.i("allowGroup", b, a))
    });
    D.defineProperty(Xg, {ux: "allowUngroup"}, function () {
        return this.rl
    }, function (a) {
        var b = this.rl;
        b !== a && (D.h(a, "boolean", Xg, "allowUngroup"), this.rl = a, this.i("allowUngroup", b, a))
    });
    D.defineProperty(Xg, {Wt: "allowLink"}, function () {
        return this.jl
    }, function (a) {
        var b = this.jl;
        b !== a && (D.h(a, "boolean", Xg, "allowLink"), this.jl = a, this.i("allowLink", b, a))
    });
    D.defineProperty(Xg, {Dn: "allowRelink"}, function () {
        return this.ll
    }, function (a) {
        var b = this.ll;
        b !== a && (D.h(a, "boolean", Xg, "allowRelink"), this.ll = a, this.i("allowRelink", b, a))
    });
    D.defineProperty(Xg, {am: "allowMove"}, function () {
        return this.kl
    }, function (a) {
        var b = this.kl;
        b !== a && (D.h(a, "boolean", Xg, "allowMove"), this.kl = a, this.i("allowMove", b, a))
    });
    D.defineProperty(Xg, {qx: "allowReshape"}, function () {
        return this.ml
    }, function (a) {
        var b = this.ml;
        b !== a && (D.h(a, "boolean", Xg, "allowReshape"), this.ml = a, this.i("allowReshape", b, a))
    });
    D.defineProperty(Xg, {Xt: "allowResize"}, function () {
        return this.nl
    }, function (a) {
        var b = this.nl;
        b !== a && (D.h(a, "boolean", Xg, "allowResize"), this.nl = a, this.i("allowResize", b, a))
    });
    D.defineProperty(Xg, {sx: "allowRotate"}, function () {
        return this.ol
    }, function (a) {
        var b = this.ol;
        b !== a && (D.h(a, "boolean", Xg, "allowRotate"), this.ol = a, this.i("allowRotate", b, a))
    });
    D.defineProperty(Xg, {Ef: "allowSelect"}, function () {
        return this.pl
    }, function (a) {
        var b = this.pl;
        b !== a && (D.h(a, "boolean", Xg, "allowSelect"), this.pl = a, this.i("allowSelect", b, a))
    });
    function E(a) {
        function b() {
            window.document.removeEventListener("DOMContentLoaded", b, !1);
            zl(c)
        }

        1 < arguments.length && D.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id.");
        D.vc(this);
        Al = [];
        this.bd = !0;
        this.tC = new jh;
        this.tC.$c(this);
        this.Td = 17;
        this.js = !1;
        this.bA = "default";
        var c = this;
        null !== window.document.body ? zl(this) : window.document.addEventListener("DOMContentLoaded", b, !1);
        this.dc = new K(Xg);
        this.Sb = this.Ob = 0;
        this.zk = this.Tb = this.pd = this.Mb = null;
        this.FG();
        this.lp =
            null;
        this.EG();
        this.sb = (new N(NaN, NaN)).freeze();
        this.Cb = 1;
        this.cw = (new N(NaN, NaN)).freeze();
        this.dw = NaN;
        this.ww = 1E-4;
        this.tw = 100;
        this.Jc = new Ca;
        this.lx = (new N(NaN, NaN)).freeze();
        this.Vv = (new C(NaN, NaN, NaN, NaN)).freeze();
        this.Qw = (new Kb(0, 0, 0, 0)).freeze();
        this.Rw = Bl;
        this.Nw = this.Lw = null;
        this.Km = Rh;
        this.Oo = Wc;
        this.Cl = Rh;
        this.ip = Wc;
        this.ew = this.bw = dc;
        this.Ne = !0;
        this.es = !1;
        this.Hg = new L(F);
        this.wl = new ma(J, C);
        this.Mr = !0;
        this.jr = 250;
        this.Jo = -1;
        this.Av = (new Kb(16, 16, 16, 16)).freeze();
        this.Ov = this.cg = !1;
        this.cp = !0;
        this.$i = new ag;
        this.ed = new ag;
        this.Ub = new ag;
        this.yh = this.Pi = null;
        this.Et = !1;
        this.vz = this.wz = null;
        Cl(this);
        this.Cp = new L(G);
        this.Vl = new L(I);
        this.wp = new L(J);
        this.rb = new L(F);
        this.kw = !0;
        this.gx = Dl;
        this.mD = !1;
        this.ix = fj;
        this.pz = this.sz = this.mA = null;
        this.Hv = "";
        this.Gr = "auto";
        this.Ti = this.uj = this.ij = this.zw = this.jj = this.kj = this.lj = this.Si = this.Xi = this.Qi = null;
        this.Xz = !1;
        this.WD = {};
        this.Kw = 0;
        this.pj = [null, null];
        this.mz = null;
        this.br = this.uz = this.hA = this.cE = this.tj = !1;
        this.xD = !0;
        this.Pz = this.je = !1;
        this.xe = null;
        var d = this;
        this.FD = function (a) {
            if (a.ga === d.ga && d.$a) {
                d.$a = !1;
                try {
                    var b = a.Kc;
                    "" === a.yf && b === eg && El(d, a.object, a.propertyName)
                } finally {
                    d.$a = !0
                }
            }
        };
        this.GD = function (a) {
            Fl(d, a)
        };
        this.BE = !0;
        this.uh = -2;
        this.Ui = new ma(Object, F);
        this.ck = new ma(Object, J);
        this.Xm = new ma(Object, Array);
        this.Ep = new ma("string", Array);
        this.$z = new K(Gl);
        this.bj = !1;
        this.hl = this.gl = this.pv = this.of = !0;
        this.rv = this.qv = !1;
        this.wv = this.uv = this.pl = this.ol = this.nl = this.ml = this.kl = this.ll = this.jl = this.tv = this.rl = this.il = this.ql = !0;
        this.Vm = this.uD = !1;
        this.vv = this.sv = this.$v = this.Zv = !0;
        this.Tw = this.Pw = 16;
        this.dA = this.Ow = !1;
        this.nt = this.Sw = null;
        this.eA = this.fA = 0;
        this.qf = (new Kb(5)).freeze();
        this.Ww = (new L(F)).freeze();
        this.uw = 999999999;
        this.aw = (new L(F)).freeze();
        this.Dl = this.Tm = this.nk = !0;
        this.Al = this.mk = !1;
        this.ve = null;
        this.yv = !0;
        this.vh = !1;
        this.AH = new L(J);
        this.kD = new L(Hl);
        this.Sd = null;
        this.ND = 1;
        this.fE = 0;
        this.Hh = {scale: 1, position: new N, bounds: new C, isScroll: !1};
        this.AE = (new C(NaN, NaN, NaN, NaN)).freeze();
        this.Pv = (new C(NaN,
            NaN, NaN, NaN)).freeze();
        this.lw = !1;
        this.Rv = null;
        this.Gw = new L(Il);
        Jl(this);
        this.pw = this.Xv = this.Aw = this.QC = this.PC = this.RC = this.sk = this.yl = this.mj = null;
        Kl(this);
        this.Bd = null;
        this.Wv = !1;
        this.Ro = null;
        this.nb = new Lh;
        this.nb.initializeStandardTools();
        this.hb = this.du = this.nb;
        this.xb = new oa;
        this.ga = new X;
        this.tj = !0;
        this.Yb = new Zg;
        this.tj = !1;
        this.bD = this.zz = null;
        this.rd = 1;
        this.Ck = null;
        var e = D.vfo.split(".");
        !0 !== D.Gx.licenseKey && "1" === e[0] && 7 > parseInt(e[1], 10) && (D.trace("Warning: You have entered a license key for GoJS version 1.7 or later, but this library is version " +
            D.vfo + ". This license key will do nothing until you upgrade to GoJS 1.7 or later."), D.Gx.licenseKey = !0);
        this.Hl = 1;
        this.Zm = 0;
        this.zD = new N;
        this.wE = 500;
        this.zv = new N;
        this.wt = null;
        this.El = !1;
        this.preventDefault = this.yy = this.vG = this.wG = this.uG = this.mo = this.dh = this.no = this.ko = this.lo = this.gC = this.YB = this.ZB = this.$B = this.Sl = this.jt = this.Rl = this.it = null;
        this.KD = 1;
        this.hw = !1;
        this.Bl = new Ll;
        void 0 !== a && Ml(this, a);
        this.bd = !1
    }

    D.ka("Diagram", E);
    E.prototype.clear = E.prototype.clear = function () {
        var a = null;
        null !== this.Bd && (a = this.Bd.Z);
        this.ga.clear();
        for (var b = this.dc.length, c = 0; c < b; c++)this.dc.o[c].clear();
        this.Hg.clear();
        this.wl.clear();
        this.Cp.clear();
        this.Vl.clear();
        this.wp.clear();
        this.rb.clear();
        this.Ui.clear();
        this.ck.clear();
        this.Xm.clear();
        this.Ww.Xa();
        this.Ww.clear();
        this.Ww.freeze();
        this.aw.Xa();
        this.aw.clear();
        this.aw.freeze();
        th = this.Ro = null;
        Kh = "";
        this.Pv = (new C(NaN, NaN, NaN, NaN)).freeze();
        null !== a && (this.add(a), this.rb.remove(a));
        this.qa()
    };
    E.prototype.reset = E.prototype.reset = function () {
        this.bd = !0;
        this.clear();
        this.dc = new K(Xg);
        this.FG();
        this.EG();
        this.sb = (new N(NaN, NaN)).freeze();
        this.Cb = 1;
        this.cw = (new N(NaN, NaN)).freeze();
        this.dw = NaN;
        this.ww = 1E-4;
        this.tw = 100;
        this.lx = (new N(NaN, NaN)).freeze();
        this.Vv = (new C(NaN, NaN, NaN, NaN)).freeze();
        this.Qw = (new Kb(0, 0, 0, 0)).freeze();
        this.Rw = Bl;
        this.Nw = this.Lw = null;
        this.Km = Rh;
        this.Oo = Wc;
        this.Cl = Rh;
        this.ip = Wc;
        this.ew = this.bw = dc;
        this.jr = 250;
        this.Av = (new Kb(16, 16, 16, 16)).freeze();
        this.kw = !0;
        this.gx = Dl;
        this.ix = fj;
        this.Gr = "auto";
        this.Ti = this.uj = this.ij = this.zw = this.jj = this.kj = this.lj = this.Si = this.Xi = this.Qi = null;
        this.bj = !1;
        this.hl = this.gl = this.pv = this.of = !0;
        this.rv = this.qv = !1;
        this.vv = this.sv = this.$v = this.Zv = this.wv = this.uv = this.pl = this.ol = this.nl = this.ml = this.kl = this.ll = this.jl = this.tv = this.rl = this.il = this.ql = !0;
        this.Tw = this.Pw = 16;
        this.qf = (new Kb(5)).freeze();
        this.uw = 999999999;
        this.ve = null;
        this.lw = !1;
        Kl(this);
        this.Bd = null;
        this.nb = new Lh;
        this.nb.initializeStandardTools();
        this.hb = this.du = this.nb;
        this.xb =
            new oa;
        this.tj = !0;
        Jl(this);
        this.Yb = new Zg;
        this.tj = !1;
        this.ga = new X;
        this.vh = !1;
        this.cp = !0;
        this.bd = this.cg = !1;
        this.qa();
        this.yh = this.Pi = null;
        Cl(this);
        this.Hv = ""
    };
    function Kl(a) {
        a.mj = new ma("string", F);
        var b = new G, c = new na;
        c.bind(new oh("text", "", ha));
        b.add(c);
        a.RC = b;
        a.mj.add("", b);
        b = new G;
        c = new na;
        c.stroke = "brown";
        c.bind(new oh("text", "", ha));
        b.add(c);
        a.mj.add("Comment", b);
        b = new G;
        b.dl = !1;
        b.wA = !1;
        c = new y;
        c.Jb = "Ellipse";
        c.fill = "black";
        c.stroke = null;
        c.Ea = (new Ba(3, 3)).Oa();
        b.add(c);
        a.mj.add("LinkLabel", b);
        a.yl = new ma("string", I);
        b = new I;
        b.Hy = "GROUPPANEL";
        b.type = Nl;
        c = new na;
        c.font = "bold 12pt sans-serif";
        c.bind(new oh("text", "", ha));
        b.add(c);
        c = new x(Ol);
        c.name =
            "GROUPPANEL";
        var d = new y;
        d.Jb = "Rectangle";
        d.fill = "rgba(128,128,128,0.2)";
        d.stroke = "black";
        c.add(d);
        d = new Xj;
        d.padding = (new Kb(5, 5, 5, 5)).Oa();
        c.add(d);
        b.add(c);
        a.PC = b;
        a.yl.add("", b);
        a.sk = new ma("string", J);
        b = new J;
        c = new y;
        c.Lf = !0;
        b.add(c);
        c = new y;
        c.Vq = "Standard";
        c.fill = "black";
        c.stroke = null;
        c.lb = 0;
        b.add(c);
        a.QC = b;
        a.sk.add("", b);
        b = new J;
        c = new y;
        c.Lf = !0;
        c.stroke = "brown";
        b.add(c);
        a.sk.add("Comment", b);
        b = new ba;
        b.type = Ol;
        c = new y;
        c.fill = null;
        c.stroke = "dodgerblue";
        c.lb = 3;
        b.add(c);
        c = new Xj;
        c.margin = (new Kb(1.5,
            1.5, 1.5, 1.5)).Oa();
        b.add(c);
        a.Aw = b;
        a.Xv = b;
        b = new ba;
        b.type = rj;
        c = new y;
        c.Lf = !0;
        c.fill = null;
        c.stroke = "dodgerblue";
        c.lb = 3;
        b.add(c);
        a.pw = b
    }

    function zl(a) {
        var b = D.createElement("p");
        b.style.width = "100%";
        b.style.height = "200px";
        b.style.boxSizing = "content-box";
        var c = D.createElement("div");
        c.style.position = "absolute";
        c.style.visibility = "hidden";
        c.style.width = "200px";
        c.style.height = "150px";
        c.style.overflow = "hidden";
        c.style.boxSizing = "content-box";
        c.appendChild(b);
        window.document.body.appendChild(c);
        var d = b.offsetWidth;
        c.style.overflow = "scroll";
        b = b.offsetWidth;
        d === b && (b = c.clientWidth);
        window.document.body.removeChild(c);
        c = d - b;
        0 !== c || D.YF ||
        (c = 11);
        a.Td = c;
        c = D.createElement("div");
        c.dir = "rtl";
        c.style.cssText = "font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;";
        c.textContent = "A";
        window.document.body.appendChild(c);
        d = "reverse";
        0 < c.scrollLeft ? d = "default" : (c.scrollLeft = 1, 0 === c.scrollLeft && (d = "negative"));
        window.document.body.removeChild(c);
        a.bA = d
    }

    E.prototype.qc = function (a) {
        a.Oe === E ? this.dm = a : D.Xj(this, a)
    };
    E.prototype.toString = function (a) {
        void 0 === a && (a = 0);
        var b = "";
        this.Ej && this.Ej.id && (b = this.Ej.id);
        b = 'Diagram "' + b + '"';
        if (0 >= a)return b;
        for (var c = this.dc.j; c.next();)b += "\n  " + c.value.toString(a - 1);
        return b
    };
    E.fromDiv = function (a) {
        var b = a;
        "string" === typeof a && (b = window.document.getElementById(a));
        return b instanceof HTMLDivElement && b.ca instanceof E ? b.ca : null
    };
    D.defineProperty(E, {Ej: "div"}, function () {
        return this.Tb
    }, function (a) {
        null !== a && D.l(a, HTMLDivElement, E, "div");
        if (this.Tb !== a) {
            Al = [];
            var b = this.Tb;
            null !== b ? (b.ca = void 0, b.innerHTML = "", null !== this.Mb && (this.Mb.removeEventListener("touchstart", this.$B, !1), this.Mb.removeEventListener("touchmove", this.ZB, !1), this.Mb.removeEventListener("touchend", this.YB, !1), this.Mb.Vd.ca = null), b = this.nb, null !== b && (b.nf.each(function (a) {
                a.cancelWaitAfter()
            }), b.lg.each(function (a) {
                a.cancelWaitAfter()
            }), b.mg.each(function (a) {
                a.cancelWaitAfter()
            })),
                b.cancelWaitAfter(), this.hb.doCancel(), this.pd = this.Mb = null, window.removeEventListener("resize", this.gC, !1), window.removeEventListener("mousemove", this.lo, !0), window.removeEventListener("mousedown", this.ko, !0), window.removeEventListener("mouseup", this.no, !0), window.removeEventListener("mousewheel", this.dh, !0), window.removeEventListener("DOMMouseScroll", this.dh, !0), window.removeEventListener("mouseout", this.mo, !0)) : this.vh = !1;
            this.Tb = null;
            if (null !== a) {
                if (b = a.ca)b.Ej = null;
                Ml(this, a);
                this.Gq()
            }
        }
    });
    function Pl(a) {
        var b = a.Mb;
        b.addEventListener("touchstart", a.$B, !1);
        b.addEventListener("touchmove", a.ZB, !1);
        b.addEventListener("touchend", a.YB, !1);
        b.addEventListener("mousemove", a.lo, !1);
        b.addEventListener("mousedown", a.ko, !1);
        b.addEventListener("mouseup", a.no, !1);
        b.addEventListener("mousewheel", a.dh, !1);
        b.addEventListener("DOMMouseScroll", a.dh, !1);
        b.addEventListener("mouseout", a.mo, !1);
        b.addEventListener("keydown", a.vJ, !1);
        b.addEventListener("keyup", a.wJ, !1);
        b.addEventListener("selectstart", function (a) {
            a.preventDefault();
            return !1
        }, !1);
        b.addEventListener("contextmenu", function (a) {
            a.preventDefault();
            return !1
        }, !1);
        b.addEventListener("gesturechange", function (b) {
            a.nb.oq === Uk && b.preventDefault()
        }, !1);
        b.addEventListener("pointerdown", a.uG, !1);
        b.addEventListener("pointermove", a.wG, !1);
        b.addEventListener("pointerleave", a.vG, !1);
        window.addEventListener("resize", a.gC, !1)
    }

    E.prototype.computePixelRatio = function () {
        return null !== this.Ck ? this.Ck : this.KD
    };
    E.prototype.doMouseMove = function () {
        this.hb.doMouseMove()
    };
    E.prototype.doMouseDown = function () {
        this.hb.doMouseDown()
    };
    E.prototype.doMouseUp = function () {
        this.hb.doMouseUp()
    };
    E.prototype.doMouseWheel = function () {
        this.hb.doMouseWheel()
    };
    E.prototype.doKeyDown = function () {
        this.hb.doKeyDown()
    };
    E.prototype.doKeyUp = function () {
        this.hb.doKeyUp()
    };
    E.prototype.doFocus = function () {
        this.focus()
    };
    E.prototype.focus = E.prototype.focus = function () {
        this.Mb && this.Mb.focus()
    };
    function el(a) {
        if (null !== a.Mb) {
            var b = a.Tb;
            if (0 !== b.clientWidth && 0 !== b.clientHeight) {
                var c = a.Al ? a.Td : 0, d = a.mk ? a.Td : 0, e = a.rd;
                a.rd = a.computePixelRatio();
                a.rd !== e && (a.es = !0, a.Te());
                if (b.clientWidth !== a.Ob + c || b.clientHeight !== a.Sb + d)a.Tm = !0, a.Ne = !0, b = a.Yb, null !== b && b.ey && a.dm === Rh && b.N(), a.je || a.Te()
            }
        }
    }

    function Jl(a) {
        var b = new Xg;
        b.name = "Background";
        a.Qt(b);
        b = new Xg;
        b.name = "";
        a.Qt(b);
        b = new Xg;
        b.name = "Foreground";
        a.Qt(b);
        b = new Xg;
        b.name = "Adornment";
        b.Wc = !0;
        a.Qt(b);
        b = new Xg;
        b.name = "Tool";
        b.Wc = !0;
        b.TF = !0;
        a.Qt(b);
        b = new Xg;
        b.name = "Grid";
        b.Ef = !1;
        b.sg = !1;
        b.Wc = !0;
        a.SH(b, a.mm("Background"))
    }

    function Ql(a) {
        a.Bd = new x(Rl);
        a.Bd.name = "GRID";
        var b = new y;
        b.Jb = "LineH";
        b.stroke = "lightgray";
        b.lb = .5;
        b.interval = 1;
        a.Bd.add(b);
        b = new y;
        b.Jb = "LineH";
        b.stroke = "gray";
        b.lb = .5;
        b.interval = 5;
        a.Bd.add(b);
        b = new y;
        b.Jb = "LineH";
        b.stroke = "gray";
        b.lb = 1;
        b.interval = 10;
        a.Bd.add(b);
        b = new y;
        b.Jb = "LineV";
        b.stroke = "lightgray";
        b.lb = .5;
        b.interval = 1;
        a.Bd.add(b);
        b = new y;
        b.Jb = "LineV";
        b.stroke = "gray";
        b.lb = .5;
        b.interval = 5;
        a.Bd.add(b);
        b = new y;
        b.Jb = "LineV";
        b.stroke = "gray";
        b.lb = 1;
        b.interval = 10;
        a.Bd.add(b);
        b = new F;
        b.add(a.Bd);
        b.Nf = "Grid";
        b.Do = 0;
        b.Yx = !1;
        b.SF = !1;
        b.sg = !1;
        b.my = "GRID";
        a.add(b);
        a.rb.remove(b);
        a.Bd.visible = !1
    }

    function Sl() {
        this.ca.isEnabled ? this.ca.xI(this) : Tl(this.ca)
    }

    function Ul(a) {
        this.ca.isEnabled ? (this.ca.dA = !0, this.ca.fA = a.target.scrollTop, this.ca.eA = a.target.scrollLeft) : Tl(this.ca)
    }

    E.prototype.diagramScroll = E.prototype.xI = function (a) {
        if (this.dA && null !== this.Mb) {
            this.Ow = !0;
            var b = this.fd, c = this.ub, d = this.Fy, e = b.x - d.left, g = b.y - d.top, h = b.width + d.left + d.right, k = b.height + d.top + d.bottom, l = b.right + d.right, d = b.bottom + d.bottom, m = c.x, b = c.y, n = c.width, p = c.height, q = c.right, r = c.bottom, c = this.scale, s;
            s = a.scrollLeft;
            if (this.js)switch (this.bA) {
                case "negative":
                    s = s + a.scrollWidth - a.clientWidth;
                    break;
                case "reverse":
                    s = a.scrollWidth - s - a.clientWidth
            }
            var u = s;
            n < h || p < k ? (s = D.Fb(this.position.x, this.position.y),
            this.Ae && this.eA !== u && (s.x = u / c + e, this.eA = u), this.Be && this.fA !== a.scrollTop && (s.y = a.scrollTop / c + g, this.fA = a.scrollTop), this.position = s, D.A(s), this.Tm = this.Ow = !1) : (s = D.P(), a.GH && this.Ae && (e < m && (this.position = s.n(u + e, this.position.y)), l > q && (this.position = s.n(-(this.Sw.scrollWidth - this.Ob) + u - this.Ob / c + l, this.position.y))), a.HH && this.Be && (g < b && (this.position = s.n(this.position.x, a.scrollTop + g)), d > r && (this.position = s.n(this.position.x, -(this.Sw.scrollHeight - this.Sb) + a.scrollTop - this.Sb / c + d))), D.A(s), Vl(this),
                this.Tm = this.Ow = !1, b = this.fd, c = this.ub, l = b.right, q = c.right, d = b.bottom, r = c.bottom, e = b.x, m = c.x, g = b.y, b = c.y, n >= h && e >= m && l <= q && (this.nt.style.width = "1px"), p >= k && g >= b && d <= r && (this.nt.style.height = "1px"))
        }
    };
    E.prototype.computeBounds = E.prototype.Mh = function () {
        0 < this.Hg.count && Si(this);
        return Wl(this)
    };
    function Wl(a) {
        if (a.yF.F()) {
            var b = a.yF.copy();
            b.nx(a.padding);
            return b
        }
        for (var c = !0, d = a.dc.o, e = d.length, g = 0; g < e; g++) {
            var h = d[g];
            if (h.visible && (!h.Wc || h.TF))for (var h = h.rb.o, k = h.length, l = 0; l < k; l++) {
                var m = h[l];
                m.Yx && m.isVisible() && (m = m.$, m.F() && (c ? (c = !1, b = m.copy()) : b.$h(m)))
            }
        }
        c && (b = new C(0, 0, 0, 0));
        b.nx(a.padding);
        return b
    }

    E.prototype.computePartsBounds = function (a, b) {
        void 0 === b && (b = !1);
        for (var c = null, d = a.j; d.next();) {
            var e = d.value;
            !b && e instanceof J || (e.kf(), null === c ? c = e.$.copy() : c.$h(e.$))
        }
        return null === c ? new C(NaN, NaN, 0, 0) : c
    };
    function Xl(a, b) {
        if ((b || a.vh) && !a.bd && null !== a.Mb && !a.Wa.vf && a.fd.F()) {
            a.bd = !0;
            var c = a.Km;
            b && a.Cl !== Rh && (c = a.Cl);
            var d = c !== Rh ? Yl(a, c) : a.scale, c = a.ub.copy(), e = a.Ob / d, g = a.Sb / d, h = null, k = a.Wa;
            k.xc && (h = a.sb.copy());
            a.position.Xa();
            var l = a.Oo;
            b && !l.Vc() && a.ip.Vc() && (l = a.ip);
            Zl(a, a.sb, a.fd, e, g, l, b);
            a.position.freeze();
            null !== h && ql(k, h, a.sb);
            e = a.scale;
            a.scale = d;
            a.bd = !1;
            d = a.ub;
            d.Uc(c) || a.Su(c, d, e, a.scale, !1)
        }
    }

    function Yl(a, b) {
        var c = a.xb.Ex;
        if (null === a.Mb)return c;
        a.nk && $l(a, a.Mh());
        var d = a.fd;
        if (!d.F())return c;
        var e = d.width, d = d.height, g = a.Ob, h = a.Sb, k = g / e, l = h / d;
        return b === am ? (e = Math.min(l, k), e > c && (e = c), e < a.Sh && (e = a.Sh), e > a.Rh && (e = a.Rh), e) : b === bm ? (e = l > k ? (h - a.Td) / d : (g - a.Td) / e, e > c && (e = c), e < a.Sh && (e = a.Sh), e > a.Rh && (e = a.Rh), e) : a.scale
    }

    E.prototype.zoomToFit = E.prototype.zoomToFit = function () {
        this.scale = Yl(this, am)
    };
    E.prototype.zoomToRect = function (a, b) {
        void 0 === b && (b = am);
        var c = a.width, d = a.height;
        if (!(0 === c || 0 === d || isNaN(c) && isNaN(d))) {
            var e = 1;
            if (b === am || b === bm)if (isNaN(c))e = this.ub.height * this.scale / d; else if (isNaN(d))e = this.ub.width * this.scale / c; else var e = this.Ob, g = this.Sb, e = b === bm ? g / d > e / c ? (g - (this.mk ? this.Td : 0)) / d : (e - (this.Al ? this.Td : 0)) / c : Math.min(g / d, e / c);
            this.scale = e;
            this.position = new N(a.x, a.y)
        }
    };
    D.defineProperty(E, {dB: null}, function () {
        return this.bd
    }, function (a) {
        this.bd = a
    });
    E.prototype.alignDocument = function (a, b) {
        this.nk && $l(this, this.Mh());
        var c = this.fd, d = this.ub;
        this.position = new N(c.x + (a.x * c.width + a.offsetX) - (b.x * d.width - b.offsetX), c.y + (a.y * c.height + a.offsetY) - (b.y * d.height - b.offsetY))
    };
    function Zl(a, b, c, d, e, g, h) {
        var k = b.x, l = b.y;
        if (h || a.GB === Bl)g.Vc() && (d > c.width && (k = c.x + (g.x * c.width + g.offsetX) - (g.x * d - g.offsetX)), e > c.height && (l = c.y + (g.y * c.height + g.offsetY) - (g.y * e - g.offsetY))), g = a.Fy, h = d - c.width, d < c.width + g.left + g.right ? (k = Math.min(k + d / 2, c.right + Math.max(h, g.right) - d / 2), k = Math.max(k, c.left - Math.max(h, g.left) + d / 2), k -= d / 2) : k > c.left ? k = c.left : k < c.right - d && (k = c.right - d), d = e - c.height, e < c.height + g.top + g.bottom ? (l = Math.min(l + e / 2, c.bottom + Math.max(d, g.bottom) - e / 2), l = Math.max(l, c.top - Math.max(d,
                g.top) + e / 2), l -= e / 2) : l > c.top ? l = c.top : l < c.bottom - e && (l = c.bottom - e);
        b.x = isFinite(k) ? k : -a.padding.left;
        b.y = isFinite(l) ? l : -a.padding.top;
        null !== a.yG && (a = a.yG(a, b), b.x = a.x, b.y = a.y)
    }

    E.prototype.findPartAt = E.prototype.ju = function (a, b) {
        var c = b ? Wi(this, a, function (a) {
            return a.Z
        }, function (a) {
            return a.canSelect()
        }) : Wi(this, a, function (a) {
            return a.Z
        });
        return c instanceof F ? c : null
    };
    E.prototype.findObjectAt = E.prototype.Ie = function (a, b, c) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        Si(this);
        for (var d = this.dc.bo; d.next();) {
            var e = d.value;
            if (e.visible && (e = e.Ie(a, b, c), null !== e))return e
        }
        return null
    };
    function Wi(a, b, c, d) {
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        Si(a);
        for (a = a.dc.bo; a.next();) {
            var e = a.value;
            if (e.visible && !e.Wc && (e = e.Ie(b, c, d), null !== e))return e
        }
        return null
    }

    E.prototype.findObjectsAt = E.prototype.iu = function (a, b, c, d) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        d instanceof K || d instanceof L || (d = new L(P));
        Si(this);
        for (var e = this.dc.bo; e.next();) {
            var g = e.value;
            g.visible && g.iu(a, b, c, d)
        }
        return d
    };
    E.prototype.findObjectsIn = E.prototype.Rk = function (a, b, c, d, e) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        void 0 === d && (d = !1);
        e instanceof K || e instanceof L || (e = new L(P));
        Si(this);
        for (var g = this.dc.bo; g.next();) {
            var h = g.value;
            h.visible && h.Rk(a, b, c, d, e)
        }
        return e
    };
    E.prototype.PA = function (a, b, c, d, e, g) {
        var h = new L(P);
        Si(this);
        for (var k = this.dc.bo; k.next();) {
            var l = k.value;
            l.visible && l.PA(a, b, c, d, h, e, g)
        }
        return h
    };
    E.prototype.findObjectsNear = E.prototype.Rn = function (a, b, c, d, e, g) {
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        void 0 === e && (e = !0);
        if (!1 !== e && !0 !== e) {
            if (e instanceof K || e instanceof L)g = e;
            e = !0
        }
        g instanceof K || g instanceof L || (g = new L(P));
        Si(this);
        for (var h = this.dc.bo; h.next();) {
            var k = h.value;
            k.visible && k.Rn(a, b, c, d, e, g)
        }
        return g
    };
    E.prototype.acceptEvent = function (a) {
        var b = this.ed;
        this.ed = this.Ub;
        this.Ub = b;
        cm(this, this, a, b, a instanceof MouseEvent);
        return b
    };
    function cm(a, b, c, d, e) {
        d.g = b;
        d.event = c;
        e ? dm(a, c, d) : (d.se = b.Ub.se, d.ha = b.Ub.ha);
        a = 0;
        c.ctrlKey && (a += 1);
        c.altKey && (a += 2);
        c.shiftKey && (a += 4);
        c.metaKey && (a += 8);
        d.Md = a;
        d.button = c.button;
        void 0 === c.buttons || D.mJ || (d.buttons = c.buttons);
        D.Yk && 0 === c.button && c.ctrlKey && (d.button = 2);
        d.lm = !1;
        d.up = !1;
        d.Pe = 1;
        d.km = 0;
        d.Nc = !1;
        d.bubbles = !1;
        d.timestamp = Date.now();
        d.Cu = !1;
        d.jh = c.target.ca ? c.target.ca : null;
        d.Xe = null
    }

    function em(a, b, c, d, e) {
        d.g = a;
        dm(a, c, d);
        d.Md = 0;
        d.button = 0;
        d.buttons = 1;
        d.lm = !0;
        d.up = !1;
        d.Pe = 1;
        d.km = 0;
        d.Nc = !1;
        d.bubbles = !0;
        d.event = b;
        d.timestamp = Date.now();
        d.Cu = e;
        d.jh = b.target.ca ? b.target.ca : null;
        d.Xe = null;
        a.$i = d.copy();
        $h = null
    }

    function fm(a, b, c, d, e) {
        var g = null;
        d.g = a;
        null !== c ? ((g = window.document.elementFromPoint(c.clientX, c.clientY)) && g.ca ? g = g.ca : (c = b.changedTouches[0], g = a), d.jh = g, dm(a, c, d)) : null !== a.ed ? (d.ha = a.ed.ha, d.se = a.ed.se, d.jh = a.ed.jh) : null !== a.$i && (d.ha = a.$i.ha, d.se = a.$i.se, d.jh = a.$i.jh);
        d.Md = 0;
        d.button = 0;
        d.buttons = 1;
        d.lm = !1;
        d.up = !1;
        d.Pe = 1;
        d.km = 0;
        d.Nc = !1;
        d.bubbles = !1;
        d.event = b;
        d.timestamp = Date.now();
        d.Cu = e;
        d.Xe = null
    }

    function fa(a, b, c) {
        if (b.bubbles)return v && v.NF && D.trace("NOT handled " + c.type + " " + b.toString()), !0;
        v && v.NF && D.trace("handled " + c.type + " " + a.hb.name + " " + b.toString());
        void 0 !== c.stopPropagation && c.stopPropagation();
        c.preventDefault();
        c.cancelBubble = !0;
        return !1
    }

    E.prototype.vJ = function (a) {
        if (!this.ca.isEnabled)return !1;
        var b = this.ca.Ub;
        cm(this.ca, this.ca, a, b, !1);
        b.key = String.fromCharCode(a.which);
        b.lm = !0;
        switch (a.which) {
            case 8:
                b.key = "Backspace";
                break;
            case 33:
                b.key = "PageUp";
                break;
            case 34:
                b.key = "PageDown";
                break;
            case 35:
                b.key = "End";
                break;
            case 36:
                b.key = "Home";
                break;
            case 37:
                b.key = "Left";
                break;
            case 38:
                b.key = "Up";
                break;
            case 39:
                b.key = "Right";
                break;
            case 40:
                b.key = "Down";
                break;
            case 45:
                b.key = "Insert";
                break;
            case 46:
                b.key = "Del";
                break;
            case 48:
                b.key = "0";
                break;
            case 187:
            case 61:
            case 107:
                b.key =
                    "Add";
                break;
            case 189:
            case 173:
            case 109:
                b.key = "Subtract";
                break;
            case 27:
                b.key = "Esc"
        }
        this.ca.doKeyDown();
        return 187 !== a.which && 189 !== a.which && 48 !== a.which && 107 !== a.which && 109 !== a.which && 61 !== a.which && 173 !== a.which || !0 !== a.ctrlKey ? fa(this.ca, b, a) : (a.cancelBubble = !0, a.preventDefault(), a.stopPropagation(), !1)
    };
    E.prototype.wJ = function (a) {
        if (!this.ca.isEnabled)return !1;
        var b = this.ca.Ub;
        cm(this.ca, this.ca, a, b, !1);
        b.key = String.fromCharCode(a.which);
        b.up = !0;
        switch (a.which) {
            case 8:
                b.key = "Backspace";
                break;
            case 33:
                b.key = "PageUp";
                break;
            case 34:
                b.key = "PageDown";
                break;
            case 35:
                b.key = "End";
                break;
            case 36:
                b.key = "Home";
                break;
            case 37:
                b.key = "Left";
                break;
            case 38:
                b.key = "Up";
                break;
            case 39:
                b.key = "Right";
                break;
            case 40:
                b.key = "Down";
                break;
            case 45:
                b.key = "Insert";
                break;
            case 46:
                b.key = "Del";
                break;
            case 93:
                a.preventDefault()
        }
        this.ca.doKeyUp();
        return fa(this.ca, b, a)
    };
    E.prototype.ep = function (a) {
        var b = this.Mb;
        if (null === b)return new N(0, 0);
        var c = this.Ob, d = this.Sb, b = b.getBoundingClientRect(), c = a.clientX - c / b.width * b.left;
        a = a.clientY - d / b.height * b.top;
        return null !== this.Jc ? (a = new N(c, a), gb(a, this.Jc), a) : new N(c, a)
    };
    function dm(a, b, c) {
        var d = a.Mb, e = a.Ob, g = a.Sb, h = 0, k = 0;
        null !== d && (d = d.getBoundingClientRect(), h = b.clientX - e / d.width * d.left, k = b.clientY - g / d.height * d.top);
        c.se.n(h, k);
        null !== a.Jc ? (b = D.Fb(h, k), a.Jc.Fi(b), c.ha.assign(b), D.A(b)) : c.ha.n(h, k)
    }

    function bg(a, b, c, d) {
        var e = null;
        if (void 0 !== b.targetTouches) {
            if (2 > b.targetTouches.length)return;
            e = b.targetTouches[c]
        } else if (null !== a.pj[0])e = a.pj[c]; else return;
        c = a.Mb;
        b = a.Ob;
        a = a.Sb;
        var g = 0, h = 0;
        null !== c && null !== e && (c = c.getBoundingClientRect(), g = e.clientX - b / c.width * c.left, h = e.clientY - a / c.height * c.top);
        d.n(g, h)
    }

    E.prototype.invalidateDocumentBounds = E.prototype.Ac = function () {
        this.nk || (this.nk = !0, this.Te(!0))
    };
    function nl(a) {
        a.je || Si(a);
        a.nk && $l(a, a.Mh())
    }

    E.prototype.redraw = E.prototype.Gq = function () {
        this.bd || this.je || (this.qa(), gm(this), Vl(this), this.Ac(), this.jg())
    };
    E.prototype.isUpdateRequested = function () {
        return this.cg
    };
    E.prototype.delayInitialization = function (a) {
        void 0 === a && (a = null);
        var b = this.Wa, c = b.isEnabled;
        b.Yh();
        b.isEnabled = !1;
        bj(this);
        this.vh = !1;
        b.isEnabled = c;
        null !== a && D.setTimeout(a, 1)
    };
    E.prototype.requestUpdate = E.prototype.Te = function (a) {
        void 0 === a && (a = !1);
        if (!0 !== this.cg && !(this.bd || !1 === a && this.je)) {
            this.cg = !0;
            var b = this;
            requestAnimationFrame(function () {
                b.cg && b.jg()
            })
        }
    };
    E.prototype.maybeUpdate = E.prototype.jg = function () {
        if (!this.cp || this.cg)this.cp && (this.cp = !1), bj(this)
    };
    function hm(a, b) {
        a.Wa.vf || a.bd || !a.Tm || Tl(a) || (b && Si(a), Xl(a, !1))
    }

    function bj(a) {
        if (!a.je && (a.cg = !1, null !== a.Tb)) {
            a.je = !0;
            var b = a.Wa, c = a.$z;
            if (!b.op && 0 !== c.length) {
                for (var d = c.o, e = d.length, g = 0; g < e; g++) {
                    var h = d[g];
                    im(h, !1);
                    h.K()
                }
                c.clear()
            }
            c = a.kD;
            0 < c.count && (c.each(function (a) {
                a.eC()
            }), c.clear());
            d = c = !1;
            b.vf && (d = !0, c = a.Eb, a.Eb = !0);
            b.xc || el(a);
            hm(a, !1);
            null !== a.Bd && (a.Bd.visible && !a.Wv && (jm(a), a.Wv = !0), !a.Bd.visible && a.Wv && (a.Wv = !1));
            Si(a);
            e = !1;
            if (!a.vh || a.yv)a.vh ? mm(a, !a.Ov) : (a.Zb("Initial Layout"), !1 === b.isEnabled && b.Yh(), mm(a, !1)), e = !0;
            a.Ov = !1;
            Si(a);
            a.hA || b.vf ||
            nl(a);
            hm(a, !0);
            e && (a.vh || um(a), a.Ja("LayoutCompleted"));
            Si(a);
            e && !a.vh && (a.vh = !0, a.Gd("Initial Layout"), a.Eb || a.ra.clear(), D.setTimeout(function () {
                a.Hi = !1
            }, 1));
            Jm(a);
            dl(b);
            a.Ge(a.pd);
            d && (a.Eb = c);
            a.je = !1
        }
    }

    D.w(E, {ao: null}, function () {
        return this.vh
    });
    function um(a) {
        var b = a.dc.o;
        a.Pf(b, b.length, a);
        a.Cl !== Rh ? a.scale = Yl(a, a.Cl) : a.Km !== Rh ? a.scale = Yl(a, a.Km) : (b = a.gJ, isFinite(b) && 0 < b && (a.scale = b));
        b = a.fJ;
        if (b.F())a.position = b; else {
            b = D.P();
            b.uo(a.fd, a.eJ);
            var c = a.ub, c = D.ug(0, 0, c.width, c.height), d = D.P();
            d.uo(c, a.hJ);
            d.n(b.x - d.x, b.y - d.y);
            a.position = d;
            D.Kb(c);
            D.A(d);
            D.A(b);
            gm(a);
            hm(a, !0);
            Xl(a, !0)
        }
        a.Ja("InitialLayoutCompleted");
        jm(a)
    }

    function Si(a) {
        if ((a.je || !a.Wa.vf) && 0 !== a.Hg.count) {
            for (var b = 0; 23 > b; b++) {
                var c = a.Hg.j;
                if (null === c || 0 === a.Hg.count)break;
                a.Hg = new L(F);
                a.eC(c, a.Hg);
                v && 22 === b && D.trace("failure to validate parts")
            }
            a.qg.each(function (a) {
                a instanceof I && 0 !== (a.Ca & 65536) !== !1 && (a.Ca ^= 65536)
            })
        }
    }

    E.prototype.eC = function (a, b) {
        for (a.reset(); a.next();) {
            var c = a.value;
            !c.pe() || c instanceof I || (c.wm() ? (Gk(c, Infinity, Infinity), c.rc()) : b.add(c))
        }
        for (a.reset(); a.next();)c = a.value, c instanceof I && c.isVisible() && Km(this, c);
        for (a.reset(); a.next();)c = a.value, c instanceof J && c.isVisible() && (c.wm() ? (Gk(c, Infinity, Infinity), c.rc()) : b.add(c));
        for (a.reset(); a.next();)c = a.value, c instanceof ba && c.isVisible() && (c.wm() ? (Gk(c, Infinity, Infinity), c.rc()) : b.add(c))
    };
    function Km(a, b) {
        for (var c = D.mb(), d = D.mb(), e = b.Oc; e.next();) {
            var g = e.value;
            g.isVisible() && (g instanceof I ? (Lm(g) || Mm(g) || Nm(g)) && Km(a, g) : g instanceof J ? g.Y === b || g.ba === b ? d.push(g) : c.push(g) : (Gk(g, Infinity, Infinity), g.rc()))
        }
        for (var e = c.length, h = 0; h < e; h++)g = c[h], Gk(g, Infinity, Infinity), g.rc();
        D.za(c);
        Gk(b, Infinity, Infinity);
        b.rc();
        e = d.length;
        for (h = 0; h < e; h++)g = d[h], Gk(g, Infinity, Infinity), g.rc();
        D.za(d)
    }

    E.prototype.Pf = function (a, b, c, d) {
        var e = this.Wa;
        if (this.Dl || e.vf)for (e = 0; e < b; e++)a[e].Pf(c, d)
    };
    E.prototype.Ge = function (a, b) {
        void 0 === b && (b = null);
        null === this.Tb && D.k("No div specified");
        var c = this.Mb;
        null === c && D.k("No canvas specified");
        var d = this.Wa;
        if (!d.xc && (Om(this), "0" !== this.Tb.style.opacity)) {
            var e = a !== this.pd, g = this.dc.o, h = g.length, k = this;
            this.Pf(g, h, k);
            if (e)a.De(!0), Vl(this); else if (!this.Ne && null === b && !d.ok)return;
            var h = this.sb, l = this.Cb, m = Math.round(h.x * l) / l, n = Math.round(h.y * l) / l, d = this.Jc;
            d.reset();
            1 !== l && d.scale(l);
            0 === h.x && 0 === h.y || d.translate(-m, -n);
            l = this.rd;
            D.Zn ? (c.width = c.width,
                a.De(!0), a.scale(l, l)) : (a.setTransform(1, 0, 0, 1, 0, 0), a.scale(l, l), a.clearRect(0, 0, this.Ob, this.Sb));
            a.setTransform(1, 0, 0, 1, 0, 0);
            a.scale(l, l);
            a.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
            v && v.Aj && v.mF(this, a);
            c = null !== b ? function (c) {
                var d = b;
                if (c.visible && 0 !== c.Hc) {
                    var e = c.rb.o, g = e.length;
                    if (0 !== g) {
                        1 !== c.Hc && (a.globalAlpha = c.Hc);
                        c = c.Fw;
                        c.length = 0;
                        for (var h = k.scale, l = 0; l < g; l++) {
                            var m = e[l];
                            if (sl(m) && !d.contains(m)) {
                                if (m instanceof J) {
                                    var n = m;
                                    n.ic && c.push(n);
                                    if (!1 === n.vg)continue
                                }
                                n = m.$;
                                1 < n.width * h || 1 <
                                n.height * h ? m.Ge(a, k) : ul(m, a)
                            }
                        }
                        a.globalAlpha = 1
                    }
                }
            } : function (b) {
                b.Ge(a, k)
            };
            Pm(this, a);
            h = g.length;
            for (m = 0; m < h; m++)a.setTransform(1, 0, 0, 1, 0, 0), a.scale(l, l), a.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy), c(g[m]);
           
            this.Bl ? this.Bl.Fm(this) && this.Rv() : this.ep = function () {
                return new N(0, 0)
            };
            v && (v.LA || v.Aj) && v.KA(a, this, d);
            e ? (this.pd.De(!0), Vl(this)) : this.Ne = this.Dl = !1
        }
    };
    function Qm(a, b, c, d, e) {
        null === a.Tb && D.k("No div specified");
        var g = a.Mb;
        null === g && D.k("No canvas specified");
        if (!a.Wa.xc) {
            var h = a.pd;
            if (a.Ne) {
                Om(a);
                var k = a.rd;
                D.Zn ? (g.width = g.width, h.De(!0)) : (h.setTransform(1, 0, 0, 1, 0, 0), h.clearRect(0, 0, a.Ob * k, a.Sb * k));
                h.Ky(!1);
                h.drawImage(a.zz.Vd, 0 < d ? 0 : Math.round(-d), 0 < e ? 0 : Math.round(-e));
                e = a.sb;
                var g = a.Cb, l = Math.round(e.x * g) / g, m = Math.round(e.y * g) / g;
                d = a.Jc;
                d.reset();
                1 !== g && d.scale(g);
                0 === e.x && 0 === e.y || d.translate(-l, -m);
                h.save();
                h.beginPath();
                e = c.length;
                for (g = 0; g <
                e; g++)l = c[g], 0 !== l.width && 0 !== l.height && h.rect(Math.floor(l.x), Math.floor(l.y), Math.ceil(l.width), Math.ceil(l.height));
                h.clip();
                h.setTransform(1, 0, 0, 1, 0, 0);
                h.scale(k, k);
                h.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy);
                v && v.Aj && v.mF(a, h);
                c = a.dc.o;
                e = c.length;
                a.Pf(c, e, a);
                Pm(a, h);
                for (g = 0; g < e; g++)vl(c[g], h, a, b);
                h.restore();
                h.De(!0);
                v && (v.LA || v.Aj) && v.KA(h, a, d);
                a.Bl ? a.Bl.Fm(a) && a.Rv() : a.ep = function () {
                    return new N(0, 0)
                };
                a.Dl = !1;
                a.Ne = !1;
                a.yy()
            }
        }
    }

    function Rm(a, b, c, d, e, g, h, k, l, m) {
        null === a.Tb && D.k("No div specified");
        null === a.Mb && D.k("No canvas specified");
        void 0 === h && (h = null);
        void 0 === k && (k = null);
        void 0 === l && (l = !1);
        void 0 === m && (m = !1);
        Om(a);
        a.pd.De(!0);
        Vl(a);
        a.Pz = !0;
        var n = a.Cb;
        a.Cb = e;
        var p = a.dc.o, q = p.length;
        try {
            var r = new C(g.x, g.y, d.width / e, d.height / e), s = r.copy();
            s.nx(c);
            jm(a, s);
            Si(a);
            a.Pf(p, q, a, r);
            var u = a.rd;
            b.setTransform(1, 0, 0, 1, 0, 0);
            b.scale(u, u);
            b.clearRect(0, 0, d.width, d.height);
            null !== k && "" !== k && (b.fillStyle = k, b.fillRect(0, 0, d.width, d.height));
            var t = D.Sf();
            t.reset();
            t.translate(c.left, c.top);
            t.scale(e);
            0 === g.x && 0 === g.y || t.translate(-g.x, -g.y);
            b.setTransform(t.m11, t.m12, t.m21, t.m22, t.dx, t.dy);
            D.Je(t);
            Pm(a, b);
            var z;
            if (null !== h) {
                var w = new L(F), B = h.j;
                for (B.reset(); B.next();) {
                    var A = B.value;
                    !1 === m && "Grid" === A.layer.name || null === A || w.add(A)
                }
                z = function (c) {
                    var d = l;
                    if (c.visible && 0 !== c.Hc && (void 0 === d && (d = !0), d || !c.Wc)) {
                        var d = c.rb.o, e = d.length;
                        if (0 !== e) {
                            1 !== c.Hc && (b.globalAlpha = c.Hc);
                            c = c.Fw;
                            c.length = 0;
                            for (var g = a.scale, h = 0; h < e; h++) {
                                var k = d[h];
                                if (sl(k) &&
                                    w.contains(k)) {
                                    if (k instanceof J) {
                                        var m = k;
                                        m.ic && c.push(m);
                                        if (!1 === m.vg)continue
                                    }
                                    m = k.$;
                                    1 < m.width * g || 1 < m.height * g ? k.Ge(b, a) : ul(k, b)
                                }
                            }
                            b.globalAlpha = 1
                        }
                    }
                }
            } else if (!l && m) {
                var O = a.Xn.Z, H = O.layer;
                z = function (c) {
                    c === H ? O.Ge(b, a) : c.Ge(b, a, l)
                }
            } else z = function (c) {
                c.Ge(b, a, l)
            };
            for (c = 0; c < q; c++)z(p[c]);
            a.Pz = !1;
            a.Bl ? a.Bl.Fm(a) && a.Rv() : a.ep = function () {
                return new N(0, 0)
            }
        } finally {
            a.Cb = n, a.pd.De(!0), Vl(a), a.Pf(p, q, a), jm(a)
        }
    }

    E.prototype.getRenderingHint = E.prototype.Hj = function (a) {
        return this.zk[a]
    };
    E.prototype.setRenderingHint = E.prototype.pK = function (a, b) {
        this.zk[a] = b;
        this.Gq()
    };
    E.prototype.resetRenderingHints = E.prototype.FG = function () {
        this.zk = new ka;
        this.zk.drawShadows = !0;
        this.zk.textGreeking = !0;
        this.zk.viewportOptimizations = D.YF ? !1 : !0;
        this.zk.temporaryPixelRatio = !0;
        this.zk.pictureRatioOptimization = !0
    };
    function Pm(a, b) {
        var c = a.zk;
        null !== c && (void 0 !== c.imageSmoothingEnabled && b.Ky(!!c.imageSmoothingEnabled), c = c.defaultFont, void 0 !== c && null !== c && (b.font = c))
    }

    E.prototype.getInputOption = E.prototype.su = function (a) {
        return this.lp[a]
    };
    E.prototype.setInputOption = function (a, b) {
        this.lp[a] = b
    };
    E.prototype.resetInputOptions = E.prototype.EG = function () {
        this.lp = new ka;
        this.lp.extraTouchArea = 10;
        this.lp.extraTouchThreshold = 10;
        this.lp.hasGestureZoom = !0
    };
    E.prototype.setProperties = function (a) {
        D.bv(this, a)
    };
    function Jm(a) {
        if (0 === a.ra.Zh && 0 !== a.wl.count) {
            for (; 0 < a.wl.count;) {
                var b = a.wl;
                a.wl = new ma(J, C);
                for (b = b.j; b.next();) {
                    var c = b.key;
                    Nj(c, b.value);
                    c.Se()
                }
            }
            a.qa()
        }
    }

    E.prototype.qa = function (a) {
        void 0 === a && (a = null);
        if (null === a)this.Ne = !0, this.Te(); else {
            var b = this.ub;
            null !== a && a.F() && b.hg(a) && (this.Ne = !0, this.Te())
        }
        for (b = this.Gw.j; b.next();)b.value.qa(a)
    };
    E.prototype.RF = function (a, b) {
        if (!0 !== this.Ne) {
            this.Ne = !0;
            var c = !0 === this.Hj("temporaryPixelRatio");
            if (!0 === this.Hj("viewportOptimizations") && this.GB !== Sm && this.Fy.Jx(0, 0, 0, 0) && b.width === a.width && b.height === a.height) {
                var d = this.scale, e = D.Rf(), g = Math.max(a.x, b.x), h = Math.max(a.y, b.y), k = Math.min(a.x + a.width, b.x + b.width), l = Math.min(a.y + a.height, b.y + b.height);
                e.x = g;
                e.y = h;
                e.width = Math.max(0, k - g) * d;
                e.height = Math.max(0, l - h) * d;
                if (0 < e.width && 0 < e.height) {
                    if (!this.je && (this.cg = !1, null !== this.Tb)) {
                        this.je = !0;
                        Jm(this);
                        this.fd.F() || $l(this, this.Mh());
                        var m = this.Mb;
                        if (null !== m) {
                            var n = this.rd, h = this.Ob * n, k = this.Sb * n, g = this.scale * n, d = Math.round(Math.round(b.x * g) - Math.round(a.x * g)), g = Math.round(Math.round(b.y * g) - Math.round(a.y * g)), l = this.zz, p = this.bD;
                            l.width !== h && (l.width = h);
                            l.height !== k && (l.height = k);
                            p.clearRect(0, 0, h, k);
                            var l = 190 * this.rd, q = 70 * this.rd, r = Math.max(d, 0), s = Math.max(g, 0), u = Math.floor(h - r), t = Math.floor(k - s);
                            p.Ky(!1);
                            p.drawImage(m.Vd, r, s, u, t, 0, 0, u, t);
                            this.Bl.Fm(this) && p.clearRect(0, 0, l, q);
                            var m = D.mb(), p =
                                D.mb(), t = Math.abs(d), u = Math.abs(g), z = 0 === r ? 0 : h - t, r = D.Fb(z, 0), t = D.Fb(t + z, k);
                            p.push(new C(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            var w = this.Jc;
                            w.reset();
                            w.scale(n, n);
                            1 !== this.Cb && w.scale(this.Cb);
                            n = this.sb;
                            (0 !== n.x || 0 !== n.y) && isFinite(n.x) && isFinite(n.y) && w.translate(-n.x, -n.y);
                            gb(r, w);
                            gb(t, w);
                            m.push(new C(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            z = 0 === s ? 0 : k - u;
                            r.n(0, z);
                            t.n(h, u + z);
                            p.push(new C(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x -
                                t.x), Math.abs(r.y - t.y)));
                            gb(r, w);
                            gb(t, w);
                            m.push(new C(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y)));
                            this.Bl.Fm(this) && (h = 0 < d ? 0 : -d, k = 0 < g ? 0 : -g, r.n(h, k), t.n(l + h, q + k), p.push(new C(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y))), gb(r, w), gb(t, w), m.push(new C(Math.min(r.x, t.x), Math.min(r.y, t.y), Math.abs(r.x - t.x), Math.abs(r.y - t.y))));
                            D.A(r);
                            D.A(t);
                            hm(this, !1);
                            Qm(this, m, p, d, g);
                            D.za(m);
                            D.za(p);
                            this.je = !1
                        }
                    }
                } else this.jg();
                D.Kb(e);
                c && (this.Ck = 1, this.jg(),
                    this.Ck = null, this.yy())
            } else c ? (this.Ck = 1, this.jg(), this.Ck = null, this.yy()) : this.jg()
        }
    };
    function gm(a) {
        !1 === a.Tm && (a.Tm = !0)
    }

    function Vl(a) {
        !1 === a.Dl && (a.Dl = !0)
    }

    function Om(a) {
        !1 !== a.es && (a.es = !1, Tm(a, a.Ob, a.Sb))
    }

    function Tm(a, b, c) {
        var d = a.Mb, e = a.rd, g = b * e, e = c * e;
        if (d.width !== g || d.height !== e)d.width = g, d.height = e, d.style.width = b + "px", d.style.height = c + "px", a.Ne = !0, a.pd.De(!0)
    }

    function Tl(a) {
        var b = a.Mb;
        if (null === b)return !0;
        var c = a.Tb, d = a.Ob, e = a.Sb, g = a.AE.copy();
        if (!g.F())return !0;
        var h = !1, k = a.Al ? a.Td : 0, l = a.mk ? a.Td : 0, m = c.clientWidth || d + k, c = c.clientHeight || e + l;
        if (m !== d + k || c !== e + l)a.Al = !1, a.mk = !1, l = k = 0, a.Ob = m, a.Sb = c, h = a.es = !0;
        a.Tm = !1;
        var n = a.ub, p = a.fd, q = 0, r = 0, s = 0, u = 0, m = n.width, c = n.height, t = a.Fy;
        a.AA.Vc() ? (p.width > m && (q = t.left, r = t.right), p.height > c && (s = t.top, u = t.bottom)) : (q = t.left, r = t.right, s = t.top, u = t.bottom);
        var t = p.width + q + r, z = p.height + s + u, q = p.x - q, w = n.x, r = p.right + r, B = n.right +
            k, s = p.y - s, A = n.y, u = p.bottom + u, n = n.bottom + l, O = "1px", H = "1px", p = a.scale, S = !(t < m + k), Y = !(z < c + l);
        if (a.GB !== Bl || S || Y)S && a.YA && a.Ae && (O = 1, q + 1 < w && (O = Math.max((w - q) * p + a.Ob, O)), r > B + 1 && (O = Math.max((r - B) * p + a.Ob, O)), m + k + 1 < t && (O = Math.max((t - m + k) * p + a.Ob, O)), O = O.toString() + "px"), Y && a.ZA && a.Be && (H = 1, s + 1 < A && (H = Math.max((A - s) * p + a.Sb, H)), u > n + 1 && (H = Math.max((u - n) * p + a.Sb, H)), c + l + 1 < z && (H = Math.max((z - c + l) * p + a.Sb, H)), H = H.toString() + "px");
        var S = "1px" !== O, R = "1px" !== H;
        S && R || !S && !R || (Y = !(z < c + l), R && (B -= a.Td), S && (n -= a.Td), t < m + k || !a.YA || !a.Ae || (O = 1, q + 1 < w && (O = Math.max((w - q) * p + a.Ob, O)), r > B + 1 && (O = Math.max((r - B) * p + a.Ob, O)), m + 1 < t && (O = Math.max((t - m) * p + a.Ob, O)), O = O.toString() + "px"), S = "1px" !== O, k = S !== a.mk ? a.Sb - a.Td : a.Sb, Y && a.ZA && a.Be && (H = 1, s + 1 < A && (H = Math.max((A - s) * p + k, H)), u > n + 1 && (H = Math.max((u - n) * p + k, H)), c + 1 < z && (H = Math.max((z - c) * p + k, H)), H = H.toString() + "px"), R = "1px" !== H);
        if (a.Ow && S === a.mk && R === a.Al)return d === a.Ob && e === a.Sb || a.jg(), !1;
        S !== a.mk && (a.Sb = "1px" === O ? a.Sb + a.Td : Math.max(a.Sb - a.Td, 1), h = !0);
        a.mk = S;
        a.nt.style.width = O;
        R !== a.Al &&
        (a.Ob = "1px" === H ? a.Ob + a.Td : Math.max(a.Ob - a.Td, 1), h = !0, a.js && (k = D.P(), R ? (b.style.left = a.Td + "px", a.position = k.n(a.sb.x + a.Td / a.scale, a.sb.y)) : (b.style.left = "0px", a.position = k.n(a.sb.x - a.Td / a.scale, a.sb.y)), D.A(k)));
        a.Al = R;
        a.nt.style.height = H;
        b = a.Sw;
        k = b.scrollLeft;
        a.YA && a.Ae && (m + 1 < t ? k = (a.position.x - q) * p : q + 1 < w ? k = b.scrollWidth - b.clientWidth : r > B + 1 && (k = a.position.x * p));
        if (a.js)switch (a.bA) {
            case "negative":
                k = -(b.scrollWidth - k - b.clientWidth);
                break;
            case "reverse":
                k = b.scrollWidth - k - b.clientWidth
        }
        b.scrollLeft =
            k;
        a.ZA && a.Be && (c + 1 < z ? b.scrollTop = (a.position.y - s) * p : s + 1 < A ? b.scrollTop = b.scrollHeight - b.clientHeight : u > n + 1 && (b.scrollTop = a.position.y * p));
        h && (a.es = !0);
        m = a.Ob;
        c = a.Sb;
        b.style.width = m + (a.Al ? a.Td : 0) + "px";
        b.style.height = c + (a.mk ? a.Td : 0) + "px";
        a.dA = !1;
        return d !== m || e !== c || a.Wa.xc ? (n = a.ub, a.Su(g, n, p, a.scale, h), !1) : !0
    }

    E.prototype.add = E.prototype.add = function (a) {
        D.l(a, F, E, "add:part");
        var b = a.g;
        if (b !== this) {
            null !== b && D.k("Cannot add part " + a.toString() + " to " + this.toString() + ". It is already a part of " + b.toString());
            this.br && (a.Il = "Tool");
            var c = a.Nf, b = this.mm(c);
            null === b && (b = this.mm(""));
            null === b && D.k('Cannot add a Part when unable find a Layer named "' + c + '" and there is no default Layer');
            a.layer !== b && (c = b.rq(99999999, a, a.g === this), 0 <= c && this.jd(pg, "parts", b, null, a, null, c), b.Wc || this.Ac(), a.N(Um), c = a.iy, null !==
            c && c(a, null, b))
        }
    };
    E.prototype.rq = function (a) {
        if (a instanceof G) {
            if (this.Cp.add(a), a instanceof I) {
                var b = a.Ka;
                null === b ? this.Vl.add(a) : b.fn.add(a);
                b = a.Yb;
                null !== b && (b.g = this)
            }
        } else a instanceof J ? this.wp.add(a) : a instanceof ba || this.rb.add(a);
        var c = this;
        Vm(a, function (a) {
            Wm(c, a)
        });
        (a instanceof ba || a instanceof I && null !== a.Qb) && a.K();
        b = a.data;
        null !== b && (a instanceof ba || (a instanceof J ? this.ck.add(b, a) : this.Ui.add(b, a)), Vm(a, function (a) {
            Xm(c, a)
        }));
        !0 !== Mm(a) && !0 !== Nm(a) || this.Hg.add(a);
        Ym(a, !0, this);
        Zm(a) ? (a.$.F() && this.qa(wl(a,
            a.$)), this.Ac()) : a.isVisible() && a.$.F() && this.qa(wl(a, a.$));
        this.Te()
    };
    E.prototype.uf = function (a) {
        a.$t();
        if (a instanceof G) {
            if (this.Cp.remove(a), a instanceof I) {
                var b = a.Ka;
                null === b ? this.Vl.remove(a) : b.fn.remove(a);
                b = a.Yb;
                null !== b && (b.g = null)
            }
        } else a instanceof J ? this.wp.remove(a) : a instanceof ba || this.rb.remove(a);
        var c = this;
        Vm(a, function (a) {
            $m(c, a)
        });
        b = a.data;
        null !== b && (a instanceof ba || (a instanceof J ? this.ck.remove(b) : this.Ui.remove(b)), Vm(a, function (a) {
            an(c, a)
        }));
        this.Hg.remove(a);
        Zm(a) ? (a.$.F() && this.qa(wl(a, a.$)), this.Ac()) : a.isVisible() && a.$.F() && this.qa(wl(a,
            a.$));
        this.Te()
    };
    E.prototype.remove = E.prototype.remove = function (a) {
        D.l(a, F, E, "remove:part");
        bn(this, a, !0)
    };
    function bn(a, b, c) {
        var d = b.layer;
        null !== d && d.g === a && (b.ib = !1, b.ah = !1, b.N(cn), c && b.Pn(), c = d.uf(-1, b, !1), 0 <= c && a.jd(qg, "parts", d, b, null, c, null), a = b.iy, null !== a && a(b, d, null))
    }

    E.prototype.removeParts = E.prototype.DB = function (a, b) {
        if (D.isArray(a))for (var c = D.cb(a), d = 0; d < c; d++) {
            var e = D.La(a, d);
            b && !e.canDelete() || this.remove(e)
        } else for (e = new L(F), e.Tc(a), c = e.j; c.next();)e = c.value, b && !e.canDelete() || this.remove(e)
    };
    E.prototype.copyParts = E.prototype.eq = function (a, b, c) {
        return this.xb.eq(a, b, c)
    };
    E.prototype.moveParts = E.prototype.moveParts = function (a, b, c) {
        D.l(b, N, E, "moveParts:offset");
        var d = this.nb;
        if (null !== d) {
            d = d.Fe;
            null === d && (d = new Qh, d.$c(this));
            var e = new ma(F);
            if (null !== a)a = a.j; else {
                for (a = this.Ii; a.next();)ci(d, e, a.value, c);
                for (a = this.qg; a.next();)ci(d, e, a.value, c);
                a = this.links
            }
            for (; a.next();)ci(d, e, a.value, c);
            d.moveParts(e, b, c)
        }
    };
    function dn(a, b, c) {
        D.l(b, Xg, E, "addLayer:layer");
        null !== b.g && b.g !== a && D.k("Cannot share a Layer with another Diagram: " + b + " of " + b.g);
        null === c ? null !== b.g && D.k("Cannot add an existing Layer to this Diagram again: " + b) : (D.l(c, Xg, E, "addLayer:existingLayer"), c.g !== a && D.k("Existing Layer must be in this Diagram: " + c + " not in " + c.g), b === c && D.k("Cannot move a Layer before or after itself: " + b));
        if (b.g !== a) {
            b = b.name;
            a = a.dc;
            c = a.count;
            for (var d = 0; d < c; d++)a.ea(d).name === b && D.k("Cannot add Layer with the name '" +
                b + "'; a Layer with the same name is already present in this Diagram.")
        }
    }

    E.prototype.addLayer = E.prototype.Qt = function (a) {
        dn(this, a, null);
        a.$c(this);
        var b = this.dc, c = b.count - 1;
        if (!a.Wc)for (; 0 <= c && b.ea(c).Wc;)c--;
        b.$d(c + 1, a);
        null !== this.xe && this.jd(pg, "layers", this, null, a, null, c + 1);
        this.qa();
        this.Ac()
    };
    E.prototype.addLayerBefore = E.prototype.SH = function (a, b) {
        dn(this, a, b);
        a.$c(this);
        var c = this.dc, d = c.indexOf(a);
        0 <= d && (c.remove(a), null !== this.xe && this.jd(qg, "layers", this, a, null, d, null));
        for (var e = c.count, g = 0; g < e; g++)if (c.ea(g) === b) {
            c.$d(g, a);
            break
        }
        null !== this.xe && this.jd(pg, "layers", this, null, a, null, g);
        this.qa();
        0 > d && this.Ac()
    };
    E.prototype.addLayerAfter = function (a, b) {
        dn(this, a, b);
        a.$c(this);
        var c = this.dc, d = c.indexOf(a);
        0 <= d && (c.remove(a), null !== this.xe && this.jd(qg, "layers", this, a, null, d, null));
        for (var e = c.count, g = 0; g < e; g++)if (c.ea(g) === b) {
            c.$d(g + 1, a);
            break
        }
        null !== this.xe && this.jd(pg, "layers", this, null, a, null, g + 1);
        this.qa();
        0 > d && this.Ac()
    };
    E.prototype.removeLayer = function (a) {
        D.l(a, Xg, E, "removeLayer:layer");
        a.g !== this && D.k("Cannot remove a Layer from another Diagram: " + a + " of " + a.g);
        if ("" !== a.name) {
            var b = this.dc, c = b.indexOf(a);
            if (b.remove(a)) {
                for (b = a.rb.copy().j; b.next();) {
                    var d = b.value, e = d.Nf;
                    d.Nf = e !== a.name ? e : ""
                }
                null !== this.xe && this.jd(qg, "layers", this, a, null, c, null);
                this.qa();
                this.Ac()
            }
        }
    };
    E.prototype.findLayer = E.prototype.mm = function (a) {
        for (var b = this.co; b.next();) {
            var c = b.value;
            if (c.name === a)return c
        }
        return null
    };
    E.prototype.addModelChangedListener = E.prototype.UH = function (a) {
        D.h(a, "function", E, "addModelChangedListener:listener");
        null === this.yh && (this.yh = new K("function"));
        this.yh.add(a);
        this.ga.Bn(a)
    };
    E.prototype.removeModelChangedListener = function (a) {
        D.h(a, "function", E, "removeModelChangedListener:listener");
        null !== this.yh && (this.yh.remove(a), 0 === this.yh.count && (this.yh = null));
        this.ga.Vu(a)
    };
    E.prototype.addChangedListener = E.prototype.Bn = function (a) {
        D.h(a, "function", E, "addChangedListener:listener");
        null === this.Pi && (this.Pi = new K("function"));
        this.Pi.add(a)
    };
    E.prototype.removeChangedListener = E.prototype.Vu = function (a) {
        D.h(a, "function", E, "removeChangedListener:listener");
        null !== this.Pi && (this.Pi.remove(a), 0 === this.Pi.count && (this.Pi = null))
    };
    E.prototype.wx = function (a) {
        this.Eb || this.ra.MF(a);
        a.Kc !== fg && (this.Hi = !0);
        if (null !== this.Pi) {
            var b = this.Pi, c = b.length;
            if (1 === c)b = b.ea(0), b(a); else if (0 !== c)for (var d = b.oc(), e = 0; e < c; e++)b = d[e], b(a)
        }
    };
    E.prototype.raiseChangedEvent = E.prototype.jd = function (a, b, c, d, e, g, h) {
        void 0 === g && (g = null);
        void 0 === h && (h = null);
        var k = new dg;
        k.g = this;
        k.Kc = a;
        k.propertyName = b;
        k.object = c;
        k.oldValue = d;
        k.Tj = g;
        k.newValue = e;
        k.Rj = h;
        this.wx(k)
    };
    E.prototype.raiseChanged = E.prototype.i = function (a, b, c, d, e) {
        this.jd(eg, a, this, b, c, d, e)
    };
    D.w(E, {Wa: "animationManager"}, function () {
        return this.tC
    });
    D.w(E, {ra: "undoManager"}, function () {
        return this.xe.ra
    });
    D.defineProperty(E, {Eb: "skipsUndoManager"}, function () {
        return this.tj
    }, function (a) {
        D.h(a, "boolean", E, "skipsUndoManager");
        this.tj = a;
        this.xe.tj = a
    });
    D.defineProperty(E, {HA: "delaysLayout"}, function () {
        return this.uz
    }, function (a) {
        this.uz = a
    });
    E.prototype.Hn = function (a, b) {
        if (null !== a && a.g === this) {
            var c = this.Ve;
            try {
                this.Ve = !0;
                var d = a.Kc, e;
                if (d === eg) {
                    var g = a.object, h = a.propertyName, k = a.na(b);
                    D.Ta(g, h, k);
                    if (g instanceof P) {
                        var l, m = g.Z;
                        null !== m && m.oe()
                    }
                    this.Hi = !0
                } else if (d === pg) {
                    var n = a.object, p = a.Rj, g = a.newValue;
                    if (n instanceof x)if ("number" === typeof p && g instanceof P) {
                        l = g;
                        var q = n;
                        b ? q.uf(p) : q.$d(p, l);
                        m = n.Z;
                        null !== m && m.oe()
                    } else {
                        if ("number" === typeof p && g instanceof ih) {
                            var r = g, q = n;
                            b ? r.Ke ? q.DG(p) : q.BG(p) : (e = r.Ke ? q.Yd(r.index) : q.Xd(r.index),
                                e.dq(r))
                        }
                    } else if (n instanceof Xg) {
                        var s = !0 === a.Tj;
                        if ("number" === typeof p && g instanceof F) {
                            var m = g, u = n;
                            b ? (m.ib = !1, m.ah = !1, m.oe(), u.uf(s ? p : -1, m, s)) : u.rq(p, m, s)
                        }
                    } else if (n instanceof E) {
                        if ("number" === typeof p && g instanceof Xg) {
                            var t = g;
                            b ? this.dc.kd(p) : (d = t, d.$c(this), this.dc.$d(p, d))
                        }
                    } else D.k("unknown ChangedEvent.Insert object: " + a.toString());
                    this.Hi = !0
                } else d === qg ? (n = a.object, p = a.Tj, g = a.oldValue, n instanceof x ? "number" === typeof p && g instanceof P ? (q = n, b ? q.$d(p, g) : q.uf(p)) : "number" === typeof p && g instanceof ih && (r = g, q = n, b ? (e = r.Ke ? q.Yd(r.index) : q.Xd(r.index), e.dq(r)) : r.Ke ? q.DG(p) : q.BG(p)) : n instanceof Xg ? (s = !0 === a.Rj, "number" === typeof p && g instanceof F && (m = g, u = n, b ? u.rq(p, m, s) : (m.ib = !1, m.ah = !1, m.oe(), u.uf(s ? p : -1, m, s)))) : n instanceof E ? "number" === typeof p && g instanceof Xg && (t = g, b ? (d = t, d.$c(this), this.dc.$d(p, d)) : this.dc.kd(p)) : D.k("unknown ChangedEvent.Remove object: " + a.toString()), this.Hi = !0) : d !== fg && D.k("unknown ChangedEvent: " + a.toString())
            } finally {
                this.Ve = c
            }
        }
    };
    E.prototype.startTransaction = E.prototype.Zb = function (a) {
        return this.ra.Zb(a)
    };
    E.prototype.commitTransaction = E.prototype.Gd = function (a) {
        return this.ra.Gd(a)
    };
    E.prototype.rollbackTransaction = E.prototype.Jq = function () {
        return this.ra.Jq()
    };
    E.prototype.updateAllTargetBindings = E.prototype.oH = function (a) {
        void 0 === a && (a = "");
        for (var b = this.Ii; b.next();)b.value.Nb(a);
        for (b = this.qg; b.next();)b.value.Nb(a);
        for (b = this.links; b.next();)b.value.Nb(a)
    };
    E.prototype.updateAllRelationshipsFromData = E.prototype.GK = function () {
        for (var a = this.ga, b = new L, c = a.pg, d = 0; d < c.length; d++) {
            var e = c[d];
            b.add(e)
        }
        var g = [];
        this.qg.each(function (a) {
            null === a.data || b.contains(a.data) || g.push(a.data)
        });
        this.Ii.each(function (a) {
            null === a.data || b.contains(a.data) || g.push(a.data)
        });
        g.forEach(function (b) {
            dh(a, b, !1)
        });
        for (d = 0; d < c.length; d++) {
            var e = c[d], h = this.Ph(e);
            null === h && ch(a, e, !1)
        }
        if (a instanceof X) {
            for (var k = new L, c = a.bh, d = 0; d < c.length; d++)e = c[d], k.add(e);
            var l = [];
            this.links.each(function (a) {
                null ===
                a.data || k.contains(a.data) || l.push(a.data)
            });
            l.forEach(function (b) {
                nh(a, b, !1)
            });
            for (d = 0; d < c.length; d++)e = c[d], h = this.fg(e), null === h && mh(a, e, !1)
        }
        for (d = this.Ii; d.next();)h = d.value, h.updateRelationshipsFromData();
        for (d = this.qg; d.next();)d.value.updateRelationshipsFromData();
        for (d = this.links; d.next();)h = d.value, h.updateRelationshipsFromData()
    };
    function en(a, b, c) {
        if (a.bd || a.je)a.Cb = c, c = a.Wa, c.xc && rl(c, b, a.Cb); else if (a.bd = !0, null === a.Mb)a.Cb = c; else {
            var d = a.ub.copy(), e = a.Ob, g = a.Sb;
            d.width = a.Ob / b;
            d.height = a.Sb / b;
            var h = a.Gm.x, k = a.Gm.y, l = a.AA;
            isNaN(h) && (l.Mj() ? l.Jj(wc) ? h = 0 : l.Jj(xc) && (h = e - 1) : h = l.Vc() ? l.x * (e - 1) : e / 2);
            isNaN(k) && (l.Mj() ? l.Jj(vc) ? k = 0 : l.Jj(Bc) && (k = g - 1) : k = l.Vc() ? l.y * (g - 1) : g / 2);
            null !== a.OG && (c = a.OG(a, c));
            c < a.Sh && (c = a.Sh);
            c > a.Rh && (c = a.Rh);
            e = D.Fb(a.sb.x + h / b - h / c, a.sb.y + k / b - k / c);
            a.position = e;
            D.A(e);
            a.Cb = c;
            a.Su(d, a.ub, b, c, !1);
            a.bd = !1;
            Xl(a,
                !1);
            c = a.Wa;
            c.xc && rl(c, b, a.Cb);
            a.qa();
            gm(a)
        }
    }

    E.prototype.Su = function (a, b, c, d, e) {
        a.O(b) || (void 0 === e && (e = !1), e || gm(this), Vl(this), d = this.Yb, null === d || !d.ey || this.dm !== Rh || e || a.width === b.width && a.height === b.height || d.N(), d = this.hb, !0 === this.Vm && d instanceof Lh && (this.U.ha = this.bC(this.U.se), Wk(d, this)), this.bd || this.RF(a, b), jm(this), this.Hh.scale = c, this.Hh.position.x = a.x, this.Hh.position.y = a.y, this.Hh.bounds.set(a), this.Hh.isScroll = e, this.Ja("ViewportBoundsChanged", this.Hh, a), this.gB && this.links.each(function (a) {
            a.Kj && a.$.hg(b) && a.hc()
        }))
    };
    function jm(a, b) {
        void 0 === b && (b = null);
        var c = a.Bd;
        if (null !== c && c.visible) {
            for (var d = D.Dm(), e = 1, g = 1, h = c.ya.o, k = h.length, l = 0; l < k; l++) {
                var m = h[l], n = m.interval;
                2 > n || (fn(m.Jb) ? g = g * n / Xe(g, n) : e = e * n / Xe(e, n))
            }
            h = c.Sx;
            d.n(g * h.width, e * h.height);
            h = g = l = k = 0;
            if (null !== b)k = b.width, l = b.height, g = b.x, h = b.y; else {
                e = D.Rf();
                g = a.ub;
                e.n(g.x, g.y, g.width, g.height);
                for (h = a.Gw.j; h.next();)g = h.value.ub, g.F() && Rb(e, g.x, g.y, g.width, g.height);
                if (!e.F()) {
                    D.Kb(e);
                    return
                }
                k = e.width;
                l = e.height;
                g = e.x;
                h = e.y;
                D.Kb(e)
            }
            c.width = k + 2 * d.width;
            c.height =
                l + 2 * d.height;
            e = D.P();
            fb(g, h, 0, 0, d.width, d.height, e);
            e.offset(-d.width, -d.height);
            D.Tk(d);
            c.Z.location = e;
            D.A(e)
        }
    }

    E.prototype.clearSelection = E.prototype.yx = function () {
        var a = 0 < this.selection.count;
        a && this.Ja("ChangingSelection");
        Ph(this);
        a && this.Ja("ChangedSelection")
    };
    function Ph(a) {
        a = a.selection;
        if (0 < a.count) {
            for (var b = a.oc(), c = b.length, d = 0; d < c; d++)b[d].ib = !1;
            a.Xa();
            a.clear();
            a.freeze()
        }
    }

    E.prototype.select = E.prototype.select = function (a) {
        null !== a && (D.l(a, F, E, "select:part"), a.layer.g === this && (!a.ib || 1 < this.selection.count) && (this.Ja("ChangingSelection"), Ph(this), a.ib = !0, this.Ja("ChangedSelection")))
    };
    E.prototype.selectCollection = E.prototype.SG = function (a) {
        this.Ja("ChangingSelection");
        Ph(this);
        if (D.isArray(a))for (var b = D.cb(a), c = 0; c < b; c++) {
            var d = D.La(a, c);
            d instanceof F || D.k("Diagram.selectCollection given something that is not a Part: " + d);
            d.ib = !0
        } else for (a = a.j; a.next();)d = a.value, d instanceof F || D.k("Diagram.selectCollection given something that is not a Part: " + d), d.ib = !0;
        this.Ja("ChangedSelection")
    };
    E.prototype.clearHighlighteds = E.prototype.bI = function () {
        var a = this.tm;
        if (0 < a.count) {
            for (var b = a.oc(), c = b.length, d = 0; d < c; d++)b[d].ah = !1;
            a.Xa();
            a.clear();
            a.freeze()
        }
    };
    E.prototype.highlight = function (a) {
        null !== a && a.layer.g === this && (D.l(a, F, E, "highlight:part"), !a.ah || 1 < this.tm.count) && (this.bI(), a.ah = !0)
    };
    E.prototype.highlightCollection = function (a) {
        for (var b = (new L(F)).Tc(a), c = this.tm.copy().Ay(b).j; c.next();)a = c.value, a.ah = !1;
        for (b = b.j; b.next();)a = b.value, a instanceof F || D.k("Diagram.highlightCollection given something that is not a Part: " + a), a.ah = !0
    };
    E.prototype.scroll = E.prototype.scroll = function (a, b, c) {
        void 0 === c && (c = 1);
        var d = "up" === b || "down" === b, e = 0;
        if ("pixel" === a)e = c; else if ("line" === a)e = c * (d ? this.av : this.$u); else if ("page" === a)a = d ? this.ub.height : this.ub.width, a *= this.scale, 0 !== a && (e = Math.max(a - (d ? this.av : this.$u), 0), e *= c); else {
            if ("document" === a) {
                e = this.fd;
                d = this.ub;
                c = D.P();
                "up" === b ? this.position = c.n(d.x, e.y) : "left" === b ? this.position = c.n(e.x, d.y) : "down" === b ? this.position = c.n(d.x, e.bottom - d.height) : "right" === b && (this.position = c.n(e.right - d.width,
                    d.y));
                D.A(c);
                return
            }
            D.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: " + a)
        }
        e /= this.scale;
        c = this.position.copy();
        "up" === b ? c.y = this.position.y - e : "down" === b ? c.y = this.position.y + e : "left" === b ? c.x = this.position.x - e : "right" === b ? c.x = this.position.x + e : D.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: " + b);
        this.position = c
    };
    E.prototype.scrollToRect = E.prototype.PG = function (a) {
        var b = this.ub;
        b.Ok(a) || (a = a.em, a.x -= b.width / 2, a.y -= b.height / 2, this.position = a)
    };
    E.prototype.centerRect = E.prototype.SE = function (a) {
        var b = this.ub;
        a = a.em;
        a.x -= b.width / 2;
        a.y -= b.height / 2;
        this.position = a
    };
    E.prototype.transformDocToView = E.prototype.aC = function (a) {
        var b = this.Jc;
        b.reset();
        1 !== this.Cb && b.scale(this.Cb);
        var c = this.sb;
        (0 !== c.x || 0 !== c.y) && isFinite(c.x) && isFinite(c.y) && b.translate(-c.x, -c.y);
        return a.copy().transform(this.Jc)
    };
    E.prototype.transformViewToDoc = E.prototype.bC = function (a) {
        var b = this.Jc;
        b.reset();
        1 !== this.Cb && b.scale(this.Cb);
        var c = this.sb;
        (0 !== c.x || 0 !== c.y) && isFinite(c.x) && isFinite(c.y) && b.translate(-c.x, -c.y);
        return gb(a.copy(), this.Jc)
    };
    var Rh;
    E.None = Rh = D.s(E, "None", 0);
    var am;
    E.Uniform = am = D.s(E, "Uniform", 1);
    var bm;
    E.UniformToFill = bm = D.s(E, "UniformToFill", 2);
    var fj;
    E.CycleAll = fj = D.s(E, "CycleAll", 10);
    var jj;
    E.CycleNotDirected = jj = D.s(E, "CycleNotDirected", 11);
    var lj;
    E.CycleNotDirectedFast = lj = D.s(E, "CycleNotDirectedFast", 12);
    var mj;
    E.CycleNotUndirected = mj = D.s(E, "CycleNotUndirected", 13);
    var gj;
    E.CycleDestinationTree = gj = D.s(E, "CycleDestinationTree", 14);
    var ij;
    E.CycleSourceTree = ij = D.s(E, "CycleSourceTree", 15);
    var Bl;
    E.DocumentScroll = Bl = D.s(E, "DocumentScroll", 1);
    var Sm;
    E.InfiniteScroll = Sm = D.s(E, "InfiniteScroll", 2);
    var Dl;
    E.TreeParentCollapsed = Dl = D.s(E, "TreeParentCollapsed", 21);
    var gn;
    E.AllParentsCollapsed = gn = D.s(E, "AllParentsCollapsed", 22);
    var hn;
    E.AnyParentsCollapsed = hn = D.s(E, "AnyParentsCollapsed", 23);
    D.defineProperty(E, {HK: "validCycle"}, function () {
        return this.ix
    }, function (a) {
        var b = this.ix;
        b !== a && (D.Da(a, E, E, "validCycle"), this.ix = a, this.i("validCycle", b, a))
    });
    D.w(E, {co: "layers"}, function () {
        return this.dc.j
    });
    D.defineProperty(E, {Kf: "isModelReadOnly"}, function () {
        var a = this.xe;
        return null === a ? !1 : a.qb
    }, function (a) {
        var b = this.xe;
        null !== b && (b.qb = a)
    });
    D.defineProperty(E, {qb: "isReadOnly"}, function () {
        return this.bj
    }, function (a) {
        var b = this.bj;
        b !== a && (D.h(a, "boolean", E, "isReadOnly"), this.bj = a, this.i("isReadOnly", b, a))
    });
    D.defineProperty(E, {isEnabled: "isEnabled"}, function () {
        return this.of
    }, function (a) {
        var b = this.of;
        b !== a && (D.h(a, "boolean", E, "isEnabled"), this.of = a, this.i("isEnabled", b, a))
    });
    D.defineProperty(E, {tA: "allowClipboard"}, function () {
        return this.pv
    }, function (a) {
        var b = this.pv;
        b !== a && (D.h(a, "boolean", E, "allowClipboard"), this.pv = a, this.i("allowClipboard", b, a))
    });
    D.defineProperty(E, {Lk: "allowCopy"}, function () {
        return this.gl
    }, function (a) {
        var b = this.gl;
        b !== a && (D.h(a, "boolean", E, "allowCopy"), this.gl = a, this.i("allowCopy", b, a))
    });
    D.defineProperty(E, {Cn: "allowDelete"}, function () {
        return this.hl
    }, function (a) {
        var b = this.hl;
        b !== a && (D.h(a, "boolean", E, "allowDelete"), this.hl = a, this.i("allowDelete", b, a))
    });
    D.defineProperty(E, {Vt: "allowDragOut"}, function () {
        return this.qv
    }, function (a) {
        var b = this.qv;
        b !== a && (D.h(a, "boolean", E, "allowDragOut"), this.qv = a, this.i("allowDragOut", b, a))
    });
    D.defineProperty(E, {LE: "allowDrop"}, function () {
        return this.rv
    }, function (a) {
        var b = this.rv;
        b !== a && (D.h(a, "boolean", E, "allowDrop"), this.rv = a, this.i("allowDrop", b, a))
    });
    D.defineProperty(E, {tx: "allowTextEdit"}, function () {
        return this.ql
    }, function (a) {
        var b = this.ql;
        b !== a && (D.h(a, "boolean", E, "allowTextEdit"), this.ql = a, this.i("allowTextEdit", b, a))
    });
    D.defineProperty(E, {px: "allowGroup"}, function () {
        return this.il
    }, function (a) {
        var b = this.il;
        b !== a && (D.h(a, "boolean", E, "allowGroup"), this.il = a, this.i("allowGroup", b, a))
    });
    D.defineProperty(E, {ux: "allowUngroup"}, function () {
        return this.rl
    }, function (a) {
        var b = this.rl;
        b !== a && (D.h(a, "boolean", E, "allowUngroup"), this.rl = a, this.i("allowUngroup", b, a))
    });
    D.defineProperty(E, {Yp: "allowInsert"}, function () {
        return this.tv
    }, function (a) {
        var b = this.tv;
        b !== a && (D.h(a, "boolean", E, "allowInsert"), this.tv = a, this.i("allowInsert", b, a))
    });
    D.defineProperty(E, {Wt: "allowLink"}, function () {
        return this.jl
    }, function (a) {
        var b = this.jl;
        b !== a && (D.h(a, "boolean", E, "allowLink"), this.jl = a, this.i("allowLink", b, a))
    });
    D.defineProperty(E, {Dn: "allowRelink"}, function () {
        return this.ll
    }, function (a) {
        var b = this.ll;
        b !== a && (D.h(a, "boolean", E, "allowRelink"), this.ll = a, this.i("allowRelink", b, a))
    });
    D.defineProperty(E, {am: "allowMove"}, function () {
        return this.kl
    }, function (a) {
        var b = this.kl;
        b !== a && (D.h(a, "boolean", E, "allowMove"), this.kl = a, this.i("allowMove", b, a))
    });
    D.defineProperty(E, {qx: "allowReshape"}, function () {
        return this.ml
    }, function (a) {
        var b = this.ml;
        b !== a && (D.h(a, "boolean", E, "allowReshape"), this.ml = a, this.i("allowReshape", b, a))
    });
    D.defineProperty(E, {Xt: "allowResize"}, function () {
        return this.nl
    }, function (a) {
        var b = this.nl;
        b !== a && (D.h(a, "boolean", E, "allowResize"), this.nl = a, this.i("allowResize", b, a))
    });
    D.defineProperty(E, {sx: "allowRotate"}, function () {
        return this.ol
    }, function (a) {
        var b = this.ol;
        b !== a && (D.h(a, "boolean", E, "allowRotate"), this.ol = a, this.i("allowRotate", b, a))
    });
    D.defineProperty(E, {Ef: "allowSelect"}, function () {
        return this.pl
    }, function (a) {
        var b = this.pl;
        b !== a && (D.h(a, "boolean", E, "allowSelect"), this.pl = a, this.i("allowSelect", b, a))
    });
    D.defineProperty(E, {ME: "allowUndo"}, function () {
        return this.uv
    }, function (a) {
        var b = this.uv;
        b !== a && (D.h(a, "boolean", E, "allowUndo"), this.uv = a, this.i("allowUndo", b, a))
    });
    D.defineProperty(E, {vx: "allowZoom"}, function () {
        return this.wv
    }, function (a) {
        var b = this.wv;
        b !== a && (D.h(a, "boolean", E, "allowZoom"), this.wv = a, this.i("allowZoom", b, a))
    });
    D.defineProperty(E, {ZA: "hasVerticalScrollbar"}, function () {
        return this.$v
    }, function (a) {
        var b = this.$v;
        b !== a && (D.h(a, "boolean", E, "hasVerticalScrollbar"), this.$v = a, gm(this), this.qa(), this.i("hasVerticalScrollbar", b, a), Xl(this, !1))
    });
    D.defineProperty(E, {YA: "hasHorizontalScrollbar"}, function () {
        return this.Zv
    }, function (a) {
        var b = this.Zv;
        b !== a && (D.h(a, "boolean", E, "hasHorizontalScrollbar"), this.Zv = a, gm(this), this.qa(), this.i("hasHorizontalScrollbar", b, a), Xl(this, !1))
    });
    D.defineProperty(E, {Ae: "allowHorizontalScroll"}, function () {
        return this.sv
    }, function (a) {
        var b = this.sv;
        b !== a && (D.h(a, "boolean", E, "allowHorizontalScroll"), this.sv = a, this.i("allowHorizontalScroll", b, a), Xl(this, !1))
    });
    D.defineProperty(E, {Be: "allowVerticalScroll"}, function () {
        return this.vv
    }, function (a) {
        var b = this.vv;
        b !== a && (D.h(a, "boolean", E, "allowVerticalScroll"), this.vv = a, this.i("allowVerticalScroll", b, a), Xl(this, !1))
    });
    D.defineProperty(E, {$u: "scrollHorizontalLineChange"}, function () {
        return this.Pw
    }, function (a) {
        var b = this.Pw;
        b !== a && (D.h(a, "number", E, "scrollHorizontalLineChange"), 0 > a && D.ua(a, ">= 0", E, "scrollHorizontalLineChange"), this.Pw = a, this.i("scrollHorizontalLineChange", b, a))
    });
    D.defineProperty(E, {av: "scrollVerticalLineChange"}, function () {
        return this.Tw
    }, function (a) {
        var b = this.Tw;
        b !== a && (D.h(a, "number", E, "scrollVerticalLineChange"), 0 > a && D.ua(a, ">= 0", E, "scrollVerticalLineChange"), this.Tw = a, this.i("scrollVerticalLineChange", b, a))
    });
    D.defineProperty(E, {U: "lastInput"}, function () {
        return this.Ub
    }, function (a) {
        v && D.l(a, ag, E, "lastInput");
        this.Ub = a
    });
    D.defineProperty(E, {Lc: "firstInput"}, function () {
        return this.$i
    }, function (a) {
        v && D.l(a, ag, E, "firstInput");
        this.$i = a
    });
    D.defineProperty(E, {mc: "currentCursor"}, function () {
        return this.Hv
    }, function (a) {
        "" === a && (a = this.Gr);
        var b = this.Hv;
        if (b !== a) {
            D.h(a, "string", E, "currentCursor");
            var c = this.Mb, d = this.Tb;
            null !== c && (this.Hv = a, c.style.cursor = a, d.style.cursor = a, c.style.cursor === b && (c.style.cursor = "-webkit-" + a, d.style.cursor = "-webkit-" + a, c.style.cursor === b && (c.style.cursor = "-moz-" + a, d.style.cursor = "-moz-" + a, c.style.cursor === b && (c.style.cursor = a, d.style.cursor = a))))
        }
    });
    D.defineProperty(E, {sL: "defaultCursor"}, function () {
        return this.Gr
    }, function (a) {
        "" === a && (a = "auto");
        var b = this.Gr;
        b !== a && (D.h(a, "string", E, "defaultCursor"), this.Gr = a, this.i("defaultCursor", b, a))
    });
    D.defineProperty(E, {click: "click"}, function () {
        return this.Qi
    }, function (a) {
        var b = this.Qi;
        b !== a && (null !== a && D.h(a, "function", E, "click"), this.Qi = a, this.i("click", b, a))
    });
    D.defineProperty(E, {eu: "doubleClick"}, function () {
        return this.Xi
    }, function (a) {
        var b = this.Xi;
        b !== a && (null !== a && D.h(a, "function", E, "doubleClick"), this.Xi = a, this.i("doubleClick", b, a))
    });
    D.defineProperty(E, {BA: "contextClick"}, function () {
        return this.Si
    }, function (a) {
        var b = this.Si;
        b !== a && (null !== a && D.h(a, "function", E, "contextClick"), this.Si = a, this.i("contextClick", b, a))
    });
    D.defineProperty(E, {rB: "mouseOver"}, function () {
        return this.lj
    }, function (a) {
        var b = this.lj;
        b !== a && (null !== a && D.h(a, "function", E, "mouseOver"), this.lj = a, this.i("mouseOver", b, a))
    });
    D.defineProperty(E, {qB: "mouseHover"}, function () {
        return this.kj
    }, function (a) {
        var b = this.kj;
        b !== a && (null !== a && D.h(a, "function", E, "mouseHover"), this.kj = a, this.i("mouseHover", b, a))
    });
    D.defineProperty(E, {pB: "mouseHold"}, function () {
        return this.jj
    }, function (a) {
        var b = this.jj;
        b !== a && (null !== a && D.h(a, "function", E, "mouseHold"), this.jj = a, this.i("mouseHold", b, a))
    });
    D.defineProperty(E, {SJ: "mouseDragOver"}, function () {
        return this.zw
    }, function (a) {
        var b = this.zw;
        b !== a && (null !== a && D.h(a, "function", E, "mouseDragOver"), this.zw = a, this.i("mouseDragOver", b, a))
    });
    D.defineProperty(E, {oB: "mouseDrop"}, function () {
        return this.ij
    }, function (a) {
        var b = this.ij;
        b !== a && (null !== a && D.h(a, "function", E, "mouseDrop"), this.ij = a, this.i("mouseDrop", b, a))
    });
    D.defineProperty(E, {XB: "toolTip"}, function () {
        return this.uj
    }, function (a) {
        var b = this.uj;
        b !== a && (!v || null === a || a instanceof ba || a instanceof gk || D.k("Diagram.toolTip must be an Adornment or HTMLInfo."), this.uj = a, this.i("toolTip", b, a))
    });
    D.defineProperty(E, {contextMenu: "contextMenu"}, function () {
        return this.Ti
    }, function (a) {
        var b = this.Ti;
        b !== a && (!v || a instanceof ba || a instanceof gk || D.k("Diagram.contextMenu must be an Adornment or HTMLInfo."), this.Ti = a, this.i("contextMenu", b, a))
    });
    D.defineProperty(E, {xb: "commandHandler"}, function () {
        return this.mz
    }, function (a) {
        var b = this.mz;
        b !== a && (D.l(a, oa, E, "commandHandler"), null !== a.g && D.k("Cannot share CommandHandlers between Diagrams: " + a.toString()), null !== b && b.$c(null), this.mz = a, a.$c(this))
    });
    D.defineProperty(E, {nb: "toolManager"}, function () {
        return this.mA
    }, function (a) {
        var b = this.mA;
        b !== a && (D.l(a, Lh, E, "toolManager"), null !== a.g && D.k("Cannot share ToolManagers between Diagrams: " + a.toString()), null !== b && b.$c(null), this.mA = a, a.$c(this))
    });
    D.defineProperty(E, {du: "defaultTool"}, function () {
        return this.sz
    }, function (a) {
        var b = this.sz;
        b !== a && (D.l(a, Yg, E, "defaultTool"), this.sz = a, this.hb === b && (this.hb = a))
    });
    D.defineProperty(E, {hb: "currentTool"}, function () {
        return this.pz
    }, function (a) {
        var b = this.pz;
        null !== b && (b.wa && b.doDeactivate(), b.cancelWaitAfter(), b.doStop());
        null === a && (a = this.du);
        null !== a && (D.l(a, Yg, E, "currentTool"), this.pz = a, a.$c(this), a.doStart())
    });
    D.w(E, {selection: "selection"}, function () {
        return this.Ww
    });
    D.defineProperty(E, {JJ: "maxSelectionCount"}, function () {
        return this.uw
    }, function (a) {
        var b = this.uw;
        if (b !== a)if (D.h(a, "number", E, "maxSelectionCount"), 0 <= a && !isNaN(a)) {
            if (this.uw = a, this.i("maxSelectionCount", b, a), !this.ra.jb && (a = this.selection.count - a, 0 < a)) {
                this.Ja("ChangingSelection");
                for (var b = this.selection.oc(), c = 0; c < a; c++)b[c].ib = !1;
                this.Ja("ChangedSelection")
            }
        } else D.ua(a, ">= 0", E, "maxSelectionCount")
    });
    D.defineProperty(E, {UJ: "nodeSelectionAdornmentTemplate"}, function () {
        return this.Aw
    }, function (a) {
        var b = this.Aw;
        b !== a && (D.l(a, ba, E, "nodeSelectionAdornmentTemplate"), this.Aw = a, this.i("nodeSelectionAdornmentTemplate", b, a))
    });
    D.defineProperty(E, {ZI: "groupSelectionAdornmentTemplate"}, function () {
        return this.Xv
    }, function (a) {
        var b = this.Xv;
        b !== a && (D.l(a, ba, E, "groupSelectionAdornmentTemplate"), this.Xv = a, this.i("groupSelectionAdornmentTemplate", b, a))
    });
    D.defineProperty(E, {DJ: "linkSelectionAdornmentTemplate"}, function () {
        return this.pw
    }, function (a) {
        var b = this.pw;
        b !== a && (D.l(a, ba, E, "linkSelectionAdornmentTemplate"), this.pw = a, this.i("linkSelectionAdornmentTemplate", b, a))
    });
    D.w(E, {tm: "highlighteds"}, function () {
        return this.aw
    });
    D.defineProperty(E, {Hi: "isModified"}, function () {
        var a = this.ra;
        return a.isEnabled ? null !== a.Dj ? !0 : this.hw && this.uh !== a.Ij : this.hw
    }, function (a) {
        if (this.hw !== a) {
            D.h(a, "boolean", E, "isModified");
            this.hw = a;
            var b = this.ra;
            !a && b.isEnabled && (this.uh = b.Ij);
            a || jn(this)
        }
    });
    function jn(a) {
        var b = a.Hi;
        a.BE !== b && (a.BE = b, a.Ja("Modified"))
    }

    D.defineProperty(E, {ga: "model"}, function () {
        return this.xe
    }, function (a) {
        var b = this.xe;
        if (b !== a) {
            D.l(a, M, E, "model");
            this.hb.doCancel();
            null !== b && b.ra !== a.ra && b.ra.ZF && D.k("Do not replace a Diagram.model while a transaction is in progress.");
            this.Wa.Yh();
            this.yx();
            this.vh = !1;
            this.cp = !0;
            this.uh = -2;
            this.cg = !1;
            var c = this.je;
            this.je = !0;
            this.Wa.qo("Model");
            null !== b && (null !== this.yh && this.yh.each(function (a) {
                b.Vu(a)
            }), b.Vu(this.GD), b instanceof X && kn(this, b.bh), kn(this, b.pg));
            this.xe = a;
            a.Bn(this.FD);
            ln(this,
                a.pg);
            a instanceof X && mn(this, a.bh);
            a.Vu(this.FD);
            a.Bn(this.GD);
            null !== this.yh && this.yh.each(function (b) {
                a.Bn(b)
            });
            this.je = c;
            this.bd || this.qa();
            null !== b && (a.ra.isEnabled = b.ra.isEnabled)
        }
    });
    D.defineProperty(E, {$a: null}, function () {
        return this.xD
    }, function (a) {
        this.xD = a
    });
    D.w(E, {ly: null}, function () {
        return this.AH
    });
    function Fl(a, b) {
        if (b.ga === a.ga) {
            var c = b.Kc, d = b.propertyName;
            if (c === fg && "S" === d[0])if ("StartingFirstTransaction" === d)c = a.nb, c.nf.each(function (b) {
                b.$c(a)
            }), c.lg.each(function (b) {
                b.$c(a)
            }), c.mg.each(function (b) {
                b.$c(a)
            }), a.je || a.vh || (a.Ov = !0, a.cp && (a.cg = !0)); else if ("StartingUndo" === d || "StartingRedo" === d) {
                var e = a.Wa;
                e.vf && !a.Eb && e.Yh();
                a.Ja("ChangingSelection")
            } else"StartedTransaction" === d && (e = a.Wa, e.vf && !a.Eb && e.Yh()); else if (a.$a) {
                a.$a = !1;
                try {
                    var g = b.yf;
                    if ("" !== g)if (c === eg) {
                        if ("linkFromKey" === g) {
                            var h =
                                b.object, k = a.fg(h);
                            if (null !== k) {
                                var l = b.newValue, m = a.Re(l);
                                k.Y = m
                            }
                        } else if ("linkToKey" === g)h = b.object, k = a.fg(h), null !== k && (l = b.newValue, m = a.Re(l), k.ba = m); else if ("linkFromPortId" === g) {
                            if (h = b.object, k = a.fg(h), null !== k) {
                                var n = b.newValue;
                                "string" === typeof n && (k.gg = n)
                            }
                        } else if ("linkToPortId" === g)h = b.object, k = a.fg(h), null !== k && (n = b.newValue, "string" === typeof n && (k.mh = n)); else if ("nodeGroupKey" === g) {
                            var h = b.object, p = a.Ph(h);
                            if (null !== p) {
                                var q = b.newValue;
                                if (void 0 !== q) {
                                    var r = a.Re(q);
                                    p.Ka = r instanceof I ? r :
                                        null
                                } else p.Ka = null
                            }
                        } else if ("linkLabelKeys" === g) {
                            if (h = b.object, k = a.fg(h), null !== k) {
                                var s = b.oldValue, u = b.newValue;
                                if (D.isArray(s))for (var t = D.cb(s), z = 0; z < t; z++) {
                                    var w = D.La(s, z), m = a.Re(w);
                                    null !== m && (m.Xb = null)
                                }
                                if (D.isArray(u))for (t = D.cb(u), z = 0; z < t; z++)w = D.La(u, z), m = a.Re(w), null !== m && (m.Xb = k)
                            }
                        } else if ("nodeParentKey" === g) {
                            var B = b.object, A = a.Re(b.newValue), O = a.Nx(B);
                            if (null !== O) {
                                var H = O.Sn();
                                null !== H ? null === A ? a.remove(H) : a.ce ? H.Y = A : H.ba = A : nn(a, A, O)
                            }
                        } else if ("parentLinkCategory" === g) {
                            var B = b.object, O =
                                a.Nx(B), S = b.newValue;
                            null !== O && "string" === typeof S && (H = O.Sn(), null !== H && (H.Fd = S))
                        } else if ("nodeCategory" === g) {
                            var h = b.object, Y = a.Ph(h), S = b.newValue;
                            null !== Y && "string" === typeof S && (Y.Fd = S)
                        } else if ("linkCategory" === g) {
                            var h = b.object, R = a.fg(h), S = b.newValue;
                            null !== R && "string" === typeof S && (R.Fd = S)
                        } else if ("nodeDataArray" === g) {
                            var da = b.oldValue;
                            kn(a, da);
                            var ia = b.newValue;
                            ln(a, ia)
                        } else"linkDataArray" === g && (da = b.oldValue, kn(a, da), ia = b.newValue, mn(a, ia));
                        a.Hi = !0
                    } else c === pg ? (ia = b.newValue, "nodeDataArray" ===
                    g && D.Sa(ia) ? on(a, ia) : "linkDataArray" === g && D.Sa(ia) ? pn(a, ia) : "linkLabelKeys" === g && bh(ia) && (k = a.fg(b.object), m = a.Re(ia), null !== k && null !== m && (m.Xb = k)), a.Hi = !0) : c === qg ? (da = b.oldValue, "nodeDataArray" === g && D.Sa(da) ? qn(a, da) : "linkDataArray" === g && D.Sa(da) ? qn(a, da) : "linkLabelKeys" === g && bh(da) && (m = a.Re(da), null !== m && (m.Xb = null)), a.Hi = !0) : c === fg && ("SourceChanged" === g ? null !== b.object ? El(a, b.object, b.propertyName) : (a.GK(), a.oH()) : "ModelDisplaced" === g && a.xm()); else if (c === eg) {
                        var V = b.propertyName, h = b.object;
                        if (h ===
                            a.ga) {
                            if ("nodeKeyProperty" === V || "nodeCategoryProperty" === V || "linkFromKeyProperty" === V || "linkToKeyProperty" === V || "linkFromPortIdProperty" === V || "linkToPortIdProperty" === V || "linkLabelKeysProperty" === V || "nodeIsGroupProperty" === V || "nodeGroupKeyProperty" === V || "nodeParentKeyProperty" === V || "linkCategoryProperty" === V)a.ra.jb || a.xm()
                        } else El(a, h, V);
                        a.Hi = !0
                    } else if (c === pg || c === qg)rn(a, b), a.Hi = !0; else if (c === fg) {
                        if ("FinishedUndo" === d || "FinishedRedo" === d)a.ra.Wf = !0, a.Ja("ChangedSelection"), Si(a), a.ra.Wf = !1;
                        e =
                            a.Wa;
                        "RolledBackTransaction" === d && e.Yh();
                        a.Ov = !0;
                        a.jg();
                        0 === a.ra.Zh && dl(e);
                        "CommittedTransaction" === d && a.ra.Rz && (a.uh = Math.min(a.uh, a.ra.Ij - 1));
                        var Ua = b.cG;
                        Ua && (jn(a), a.ly.clear());
                        !a.Xz && Ua && (a.Xz = !0, D.setTimeout(function () {
                            a.hb.standardMouseOver();
                            a.Xz = !1
                        }, 10))
                    }
                } finally {
                    a.$a = !0
                }
            }
        }
    }

    function El(a, b, c) {
        if ("string" === typeof c) {
            var d = a.Ph(b);
            if (null !== d)d.Nb(c), a.ga instanceof zg && (d = a.fg(b), null !== d && d.Nb(c)); else {
                for (var d = null, e = a.Xm.j; e.next();) {
                    for (var g = e.value, h = 0; h < g.length; h++) {
                        var k = g[h].JI(b);
                        null !== k && (null === d && (d = D.mb()), d.push(k))
                    }
                    if (null !== d)break
                }
                if (null !== d) {
                    for (e = 0; e < d.length; e++)d[e].Nb(c);
                    D.za(d)
                }
            }
            b === a.ga.al && a.oH(c)
        }
    }

    D.defineProperty(E, {Ve: "skipsModelSourceBindings"}, function () {
        return this.cE
    }, function (a) {
        this.cE = a
    });
    D.defineProperty(E, {fv: null}, function () {
        return this.hA
    }, function (a) {
        this.hA = a
    });
    function rn(a, b) {
        var c = b.Kc === pg, d = c ? b.Rj : b.Tj, e = c ? b.newValue : b.oldValue, g = a.Xm.na(b.object);
        if (Array.isArray(g))for (var h = 0; h < g.length; h++) {
            var k = g[h];
            if (c)sn(k, e, d); else {
                var l = d;
                if (!(0 > l)) {
                    var m = l;
                    tn(k) && m++;
                    k.uf(m);
                    un(k, m, l)
                }
            }
        }
    }

    function Xm(a, b) {
        var c = b.cj;
        if (D.isArray(c)) {
            var d = a.Xm.na(c);
            if (null === d)d = [], d.push(b), a.Xm.add(c, d); else {
                for (c = 0; c < d.length; c++)if (d[c] === b)return;
                d.push(b)
            }
        }
    }

    function an(a, b) {
        var c = b.cj;
        if (D.isArray(c)) {
            var d = a.Xm.na(c);
            if (null !== d)for (var e = 0; e < d.length; e++)if (d[e] === b) {
                d.splice(e, 1);
                0 === d.length && a.Xm.remove(c);
                break
            }
        }
    }

    function Wm(a, b) {
        for (var c = b.ya.o, d = c.length, e = 0; e < d; e++) {
            var g = c[e];
            g instanceof Gl && vn(a, g)
        }
    }

    function vn(a, b) {
        var c = b.element;
        if (null !== c && c instanceof HTMLImageElement) {
            var d = b.$e;
            null !== d && (d.fp instanceof Event && null !== b.af && b.af(b, d.fp), !0 === d.gw && (null !== b.zi && b.zi(b, d.cA), null !== b.g && b.g.$z.add(b)));
            c = c.src;
            d = a.Ep.na(c);
            if (null === d)d = [], d.push(b), a.Ep.add(c, d); else {
                for (c = 0; c < d.length; c++)if (d[c] === b)return;
                d.push(b)
            }
        }
    }

    function $m(a, b) {
        for (var c = b.ya.o, d = c.length, e = 0; e < d; e++) {
            var g = c[e];
            g instanceof Gl && wn(a, g)
        }
    }

    function wn(a, b) {
        var c = b.element;
        if (null !== c && c instanceof HTMLImageElement) {
            var c = c.src, d = a.Ep.na(c);
            if (null !== d)for (var e = 0; e < d.length; e++)if (d[e] === b) {
                d.splice(e, 1);
                0 === d.length && a.Ep.remove(c);
                break
            }
        }
    }

    E.prototype.rebuildParts = E.prototype.xm = function () {
        for (var a = this.vB.j; a.next();) {
            var b = a.value, c = a.key;
            (!b.pe() || b instanceof I) && D.k('Invalid node template in Diagram.nodeTemplateMap: template for "' + c + '" must be a Node or a simple Part, not a Group or Link: ' + b)
        }
        for (a = this.XA.j; a.next();)b = a.value, c = a.key, b instanceof I || D.k('Invalid group template in Diagram.groupTemplateMap: template for "' + c + '" must be a Group, not a normal Node or Link: ' + b);
        for (a = this.iB.j; a.next();)b = a.value, c = a.key, b instanceof J || D.k('Invalid link template in Diagram.linkTemplateMap: template for "' + c + '" must be a Link, not a normal Node or simple Part: ' + b);
        a = D.mb();
        for (b = this.selection.j; b.next();)(c = b.value.data) && a.push(c);
        for (var b = D.mb(), d = this.tm.j; d.next();)(c = d.value.data) && b.push(c);
        c = D.mb();
        for (d = this.qg.j; d.next();) {
            var e = d.value;
            null !== e.data && (c.push(e.data), c.push(e.location))
        }
        for (d = this.links.j; d.next();)e = d.value, null !== e.data && (c.push(e.data), c.push(e.location));
        for (d = this.Ii.j; d.next();)e = d.value, null !==
        e.data && (c.push(e.data), c.push(e.location));
        d = this.ga;
        d instanceof X && kn(this, d.bh);
        kn(this, d.pg);
        ln(this, d.pg);
        d instanceof X && mn(this, d.bh);
        for (d = 0; d < a.length; d++)e = this.Ph(a[d]), null !== e && (e.ib = !0);
        for (d = 0; d < b.length; d++)e = this.Ph(b[d]), null !== e && (e.ah = !0);
        for (d = 0; d < c.length; d += 2)e = this.Ph(c[d]), null !== e && (e.location = c[d + 1]);
        D.za(a);
        D.za(b);
        D.za(c)
    };
    function ln(a, b) {
        if (null !== b) {
            for (var c = a.ga, d = c instanceof X, e = D.cb(b), g = 0; g < e; g++) {
                var h = D.La(b, g);
                c.le(h) ? on(a, h, !1) : d && pn(a, h)
            }
            if (d || c instanceof zg) {
                for (g = 0; g < e; g++)h = D.La(b, g), c.le(h) && xn(a, h);
                if (d)for (c = a.links; c.next();)yn(c.value)
            }
            zn(a, !1)
        }
    }

    function on(a, b, c) {
        if (void 0 !== b && null !== b && !a.ra.jb && !a.Ui.contains(b)) {
            void 0 === c && (c = !0);
            var d = a.TA(b), e = An(a, b, d);
            if (null !== e && (Oh(e), e = e.copy(), null !== e)) {
                var g = a.Ve;
                a.Ve = !0;
                e.Oi = d;
                e.Pd = b;
                a.add(e);
                e.Pd = null;
                e.data = b;
                c && xn(a, b);
                a.Ve = g
            }
        }
    }

    E.prototype.TA = function (a) {
        return this.ga.TA(a)
    };
    var Bn = !1, Cn = !1;

    function An(a, b, c) {
        var d = !1, e = a.ga;
        e instanceof X && (d = e.eB(b));
        d ? (b = a.XA.na(c), null === b && (b = a.XA.na(""), null === b && (Cn || (Cn = !0, D.trace('No Group template found for category "' + c + '"'), D.trace("  Using default group template")), b = a.PC))) : (b = a.vB.na(c), null === b && (b = a.vB.na(""), null === b && (Bn || (Bn = !0, D.trace('No Node template found for category "' + c + '"'), D.trace("  Using default node template")), b = a.RC)));
        return b
    }

    function xn(a, b) {
        var c = a.ga;
        if (c instanceof X || c instanceof zg) {
            var d = c.Ab(b);
            if (void 0 !== d) {
                var e = eh(c, d), g = a.Ph(b);
                if (null !== e && null !== g) {
                    for (e = e.j; e.next();) {
                        var h = e.value;
                        if (c instanceof X) {
                            var k = c;
                            if (k.le(h)) {
                                if (g instanceof I && k.Un(h) === d) {
                                    var l = g, h = a.Ph(h);
                                    null !== h && (h.Ka = l)
                                }
                            } else {
                                var m = a.fg(h);
                                if (null !== m && g instanceof G && (l = g, k.rm(h) === d && (m.Y = l), k.sm(h) === d && (m.ba = l), h = k.Uk(h), D.isArray(h)))for (k = 0; k < D.cb(h); k++)if (D.La(h, k) === d) {
                                    l.Xb = m;
                                    break
                                }
                            }
                        } else c instanceof zg && (m = c, m.le(h) && g instanceof G && (l = g, m.Wn(h) === d && (h = a.Nx(h), nn(a, l, h))))
                    }
                    gh(c, d)
                }
                c instanceof X ? (c = c.Un(b), void 0 !== c && (c = a.Re(c), c instanceof I && (g.Ka = c))) : c instanceof zg && (c = c.Wn(b), void 0 !== c && g instanceof G && (l = g, g = a.Re(c), nn(a, g, l)))
            }
        }
    }

    function nn(a, b, c) {
        if (null !== b && null !== c) {
            var d = a.nb.jG, e = b, g = c;
            if (a.ce)for (b = g.Kd; b.next();) {
                if (b.value.ba === g)return
            } else for (e = c, g = b, b = e.Kd; b.next();)if (b.value.Y === e)return;
            if (null === d || !hj(d, e, g, null, !0))if (d = a.Qx(c.data), b = Dn(a, d), null !== b && (Oh(b), b = b.copy(), null !== b)) {
                var h = a.Ve;
                a.Ve = !0;
                b.Oi = d;
                b.Pd = c.data;
                b.Y = e;
                b.ba = g;
                a.add(b);
                b.Pd = null;
                b.data = c.data;
                a.Ve = h
            }
        }
    }

    function mn(a, b) {
        if (null !== b) {
            for (var c = D.cb(b), d = 0; d < c; d++) {
                var e = D.La(b, d);
                pn(a, e)
            }
            zn(a, !1)
        }
    }

    function pn(a, b) {
        if (void 0 !== b && null !== b && !a.ra.jb && !a.ck.contains(b)) {
            var c = a.Qx(b), d = Dn(a, c);
            if (null !== d && (Oh(d), d = d.copy(), null !== d)) {
                var e = a.Ve;
                a.Ve = !0;
                d.Oi = c;
                d.Pd = b;
                var c = a.ga, g = c.RI(b);
                "" !== g && (d.gg = g);
                g = c.rm(b);
                void 0 !== g && (g = a.Re(g), g instanceof G && (d.Y = g));
                g = c.VI(b);
                "" !== g && (d.mh = g);
                g = c.sm(b);
                void 0 !== g && (g = a.Re(g), g instanceof G && (d.ba = g));
                c = c.Uk(b);
                if (D.isArray(c))for (var g = D.cb(c), h = 0; h < g; h++) {
                    var k = D.La(c, h), k = a.Re(k);
                    null !== k && (k.Xb = d)
                }
                a.add(d);
                d.Pd = null;
                d.data = b;
                a.Ve = e
            }
        }
    }

    E.prototype.Qx = function (a) {
        var b = this.ga, c = "";
        b instanceof X ? c = b.Qx(a) : b instanceof zg && (c = b.TI(a));
        return c
    };
    var En = !1;

    function Dn(a, b) {
        var c = a.iB.na(b);
        null === c && (c = a.iB.na(""), null === c && (En || (En = !0, D.trace('No Link template found for category "' + b + '"'), D.trace("  Using default link template")), c = a.QC));
        return c
    }

    function kn(a, b) {
        for (var c = D.cb(b), d = 0; d < c; d++) {
            var e = D.La(b, d);
            qn(a, e)
        }
    }

    function qn(a, b) {
        if (void 0 !== b && null !== b) {
            var c = a.Ph(b);
            if (null !== c) {
                bn(a, c, !1);
                var d = a.ga;
                if (d instanceof X && c instanceof G) {
                    var e = d.Ab(c.data);
                    if (void 0 !== e) {
                        for (var g = c.Kd; g.next();)fh(d, e, g.value.data);
                        c.Jf && (g = c.Xb, null !== g && fh(d, e, g.data));
                        if (c instanceof I)for (c = c.Oc; c.next();)g = c.value.data, d.le(g) && fh(d, e, g)
                    }
                } else if (d instanceof zg && c instanceof G) {
                    g = a.fg(c.data);
                    if (null !== g) {
                        g.ib = !1;
                        g.ah = !1;
                        var h = g.layer;
                        if (null !== h) {
                            var k = h.uf(-1, g, !1);
                            0 <= k && a.jd(qg, "parts", h, g, null, k, null);
                            k = g.iy;
                            null !==
                            k && k(g, h, null)
                        }
                    }
                    g = a.ce;
                    for (c = c.Kd; c.next();)h = c.value, h = (g ? h.ba : h.Y).data, d.le(h) && fh(d, e, h)
                }
            }
        }
    }

    E.prototype.findPartForKey = E.prototype.KI = function (a) {
        if (null === a || void 0 === a)return null;
        var b = this.ga.He(a);
        return null !== b ? this.Ui.na(b) : this.ga instanceof X && (b = this.ga.lq(a), null !== b) ? this.ck.na(b) : null
    };
    E.prototype.findNodeForKey = E.prototype.Re = function (a) {
        if (null === a || void 0 === a)return null;
        a = this.ga.He(a);
        if (null === a)return null;
        a = this.Ui.na(a);
        return a instanceof G ? a : null
    };
    E.prototype.findPartForData = E.prototype.Ph = function (a) {
        if (null === a)return null;
        var b = this.Ui.na(a);
        return null !== b ? b : b = this.ck.na(a)
    };
    E.prototype.findNodeForData = E.prototype.Nx = function (a) {
        if (null === a)return null;
        a = this.Ui.na(a);
        return a instanceof G ? a : null
    };
    E.prototype.findLinkForData = E.prototype.fg = function (a) {
        return null === a ? null : this.ck.na(a)
    };
    E.prototype.findNodesByExample = function (a) {
        for (var b = new L(G), c = this.Cp.j; c.next();) {
            var d = c.value, e = d.data;
            if (null !== e)for (var g = 0; g < arguments.length; g++) {
                var h = arguments[g];
                if (D.Sa(h) && Fn(this, e, h)) {
                    b.add(d);
                    break
                }
            }
        }
        return b.j
    };
    E.prototype.findLinksByExample = function (a) {
        for (var b = new L(J), c = this.wp.j; c.next();) {
            var d = c.value, e = d.data;
            if (null !== e)for (var g = 0; g < arguments.length; g++) {
                var h = arguments[g];
                if (D.Sa(h) && Fn(this, e, h)) {
                    b.add(d);
                    break
                }
            }
        }
        return b.j
    };
    function Fn(a, b, c) {
        for (var d in c) {
            var e = b[d], g = c[d];
            if (D.isArray(g)) {
                if (!D.isArray(e) || e.length < g.length)return !1;
                for (var h = 0; h < e.length; h++) {
                    var k = e[h], l = g[h];
                    if (void 0 !== l && !Gn(a, k, l))return !1
                }
            } else if (!Gn(a, e, g))return !1
        }
        return !0
    }

    function Gn(a, b, c) {
        if ("function" === typeof c) {
            if (!c(b))return !1
        } else if (c instanceof RegExp) {
            if (!b || !c.test(b.toString()))return !1
        } else if (D.Sa(b) && D.Sa(c)) {
            if (!Fn(a, b, c))return !1
        } else if (b !== c)return !1;
        return !0
    }

    D.defineProperty(E, {hM: "nodeTemplate"}, function () {
        return this.mj.na("")
    }, function (a) {
        var b = this.mj.na("");
        b !== a && (D.l(a, F, E, "nodeTemplate"), this.mj.add("", a), this.i("nodeTemplate", b, a), this.ra.jb || this.xm())
    });
    D.defineProperty(E, {vB: "nodeTemplateMap"}, function () {
        return this.mj
    }, function (a) {
        var b = this.mj;
        b !== a && (D.l(a, ma, E, "nodeTemplateMap"), this.mj = a, this.i("nodeTemplateMap", b, a), this.ra.jb || this.xm())
    });
    D.defineProperty(E, {LL: "groupTemplate"}, function () {
        return this.yl.na("")
    }, function (a) {
        var b = this.yl.na("");
        b !== a && (D.l(a, I, E, "groupTemplate"), this.yl.add("", a), this.i("groupTemplate", b, a), this.ra.jb || this.xm())
    });
    D.defineProperty(E, {XA: "groupTemplateMap"}, function () {
        return this.yl
    }, function (a) {
        var b = this.yl;
        b !== a && (D.l(a, ma, E, "groupTemplateMap"), this.yl = a, this.i("groupTemplateMap", b, a), this.ra.jb || this.xm())
    });
    D.defineProperty(E, {VL: "linkTemplate"}, function () {
        return this.sk.na("")
    }, function (a) {
        var b = this.sk.na("");
        b !== a && (D.l(a, J, E, "linkTemplate"), this.sk.add("", a), this.i("linkTemplate", b, a), this.ra.jb || this.xm())
    });
    D.defineProperty(E, {iB: "linkTemplateMap"}, function () {
        return this.sk
    }, function (a) {
        var b = this.sk;
        b !== a && (D.l(a, ma, E, "linkTemplateMap"), this.sk = a, this.i("linkTemplateMap", b, a), this.ra.jb || this.xm())
    });
    D.defineProperty(E, {pJ: null}, function () {
        return this.Vm
    }, function (a) {
        this.Vm = a
    });
    D.defineProperty(E, {lf: "isMouseCaptured"}, function () {
        return this.uD
    }, function (a) {
        var b = this.Mb;
        null !== b && (a ? (this.U.bubbles = !1, b.removeEventListener("mousemove", this.lo, !1), b.removeEventListener("mousedown", this.ko, !1), b.removeEventListener("mouseup", this.no, !1), b.removeEventListener("mousewheel", this.dh, !1), b.removeEventListener("DOMMouseScroll", this.dh, !1), b.removeEventListener("mouseout", this.mo, !1), window.addEventListener("mousemove", this.lo, !0), window.addEventListener("mousedown", this.ko, !0),
            window.addEventListener("mouseup", this.no, !0), window.addEventListener("mousewheel", this.dh, !0), window.addEventListener("DOMMouseScroll", this.dh, !0), window.addEventListener("mouseout", this.mo, !0), window.addEventListener("selectstart", this.preventDefault, !1)) : (window.removeEventListener("mousemove", this.lo, !0), window.removeEventListener("mousedown", this.ko, !0), window.removeEventListener("mouseup", this.no, !0), window.removeEventListener("mousewheel", this.dh, !0), window.removeEventListener("DOMMouseScroll",
            this.dh, !0), window.removeEventListener("mouseout", this.mo, !0), window.removeEventListener("selectstart", this.preventDefault, !1), b.addEventListener("mousemove", this.lo, !1), b.addEventListener("mousedown", this.ko, !1), b.addEventListener("mouseup", this.no, !1), b.addEventListener("mousewheel", this.dh, !1), b.addEventListener("DOMMouseScroll", this.dh, !1), b.addEventListener("mouseout", this.mo, !1)), this.uD = a)
    });
    D.defineProperty(E, {position: "position"}, function () {
        return this.sb
    }, function (a) {
        var b = this.sb;
        if (!b.O(a)) {
            D.l(a, N, E, "position");
            var c = this.ub.copy();
            a = a.copy();
            if (!this.bd && null !== this.Mb) {
                this.bd = !0;
                var d = this.scale;
                Zl(this, a, this.fd, this.Ob / d, this.Sb / d, this.Oo, !1);
                this.bd = !1
            }
            this.sb = a.V();
            a = this.Wa;
            a.xc && ql(a, b, this.sb);
            this.bd || this.Su(c, this.ub, this.Cb, this.Cb, !1)
        }
    });
    D.defineProperty(E, {fJ: "initialPosition"}, function () {
        return this.cw
    }, function (a) {
        this.cw.O(a) || (D.l(a, N, E, "initialPosition"), this.cw = a.V())
    });
    D.defineProperty(E, {gJ: "initialScale"}, function () {
        return this.dw
    }, function (a) {
        this.dw !== a && (D.h(a, "number", E, "initialScale"), this.dw = a)
    });
    D.defineProperty(E, {Xn: "grid"}, function () {
        null === this.Bd && Ql(this);
        return this.Bd
    }, function (a) {
        var b = this.Bd;
        if (b !== a) {
            null === b && (Ql(this), b = this.Bd);
            D.l(a, x, E, "grid");
            a.type !== Rl && D.k("Diagram.grid must be a Panel of type Panel.Grid");
            var c = b.Q;
            null !== c && c.remove(b);
            this.Bd = a;
            a.name = "GRID";
            null !== c && c.add(a);
            jm(this);
            this.qa();
            this.i("grid", b, a)
        }
    });
    D.w(E, {ub: "viewportBounds"}, function () {
        var a = this.AE;
        if (null === this.Mb)return a;
        var b = this.sb, c = this.Cb;
        a.n(b.x, b.y, Math.max(this.Ob, 0) / c, Math.max(this.Sb, 0) / c);
        return a
    });
    D.defineProperty(E, {yF: "fixedBounds"}, function () {
        return this.Vv
    }, function (a) {
        var b = this.Vv;
        b.O(a) || (D.l(a, C, E, "fixedBounds"), (v && Infinity === a.width || -Infinity === a.width || Infinity === a.height || -Infinity === a.height) && D.k("fixedBounds width/height must not be Infinity"), this.Vv = a = a.V(), this.Ac(), this.i("fixedBounds", b, a))
    });
    D.defineProperty(E, {Fy: "scrollMargin"}, function () {
        return this.Qw
    }, function (a) {
        "number" === typeof a ? a = new Kb(a) : D.l(a, Kb, E, "scrollMargin");
        var b = this.Qw;
        b.O(a) || (this.Qw = a = a.V(), this.Ac(), this.i("scrollMargin", b, a))
    });
    D.defineProperty(E, {GB: "scrollMode"}, function () {
        return this.Rw
    }, function (a) {
        var b = this.Rw;
        b !== a && (D.Da(a, E, E, "scrollMode"), this.Rw = a, a === Bl && Xl(this, !1), this.i("scrollMode", b, a))
    });
    D.defineProperty(E, {yG: "positionComputation"}, function () {
        return this.Lw
    }, function (a) {
        var b = this.Lw;
        b !== a && (null !== a && D.h(a, "function", E, "positionComputation"), this.Lw = a, Xl(this, !1), this.i("positionComputation", b, a))
    });
    D.defineProperty(E, {OG: "scaleComputation"}, function () {
        return this.Nw
    }, function (a) {
        var b = this.Nw;
        b !== a && (null !== a && D.h(a, "function", E, "scaleComputation"), this.Nw = a, en(this, this.scale, this.scale), this.i("scaleComputation", b, a))
    });
    D.w(E, {fd: "documentBounds"}, function () {
        return this.Pv
    });
    function $l(a, b) {
        a.nk = !1;
        var c = a.Pv;
        c.O(b) || (b = b.V(), a.Pv = b, Xl(a, !1), a.Ja("DocumentBoundsChanged", null, c.copy()), gm(a))
    }

    D.defineProperty(E, {gB: "isVirtualized"}, function () {
        return this.lw
    }, function (a) {
        var b = this.lw;
        b !== a && (D.h(a, "boolean", E, "isVirtualized"), this.lw = a, this.i("isVirtualized", b, a))
    });
    D.defineProperty(E, {scale: "scale"}, function () {
        return this.Cb
    }, function (a) {
        var b = this.Cb;
        D.p(a, E, "scale");
        b !== a && en(this, b, a)
    });
    D.defineProperty(E, {dm: "autoScale"}, function () {
        return this.Km
    }, function (a) {
        var b = this.Km;
        b !== a && (D.Da(a, E, E, "autoScale"), this.Km = a, this.i("autoScale", b, a), a !== Rh && Xl(this, !1))
    });
    D.defineProperty(E, {OL: "initialAutoScale"}, function () {
        return this.Cl
    }, function (a) {
        var b = this.Cl;
        b !== a && (D.Da(a, E, E, "initialAutoScale"), this.Cl = a, this.i("initialAutoScale", b, a))
    });
    D.defineProperty(E, {hJ: "initialViewportSpot"}, function () {
        return this.ew
    }, function (a) {
        var b = this.ew;
        b !== a && (D.l(a, Q, E, "initialViewportSpot"), a.Vc() || D.k("initialViewportSpot must be a specific Spot: " + a), this.ew = a, this.i("initialViewportSpot", b, a))
    });
    D.defineProperty(E, {eJ: "initialDocumentSpot"}, function () {
        return this.bw
    }, function (a) {
        var b = this.bw;
        b !== a && (D.l(a, Q, E, "initialDocumentSpot"), a.Vc() || D.k("initialViewportSpot must be a specific Spot: " + a), this.bw = a, this.i("initialDocumentSpot", b, a))
    });
    D.defineProperty(E, {Sh: "minScale"}, function () {
        return this.ww
    }, function (a) {
        D.p(a, E, "minScale");
        var b = this.ww;
        b !== a && (0 < a ? (this.ww = a, this.i("minScale", b, a), a > this.scale && (this.scale = a)) : D.ua(a, "> 0", E, "minScale"))
    });
    D.defineProperty(E, {Rh: "maxScale"}, function () {
        return this.tw
    }, function (a) {
        D.p(a, E, "maxScale");
        var b = this.tw;
        b !== a && (0 < a ? (this.tw = a, this.i("maxScale", b, a), a < this.scale && (this.scale = a)) : D.ua(a, "> 0", E, "maxScale"))
    });
    D.defineProperty(E, {Gm: "zoomPoint"}, function () {
        return this.lx
    }, function (a) {
        this.lx.O(a) || (D.l(a, N, E, "zoomPoint"), this.lx = a = a.V())
    });
    D.defineProperty(E, {AA: "contentAlignment"}, function () {
        return this.Oo
    }, function (a) {
        var b = this.Oo;
        b.O(a) || (D.l(a, Q, E, "contentAlignment"), this.Oo = a = a.V(), this.i("contentAlignment", b, a), Xl(this, !1))
    });
    D.defineProperty(E, {PL: "initialContentAlignment"}, function () {
        return this.ip
    }, function (a) {
        var b = this.ip;
        b.O(a) || (D.l(a, Q, E, "initialContentAlignment"), this.ip = a = a.V(), this.i("initialContentAlignment", b, a))
    });
    D.defineProperty(E, {padding: "padding"}, function () {
        return this.qf
    }, function (a) {
        "number" === typeof a ? a = new Kb(a) : D.l(a, Kb, E, "padding");
        var b = this.qf;
        b.O(a) || (this.qf = a = a.V(), this.Ac(), this.i("padding", b, a))
    });
    D.w(E, {qg: "nodes"}, function () {
        return this.Cp.j
    });
    D.w(E, {links: "links"}, function () {
        return this.wp.j
    });
    D.w(E, {Ii: "parts"}, function () {
        return this.rb.j
    });
    E.prototype.findTopLevelNodesAndLinks = function () {
        for (var a = new L(F), b = this.Cp.j; b.next();) {
            var c = b.value;
            c.wq && a.add(c)
        }
        for (b = this.wp.j; b.next();)c = b.value, c.wq && a.add(c);
        return a.j
    };
    E.prototype.findTopLevelGroups = function () {
        return this.Vl.j
    };
    D.defineProperty(E, {Yb: "layout"}, function () {
        return this.ve
    }, function (a) {
        var b = this.ve;
        b !== a && (D.l(a, Zg, E, "layout"), null !== b && (b.g = null, b.group = null), this.ve = a, a.g = this, a.group = null, this.yv = !0, this.i("layout", b, a), this.Te())
    });
    E.prototype.layoutDiagram = function (a) {
        Si(this);
        a && zn(this, !0);
        mm(this, !1)
    };
    function zn(a, b) {
        for (var c = a.Vl.j; c.next();)Hn(a, c.value, b);
        null !== a.Yb && (b ? a.Yb.Mf = !1 : a.Yb.N())
    }

    function Hn(a, b, c) {
        if (null !== b) {
            for (var d = b.fn.j; d.next();)Hn(a, d.value, c);
            null !== b.Yb && (c ? b.Yb.Mf = !1 : b.Yb.N())
        }
    }

    function mm(a, b) {
        if (!a.uz) {
            var c = a.Yb, d = a.$a;
            a.$a = !0;
            try {
                var e = a.ra.Zh;
                0 === e && a.Zb("Layout");
                var g = a.Wa;
                1 !== a.ra.Zh || g.vf || g.xc || b || g.qo("Layout");
                for (var h = a.Vl.j; h.next();)In(a, h.value, b);
                c.Mf || b && !c.bG && 0 !== e || (c.doLayout(a), Si(a), c.Mf = !0)
            } finally {
                0 === e && a.Gd("Layout"), a.yv = !c.Mf, a.$a = d
            }
        }
    }

    function In(a, b, c) {
        if (null !== b) {
            for (var d = b.fn.j; d.next();)In(a, d.value, c);
            d = b.Yb;
            null === d || d.Mf || c && !d.bG || (b.oo = !b.location.F(), d.doLayout(b), b.N(Jn), d.Mf = !0, Km(a, b))
        }
    }

    D.defineProperty(E, {ce: "isTreePathToChildren"}, function () {
        return this.kw
    }, function (a) {
        var b = this.kw;
        if (b !== a && (D.h(a, "boolean", E, "isTreePathToChildren"), this.kw = a, this.i("isTreePathToChildren", b, a), !this.ra.jb))for (a = this.qg; a.next();)Kn(a.value)
    });
    E.prototype.findTreeRoots = function () {
        for (var a = new K(G), b = this.qg; b.next();) {
            var c = b.value;
            c.wq && null === c.Sn() && a.add(c)
        }
        return a.j
    };
    D.defineProperty(E, {cC: "treeCollapsePolicy"}, function () {
        return this.gx
    }, function (a) {
        var b = this.gx;
        b !== a && (a !== Dl && a !== gn && a !== hn && D.k("Unknown Diagram.treeCollapsePolicy: " + a), this.gx = a, this.i("treeCollapsePolicy", b, a))
    });
    D.defineProperty(E, {Qh: null}, function () {
        return this.mD
    }, function (a) {
        this.mD = a
    });
    function Cl(a) {
        function b(a) {
            var b = a.toLowerCase(), h = new K("function");
            c.add(a, h);
            c.add(b, h);
            d.add(a, a);
            d.add(b, a)
        }

        var c = new ma("string", K), d = new ma("string", "string");
        b("AnimationStarting");
        b("AnimationFinished");
        b("BackgroundSingleClicked");
        b("BackgroundDoubleClicked");
        b("BackgroundContextClicked");
        b("ClipboardChanged");
        b("ClipboardPasted");
        b("DocumentBoundsChanged");
        b("ExternalObjectsDropped");
        b("InitialLayoutCompleted");
        b("LayoutCompleted");
        b("LinkDrawn");
        b("LinkRelinked");
        b("LinkReshaped");
        b("Modified");
        b("ObjectSingleClicked");
        b("ObjectDoubleClicked");
        b("ObjectContextClicked");
        b("PartCreated");
        b("PartResized");
        b("PartRotated");
        b("SelectionMoved");
        b("SelectionCopied");
        b("SelectionDeleting");
        b("SelectionDeleted");
        b("SelectionGrouped");
        b("SelectionUngrouped");
        b("ChangingSelection");
        b("ChangedSelection");
        b("SubGraphCollapsed");
        b("SubGraphExpanded");
        b("TextEdited");
        b("TreeCollapsed");
        b("TreeExpanded");
        b("ViewportBoundsChanged");
        a.wz = c;
        a.vz = d
    }

    function Ea(a, b) {
        var c = a.vz.na(b);
        return null !== c ? c : a.vz.na(b.toLowerCase())
    }

    function Ln(a, b) {
        var c = a.wz.na(b);
        if (null !== c)return c;
        c = a.wz.na(b.toLowerCase());
        if (null !== c)return c;
        D.k("Unknown DiagramEvent name: " + b);
        return null
    }

    E.prototype.addDiagramListener = E.prototype.mx = function (a, b) {
        D.h(a, "string", E, "addDiagramListener:name");
        D.h(b, "function", E, "addDiagramListener:listener");
        var c = Ln(this, a);
        null !== c && c.add(b)
    };
    E.prototype.removeDiagramListener = E.prototype.CB = function (a, b) {
        D.h(a, "string", E, "removeDiagramListener:name");
        D.h(b, "function", E, "addDiagramListener:listener");
        var c = Ln(this, a);
        null !== c && c.remove(b)
    };
    E.prototype.raiseDiagramEvent = E.prototype.Ja = function (a, b, c) {
        v && D.h(a, "string", E, "raiseDiagramEvent:name");
        var d = Ln(this, a), e = new cg;
        e.g = this;
        a = Ea(this, a);
        null !== a && (e.name = a);
        void 0 !== b && (e.TB = b);
        void 0 !== c && (e.xB = c);
        b = d.length;
        if (1 === b)d = d.ea(0), d(e); else if (0 !== b)for (c = d.oc(), a = 0; a < b; a++)d = c[a], d(e);
        return e.cancel
    };
    E.prototype.isUnoccupied = E.prototype.yq = function (a, b) {
        void 0 === b && (b = null);
        return ga(this, !1, null, b).yq(a.x, a.y, a.width, a.height)
    };
    E.prototype.computeOccupiedArea = function () {
        return this.gB ? this.ub.copy() : this.nk ? Wl(this) : this.fd.copy()
    };
    function ga(a, b, c, d) {
        null === a.Sd && (a.Sd = new Mn);
        if (a.Sd.sq || a.Sd.group !== c || a.Sd.SB !== d) {
            if (null === c) {
                b = a.computeOccupiedArea();
                b.If(100, 100);
                a.Sd.initialize(b);
                b = D.Rf();
                for (var e = a.qg; e.next();) {
                    var g = e.value, h = g.layer;
                    null !== h && h.visible && !h.Wc && Nn(a, g, d, b)
                }
            } else for (c.$.F() || c.kf(), b = c.$.copy(), b.If(20, 20), a.Sd.initialize(b), b = D.Rf(), e = c.Oc; e.next();)g = e.value, g instanceof G && Nn(a, g, d, b);
            D.Kb(b);
            a.Sd.group = c;
            a.Sd.SB = d;
            a.Sd.sq = !1
        } else b && On(a.Sd);
        return a.Sd
    }

    function Nn(a, b, c, d) {
        if (b !== c)if (b.isVisible() && b.wA && !b.Jf) {
            c = b.getAvoidableRect(d);
            d = a.Sd.Gn;
            b = a.Sd.Fn;
            for (var e = c.x + c.width, g = c.y + c.height, h = c.x; h < e; h += d) {
                for (var k = c.y; k < g; k += b)Pn(a.Sd, h, k);
                Pn(a.Sd, h, g)
            }
            for (k = c.y; k < g; k += b)Pn(a.Sd, e, k);
            Pn(a.Sd, e, g)
        } else if (b instanceof I)for (b = b.Oc; b.next();)e = b.value, e instanceof G && Nn(a, e, c, d)
    }

    E.invalidatePositionArray = E.prototype.cB = function (a) {
        null !== this.Sd && !this.Sd.sq && (void 0 === a && (a = null), null === a || a.wA && !a.Jf) && (this.Sd.sq = !0)
    };
    E.prototype.simulatedMouseMove = function (a, b, c) {
        if (null !== $h) {
            var d = $h.g;
            c instanceof E || (c = null);
            var e = ai;
            c !== e && (null !== e && e !== d && null !== e.nb.Fe && (Di(e), $h.Wx = !1, e.nb.Fe.doSimulatedDragLeave()), ai = c, null !== c && c !== d && null !== c.nb.Fe && (Ki(), e = c.nb.Fe, Gi.contains(e) || Gi.add(e), c.nb.Fe.doSimulatedDragEnter()));
            if (null === c || c === d || !c.LE || c.qb || !c.Yp)return !1;
            d = c.nb.Fe;
            null !== d && (null !== a ? b = c.ep(a) : null === b && (b = new N), c.Ub.ha = b, c.Ub.lm = !1, c.Ub.up = !1, d.doSimulatedDragOver());
            return !0
        }
        return !1
    };
    E.prototype.simulatedMouseUp = function (a, b, c, d) {
        if (null !== $h) {
            null === d && (d = b);
            b = ai;
            var e = $h.g;
            if (d !== b) {
                if (null !== b && b !== e && null !== b.nb.Fe)return Di(b), $h.Wx = !1, b.nb.Fe.doSimulatedDragLeave(), !1;
                ai = d;
                null !== d && null !== d.nb.Fe && (Ki(), b = d.nb.Fe, Gi.contains(b) || Gi.add(b), d.nb.Fe.doSimulatedDragEnter())
            }
            if (null === d)return $h.doCancel(), !0;
            if (d !== this)return null !== a && (c = d.ep(a)), d.Ub.ha = c, d.Ub.lm = !1, d.Ub.up = !0, a = d.nb.Fe, null !== a && a.doSimulatedDrop(), a = $h, null !== a && (d = a.mayCopy(), a.Tf = d ? "Copy" : "Move", a.stopTool()),
                !0
        }
        return !1
    };
    D.defineProperty(E, {jL: "autoScrollInterval"}, function () {
        return this.jr
    }, function (a) {
        var b = this.jr;
        D.p(a, E, "scale");
        b !== a && (this.jr = a, this.i("autoScrollInterval", b, a))
    });
    D.defineProperty(E, {RE: "autoScrollRegion"}, function () {
        return this.Av
    }, function (a) {
        "number" === typeof a ? a = new Kb(a) : D.l(a, Kb, E, "autoScrollRegion");
        var b = this.Av;
        b.O(a) || (this.Av = a = a.V(), this.Ac(), this.i("autoScrollRegion", b, a))
    });
    E.prototype.doAutoScroll = E.prototype.JA = function (a) {
        this.zv.assign(a);
        Qn(this, this.zv).Uc(this.position) ? Di(this) : Rn(this)
    };
    function Rn(a) {
        -1 === a.Jo && (a.Jo = D.setTimeout(function () {
            if (-1 !== a.Jo) {
                Di(a);
                var b = a.U.event;
                if (null !== b) {
                    var c = Qn(a, a.zv);
                    c.Uc(a.position) || (a.position = c, a.U.ha = a.bC(a.zv), a.simulatedMouseMove(b, null, b.target.ca) || a.doMouseMove(), a.nk = !0, $l(a, a.Mh()), a.Ne = !0, a.jg(), Rn(a))
                }
            }
        }, a.jr))
    }

    function Di(a) {
        -1 !== a.Jo && (D.clearTimeout(a.Jo), a.Jo = -1)
    }

    function Qn(a, b) {
        var c = a.position, d = a.RE;
        if (0 >= d.top && 0 >= d.left && 0 >= d.right && 0 >= d.bottom)return c;
        var e = a.ub, g = a.scale, e = D.ug(0, 0, e.width * g, e.height * g), h = D.Fb(0, 0);
        if (b.x >= e.x && b.x < e.x + d.left) {
            var k = Math.max(a.$u, 1), k = k | 0;
            h.x -= k;
            b.x < e.x + d.left / 2 && (h.x -= k);
            b.x < e.x + d.left / 4 && (h.x -= 4 * k)
        } else b.x <= e.x + e.width && b.x > e.x + e.width - d.right && (k = Math.max(a.$u, 1), k |= 0, h.x += k, b.x > e.x + e.width - d.right / 2 && (h.x += k), b.x > e.x + e.width - d.right / 4 && (h.x += 4 * k));
        b.y >= e.y && b.y < e.y + d.top ? (k = Math.max(a.av, 1), k |= 0, h.y -= k, b.y < e.y +
        d.top / 2 && (h.y -= k), b.y < e.y + d.top / 4 && (h.y -= 4 * k)) : b.y <= e.y + e.height && b.y > e.y + e.height - d.bottom && (k = Math.max(a.av, 1), k |= 0, h.y += k, b.y > e.y + e.height - d.bottom / 2 && (h.y += k), b.y > e.y + e.height - d.bottom / 4 && (h.y += 4 * k));
        h.Uc(Jd) || (c = new N(c.x + h.x / g, c.y + h.y / g));
        D.Kb(e);
        D.A(h);
        return c
    }

    E.prototype.makeSvg = E.prototype.makeSVG = function (a) {
        void 0 === a && (a = new ka);
        a.context = "svg";
        a = Sn(this, a);
        return null !== a ? a.Bm : null
    };
    E.prototype.makeImage = function (a) {
        void 0 === a && (a = new ka);
        var b = (a.document || document).createElement("img");
        b.src = this.EJ(a);
        return b
    };
    E.prototype.makeImageData = E.prototype.EJ = function (a) {
        void 0 === a && (a = new ka);
        var b = Sn(this, a);
        if (null !== b) {
            var c = a.returnType, c = void 0 === c ? "string" : c.toLowerCase();
            switch (c) {
                case "imagedata":
                    return b.Pk.getImageData(0, 0, b.width, b.height);
                case "blob":
                    b = b.Vd;
                    c = a.callback;
                    if ("function" !== typeof c) {
                        D.k('Error: Diagram.makeImageData called with "returnType: toBlob", but no "callback" function property defined.');
                        break
                    }
                    if ("function" === typeof b.toBlob)return b.toBlob(c, a.type, a.details), "toBlob";
                    if ("function" === typeof b.msToBlob)return c(b.msToBlob()), "msToBlob";
                    c(null);
                    break;
                default:
                    return b.toDataURL(a.type, a.details)
            }
        }
        return ""
    };
    var Tn = !1;

    function Sn(a, b) {
        a.Wa.Yh();
        a.jg();
        if (null === a.Mb)return null;
        "object" !== typeof b && D.k("properties argument must be an Object.");
        var c = !1, d = b.size || null, e = b.scale || null;
        void 0 !== b.scale && isNaN(b.scale) && (e = "NaN");
        var g = b.maxSize;
        void 0 === b.maxSize && (c = !0, g = "svg" === b.context ? new Ba(Infinity, Infinity) : new Ba(2E3, 2E3));
        var h = b.position || null, k = b.parts || null, l = void 0 === b.padding ? 1 : b.padding, m = b.background || null, n = b.omitTemporary;
        void 0 === n && (n = !0);
        var p = b.document || document, q = b.elementFinished || null, r =
            b.showTemporary;
        void 0 === r && (r = !n);
        n = b.showGrid;
        void 0 === n && (n = r);
        null !== d && isNaN(d.width) && isNaN(d.height) && (d = null);
        "number" === typeof l ? l = new Kb(l) : l instanceof Kb || (l = new Kb(0));
        l.left = Math.max(l.left, 0);
        l.right = Math.max(l.right, 0);
        l.top = Math.max(l.top, 0);
        l.bottom = Math.max(l.bottom, 0);
        a.pd.De(!0);
        var s = new ja(null, p), u = s.Pk;
        if (!(d || e || k || h)) {
            s.width = a.Ob + Math.ceil(l.left + l.right);
            s.height = a.Sb + Math.ceil(l.top + l.bottom);
            if ("svg" === b.context)return u = new rd(s.Vd, p, q), Rm(a, u, l, new Ba(s.width, s.height),
                a.Cb, a.sb, k, m, r, n), u;
            a.Mr = !1;
            Rm(a, u, l, new Ba(s.width, s.height), a.Cb, a.sb, k, m, r, n);
            a.Mr = !0;
            return s
        }
        var t = a.xb.Ex, z = new N(0, 0), w = a.fd.copy();
        w.wK(a.padding);
        if (r)for (var B = !0, B = a.dc.o, A = B.length, O = 0; O < A; O++) {
            var H = B[O];
            if (H.visible && H.Wc)for (var H = H.rb.o, S = H.length, Y = 0; Y < S; Y++) {
                var R = H[Y];
                R.Yx && R.isVisible() && (R = R.$, R.F() && w.$h(R))
            }
        }
        z.x = w.x;
        z.y = w.y;
        if (null !== k) {
            var da, B = !0, A = k.j;
            for (A.reset(); A.next();)R = A.value, R instanceof F && (H = R.layer, null !== H && !H.visible || null !== H && !r && H.Wc || !R.isVisible() || (R =
                R.$, R.F() && (B ? (B = !1, da = R.copy()) : da.$h(R))));
            B && (da = new C(0, 0, 0, 0));
            w.width = da.width;
            w.height = da.height;
            z.x = da.x;
            z.y = da.y
        }
        null !== h && h.F() && (z = h, e || (e = t));
        B = R = 0;
        null !== l && (R = l.left + l.right, B = l.top + l.bottom);
        O = A = 0;
        null !== d && (A = d.width, O = d.height, isFinite(A) && (A = Math.max(0, A - R)), isFinite(O) && (O = Math.max(0, O - B)));
        da = h = 0;
        null !== d && null !== e ? ("NaN" === e && (e = t), d.F() ? (h = A, da = O) : isNaN(O) ? (h = A, da = w.height * e) : (h = w.width * e, da = O)) : null !== d ? d.F() ? (e = Math.min(A / w.width, O / w.height), h = A, da = O) : isNaN(O) ? (e = A / w.width,
            h = A, da = w.height * e) : (e = O / w.height, h = w.width * e, da = O) : null !== e ? "NaN" === e && g.F() ? (e = Math.min((g.width - R) / w.width, (g.height - B) / w.height), e > t ? (e = t, h = w.width, da = w.height) : (h = g.width, da = g.height)) : (h = w.width * e, da = w.height * e) : (e = t, h = w.width, da = w.height);
        null !== l ? (h += R, da += B) : l = new Kb(0);
        null !== g && (d = g.width, g = g.height, "svg" !== b.context && c && !Tn && (h > d || da > g) && (D.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. (" + Math.ceil(h) + "x" + Math.ceil(da) + " vs 2000x2000) Consider increasing the max size."),
            Tn = !0), isNaN(d) && (d = 2E3), isNaN(g) && (g = 2E3), isFinite(d) && (h = Math.min(h, d)), isFinite(g) && (da = Math.min(da, g)));
        s.width = Math.ceil(h);
        s.height = Math.ceil(da);
        if ("svg" === b.context)return u = new rd(s.Vd, p, q), Rm(a, u, l, new Ba(Math.ceil(h), Math.ceil(da)), e, z, k, m, r, n), u;
        a.Mr = !1;
        Rm(a, u, l, new Ba(Math.ceil(h), Math.ceil(da)), e, z, k, m, r, n);
        a.Mr = !0;
        return s
    }

    E.inherit = function (a, b) {
        D.h(a, "function", E, "inherit");
        D.h(b, "function", E, "inherit");
        b.IH && D.k("Cannot inherit from " + D.tf(b));
        D.Ra(a, b)
    };
    function Ll() {
        this.jE = null;
        this.KH = "63ad05bbe23a1786468a4c741b6d2";
        this.Yi = this.KH === this._tk ? !0 : null
    }

    function Un(a) {
        var b = "f", c = window[D.Yg("76a715b2f73f148a")][D.Yg("72ba13b5")], d = D.Yg;
        if (window[d("7da7")] && window[d("7da7")][d("76a115b6ed251eaf4692")]) {
            a.Yi = !0;
            var e = window[d("7da7")][d("76a115b6ed251eaf4692")], e = d(e).split(d("39e9"));
            if (6 > e.length)return;
            var g = d(e[1]).split(".");
            if ("7da71ca0" !== e[4])return;
            var h = d(D[d("6cae19")]).split(".");
            if (g[0] > h[0] || g[0] === h[0] && g[1] >= h[1]) {
                g = c[d("76ad18b4f73e")];
                for (h = c[d("73a612b6fb191d")](d("35e7")) + 2; h < g; h++)b += c[h];
                g = b[d("73a612b6fb191d")](d(e[2]));
                0 >
                g && d(e[2]) !== d("7da71ca0ad381e90") && (g = b[d("73a612b6fb191d")](d("76a715b2ef3e149757")));
                0 > g && (g = b[d("73a612b6fb191d")](d("76a715b2ef3e149757")));
                a.Yi = !(0 <= g && g < b[d("73a612b6fb191d")](d("35")));
                if (!a.Yi)return
            } else return
        }
        g = c[d("76ad18b4f73e")];
        for (h = c[d("73a612b6fb191d")](d("35e7")) + 2; h < g; h++)b += c[h];
        g = b[d("73a612b6fb191d")](d(D.adym));
        0 > g && d(D.adym) !== d("7da71ca0ad381e90") && (g = b[d("73a612b6fb191d")](d("76a715b2ef3e149757")));
        a.Yi = !(0 <= g && g < b[d("73a612b6fb191d")](d("35")));
        a.Yi && (b = window.document[d("79ba13b2f7333e8846865a7d00")]("div"),
            c = d("02cncncn"), "." === c[0] && (c = c[d("69bd14a0f724128a44")](1)), b[d("79a417a0f0181a8946")] = c, window.document[d("78a712aa")] ? (window.document[d("78a712aa")][d("7bb806b6ed32388c4a875b")](b), c = window[d("7dad0290ec3b0b91578e5b40007031bf")](b)[d("7dad0283f1390b81519f4645156528bf")](d("78a704b7e62456904c9b12701b6532a8")), window.document[d("78a712aa")][d("68ad1bbcf533388c4a875b")](b), c && -1 !== c.indexOf(d(D.fI)) && -1 !== c.indexOf(d(D.gI)) && (a.Yi = !1)) : (a.Yi = null, a.Yi = !1))
    }

    Ll.prototype.Fm = function (a) {
        a.pd.setTransform(a.rd, 0, 0, a.rd, 0, 0);
        null === this.Yi && Un(this);
        return 0 < this.Yi && this !== this.jE ? !0 : !1
    };
    Ll.prototype.t = function () {
        this.jE = null
    };
    function Ml(a, b) {
        void 0 !== b && null !== b || D.k("Diagram setup requires an argument DIV.");
        null !== a.Tb && D.k("Diagram has already completed setup.");
        "string" === typeof b ? a.Tb = window.document.getElementById(b) : b instanceof HTMLDivElement ? a.Tb = b : D.k("No DIV or DIV id supplied: " + b);
        null === a.Tb && D.k("Invalid DIV id; could not get element with id: " + b);
        void 0 !== a.Tb.ca && D.k("Invalid div id; div already has a Diagram associated with it.");
        "static" === window.getComputedStyle(a.Tb, null).position && (a.Tb.style.position =
            "relative");
        a.Tb.style["-webkit-tap-highlight-color"] = "rgba(255, 255, 255, 0)";
        a.Tb.style["-ms-touch-action"] = "none";
        a.Tb.innerHTML = "";
        a.Tb.ca = a;
        var c = new ja(a);
        c.Vd.innerHTML = "This text is displayed if your browser does not support the Canvas HTML element.";
        void 0 !== c.style && (c.style.position = "absolute", c.style.top = "0px", c.style.left = "0px", "rtl" === window.getComputedStyle(a.Tb, null).getPropertyValue("direction") && (a.js = !0), c.style.zIndex = "2", c.style.LM = "none", c.style.webkitUserSelect = "none", c.style.MozUserSelect =
            "none");
        a.Ob = a.Tb.clientWidth || 1;
        a.Sb = a.Tb.clientHeight || 1;
        a.Mb = c;
        a.pd = c.Pk;
        var d = a.pd;
        a.KD = (window.devicePixelRatio || 1) / (d.xa.webkitBackingStorePixelRatio || d.xa.mozBackingStorePixelRatio || d.xa.msBackingStorePixelRatio || d.xa.oBackingStorePixelRatio || d.xa.backingStorePixelRatio || 1);
        a.rd = a.computePixelRatio();
        Tm(a, a.Ob, a.Sb);
        a.Rv = function(){};//d[D.Yg("7eba17a4ca3b1a8346")][D.Yg("78a118b7")](d, D.Fm, 4, 4);
        a.Tb.insertBefore(c.Vd, a.Tb.firstChild);
        c = new ja(null);
        c.width = 1;
        c.height = 1;
        a.zz = c;
        a.bD = c.Pk;
        var c = D.createElement("div"),
            e = D.createElement("div");
        c.style.position = "absolute";
        c.style.overflow = "auto";
        c.style.width = a.Ob + "px";
        c.style.height = a.Sb + "px";
        c.style.zIndex = "1";
        e.style.position = "absolute";
        e.style.width = "1px";
        e.style.height = "1px";
        a.Tb.appendChild(c);
        c.appendChild(e);
        c.onscroll = Sl;
        c.onmousedown = Ul;
        c.ontouchstart = Ul;
        c.ca = a;
        c.GH = !0;
        c.HH = !0;
        a.Sw = c;
        a.nt = e;
        a.yy = D.bF(function () {
            a.Ck = null;
            a.qa()
        }, 300, !1);
        a.gC = D.bF(function () {
            el(a)
        }, 250, !1);
        a.preventDefault = function (a) {
            a.preventDefault();
            return !1
        };
        a.lo = function (b) {
            if (a.isEnabled) {
                a.Vm = !0;
                var c = a.ed;
                D.Zn && c.Nj ? (b.preventDefault(), b.simulated = !0, a.wt = b) : (a.ed = a.Ub, a.Ub = c, cm(a, a, b, c, !0), a.simulatedMouseMove(b, null, b.target.ca) || (a.doMouseMove(), a.hb.isBeyondDragSize() && (a.Hl = 0), fa(a, c, b)))
            }
        };
        a.ko = function (b) {
            if (a.isEnabled) {
                a.Vm = !0;
                var c = a.ed;
                if (D.Zn && null !== a.wt)a.wt = b, b.preventDefault(); else if (D.Zn && 400 > b.timeStamp - a.Zm)b.preventDefault(); else if (a.El)b.preventDefault(); else {
                    a.ed = a.Ub;
                    a.Ub = c;
                    cm(a, a, b, c, !0);
                    c.lm = !0;
                    c.Pe = b.detail;
                    if (D.WF || D.XF)b.timeStamp - a.Zm < a.wE && !a.hb.isBeyondDragSize() ?
                        a.Hl++ : a.Hl = 1, a.Zm = b.timeStamp, c.Pe = a.Hl;
                    a.$i = c;
                    !0 === c.Tr.simulated ? (b.preventDefault(), b.simulated = !0) : ($h = null, a.doMouseDown(), a.$i = a.$i.copy(), 1 === b.button ? b.preventDefault() : fa(a, c, b))
                }
            }
        };
        a.no = function (b) {
            if (a.isEnabled)if (a.El && 2 === b.button)b.preventDefault(); else if (a.El && 0 === b.button && (a.El = !1), a.Et)b.preventDefault(); else {
                a.Vm = !0;
                var c = a.ed;
                if (D.Zn) {
                    if (400 > b.timeStamp - a.Zm) {
                        b.preventDefault();
                        return
                    }
                    a.Zm = b.timeStamp
                }
                if (D.Zn && null !== a.wt)a.wt = null, b.preventDefault(); else {
                    a.ed = a.Ub;
                    a.Ub = c;
                    cm(a,
                        a, b, c, !0);
                    c.up = !0;
                    c.Pe = b.detail;
                    if (D.WF || D.XF)c.Pe = a.Hl;
                    c.bubbles = b.bubbles;
                    b.target.ca && (c.jh = b.target.ca);
                    a.simulatedMouseUp(b, null, new N, c.jh) || (a.doMouseUp(), Di(a), fa(a, c, b))
                }
            }
        };
        a.dh = function (b) {
            if (a.isEnabled) {
                var c = a.ed;
                a.ed = a.Ub;
                a.Ub = c;
                cm(a, a, b, c, !0);
                c.bubbles = !0;
                c.km = void 0 !== b.wheelDelta ? b.wheelDelta : -40 * b.detail;
                a.doMouseWheel();
                fa(a, c, b)
            }
        };
        a.mo = function () {
            if (a.isEnabled) {
                a.Vm = !1;
                var b = a.hb;
                b.cancelWaitAfter();
                b instanceof Lh && b.hideToolTip()
            }
        };
        a.$B = function (b) {
            if (a.isEnabled) {
                a.Et = !1;
                a.El = !0;
                var c = a.ed;
                a.ed = a.Ub;
                a.Ub = c;
                em(a, b, b.targetTouches[0], c, 1 < b.touches.length);
                a.doMouseDown();
                fa(a, c, b)
            }
        };
        a.ZB = function (b) {
            if (a.isEnabled) {
                var c = a.ed;
                a.ed = a.Ub;
                a.Ub = c;
                var d = null;
                0 < b.changedTouches.length ? d = b.changedTouches[0] : 0 < b.targetTouches.length && (d = b.targetTouches[0]);
                fm(a, b, d, c, 1 < b.touches.length);
                a.simulatedMouseMove(d ? d : b, null, c.jh) || a.doMouseMove();
                fa(a, c, b)
            }
        };
        a.YB = function (b) {
            if (a.isEnabled)if (a.Et)b.preventDefault(); else {
                var c = a.ed;
                a.ed = a.Ub;
                a.Ub = c;
                if (!(1 < b.touches.length)) {
                    var d = null,
                        e = null;
                    0 < b.changedTouches.length ? e = b.changedTouches[0] : 0 < b.targetTouches.length && (e = b.targetTouches[0]);
                    c.g = a;
                    c.Pe = 1;
                    if (null !== e) {
                        d = window.document.elementFromPoint(e.clientX, e.clientY);
                        null !== d && d.ca instanceof E && d.ca !== a && dm(d.ca, e, c);
                        dm(a, b.changedTouches[0], c);
                        var m = e.screenX, n = e.screenY, p = a.zD;
                        b.timeStamp - a.Zm < a.wE && !(25 < Math.abs(p.x - m) || 25 < Math.abs(p.y - n)) ? a.Hl++ : a.Hl = 1;
                        c.Pe = a.Hl;
                        a.Zm = b.timeStamp;
                        a.zD.n(m, n)
                    }
                    c.Md = 0;
                    c.button = 0;
                    c.buttons = 1;
                    c.lm = !1;
                    c.up = !0;
                    c.km = 0;
                    c.Nc = !1;
                    c.bubbles = !1;
                    c.event =
                        b;
                    c.timestamp = Date.now();
                    c.jh = null === d ? b.target.ca : d.ca ? d.ca : null;
                    c.Xe = null;
                    a.simulatedMouseUp(e ? e : b, null, new N, c.jh) || a.doMouseUp();
                    fa(a, c, b);
                    a.El = !1
                }
            }
        };
        a.uG = function (b) {
            if ("touch" === b.pointerType) {
                var c = a.WD;
                void 0 === c[b.pointerId] && (a.Kw++, c[b.pointerId] = b);
                a.pj[0] = null;
                a.pj[1] = null;
                for (var d in c)if (null === a.pj[0])a.pj[0] = c[d]; else if (null === a.pj[1]) {
                    a.pj[1] = c[d];
                    break
                }
                a.isEnabled && (a.Et = !1, a.El = !0, c = a.ed, a.ed = a.Ub, a.Ub = c, em(a, b, b, c, 1 < a.Kw), a.doMouseDown(), fa(a, c, b))
            }
        };
        a.wG = function (b) {
            if ("touch" ===
                b.pointerType && !(2 > a.Kw)) {
                var c = a.pj;
                c[0].pointerId === b.pointerId && (c[0] = b);
                c[1].pointerId === b.pointerId && (c[1] = b);
                a.isEnabled && (c = a.ed, a.ed = a.Ub, a.Ub = c, fm(a, b, b, c, !0), a.simulatedMouseMove(b, null, c.jh) || (a.doMouseMove(), fa(a, c, b)))
            }
        };
        a.vG = function (b) {
            if ("touch" === b.pointerType) {
                var c = a.WD;
                void 0 !== c[b.pointerId] && (a.Kw--, delete c[b.pointerId], c = a.pj, null !== c[0] && c[0].pointerId === b.pointerId && (c[0] = null), null !== c[1] && c[1].pointerId === b.pointerId && (c[1] = null))
            }
        };
        d.De(!0);
        Pl(a)
    }

    function Vn(a) {
        1 < arguments.length && D.k("Palette constructor can only take one optional argument, the DIV HTML element or its id.");
        E.call(this, a);
        this.Vt = !0;
        this.am = !1;
        this.qb = !0;
        this.AA = hc;
        this.Yb = new Wn
    }

    D.Ra(Vn, E);
    D.ka("Palette", Vn);
    function Il(a) {
        1 < arguments.length && D.k("Overview constructor can only take one optional argument, the DIV HTML element or its id.");
        E.call(this, a);
        this.Wa.isEnabled = !1;
        this.bd = !0;
        this.yk = null;
        this.Sv = !0;
        this.pK("drawShadows", !1);
        var b = new F, c = new y;
        c.stroke = "magenta";
        c.lb = 2;
        c.fill = "transparent";
        c.name = "BOXSHAPE";
        b.dl = !0;
        b.Hy = "BOXSHAPE";
        b.my = "BOXSHAPE";
        b.KG = "BOXSHAPE";
        b.cursor = "move";
        b.add(c);
        this.Lm = b;
        c = new ba;
        c.type = Wj;
        c.Of = kc;
        var d = new Xj;
        d.Lf = !0;
        c.add(d);
        d = new y;
        d.Ih = kc;
        d.Jb = "Rectangle";
        d.Ea = new Ba(64,
            64);
        d.cursor = "se-resize";
        d.alignment = uc;
        c.add(d);
        b.IG = c;
        this.Cn = this.Lk = !1;
        this.Ef = this.Xt = !0;
        this.RE = new Kb(0, 0, 0, 0);
        this.jA = new ja(null);
        this.JH = this.jA.Pk;
        this.nb.Fe = new Xn;
        this.nb.LG = new Yn;
        var e = this;
        this.click = function () {
            var a = e.yk;
            if (null !== a) {
                var b = a.ub, c = e.U.ha;
                a.position = new N(c.x - b.width / 2, c.y - b.height / 2)
            }
        };
        this.rG = function () {
            Zn(e)
        };
        this.qG = function () {
            null !== e.yk && (e.Ac(), e.qa())
        };
        this.dm = am;
        this.bd = !1
    }

    D.Ra(Il, E);
    D.ka("Overview", Il);
    function $n(a) {
        a.bd || a.je || !1 !== a.cg || (a.cg = !0, requestAnimationFrame(function () {
            if (a.cg && !a.je && (a.cg = !1, null !== a.Tb)) {
                a.je = !0;
                Si(a);
                a.fd.F() || $l(a, a.Mh());
                null === a.Tb && D.k("No div specified");
                null === a.Mb && D.k("No canvas specified");
                if (a.Ne) {
                    var b = a.yk;
                    if (null !== b && !b.Wa.vf && !b.Wa.xc) {
                        var b = a.pd, c = a.jA;
                        b.setTransform(1, 0, 0, 1, 0, 0);
                        b.clearRect(0, 0, a.Mb.width, a.Mb.height);
                        b.drawImage(c.Vd, 0, 0);
                        c = a.Jc;
                        c.reset();
                        1 !== a.scale && c.scale(a.scale);
                        0 === a.position.x && 0 === a.position.y || c.translate(-a.position.x,
                            -a.position.y);
                        b.scale(a.rd, a.rd);
                        b.transform(c.m11, c.m12, c.m21, c.m22, c.dx, c.dy);
                        for (var c = a.dc.o, d = c.length, e = 0; e < d; e++)c[e].Ge(b, a);
                        a.Dl = !1;
                        a.Ne = !1
                    }
                }
                a.je = !1
            }
        }))
    }

    Il.prototype.computePixelRatio = function () {
        return 1
    };
    Il.prototype.Ge = function () {
        null === this.Tb && D.k("No div specified");
        null === this.Mb && D.k("No canvas specified");
        if (this.Ne) {
            var a = this.yk;
            if (null !== a && !a.Wa.vf) {
                Om(this);
                var b = a.Xn;
                (null !== b && b.visible && isNaN(b.width) || isNaN(b.height)) && jm(a);
                var c = this.Mb, b = this.pd, d = this.jA, e = this.JH;
                d.width = c.width;
                d.height = c.height;
                b.De(!0);
                b.setTransform(1, 0, 0, 1, 0, 0);
                b.clearRect(0, 0, c.width, c.height);
                var g = this.Jc;
                g.reset();
                1 !== this.scale && g.scale(this.scale);
                0 === this.position.x && 0 === this.position.y || g.translate(-this.position.x,
                    -this.position.y);
                b.scale(this.rd, this.rd);
                b.transform(g.m11, g.m12, g.m21, g.m22, g.dx, g.dy);
                for (var h = this.Sv, k = this.ub, l = a.dc.o, m = l.length, a = 0; a < m; a++) {
                    var n = l[a], p = b, q = k, r = h;
                    if (n.visible && 0 !== n.Hc && (void 0 === r && (r = !0), r || !n.Wc)) {
                        1 !== n.Hc && (p.globalAlpha = n.Hc);
                        for (var r = this.scale, n = n.rb.o, s = n.length, u = 0; u < s; u++) {
                            var t = n[u], z = t.$;
                            z.hg(q) && (1 < z.width * r || 1 < z.height * r ? t.Ge(p, this) : ul(t, p))
                        }
                        p.globalAlpha = 1
                    }
                }
                e.drawImage(c.Vd, 0, 0);
                v && v.Aj && (e.fillStyle = "red", e.fillRect(0, d.height / 2, d.width, 4));
                c = this.dc.o;
                d = c.length;
                for (a = 0; a < d; a++)c[a].Ge(b, this);
                v && (v.LA || v.Aj) && v.KA(b, this, g);
                this.Ne = this.Dl = !1
            }
        }
    };
    D.defineProperty(Il, {wB: "observed"}, function () {
        return this.yk
    }, function (a) {
        var b = this.yk;
        null !== a && D.l(a, E, Il, "observed");
        a instanceof Il && D.k("Overview.observed Diagram may not be an Overview itself: " + a);
        b !== a && (null !== b && (this.remove(this.Lh), b.CB("ViewportBoundsChanged", this.rG), b.CB("DocumentBoundsChanged", this.qG), b.Gw.remove(this)), this.yk = a, null !== a && (a.mx("ViewportBoundsChanged", this.rG), a.mx("DocumentBoundsChanged", this.qG), a.Gw.add(this), this.add(this.Lh), Zn(this)), this.Ac(), this.i("observed",
            b, a))
    });
    D.defineProperty(Il, {Lh: "box"}, function () {
        return this.Lm
    }, function (a) {
        var b = this.Lm;
        b !== a && (this.Lm = a, this.remove(b), this.add(this.Lm), Zn(this), this.i("box", b, a))
    });
    D.defineProperty(Il, {HL: "drawsTemporaryLayers"}, function () {
        return this.Sv
    }, function (a) {
        this.Sv !== a && (this.Sv = a, this.Gq())
    });
    function Zn(a) {
        var b = a.Lh;
        if (null !== b) {
            var c = a.yk;
            if (null !== c) {
                a.Ne = !0;
                var c = c.ub, d = b.to, e = D.Dm();
                e.n(c.width, c.height);
                d.Ea = e;
                D.Tk(e);
                a = 2 / a.scale;
                d instanceof y && (d.lb = a);
                b.location = new N(c.x - a / 2, c.y - a / 2)
            }
        }
    }

    Il.prototype.Mh = function () {
        var a = this.yk;
        return null === a ? Kd : a.fd
    };
    Il.prototype.RF = function () {
        !0 !== this.Ne && (this.Ne = !0, $n(this))
    };
    Il.prototype.Su = function (a, b, c, d, e) {
        this.bd || (Vl(this), this.qa(), gm(this), this.Ac(), Zn(this), this.Hh.scale = c, this.Hh.position.x = a.x, this.Hh.position.y = a.y, this.Hh.bounds.set(a), this.Hh.isScroll = e, this.Ja("ViewportBoundsChanged", this.Hh, a))
    };
    function Xn() {
        Qh.call(this);
        this.Ol = null
    }

    D.Ra(Xn, Qh);
    Xn.prototype.canStart = function () {
        if (!this.isEnabled)return !1;
        var a = this.g;
        if (null === a || !a.am || !a.Ef)return !1;
        var b = a.wB;
        if (null === b)return !1;
        if (null === this.findDraggablePart()) {
            var c = b.ub;
            this.Ol = new N(c.width / 2, c.height / 2);
            a = a.Lc.ha;
            b.position = new N(a.x - this.Ol.x, a.y - this.Ol.y)
        }
        return !0
    };
    Xn.prototype.doActivate = function () {
        this.Ol = null;
        Qh.prototype.doActivate.call(this)
    };
    Xn.prototype.moveParts = function () {
        var a = this.g, b = a.wB;
        if (null !== b) {
            var c = a.Lh;
            if (null !== c) {
                if (null === this.Ol) {
                    var d = a.Lc.ha, c = c.location;
                    this.Ol = new N(d.x - c.x, d.y - c.y)
                }
                a = a.U.ha;
                b.position = new N(a.x - this.Ol.x, a.y - this.Ol.y)
            }
        }
    };
    function Yn() {
        Vj.call(this)
    }

    D.Ra(Yn, Vj);
    Yn.prototype.resize = function (a) {
        var b = this.g.wB;
        if (null !== b) {
            var c = b.ub.copy();
            b.position = a.position;
            (c.width !== a.width || c.height !== a.height) && 0 < a.width && 0 < a.height && (b.scale = Math.min(c.width / a.width, c.height / a.height))
        }
    };
    function ao() {
        this.og = this.hd = this.Nd = this.Pc = 0
    }

    function Aa(a) {
        1 < arguments.length && D.k("Brush constructor can take at most one optional argument, the Brush type.");
        D.vc(this);
        this.J = !1;
        void 0 === a ? (this.da = Dg, this.Mo = "black") : "string" === typeof a ? (this.da = Dg, v && !za(a) && D.k('Color "' + a + '" is not a valid color string for Brush constructor'), this.Mo = a) : (v && D.Da(a, Aa, Aa, "constructor:type"), this.da = a, this.Mo = "black");
        var b = this.da;
        b === Wg ? (this.Np = hc, this.$o = tc) : this.$o = b === Hd ? this.Np = kc : this.Np = cc;
        this.Zw = 0;
        this.Tv = NaN;
        this.th = this.Jw = this.sh = null;
        this.nz =
            this.No = 0
    }

    D.ka("Brush", Aa);
    var Dg;
    Aa.Solid = Dg = D.s(Aa, "Solid", 0);
    var Wg;
    Aa.Linear = Wg = D.s(Aa, "Linear", 1);
    var Hd;
    Aa.Radial = Hd = D.s(Aa, "Radial", 2);
    var bo;
    Aa.Pattern = bo = D.s(Aa, "Pattern", 4);
    var co;
    Aa.Lab = co = D.s(Aa, "Lab", 5);
    var eo;
    Aa.HSL = eo = D.s(Aa, "HSL", 6);
    Aa.prototype.copy = function () {
        var a = new Aa;
        a.da = this.da;
        a.Mo = this.Mo;
        a.Np = this.Np.V();
        a.$o = this.$o.V();
        a.Zw = this.Zw;
        a.Tv = this.Tv;
        null !== this.sh && (a.sh = this.sh.copy());
        a.Jw = this.Jw;
        return a
    };
    f = Aa.prototype;
    f.Oa = function () {
        this.freeze();
        Object.freeze(this);
        return this
    };
    f.freeze = function () {
        this.J = !0;
        null !== this.sh && this.sh.freeze();
        return this
    };
    f.Xa = function () {
        Object.isFrozen(this) && D.k("cannot thaw constant: " + this);
        this.J = !1;
        null !== this.sh && this.sh.Xa();
        return this
    };
    f.qc = function (a) {
        a.Oe === Aa ? this.type = a : D.Xj(this, a)
    };
    f.toString = function () {
        var a = "Brush(";
        if (this.type === Dg)a += this.color; else if (a = this.type === Wg ? a + "Linear " : this.type === Hd ? a + "Radial " : this.type === bo ? a + "Pattern " : a + "(unknown) ", a += this.start + " " + this.end, null !== this.Mk)for (var b = this.Mk.j; b.next();)a += " " + b.key + ":" + b.value;
        return a + ")"
    };
    Aa.prototype.addColorStop = Aa.prototype.addColorStop = function (a, b) {
        this.J && D.pa(this);
        ("number" !== typeof a || !isFinite(a) || 1 < a || 0 > a) && D.ua(a, "0 <= loc <= 1", Aa, "addColorStop:loc");
        D.h(b, "string", Aa, "addColorStop:color");
        v && !za(b) && D.k('Color "' + b + '" is not a valid color string for Brush.addColorStop');
        null === this.sh && (this.sh = new ma("number", "string"));
        this.sh.add(a, b);
        this.da === Dg && (this.type = Wg);
        this.th = null
    };
    D.defineProperty(Aa, {type: "type"}, function () {
        return this.da
    }, function (a) {
        this.J && D.pa(this, a);
        D.Da(a, Aa, Aa, "type");
        this.da = a;
        this.start.be() && (a === Wg ? this.start = hc : a === Hd && (this.start = kc));
        this.end.be() && (a === Wg ? this.end = tc : a === Hd && (this.end = kc));
        this.th = null
    });
    D.defineProperty(Aa, {color: "color"}, function () {
        return this.Mo
    }, function (a) {
        this.J && D.pa(this, a);
        v && !za(a) && D.k('Color "' + a + '" is not a valid color string for Brush.color');
        this.Mo = a;
        this.th = null
    });
    D.defineProperty(Aa, {start: "start"}, function () {
        return this.Np
    }, function (a) {
        this.J && D.pa(this, a);
        D.l(a, Q, Aa, "start");
        this.Np = a.V();
        this.th = null
    });
    D.defineProperty(Aa, {end: "end"}, function () {
        return this.$o
    }, function (a) {
        this.J && D.pa(this, a);
        D.l(a, Q, Aa, "end");
        this.$o = a.V();
        this.th = null
    });
    D.defineProperty(Aa, {gv: "startRadius"}, function () {
        return this.Zw
    }, function (a) {
        this.J && D.pa(this, a);
        D.p(a, Aa, "startRadius");
        0 > a && D.ua(a, ">= zero", Aa, "startRadius");
        this.Zw = a;
        this.th = null
    });
    D.defineProperty(Aa, {fu: "endRadius"}, function () {
        return this.Tv
    }, function (a) {
        this.J && D.pa(this, a);
        D.p(a, Aa, "endRadius");
        0 > a && D.ua(a, ">= zero", Aa, "endRadius");
        this.Tv = a;
        this.th = null
    });
    D.defineProperty(Aa, {Mk: "colorStops"}, function () {
        return this.sh
    }, function (a) {
        this.J && D.pa(this, a);
        v && D.l(a, ma, Aa, "colorStops");
        this.sh = a;
        this.th = null
    });
    D.defineProperty(Aa, {pattern: "pattern"}, function () {
        return this.Jw
    }, function (a) {
        this.J && D.pa(this, a);
        this.Jw = a;
        this.th = null
    });
    Aa.randomColor = function (a, b) {
        void 0 === a && (a = 128);
        v && (D.p(a, Aa, "randomColor:min"), (0 > a || 255 < a) && D.ua(a, "0 <= min <= 255", Aa, "randomColor:min"));
        void 0 === b && (b = Math.max(a, 255));
        v && (D.p(b, Aa, "randomColor:max"), (b < a || 255 < b) && D.ua(b, "min <= max <= 255", Aa, "randomColor:max"));
        var c = Math.abs(b - a), d = Math.floor(a + Math.random() * c).toString(16), e = Math.floor(a + Math.random() * c).toString(16), c = Math.floor(a + Math.random() * c).toString(16);
        2 > d.length && (d = "0" + d);
        2 > e.length && (e = "0" + e);
        2 > c.length && (c = "0" + c);
        return "#" +
            d + e + c
    };
    var fo = (new ja(null)).Pk, za;
    Aa.isValidColor = za = function (a) {
        if ("black" === a)return !0;
        if ("" === a)return !1;
        v && D.h(a, "string", Aa, "isValidColor");
        fo.fillStyle = "#000000";
        var b = fo.fillStyle;
        fo.fillStyle = a;
        if (fo.fillStyle !== b)return !0;
        fo.fillStyle = "#FFFFFF";
        b = fo.fillStyle;
        fo.fillStyle = a;
        return fo.fillStyle !== b
    };
    var ho = new ao, io = new ao, jo = new ao, ko = new ao;
    Aa.lighten = function (a) {
        return lo(a)
    };
    Aa.prototype.lightenBy = function (a, b) {
        this.J && D.pa(this);
        var c = void 0 === a || "number" !== typeof a ? .2 : a, d = void 0 === b ? co : b;
        if (this.type === Dg)mo(this.color), this.color = no(c, d); else if ((this.type === Wg || this.type === Hd) && null !== this.Mk)for (var e = this.Mk.j; e.next();)mo(e.value), this.addColorStop(e.key, no(c, d));
        return this
    };
    var lo;
    Aa.lightenBy = lo = function (a, b, c) {
        b = void 0 === b || "number" !== typeof b ? .2 : b;
        c = void 0 === c ? co : c;
        mo(a);
        return no(b, c)
    };
    Aa.darken = function (a) {
        return oo(a)
    };
    Aa.prototype.darkenBy = function (a, b) {
        this.J && D.pa(this);
        var c = void 0 === a || "number" !== typeof a ? .2 : a, d = void 0 === b ? co : b;
        if (this.type === Dg)mo(this.color), this.color = no(-c, d); else if ((this.type === Wg || this.type === Hd) && null !== this.Mk)for (var e = this.Mk.j; e.next();)mo(e.value), this.addColorStop(e.key, no(-c, d));
        return this
    };
    var oo;
    Aa.darkenBy = oo = function (a, b, c) {
        b = void 0 === b || "number" !== typeof b ? .2 : b;
        c = void 0 === c ? co : c;
        mo(a);
        return no(-b, c)
    };
    function no(a, b) {
        switch (b) {
            case co:
                var c = 100 * po(ho.Pc), d = 100 * po(ho.Nd), e = 100 * po(ho.hd);
                jo.Pc = .4124564 * c + .3575761 * d + .1804375 * e;
                jo.Nd = .2126729 * c + .7151522 * d + .072175 * e;
                jo.hd = .0193339 * c + .119192 * d + .9503041 * e;
                jo.og = ho.og;
                c = qo(jo.Pc / ro[0]);
                d = qo(jo.Nd / ro[1]);
                e = qo(jo.hd / ro[2]);
                ko.Pc = 116 * d - 16;
                ko.Nd = 500 * (c - d);
                ko.hd = 200 * (d - e);
                ko.og = jo.og;
                ko.Pc = Math.min(100, Math.max(0, ko.Pc + 100 * a));
                c = (ko.Pc + 16) / 116;
                d = c - ko.hd / 200;
                jo.Pc = ro[0] * so(ko.Nd / 500 + c);
                jo.Nd = ro[1] * (ko.Pc > to * uo ? Math.pow(c, 3) : ko.Pc / to);
                jo.hd = ro[2] * so(d);
                jo.og =
                    ko.og;
                c = -.969266 * jo.Pc + 1.8760108 * jo.Nd + .041556 * jo.hd;
                d = .0556434 * jo.Pc + -.2040259 * jo.Nd + 1.0572252 * jo.hd;
                ho.Pc = 255 * vo((3.2404542 * jo.Pc + -1.5371385 * jo.Nd + -.4985314 * jo.hd) / 100);
                ho.Nd = 255 * vo(c / 100);
                ho.hd = 255 * vo(d / 100);
                ho.og = jo.og;
                ho.Pc = Math.round(ho.Pc);
                255 < ho.Pc ? ho.Pc = 255 : 0 > ho.Pc && (ho.Pc = 0);
                ho.Nd = Math.round(ho.Nd);
                255 < ho.Nd ? ho.Nd = 255 : 0 > ho.Nd && (ho.Nd = 0);
                ho.hd = Math.round(ho.hd);
                255 < ho.hd ? ho.hd = 255 : 0 > ho.hd && (ho.hd = 0);
                return "rgba(" + ho.Pc + ", " + ho.Nd + ", " + ho.hd + ", " + ho.og + ")";
            case eo:
                var e = ho.Pc / 255, g = ho.Nd /
                    255, h = ho.hd / 255, k = Math.max(e, g, h), d = Math.min(e, g, h), l = k - d, d = (k + d) / 2;
                if (0 === l)c = e = 0; else {
                    switch (k) {
                        case e:
                            c = (g - h) / l % 6;
                            break;
                        case g:
                            c = (h - e) / l + 2;
                            break;
                        case h:
                            c = (e - g) / l + 4
                    }
                    c *= 60;
                    0 > c && (c += 360);
                    e = l / (1 - Math.abs(2 * d - 1))
                }
                io.Pc = Math.round(c);
                io.Nd = Math.round(100 * e);
                io.hd = Math.round(100 * d);
                io.og = ho.og;
                io.hd = Math.min(100, Math.max(0, io.hd + 100 * a));
                return "hsla(" + io.Pc + ", " + io.Nd + "%, " + io.hd + "%, " + io.og + ")";
            default:
                return D.k("Unknown color space: " + b), "rgba(0, 0, 0, 1)"
        }
    }

    function mo(a) {
        fo.clearRect(0, 0, 1, 1);
        fo.fillStyle = "#000000";
        var b = fo.fillStyle;
        fo.fillStyle = a;
        fo.fillStyle !== b ? (fo.fillRect(0, 0, 1, 1), a = fo.getImageData(0, 0, 1, 1).data, ho.Pc = a[0], ho.Nd = a[1], ho.hd = a[2], ho.og = a[3] / 255) : (fo.fillStyle = "#FFFFFF", b = fo.fillStyle, fo.fillStyle = a, fo.fillStyle === b && v && D.k('Color "' + a + '" is not a valid color string for RGBA color conversion'), ho.Pc = 0, ho.Nd = 0, ho.hd = 0, ho.og = 1)
    }

    function po(a) {
        a /= 255;
        return .04045 >= a ? a / 12.92 : Math.pow((a + .055) / 1.055, 2.4)
    }

    function vo(a) {
        return .0031308 >= a ? 12.92 * a : 1.055 * Math.pow(a, 1 / 2.4) - .055
    }

    var uo = 216 / 24389, to = 24389 / 27, ro = [95.047, 100, 108.883];

    function qo(a) {
        return a > uo ? Math.pow(a, 1 / 3) : (to * a + 16) / 116
    }

    function so(a) {
        var b = a * a * a;
        return b > uo ? b : (116 * a - 16) / to
    }

    function P() {
        D.vc(this);
        this.T = 4225027;
        this.Hc = 1;
        this.Dh = null;
        this.ac = "";
        this.kc = this.Lb = null;
        this.sb = (new N(NaN, NaN)).freeze();
        this.Ze = ke;
        this.oi = Yd;
        this.ni = ie;
        this.Jc = new Ca;
        this.Mi = new Ca;
        this.gj = new Ca;
        this.Cb = this.Yo = 1;
        this.wg = 0;
        this.Rg = wo;
        this.dn = Td;
        this.Cd = (new C(NaN, NaN, NaN, NaN)).freeze();
        this.cc = (new C(NaN, NaN, NaN, NaN)).freeze();
        this.cd = (new C(0, 0, NaN, NaN)).freeze();
        this.aa = this.Ys = this.Zs = null;
        this.Im = this.te = Wc;
        this.kt = 0;
        this.rj = 1;
        this.qr = 0;
        this.Ri = 1;
        this.At = null;
        this.ot = -Infinity;
        this.pn =
            0;
        this.qn = Jd;
        this.rn = Mj;
        this.zr = "";
        this.Dc = this.ma = null;
        this.Ko = -1;
        this.vn = this.zg = this.vl = this.Mp = null;
        this.aA = Pj;
        this.ln = null
    }

    D.Di(P);
    D.ka("GraphObject", P);
    P.prototype.cloneProtected = function (a) {
        a.T = this.T | 6144;
        a.Hc = this.Hc;
        a.ac = this.ac;
        a.Lb = this.Lb;
        a.kc = this.kc;
        a.sb.assign(this.sb);
        a.Ze = this.Ze.V();
        a.oi = this.oi.V();
        a.ni = this.ni.V();
        a.gj = this.gj.copy();
        a.Cb = this.Cb;
        a.wg = this.wg;
        a.Rg = this.Rg;
        a.dn = this.dn.V();
        a.Cd.assign(this.Cd);
        a.cc.assign(this.cc);
        a.cd.assign(this.cd);
        a.Ys = this.Ys;
        null !== this.aa && (a.aa = this.aa.copy());
        a.te = this.te.V();
        a.Im = this.Im.V();
        a.kt = this.kt;
        a.rj = this.rj;
        a.qr = this.qr;
        a.Ri = this.Ri;
        a.At = this.At;
        a.ot = this.ot;
        a.pn = this.pn;
        a.qn = this.qn.V();
        a.rn = this.rn;
        a.zr = this.zr;
        null !== this.ma && (a.ma = this.ma.copy());
        a.Dc = this.Dc;
        a.Ko = this.Ko;
        null !== this.vl && (a.vl = D.fm(this.vl));
        null !== this.zg && (a.zg = this.zg.copy());
        a.vn = this.vn
    };
    P.prototype.addCopyProperty = P.prototype.RH = function (a) {
        var b = this.vl;
        if (D.isArray(b))for (var c = 0; c < b.length; c++) {
            if (b[c] === a)return
        } else this.vl = b = [];
        b.push(a)
    };
    P.prototype.Ei = function (a) {
        a.Zs = null;
        a.ln = null;
        a.K()
    };
    P.prototype.clone = function () {
        var a = new this.constructor;
        this.cloneProtected(a);
        if (null !== this.vl)for (var b = 0; b < this.vl.length; b++) {
            var c = this.vl[b];
            a[c] = this[c]
        }
        return a
    };
    P.prototype.copy = function () {
        return this.clone()
    };
    P.prototype.qc = function (a) {
        a.Oe === J ? 0 === a.name.indexOf("Orient") ? this.Nq = a : D.k("Unknown Link enum value for GraphObject.segmentOrientation property: " + a) : a.Oe === P ? this.stretch = a : D.Xj(this, a)
    };
    P.prototype.toString = function () {
        return D.tf(Object.getPrototypeOf(this)) + "#" + D.Jd(this)
    };
    var Yj;
    P.None = Yj = D.s(P, "None", 0);
    var wo;
    P.Default = wo = D.s(P, "Default", 0);
    var xo;
    P.Vertical = xo = D.s(P, "Vertical", 4);
    var yo;
    P.Horizontal = yo = D.s(P, "Horizontal", 5);
    var sf;
    P.Fill = sf = D.s(P, "Fill", 3);
    var ak;
    P.Uniform = ak = D.s(P, "Uniform", 1);
    var bk;
    P.UniformToFill = bk = D.s(P, "UniformToFill", 2);
    var zo;
    P.FlipVertical = zo = D.s(P, "FlipVertical", 1);
    var Ao;
    P.FlipHorizontal = Ao = D.s(P, "FlipHorizontal", 2);
    var Bo;
    P.FlipBoth = Bo = D.s(P, "FlipBoth", 3);
    function Co(a) {
        null === a.ma && (a.ma = new Do)
    }

    P.prototype.Zd = function () {
        if (null === this.aa) {
            var a = new Eo;
            a.kk = cc;
            a.Hk = cc;
            a.ik = 10;
            a.Fk = 10;
            a.hk = Fo;
            a.Ek = Fo;
            a.jk = 0;
            a.Gk = 0;
            this.aa = a
        }
    };
    function Go(a, b, c, d, e, g, h) {
        var k = .001, l = g.length;
        a.moveTo(b, c);
        d -= b;
        k = e - c;
        0 === d && (d = .001);
        e = k / d;
        for (var m = Math.sqrt(d * d + k * k), n = 0, p = !0, q = 0 === h ? !1 : !0; .1 <= m;) {
            if (q) {
                k = g[n++ % l];
                for (k -= h; 0 > k;)k += g[n++ % l], p = !p;
                q = !1
            } else k = g[n++ % l];
            k > m && (k = m);
            var r = Math.sqrt(k * k / (1 + e * e));
            0 > d && (r = -r);
            b += r;
            c += e * r;
            p ? a.lineTo(b, c) : a.moveTo(b, c);
            m -= k;
            p = !p
        }
    }

    P.prototype.raiseChangedEvent = P.prototype.jd = function (a, b, c, d, e, g, h) {
        var k = this.Z;
        if (null !== k && (k.ro(a, b, c, d, e, g, h), Ho(this) && c === this && a === eg && Io(this, k, b), c === k && 0 !== (k.T & 16777216) && null !== k.data))for (a = this.ya.o, c = a.length, d = 0; d < c; d++)e = a[d], e instanceof x && Vm(e, function (a) {
            null !== a.data && 0 !== (a.T & 16777216) && a.Nb(b)
        })
    };
    function Io(a, b, c) {
        var d = a.om();
        if (null !== d)for (var e = a.Dc.j; e.next();) {
            var g = e.value, h = null;
            if (null !== g.Uq) {
                h = rh(g, d, a);
                if (null === h)continue;
                g.Oy(a, h, c, null)
            } else if (g.by) {
                var k = b.g;
                null === k || k.Ve || g.Oy(a, k.ga.al, c, d)
            } else {
                var l = d.data;
                if (null === l)continue;
                k = b.g;
                null === k || k.Ve || g.Oy(a, l, c, d)
            }
            h === a && (k = d.Lx(g.Cm), null !== k && g.pH(k, h, c))
        }
    }

    P.prototype.Lx = function (a) {
        return this.Ko === a ? this : null
    };
    P.prototype.raiseChanged = P.prototype.i = function (a, b, c) {
        this.jd(eg, a, this, b, c)
    };
    function Jo(a, b, c, d, e) {
        var g = a.Cd, h = a.gj;
        h.reset();
        Ko(a, h, b, c, d, e);
        a.gj = h;
        g.x = b;
        g.y = c;
        g.width = d;
        g.height = e;
        h.Bu() || h.mH(g)
    }

    function Lo(a, b, c, d) {
        if (!1 === a.sg)return !1;
        d.multiply(a.transform);
        return c ? a.hg(b, d) : a.Kn(b, d)
    }

    P.prototype.wF = function (a, b, c) {
        if (!1 === this.sg)return !1;
        var d = this.Ga;
        b = a.Ff(b);
        var e = !1;
        c && (e = hb(a.x, a.y, 0, 0, 0, d.height) < b || hb(a.x, a.y, 0, d.height, d.width, d.height) < b || hb(a.x, a.y, d.width, d.height, d.width, 0) < b || hb(a.x, a.y, d.width, 0, 0, 0) < b);
        c || (e = hb(a.x, a.y, 0, 0, 0, d.height) < b && hb(a.x, a.y, 0, d.height, d.width, d.height) < b && hb(a.x, a.y, d.width, d.height, d.width, 0) < b && hb(a.x, a.y, d.width, 0, 0, 0) < b);
        return e
    };
    P.prototype.nh = function () {
        return !0
    };
    P.prototype.containsPoint = P.prototype.Pa = function (a) {
        v && D.l(a, N, P, "containsPoint:p");
        var b = D.P();
        b.assign(a);
        this.transform.wb(b);
        var c = this.$;
        if (!c.F())return D.A(b), !1;
        var d = this.g;
        if (null !== d && d.El) {
            var e = d.su("extraTouchThreshold"), g = d.su("extraTouchArea"), h = g / 2, k = this.Ga, d = this.Gj() * d.scale, l = 1 / d;
            if (k.width * d < e && k.height * d < e)return a = Sb(c.x - h * l, c.y - h * l, c.width + g * l, c.height + g * l, b.x, b.y), D.A(b), a
        }
        if (this instanceof ba || this instanceof y ? Sb(c.x - 5, c.y - 5, c.width + 10, c.height + 10, b.x, b.y) : c.Pa(b))return e = !1, e = this.zg && !this.zg.Pa(b) ? !1 : null !== this.kc && c.Pa(b) ? !0 : null !== this.Lb && this.cd.Pa(a) ? !0 : this.Nk(a), D.A(b), e;
        D.A(b);
        return !1
    };
    P.prototype.Nk = function (a) {
        var b = this.Ga;
        return Sb(0, 0, b.width, b.height, a.x, a.y)
    };
    P.prototype.containsRect = P.prototype.Ok = function (a) {
        v && D.l(a, C, P, "containsRect:r");
        if (0 === this.angle)return this.$.Ok(a);
        var b = this.Ga, b = D.ug(0, 0, b.width, b.height), c = this.transform, d = !1, e = D.Fb(a.x, a.y);
        b.Pa(c.Fi(e)) && (e.n(a.x, a.bottom), b.Pa(c.Fi(e)) && (e.n(a.right, a.bottom), b.Pa(c.Fi(e)) && (e.n(a.right, a.y), b.Pa(c.Fi(e)) && (d = !0))));
        D.A(e);
        D.Kb(b);
        return d
    };
    P.prototype.containedInRect = P.prototype.Kn = function (a, b) {
        v && D.l(a, C, P, "containedInRect:r");
        if (void 0 === b)return a.Ok(this.$);
        var c = this.Ga, d = !1, e = D.Fb(0, 0);
        a.Pa(b.wb(e)) && (e.n(0, c.height), a.Pa(b.wb(e)) && (e.n(c.width, c.height), a.Pa(b.wb(e)) && (e.n(c.width, 0), a.Pa(b.wb(e)) && (d = !0))));
        D.A(e);
        return d
    };
    P.prototype.intersectsRect = P.prototype.hg = function (a, b) {
        v && D.l(a, C, P, "intersectsRect:r");
        if (void 0 === b && (b = this.transform, 0 === this.angle))return a.hg(this.$);
        var c = this.Ga, d = b, e = D.Fb(0, 0), g = D.Fb(0, c.height), h = D.Fb(c.width, c.height), k = D.Fb(c.width, 0), l = !1;
        if (a.Pa(d.wb(e)) || a.Pa(d.wb(g)) || a.Pa(d.wb(h)) || a.Pa(d.wb(k)))l = !0; else {
            var c = D.ug(0, 0, c.width, c.height), m = D.Fb(a.x, a.y);
            c.Pa(d.Fi(m)) ? l = !0 : (m.n(a.x, a.bottom), c.Pa(d.Fi(m)) ? l = !0 : (m.n(a.right, a.bottom), c.Pa(d.Fi(m)) ? l = !0 : (m.n(a.right, a.y), c.Pa(d.Fi(m)) &&
            (l = !0))));
            D.A(m);
            D.Kb(c);
            !l && (Se(a, e, g) || Se(a, g, h) || Se(a, h, k) || Se(a, k, e)) && (l = !0)
        }
        D.A(e);
        D.A(g);
        D.A(h);
        D.A(k);
        return l
    };
    P.prototype.getDocumentPoint = P.prototype.eb = function (a, b) {
        void 0 === b && (b = new N);
        if (a instanceof Q) {
            a.be() && D.k("getDocumentPoint:s Spot must be specific: " + a.toString());
            var c = this.Ga;
            b.n(a.x * c.width + a.offsetX, a.y * c.height + a.offsetY)
        } else b.set(a);
        this.Jh.wb(b);
        return b
    };
    P.prototype.getDocumentAngle = P.prototype.qm = function () {
        var a;
        a = this.Jh;
        1 === a.m11 && 0 === a.m12 ? a = 0 : (a = 180 * Math.atan2(a.m12, a.m11) / Math.PI, 0 > a && (a += 360));
        return a
    };
    P.prototype.getDocumentScale = P.prototype.Gj = function () {
        if (0 !== (this.T & 4096) === !1)return this.Yo;
        var a = this.Cb;
        return null !== this.Q ? a * this.Q.Gj() : a
    };
    P.prototype.getLocalPoint = P.prototype.CF = function (a, b) {
        void 0 === b && (b = new N);
        b.assign(a);
        this.Jh.Fi(b);
        return b
    };
    P.prototype.getNearestIntersectionPoint = P.prototype.DF = function (a, b, c) {
        return this.Vn(a.x, a.y, b.x, b.y, c)
    };
    f = P.prototype;
    f.Vn = function (a, b, c, d, e) {
        var g = this.transform, h = 1 / (g.m11 * g.m22 - g.m12 * g.m21), k = g.m22 * h, l = -g.m12 * h, m = -g.m21 * h, n = g.m11 * h, p = h * (g.m21 * g.dy - g.m22 * g.dx), q = h * (g.m12 * g.dx - g.m11 * g.dy);
        if (null !== this.bm)return g = this.$, Ke(g.left, g.top, g.right, g.bottom, a, b, c, d, e);
        h = a * k + b * m + p;
        a = a * l + b * n + q;
        b = c * k + d * m + p;
        c = c * l + d * n + q;
        e.n(0, 0);
        d = this.Ga;
        c = Ke(0, 0, d.width, d.height, h, a, b, c, e);
        e.transform(g);
        return c
    };
    function Gk(a, b, c, d, e) {
        if (!1 !== Lm(a)) {
            var g = a.margin, h = g.right + g.left, g = g.top + g.bottom;
            b = Math.max(b - h, 0);
            c = Math.max(c - g, 0);
            e = e || 0;
            d = Math.max((d || 0) - h, 0);
            e = Math.max(e - g, 0);
            var h = a.angle, g = 0, g = a.Ea, k = 0;
            a instanceof y && (k = a.lb);
            90 === h || 270 === h ? (b = isFinite(g.height) ? g.height + k : b, c = isFinite(g.width) ? g.width + k : c) : (b = isFinite(g.width) ? g.width + k : b, c = isFinite(g.height) ? g.height + k : c);
            var g = d || 0, k = e || 0, l = a instanceof x;
            switch (Mo(a, !0)) {
                case Yj:
                    k = g = 0;
                    l && (c = b = Infinity);
                    break;
                case sf:
                    isFinite(b) && b > d && (g = b);
                    isFinite(c) &&
                    c > e && (k = c);
                    break;
                case yo:
                    isFinite(b) && b > d && (g = b);
                    k = 0;
                    l && (c = Infinity);
                    break;
                case xo:
                    isFinite(c) && c > e && (k = c), g = 0, l && (b = Infinity)
            }
            var l = a.mf, m = a.kg;
            g > l.width && m.width < l.width && (g = l.width);
            k > l.height && m.height < l.height && (k = l.height);
            d = Math.max(g / a.scale, m.width);
            e = Math.max(k / a.scale, m.height);
            l.width < d && (d = Math.min(m.width, d));
            l.height < e && (e = Math.min(m.height, e));
            b = Math.min(l.width, b);
            c = Math.min(l.height, c);
            b = Math.max(d, b);
            c = Math.max(e, c);
            if (90 === h || 270 === h)g = b, b = c, c = g, g = d, d = e, e = g;
            a.Cd.Xa();
            a.jo(b, c,
                d, e);
            a.Cd.freeze();
            a.Cd.F() || D.k("Non-real measuredBounds has been set. Object " + a + ", measuredBounds: " + a.Cd.toString());
            im(a, !1)
        }
    }

    f.jo = function () {
    };
    f.Lj = function () {
        return !1
    };
    f.rc = function (a, b, c, d, e) {
        this.aj();
        var g = D.Rf();
        g.assign(this.cc);
        this.cc.Xa();
        if (!1 === Mm(this)) {
            var h = this.cc;
            h.x = a;
            h.y = b;
            h.width = c;
            h.height = d
        } else this.zj(a, b, c, d);
        this.cc.freeze();
        this.zg = void 0 === e ? null : e;
        c = !1;
        void 0 !== e ? c = !0 : null !== this.Q && (e = this.Q.cd, d = this.Fa, null !== this.bm && (d = this.cc), c = b + d.height, d = a + d.width, c = !(0 <= a + .05 && d <= e.width + .05 && 0 <= b + .05 && c <= e.height + .05), this instanceof na && (a = this.cd, this.sw > a.height || this.pf.df > a.width)) && (c = !0);
        this.T = c ? this.T | 256 : this.T & -257;
        this.cc.F() ||
        D.k("Non-real actualBounds has been set. Object " + this + ", actualBounds: " + this.cc.toString());
        this.qy(g, this.cc);
        No(this, !1);
        D.Kb(g)
    };
    f.zj = function () {
    };
    function Oo(a, b, c, d, e) {
        var g = a.$;
        g.x = b;
        g.y = c;
        g.width = d;
        g.height = e;
        if (!a.Ea.F()) {
            g = a.Cd;
            c = a.margin;
            b = c.right + c.left;
            var h = c.top + c.bottom;
            c = g.width + b;
            g = g.height + h;
            d += b;
            e += h;
            b = Mo(a, !0);
            c === d && g === e && (b = Yj);
            switch (b) {
                case Yj:
                    if (c > d || g > e)im(a, !0), Gk(a, c > d ? d : c, g > e ? e : g);
                    break;
                case sf:
                    im(a, !0);
                    Gk(a, d, e, 0, 0);
                    break;
                case yo:
                    im(a, !0);
                    Gk(a, d, g, 0, 0);
                    break;
                case xo:
                    im(a, !0), Gk(a, c, e, 0, 0)
            }
        }
    }

    f.qy = function (a, b) {
        var c = this.Z;
        null !== c && null !== c.g && (c.to !== this && c.JG !== this && c.NG !== this || Po(c, !0), this.qa(), yb(a, b) || (c.Xk(), this.Qs(c)))
    };
    f.Qs = function (a) {
        null !== this.vd && (Po(a, !0), a instanceof G && Qo(a, this))
    };
    D.defineProperty(P, {Rq: "shadowVisible"}, function () {
        return this.vn
    }, function (a) {
        var b = this.vn;
        b !== a && (v && null !== a && D.h(a, "boolean", P, "shadowVisible"), this.vn = a, this.qa(), this.i("shadowVisible", b, a))
    });
    P.prototype.Ge = function (a, b) {
        if (this.visible) {
            var c = this.cc;
            if (0 !== c.width && 0 !== c.height && !isNaN(c.x) && !isNaN(c.y)) {
                var d = this.opacity, e = 1;
                if (1 !== d) {
                    if (0 === d)return;
                    e = a.globalAlpha;
                    a.globalAlpha = e * d
                }
                if (a instanceof rd)a:{
                    if (this.visible) {
                        var g = null, h = a.gy;
                        if (this instanceof x && (this.type === Ro || this.type === So))To(this, a, b); else {
                            var k = this.cc;
                            if (0 !== k.width && 0 !== k.height && !isNaN(k.x) && !isNaN(k.y)) {
                                var l = this.transform, m = this.Q;
                                0 !== (this.T & 4096) === !0 && Uo(this);
                                var c = 0 !== (this.T & 256), n = !1;
                                this instanceof na && (a.font = this.font);
                                if (c) {
                                    n = m.nh() ? m.Ga : m.$;
                                    if (null !== this.zg)var p = this.zg, q = p.x, r = p.y, s = p.width, p = p.height; else q = Math.max(k.x, n.x), r = Math.max(k.y, n.y), s = Math.min(k.right, n.right) - q, p = Math.min(k.bottom, n.bottom) - r;
                                    if (q > k.width + k.x || k.x > n.width + n.x || r > k.height + k.y || k.y > n.height + n.y)break a;
                                    n = !0;
                                    td(a, 1, 0, 0, 1, 0, 0);
                                    a.save();
                                    a.beginPath();
                                    a.rect(q, r, s, p);
                                    a.clip()
                                }
                                if (this.Lj()) {
                                    var u = this;
                                    if (!u.isVisible())break a
                                }
                                a.Oh.bc = [1, 0, 0, 1, 0, 0];
                                q = !1;
                                this.Lj() && this.Zk && b.Hj("drawShadows") && (r = this.un, a.RB(r.x *
                                    b.scale * b.rd, r.y * b.scale * b.rd, u.Qg), a.wo(), a.shadowColor = u.tn);
                                u = !1;
                                this.Z && b.Hj("drawShadows") && (u = this.Z.Zk);
                                !0 === this.Rq ? (a.wo(), !1 === q && u && (td(a, 1, 0, 0, 1, 0, 0), a.kb(), q = !0)) : !1 === this.Rq && a.vo();
                                null !== this.kc && (Vo(this, a, this.kc, !0, !0), !1 === q && u && (td(a, 1, 0, 0, 1, 0, 0), a.kb(), q = !0), this.kc instanceof Aa && this.kc.type === Hd ? (a.beginPath(), a.rect(k.x, k.y, k.width, k.height), a.Zg(this.kc)) : a.fillRect(k.x, k.y, k.width, k.height));
                                this instanceof x ? td(a, l.m11, l.m12, l.m21, l.m22, l.dx, l.dy) : a.Oh.bc = [l.m11, l.m12,
                                    l.m21, l.m22, l.dx, l.dy];
                                null !== this.Lb && (!1 === q && u && (td(a, 1, 0, 0, 1, 0, 0), a.kb(), q = !0), s = this.Ga, l = k = 0, r = s.width, s = s.height, p = 0, this instanceof y && (s = this.ab.pb, k = s.x, l = s.y, r = s.width, s = s.height, p = this.Sg), Vo(this, a, this.Lb, !0, !1), this.Lb instanceof Aa && this.Lb.type === Hd ? (a.beginPath(), a.rect(k - p / 2, l - p / 2, r + p, s + p), a.Zg(this.Lb)) : a.fillRect(k - p / 2, l - p / 2, r + p, s + p));
                                u && (null !== this.Lb || null !== this.kc || null !== m && 0 !== (m.T & 512) || null !== m && (m.type === Ol || m.type === Wj) && m.Wd() !== this) ? (Wo(this, !0), null === this.Rq &&
                                a.vo()) : Wo(this, !1);
                                this.Qk(a, b);
                                u && 0 !== (this.T & 512) === !0 && a.wo();
                                this.Lj() && u && a.vo();
                                c && (a.restore(), n && a.Hf.pop());
                                this instanceof x && (g = a.Hf.pop());
                                !0 === q && a.Hf.pop();
                                null !== a.oF && (null === g && (h === a.gy ? (td(a, 1, 0, 0, 1, 0, 0), g = a.Hf.pop()) : g = a.gy), a.oF(this, g))
                            }
                        }
                    }
                } else {
                    if (this instanceof x && (this.type === Ro || this.type === So)) {
                        To(this, a, b);
                        1 !== d && (a.globalAlpha = e);
                        return
                    }
                    this instanceof J && this.Ku(!1);
                    v && v.Aj && v.CI(a, this);
                    g = this.transform;
                    h = this.Q;
                    0 !== (this.T & 4096) === !0 && Uo(this);
                    m = 0 !== (this.T & 256);
                    a.bq &&
                    (m = !1);
                    this instanceof na && (a.font = this.font);
                    if (m) {
                        v && v.nF && D.trace("clip" + this.toString());
                        n = h.nh() ? h.Ga : h.$;
                        null !== this.zg ? (q = this.zg, k = q.x, l = q.y, u = q.width, q = q.height) : (k = Math.max(c.x, n.x), l = Math.max(c.y, n.y), u = Math.min(c.right, n.right) - k, q = Math.min(c.bottom, n.bottom) - l);
                        if (k > c.width + c.x || c.x > n.width + n.x || l > c.height + c.y || c.y > n.height + n.y) {
                            1 !== d && (a.globalAlpha = e);
                            return
                        }
                        v && v.nF && v.EI(a, k, l, u, q);
                        a.save();
                        a.beginPath();
                        a.rect(k, l, u, q);
                        a.clip()
                    }
                    if (this.Lj()) {
                        if (!this.isVisible()) {
                            1 !== d && (a.globalAlpha =
                                e);
                            return
                        }
                        this.Zk && b.Hj("drawShadows") && (n = this.un, a.RB(n.x * b.scale * b.rd, n.y * b.scale * b.rd, this.Qg), a.wo(), a.shadowColor = this.tn)
                    }
                    n = !1;
                    this.Z && b.Hj("drawShadows") && (n = this.Z.Zk);
                    !0 === this.Rq ? a.wo() : !1 === this.Rq && a.vo();
                    null !== this.kc && (Vo(this, a, this.kc, !0, !0), this.kc instanceof Aa && this.kc.type === Hd ? (a.beginPath(), a.rect(c.x, c.y, c.width, c.height), a.Zg(this.kc)) : a.fillRect(c.x, c.y, c.width, c.height));
                    g.Bu() || a.transform(g.m11, g.m12, g.m21, g.m22, g.dx, g.dy);
                    null !== this.Lb && (u = this.Ga, k = c = 0, l = u.width, u =
                        u.height, q = 0, this instanceof y && (u = this.ab.pb, c = u.x, k = u.y, l = u.width, u = u.height, q = this.Sg), Vo(this, a, this.Lb, !0, !1), this.Lb instanceof Aa && this.Lb.type === Hd ? (a.beginPath(), a.rect(c - q / 2, k - q / 2, l + q, u + q), a.Zg(this.Lb)) : a.fillRect(c - q / 2, k - q / 2, l + q, u + q));
                    v && v.Aj && v.DI(a, this);
                    n && (null !== this.Lb || null !== this.kc || null !== h && 0 !== (h.T & 512) || null !== h && (h.type === Ol || h.type === Wj) && h.Wd() !== this) ? (Wo(this, !0), null === this.Rq && a.vo()) : Wo(this, !1);
                    this.Qk(a, b);
                    n && 0 !== (this.T & 512) === !0 && a.wo();
                    this.Lj() && n && a.vo();
                    m ?
                        (a.restore(), this instanceof x ? a.De(!0) : a.De(!1)) : g.Bu() || (h = 1 / (g.m11 * g.m22 - g.m12 * g.m21), a.transform(g.m22 * h, -g.m12 * h, -g.m21 * h, g.m11 * h, h * (g.m21 * g.dy - g.m22 * g.dx), h * (g.m12 * g.dx - g.m11 * g.dy)))
                }
                1 !== d && (a.globalAlpha = e)
            }
        }
    };
    function To(a, b, c) {
        var d = a.cc;
        0 === d.width || 0 === d.height || isNaN(d.x) || isNaN(d.y) || (null !== a.kc && (Vo(a, b, a.kc, !0, !0), a.kc instanceof Aa && a.kc.type === Hd ? (b.beginPath(), b.rect(d.x, d.y, d.width, d.height), b.Zg(a.kc)) : b.fillRect(d.x, d.y, d.width, d.height)), null !== a.Lb && (Vo(a, b, a.Lb, !0, !1), a.Lb instanceof Aa && a.Lb.type === Hd ? (b.beginPath(), b.rect(d.x, d.y, d.width, d.height), b.Zg(a.Lb)) : b.fillRect(d.x, d.y, d.width, d.height)), a.Qk(b, c))
    }

    P.prototype.Qk = function () {
    };
    function Vo(a, b, c, d, e) {
        if (null !== c) {
            var g = 1, h = 1;
            if ("string" === typeof c)d ? b.fillStyle = c : b.strokeStyle = c; else if (c.type === Dg)d ? b.fillStyle = c.color : b.strokeStyle = c.color; else {
                var k, h = a.Ga, g = h.width, h = h.height;
                if (e)var l = a.$, g = l.width, h = l.height;
                var m = b instanceof Gd;
                if (m && c.th && (c.type === bo || c.No === g && c.nz === h))k = c.th; else {
                    var n = l = 0, p = 0, q = 0, r = 0, s = 0, s = r = 0;
                    e && (l = a.$, g = l.width, h = l.height, r = l.x, s = l.y);
                    l = c.start.x * g + c.start.offsetX;
                    n = c.start.y * h + c.start.offsetY;
                    p = c.end.x * g + c.end.offsetX;
                    q = c.end.y * h + c.end.offsetY;
                    l += r;
                    p += r;
                    n += s;
                    q += s;
                    if (c.type === Wg)k = b.createLinearGradient(l, n, p, q); else if (c.type === Hd)s = isNaN(c.fu) ? Math.max(g, h) / 2 : c.fu, isNaN(c.gv) ? (r = 0, s = Math.max(g, h) / 2) : r = c.gv, k = b.createRadialGradient(l, n, r, p, q, s); else if (c.type === bo)try {
                        k = b.createPattern(c.pattern, "repeat")
                    } catch (u) {
                        k = null
                    } else D.jc(c.type, "Brush type");
                    if (c.type !== bo && (e = c.Mk, null !== e))for (e = e.j; e.next();)k.addColorStop(e.key, e.value);
                    if (m && (c.th = k, null !== k && (c.No = g, c.nz = h), null === k && c.type === bo && -1 !== c.No)) {
                        c.No = -1;
                        var t = a.g;
                        null !== t &&
                        -1 === c.No && D.setTimeout(function () {
                            t.Gq()
                        }, 600)
                    }
                }
                d ? b.fillStyle = k : b.strokeStyle = k
            }
        }
    }

    P.prototype.isContainedBy = P.prototype.vm = function (a) {
        if (a instanceof x)a:{
            if (this !== a && null !== a)for (var b = this.Q; null !== b;) {
                if (b === a) {
                    a = !0;
                    break a
                }
                b = b.Q
            }
            a = !1
        } else a = !1;
        return a
    };
    P.prototype.isVisibleObject = P.prototype.Pj = function () {
        if (!this.visible)return !1;
        var a = this.Q;
        return null !== a ? a.Pj() : !0
    };
    P.prototype.isEnabledObject = P.prototype.zu = function () {
        for (var a = this instanceof x ? this : this.Q; null !== a && a.isEnabled;)a = a.Q;
        return null === a
    };
    D.defineProperty(P, {pF: "enabledChanged"}, function () {
        return null !== this.ma ? this.ma.Rr : null
    }, function (a) {
        Co(this);
        var b = this.ma.Rr;
        b !== a && (null !== a && D.h(a, "function", P, "enabledChanged"), this.ma.Rr = a, this.i("enabledChanged", b, a))
    });
    function Uo(a) {
        if (0 !== (a.T & 2048) === !0) {
            var b = a.Jc;
            b.reset();
            if (!a.cc.F() || !a.Cd.F()) {
                Xo(a, !1);
                return
            }
            b.translate(a.cc.x, a.cc.y);
            b.translate(-a.Fa.x, -a.Fa.y);
            var c = a.Ga;
            Ko(a, b, c.x, c.y, c.width, c.height);
            Xo(a, !1);
            Yo(a, !0)
        }
        0 !== (a.T & 4096) === !0 && (b = a.Q, null === b ? (a.Mi.set(a.Jc), a.Yo = a.scale, Yo(a, !1)) : null !== b.Jh && (c = a.Mi, c.reset(), b.nh() ? c.multiply(b.Mi) : null !== b.Q && c.multiply(b.Q.Mi), c.multiply(a.Jc), a.Yo = a.scale * b.Yo, Yo(a, !1)))
    }

    function Ko(a, b, c, d, e, g) {
        1 !== a.scale && b.scale(a.scale);
        if (0 !== a.angle) {
            var h = kc;
            a.Lj() && a.Of.Vc() && (h = a.Of);
            var k = D.P();
            if (a instanceof F && a.xf !== a)for (c = a.xf, d = c.Ga, k.dv(d.x, d.y, d.width, d.height, h), c.gj.wb(k), k.offset(-c.Fa.x, -c.Fa.y), h = c.Q; null !== h && h !== a;)h.gj.wb(k), k.offset(-h.Fa.x, -h.Fa.y), h = h.Q; else k.dv(c, d, e, g, h);
            b.rotate(a.angle, k.x, k.y);
            D.A(k)
        }
    }

    f = P.prototype;
    f.K = function (a) {
        void 0 === a && (a = !1);
        if (!0 !== Lm(this)) {
            im(this, !0);
            No(this, !0);
            var b = this.Q;
            null === b || a || b.K()
        }
    };
    f.uq = function () {
        !0 !== Lm(this) && (im(this, !0), No(this, !0))
    };
    function Zo(a) {
        if (!1 === Mm(a)) {
            var b = a.Q;
            null !== b ? b.K() : a.Lj() && (b = a.g, null !== b && (b.Hg.add(a), a instanceof G && a.ig(), b.Te()));
            No(a, !0)
        }
    }

    f.aj = function () {
        0 !== (this.T & 2048) === !1 && (Xo(this, !0), Yo(this, !0))
    };
    f.bB = function () {
        Yo(this, !0)
    };
    f.qa = function () {
        var a = this.Z;
        null !== a && a.qa()
    };
    function Mo(a, b) {
        var c = a.stretch, d = a.Q;
        if (null !== d && d.da === ea)return $o(a, d.Yd(a.Rb), d.Xd(a.column), b);
        if (null !== d && d.da === Ol && d.Wd() === a)return ap(a, sf, b);
        if (c === wo) {
            if (null !== d) {
                if (d.da === Wj && d.Wd() === a)return ap(a, sf, b);
                c = d.me;
                return c === wo ? ap(a, Yj, b) : ap(a, c, b)
            }
            return ap(a, Yj, b)
        }
        return ap(a, c, b)
    }

    function $o(a, b, c, d) {
        var e = a.stretch;
        if (e !== wo)return ap(a, e, d);
        var g = e = null;
        switch (b.stretch) {
            case xo:
                g = !0;
                break;
            case sf:
                g = !0
        }
        switch (c.stretch) {
            case yo:
                e = !0;
                break;
            case sf:
                e = !0
        }
        b = a.Q.me;
        null === e && (e = b === yo || b === sf);
        null === g && (g = b === xo || b === sf);
        return !0 === e && !0 === g ? ap(a, sf, d) : !0 === e ? ap(a, yo, d) : !0 === g ? ap(a, xo, d) : ap(a, Yj, d)
    }

    function ap(a, b, c) {
        if (c)return b;
        if (b === Yj)return Yj;
        c = a.Ea;
        if (c.F())return Yj;
        a = a.angle;
        if (!isNaN(c.width))if (90 !== a && 270 !== a) {
            if (b === yo)return Yj;
            if (b === sf)return xo
        } else {
            if (b === xo)return Yj;
            if (b === sf)return yo
        }
        if (!isNaN(c.height))if (90 !== a && 270 !== a) {
            if (b === xo)return Yj;
            if (b === sf)return yo
        } else {
            if (b === yo)return Yj;
            if (b === sf)return xo
        }
        return b
    }

    D.defineProperty(P, {Nq: "segmentOrientation"}, function () {
        return this.rn
    }, function (a) {
        var b = this.rn;
        b !== a && (v && D.Da(a, J, P, "segmentOrientation"), this.rn = a, this.K(), this.i("segmentOrientation", b, a), a === Mj && (this.angle = 0))
    });
    D.defineProperty(P, {Ue: "segmentIndex"}, function () {
        return this.ot
    }, function (a) {
        v && D.h(a, "number", P, "segmentIndex");
        a = Math.round(a);
        var b = this.ot;
        b !== a && (this.ot = a, this.K(), this.i("segmentIndex", b, a))
    });
    D.defineProperty(P, {HB: "segmentFraction"}, function () {
        return this.pn
    }, function (a) {
        v && D.h(a, "number", P, "segmentFraction");
        isNaN(a) ? a = 0 : 0 > a ? a = 0 : 1 < a && (a = 1);
        var b = this.pn;
        b !== a && (this.pn = a, this.K(), this.i("segmentFraction", b, a))
    });
    D.defineProperty(P, {IB: "segmentOffset"}, function () {
        return this.qn
    }, function (a) {
        var b = this.qn;
        b.O(a) || (v && D.l(a, N, P, "segmentOffset"), this.qn = a = a.V(), this.K(), this.i("segmentOffset", b, a))
    });
    D.defineProperty(P, {stretch: "stretch"}, function () {
        return this.Rg
    }, function (a) {
        var b = this.Rg;
        b !== a && (v && D.Da(a, P, P, "stretch"), this.Rg = a, this.K(), this.i("stretch", b, a))
    });
    D.defineProperty(P, {name: "name"}, function () {
        return this.ac
    }, function (a) {
        var b = this.ac;
        b !== a && (v && D.h(a, "string", P, "name"), this.ac = a, null !== this.Z && (this.Z.Nl = null), this.i("name", b, a))
    });
    D.defineProperty(P, {opacity: "opacity"}, function () {
        return this.Hc
    }, function (a) {
        var b = this.Hc;
        b !== a && (D.h(a, "number", P, "opacity"), (0 > a || 1 < a) && D.ua(a, "0 <= value <= 1", P, "opacity"), this.Hc = a, this.i("opacity", b, a), a = this.g, b = this.Z, null !== a && null !== b && a.qa(wl(b, b.$)))
    });
    D.defineProperty(P, {visible: "visible"}, function () {
        return 0 !== (this.T & 1)
    }, function (a) {
        var b = 0 !== (this.T & 1);
        b !== a && (v && D.h(a, "boolean", P, "visible"), this.T ^= 1, this.i("visible", b, a), b = this.Q, null !== b ? b.K() : this.Lj() && this.Ld(a), this.qa(), bp(this))
    });
    D.defineProperty(P, {sg: "pickable"}, function () {
        return 0 !== (this.T & 2)
    }, function (a) {
        var b = 0 !== (this.T & 2);
        b !== a && (v && D.h(a, "boolean", P, "pickable"), this.T ^= 2, this.i("pickable", b, a))
    });
    D.defineProperty(P, {MI: "fromLinkableDuplicates"}, function () {
        return 0 !== (this.T & 4)
    }, function (a) {
        var b = 0 !== (this.T & 4);
        b !== a && (v && D.h(a, "boolean", P, "fromLinkableDuplicates"), this.T ^= 4, this.i("fromLinkableDuplicates", b, a))
    });
    D.defineProperty(P, {NI: "fromLinkableSelfNode"}, function () {
        return 0 !== (this.T & 8)
    }, function (a) {
        var b = 0 !== (this.T & 8);
        b !== a && (v && D.h(a, "boolean", P, "fromLinkableSelfNode"), this.T ^= 8, this.i("fromLinkableSelfNode", b, a))
    });
    D.defineProperty(P, {zK: "toLinkableDuplicates"}, function () {
        return 0 !== (this.T & 16)
    }, function (a) {
        var b = 0 !== (this.T & 16);
        b !== a && (v && D.h(a, "boolean", P, "toLinkableDuplicates"), this.T ^= 16, this.i("toLinkableDuplicates", b, a))
    });
    D.defineProperty(P, {AK: "toLinkableSelfNode"}, function () {
        return 0 !== (this.T & 32)
    }, function (a) {
        var b = 0 !== (this.T & 32);
        b !== a && (v && D.h(a, "boolean", P, "toLinkableSelfNode"), this.T ^= 32, this.i("toLinkableSelfNode", b, a))
    });
    D.defineProperty(P, {Lf: "isPanelMain"}, function () {
        return 0 !== (this.T & 64)
    }, function (a) {
        var b = 0 !== (this.T & 64);
        b !== a && (v && D.h(a, "boolean", P, "isPanelMain"), this.T ^= 64, this.K(), this.i("isPanelMain", b, a))
    });
    D.defineProperty(P, {xu: "isActionable"}, function () {
        return 0 !== (this.T & 128)
    }, function (a) {
        var b = 0 !== (this.T & 128);
        b !== a && (v && D.h(a, "boolean", P, "isActionable"), this.T ^= 128, this.i("isActionable", b, a))
    });
    D.defineProperty(P, {bm: "areaBackground"}, function () {
        return this.kc
    }, function (a) {
        var b = this.kc;
        b !== a && (v && null !== a && D.Zt(a, "GraphObject.areaBackground"), a instanceof Aa && a.freeze(), this.kc = a, this.qa(), this.i("areaBackground", b, a))
    });
    D.defineProperty(P, {background: "background"}, function () {
        return this.Lb
    }, function (a) {
        var b = this.Lb;
        b !== a && (v && null !== a && D.Zt(a, "GraphObject.background"), a instanceof Aa && a.freeze(), this.Lb = a, this.qa(), this.i("background", b, a))
    });
    function Wo(a, b) {
        a.T = b ? a.T | 512 : a.T & -513
    }

    function Ho(a) {
        return 0 !== (a.T & 1024)
    }

    function cp(a, b) {
        a.T = b ? a.T | 1024 : a.T & -1025
    }

    function Xo(a, b) {
        a.T = b ? a.T | 2048 : a.T & -2049
    }

    function Yo(a, b) {
        a.T = b ? a.T | 4096 : a.T & -4097
    }

    function Lm(a) {
        return 0 !== (a.T & 8192)
    }

    function im(a, b) {
        a.T = b ? a.T | 8192 : a.T & -8193
    }

    function Mm(a) {
        return 0 !== (a.T & 16384)
    }

    function No(a, b) {
        a.T = b ? a.T | 16384 : a.T & -16385
    }

    D.w(P, {Z: "part"}, function () {
        if (this.Lj())return this;
        if (null !== this.ln)return this.ln;
        var a;
        for (a = this.Q; a;) {
            if (a instanceof F)return this.ln = a;
            a = a.Q
        }
        return null
    });
    D.w(P, {Q: "panel"}, function () {
        return this.Dh
    });
    P.prototype.ym = function (a) {
        this.Dh = a
    };
    D.w(P, {layer: "layer"}, function () {
        var a = this.Z;
        return null !== a ? a.layer : null
    }, {configurable: !0});
    D.w(P, {g: "diagram"}, function () {
        var a = this.Z;
        return null !== a ? a.g : null
    }, {configurable: !0});
    D.defineProperty(P, {position: "position"}, function () {
        return this.sb
    }, function (a) {
        v && D.l(a, N, P, "position");
        var b = a.x, c = a.y, d = this.sb, e = d.x, g = d.y;
        (e === b || isNaN(e) && isNaN(b)) && (g === c || isNaN(g) && isNaN(c)) ? this.OB() : (a = a.V(), this.NB(a, d) && this.i("position", d, a))
    });
    P.prototype.OB = function () {
    };
    P.prototype.NB = function (a) {
        this.sb = a;
        Zo(this);
        this.aj();
        return !0
    };
    P.prototype.My = function (a, b) {
        this.sb.n(a, b);
        this.aj()
    };
    D.w(P, {$: "actualBounds"}, function () {
        return this.cc
    });
    D.defineProperty(P, {scale: "scale"}, function () {
        return this.Cb
    }, function (a) {
        var b = this.Cb;
        b !== a && (v && D.p(a, P, "scale"), 0 >= a && D.k("GraphObject.scale for " + this + " must be greater than zero, not: " + a), this.Cb = a, this.aj(), this.K(), this.i("scale", b, a))
    });
    D.defineProperty(P, {angle: "angle"}, function () {
        return this.wg
    }, function (a) {
        var b = this.wg;
        b !== a && (v && D.p(a, P, "angle"), a %= 360, 0 > a && (a += 360), b !== a && (this.wg = a, bp(this), this.K(), this.aj(), this.i("angle", b, a)))
    });
    D.defineProperty(P, {Ea: "desiredSize"}, function () {
        return this.Ze
    }, function (a) {
        v && D.l(a, Ba, P, "desiredSize");
        var b = a.width, c = a.height, d = this.Ze, e = d.width, g = d.height;
        (e === b || isNaN(e) && isNaN(b)) && (g === c || isNaN(g) && isNaN(c)) || (this.Ze = a = a.V(), this.K(), this instanceof y && this.Se(), this.i("desiredSize", d, a), Ho(this) && (a = this.Z, null !== a && (Io(this, a, "width"), Io(this, a, "height"))))
    });
    D.defineProperty(P, {width: "width"}, function () {
        return this.Ze.width
    }, function (a) {
        var b = this.Ze.width;
        b === a || isNaN(b) && isNaN(a) || (v && D.h(a, "number", P, "width"), b = this.Ze, this.Ze = a = (new Ba(a, this.Ze.height)).freeze(), this.K(), this instanceof y && this.Se(), this.i("desiredSize", b, a), Ho(this) && (a = this.Z, null !== a && Io(this, a, "width")))
    });
    D.defineProperty(P, {height: "height"}, function () {
        return this.Ze.height
    }, function (a) {
        var b = this.Ze.height;
        b === a || isNaN(b) && isNaN(a) || (v && D.h(a, "number", P, "height"), b = this.Ze, this.Ze = a = (new Ba(this.Ze.width, a)).freeze(), this.K(), this instanceof y && this.Se(), this.i("desiredSize", b, a), Ho(this) && (a = this.Z, null !== a && Io(this, a, "height")))
    });
    D.defineProperty(P, {kg: "minSize"}, function () {
        return this.oi
    }, function (a) {
        var b = this.oi;
        b.O(a) || (v && D.l(a, Ba, P, "minSize"), a = a.copy(), isNaN(a.width) && (a.width = 0), isNaN(a.height) && (a.height = 0), a.freeze(), this.oi = a, this.K(), this.i("minSize", b, a))
    });
    D.defineProperty(P, {mf: "maxSize"}, function () {
        return this.ni
    }, function (a) {
        var b = this.ni;
        b.O(a) || (v && D.l(a, Ba, P, "maxSize"), a = a.copy(), isNaN(a.width) && (a.width = Infinity), isNaN(a.height) && (a.height = Infinity), a.freeze(), this.ni = a, this.K(), this.i("maxSize", b, a))
    });
    D.w(P, {Fa: "measuredBounds"}, function () {
        return this.Cd
    });
    D.w(P, {Ga: "naturalBounds"}, function () {
        return this.cd
    }, {configurable: !0});
    D.defineProperty(P, {margin: "margin"}, function () {
        return this.dn
    }, function (a) {
        "number" === typeof a ? a = new Kb(a) : v && D.l(a, Kb, P, "margin");
        var b = this.dn;
        b.O(a) || (this.dn = a = a.V(), this.K(), this.i("margin", b, a))
    });
    D.w(P, {transform: null}, function () {
        0 !== (this.T & 2048) === !0 && Uo(this);
        return this.Jc
    });
    D.w(P, {Jh: null}, function () {
        0 !== (this.T & 4096) === !0 && Uo(this);
        return this.Mi
    });
    D.defineProperty(P, {alignment: "alignment"}, function () {
        return this.te
    }, function (a) {
        var b = this.te;
        b.O(a) || (v && D.l(a, Q, P, "alignment"), a.be() && !a.gd() && D.k("GraphObject.alignment for " + this + " must be a real Spot or Spot.Default, not: " + a), this.te = a = a.V(), Zo(this), this.i("alignment", b, a))
    });
    D.defineProperty(P, {column: "column"}, function () {
        return this.qr
    }, function (a) {
        v && D.p(a, P, "column");
        a = Math.round(a);
        var b = this.qr;
        b !== a && (0 > a && D.ua(a, ">= 0", P, "column"), this.qr = a, this.K(), this.i("column", b, a))
    });
    D.defineProperty(P, {iI: "columnSpan"}, function () {
        return this.Ri
    }, function (a) {
        v && D.h(a, "number", P, "columnSpan");
        a = Math.round(a);
        var b = this.Ri;
        b !== a && (1 > a && D.ua(a, ">= 1", P, "columnSpan"), this.Ri = a, this.K(), this.i("columnSpan", b, a))
    });
    D.defineProperty(P, {Rb: "row"}, function () {
        return this.kt
    }, function (a) {
        v && D.p(a, P, "row");
        a = Math.round(a);
        var b = this.kt;
        b !== a && (0 > a && D.ua(a, ">= 0", P, "row"), this.kt = a, this.K(), this.i("row", b, a))
    });
    D.defineProperty(P, {rowSpan: "rowSpan"}, function () {
        return this.rj
    }, function (a) {
        v && D.h(a, "number", P, "rowSpan");
        a = Math.round(a);
        var b = this.rj;
        b !== a && (1 > a && D.ua(a, ">= 1", P, "rowSpan"), this.rj = a, this.K(), this.i("rowSpan", b, a))
    });
    D.defineProperty(P, {Ny: "spanAllocation"}, function () {
        return this.At
    }, function (a) {
        var b = this.At;
        b !== a && (null !== a && D.h(a, "function", P, "spanAllocation"), this.At = a, this.K(), this.i("spanAllocation", b, a))
    });
    D.defineProperty(P, {Ih: "alignmentFocus"}, function () {
        return this.Im
    }, function (a) {
        var b = this.Im;
        b.O(a) || (v && D.l(a, Q, P, "alignmentFocus"), !a.be() || a.gd() || a.O(cc) && this instanceof G || D.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: " + a), this.Im = a = a.V(), this.K(), this.i("alignmentFocus", b, a))
    });
    D.defineProperty(P, {vd: "portId"}, function () {
        return this.Ys
    }, function (a) {
        var b = this.Ys;
        if (b !== a) {
            v && null !== a && D.h(a, "string", P, "portId");
            var c = this.Z;
            null === c || c instanceof G || (D.k("Cannot set portID on a Link: " + a), c = null);
            null !== b && null !== c && dp(c, this);
            this.Ys = a;
            if (null !== a && c) {
                c.Wk = !0;
                null === c.ze && ep(c);
                var d = this.vd;
                null !== d && c.ze.add(d, this)
            }
            this.i("portId", b, a)
        }
    });
    function fp(a) {
        var b = a.Z;
        if (b instanceof G && (null !== a.vd || a === b.port)) {
            var c = b.g;
            null === c || c.ra.jb || Qo(b, a)
        }
    }

    function bp(a) {
        var b = a.g;
        null === b || b.ra.jb || (a instanceof x ? a instanceof G ? a.ig() : gp(a, a, function (a) {
            fp(a)
        }) : fp(a))
    }

    D.defineProperty(P, {Hb: "toSpot"}, function () {
        return null !== this.aa ? this.aa.Hk : cc
    }, function (a) {
        this.Zd();
        var b = this.aa.Hk;
        b.O(a) || (v && D.l(a, Q, P, "toSpot"), a = a.V(), this.aa.Hk = a, this.i("toSpot", b, a), fp(this))
    });
    D.defineProperty(P, {Em: "toEndSegmentLength"}, function () {
        return null !== this.aa ? this.aa.Fk : 10
    }, function (a) {
        this.Zd();
        var b = this.aa.Fk;
        b !== a && (v && D.h(a, "number", P, "toEndSegmentLength"), 0 > a && D.ua(a, ">= 0", P, "toEndSegmentLength"), this.aa.Fk = a, this.i("toEndSegmentLength", b, a), fp(this))
    });
    D.defineProperty(P, {iv: "toEndSegmentDirection"}, function () {
        return null !== this.aa ? this.aa.Ek : Fo
    }, function (a) {
        this.Zd();
        var b = this.aa.Ek;
        b !== a && (D.Qn("GraphObject.toEndSegmentDirection", "2.0"), v && D.Da(a, G, P, "toEndSegmentDirection"), this.aa.Ek = a, this.i("toEndSegmentDirection", b, a), fp(this))
    });
    D.defineProperty(P, {jv: "toShortLength"}, function () {
        return null !== this.aa ? this.aa.Gk : 0
    }, function (a) {
        this.Zd();
        var b = this.aa.Gk;
        b !== a && (v && D.h(a, "number", P, "toShortLength"), this.aa.Gk = a, this.i("toShortLength", b, a), fp(this))
    });
    D.defineProperty(P, {gH: "toLinkable"}, function () {
        return null !== this.aa ? this.aa.It : null
    }, function (a) {
        this.Zd();
        var b = this.aa.It;
        b !== a && (v && null !== a && D.h(a, "boolean", P, "toLinkable"), this.aa.It = a, this.i("toLinkable", b, a))
    });
    D.defineProperty(P, {BK: "toMaxLinks"}, function () {
        return null !== this.aa ? this.aa.Jt : Infinity
    }, function (a) {
        this.Zd();
        var b = this.aa.Jt;
        b !== a && (v && D.h(a, "number", P, "toMaxLinks"), 0 > a && D.ua(a, ">= 0", P, "toMaxLinks"), this.aa.Jt = a, this.i("toMaxLinks", b, a))
    });
    D.defineProperty(P, {Gb: "fromSpot"}, function () {
        return null !== this.aa ? this.aa.kk : cc
    }, function (a) {
        this.Zd();
        var b = this.aa.kk;
        b.O(a) || (v && D.l(a, Q, P, "fromSpot"), a = a.V(), this.aa.kk = a, this.i("fromSpot", b, a), fp(this))
    });
    D.defineProperty(P, {pm: "fromEndSegmentLength"}, function () {
        return null !== this.aa ? this.aa.ik : 10
    }, function (a) {
        this.Zd();
        var b = this.aa.ik;
        b !== a && (v && D.h(a, "number", P, "fromEndSegmentLength"), 0 > a && D.ua(a, ">= 0", P, "fromEndSegmentLength"), this.aa.ik = a, this.i("fromEndSegmentLength", b, a), fp(this))
    });
    D.defineProperty(P, {qu: "fromEndSegmentDirection"}, function () {
        return null !== this.aa ? this.aa.hk : Fo
    }, function (a) {
        this.Zd();
        var b = this.aa.hk;
        b !== a && (D.Qn("GraphObject.fromEndSegmentDirection", "2.0"), v && D.Da(a, G, P, "fromEndSegmentDirection"), this.aa.hk = a, this.i("fromEndSegmentDirection", b, a), fp(this))
    });
    D.defineProperty(P, {ru: "fromShortLength"}, function () {
        return null !== this.aa ? this.aa.jk : 0
    }, function (a) {
        this.Zd();
        var b = this.aa.jk;
        b !== a && (v && D.h(a, "number", P, "fromShortLength"), this.aa.jk = a, this.i("fromShortLength", b, a), fp(this))
    });
    D.defineProperty(P, {zF: "fromLinkable"}, function () {
        return null !== this.aa ? this.aa.Ur : null
    }, function (a) {
        this.Zd();
        var b = this.aa.Ur;
        b !== a && (v && null !== a && D.h(a, "boolean", P, "fromLinkable"), this.aa.Ur = a, this.i("fromLinkable", b, a))
    });
    D.defineProperty(P, {RA: "fromMaxLinks"}, function () {
        return null !== this.aa ? this.aa.Vr : Infinity
    }, function (a) {
        this.Zd();
        var b = this.aa.Vr;
        b !== a && (v && D.h(a, "number", P, "fromMaxLinks"), 0 > a && D.ua(a, ">= 0", P, "fromMaxLinks"), this.aa.Vr = a, this.i("fromMaxLinks", b, a))
    });
    D.defineProperty(P, {cursor: "cursor"}, function () {
        return this.zr
    }, function (a) {
        var b = this.zr;
        b !== a && (D.h(a, "string", P, "cursor"), this.zr = a, this.i("cursor", b, a))
    });
    D.defineProperty(P, {click: "click"}, function () {
        return null !== this.ma ? this.ma.Qi : null
    }, function (a) {
        Co(this);
        var b = this.ma.Qi;
        b !== a && (null !== a && D.h(a, "function", P, "click"), this.ma.Qi = a, this.i("click", b, a))
    });
    D.defineProperty(P, {eu: "doubleClick"}, function () {
        return null !== this.ma ? this.ma.Xi : null
    }, function (a) {
        Co(this);
        var b = this.ma.Xi;
        b !== a && (null !== a && D.h(a, "function", P, "doubleClick"), this.ma.Xi = a, this.i("doubleClick", b, a))
    });
    D.defineProperty(P, {BA: "contextClick"}, function () {
        return null !== this.ma ? this.ma.Si : null
    }, function (a) {
        Co(this);
        var b = this.ma.Si;
        b !== a && (null !== a && D.h(a, "function", P, "contextClick"), this.ma.Si = a, this.i("contextClick", b, a))
    });
    D.defineProperty(P, {Mu: "mouseEnter"}, function () {
        return null !== this.ma ? this.ma.Is : null
    }, function (a) {
        Co(this);
        var b = this.ma.Is;
        b !== a && (null !== a && D.h(a, "function", P, "mouseEnter"), this.ma.Is = a, this.i("mouseEnter", b, a))
    });
    D.defineProperty(P, {Nu: "mouseLeave"}, function () {
        return null !== this.ma ? this.ma.Js : null
    }, function (a) {
        Co(this);
        var b = this.ma.Js;
        b !== a && (null !== a && D.h(a, "function", P, "mouseLeave"), this.ma.Js = a, this.i("mouseLeave", b, a))
    });
    D.defineProperty(P, {rB: "mouseOver"}, function () {
        return null !== this.ma ? this.ma.lj : null
    }, function (a) {
        Co(this);
        var b = this.ma.lj;
        b !== a && (null !== a && D.h(a, "function", P, "mouseOver"), this.ma.lj = a, this.i("mouseOver", b, a))
    });
    D.defineProperty(P, {qB: "mouseHover"}, function () {
        return null !== this.ma ? this.ma.kj : null
    }, function (a) {
        Co(this);
        var b = this.ma.kj;
        b !== a && (null !== a && D.h(a, "function", P, "mouseHover"), this.ma.kj = a, this.i("mouseHover", b, a))
    });
    D.defineProperty(P, {pB: "mouseHold"}, function () {
        return null !== this.ma ? this.ma.jj : null
    }, function (a) {
        Co(this);
        var b = this.ma.jj;
        b !== a && (null !== a && D.h(a, "function", P, "mouseHold"), this.ma.jj = a, this.i("mouseHold", b, a))
    });
    D.defineProperty(P, {QJ: "mouseDragEnter"}, function () {
        return null !== this.ma ? this.ma.Gs : null
    }, function (a) {
        Co(this);
        var b = this.ma.Gs;
        b !== a && (null !== a && D.h(a, "function", P, "mouseDragEnter"), this.ma.Gs = a, this.i("mouseDragEnter", b, a))
    });
    D.defineProperty(P, {RJ: "mouseDragLeave"}, function () {
        return null !== this.ma ? this.ma.Hs : null
    }, function (a) {
        Co(this);
        var b = this.ma.Hs;
        b !== a && (null !== a && D.h(a, "function", P, "mouseDragLeave"), this.ma.Hs = a, this.i("mouseDragLeave", b, a))
    });
    D.defineProperty(P, {oB: "mouseDrop"}, function () {
        return null !== this.ma ? this.ma.ij : null
    }, function (a) {
        Co(this);
        var b = this.ma.ij;
        b !== a && (null !== a && D.h(a, "function", P, "mouseDrop"), this.ma.ij = a, this.i("mouseDrop", b, a))
    });
    D.defineProperty(P, {FE: "actionDown"}, function () {
        return null !== this.ma ? this.ma.Zq : null
    }, function (a) {
        Co(this);
        var b = this.ma.Zq;
        b !== a && (null !== a && D.h(a, "function", P, "actionDown"), this.ma.Zq = a, this.i("actionDown", b, a))
    });
    D.defineProperty(P, {GE: "actionMove"}, function () {
        return null !== this.ma ? this.ma.$q : null
    }, function (a) {
        Co(this);
        var b = this.ma.$q;
        b !== a && (null !== a && D.h(a, "function", P, "actionMove"), this.ma.$q = a, this.i("actionMove", b, a))
    });
    D.defineProperty(P, {HE: "actionUp"}, function () {
        return null !== this.ma ? this.ma.ar : null
    }, function (a) {
        Co(this);
        var b = this.ma.ar;
        b !== a && (null !== a && D.h(a, "function", P, "actionUp"), this.ma.ar = a, this.i("actionUp", b, a))
    });
    D.defineProperty(P, {EE: "actionCancel"}, function () {
        return null !== this.ma ? this.ma.Yq : null
    }, function (a) {
        Co(this);
        var b = this.ma.Yq;
        b !== a && (null !== a && D.h(a, "function", P, "actionCancel"), this.ma.Yq = a, this.i("actionCancel", b, a))
    });
    D.defineProperty(P, {XB: "toolTip"}, function () {
        return null !== this.ma ? this.ma.uj : null
    }, function (a) {
        Co(this);
        var b = this.ma.uj;
        b !== a && (!v || null === a || a instanceof ba || a instanceof gk || D.k("GraphObject.toolTip must be an Adornment or HTMLInfo."), this.ma.uj = a, this.i("toolTip", b, a))
    });
    D.defineProperty(P, {contextMenu: "contextMenu"}, function () {
        return null !== this.ma ? this.ma.Ti : null
    }, function (a) {
        Co(this);
        var b = this.ma.Ti;
        b !== a && (!v || a instanceof ba || a instanceof gk || D.k("GraphObject.contextMenu must be an Adornment or HTMLInfo."), this.ma.Ti = a, this.i("contextMenu", b, a))
    });
    P.prototype.bind = P.prototype.bind = function (a) {
        a.Tg = this;
        var b = this.om();
        null !== b && hp(b) && D.k("Cannot add a Binding to a template that has already been copied: " + a);
        null === this.Dc && (this.Dc = new K(oh));
        this.Dc.add(a)
    };
    P.prototype.findTemplateBinder = P.prototype.om = function () {
        for (var a = this instanceof x ? this : this.Q; null !== a;) {
            if (null !== a.tl)return a;
            a = a.Q
        }
        return null
    };
    P.prototype.setProperties = function (a) {
        D.bv(this, a)
    };
    var ip;
    P.make = ip = function (a, b) {
        var c = arguments, d = null, e = null;
        if ("function" === typeof a)e = a; else if ("string" === typeof a) {
            var g = jp.na(a);
            "function" === typeof g ? (c = D.fm(arguments), d = g(c), D.Sa(d) || D.k('GraphObject.make invoked object builder "' + a + '", but it did not return an Object')) : e = aa[a]
        }
        null === d && (void 0 !== e && null !== e && e.constructor || D.k("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: " + a), d = new e);
        g = 1;
        if (d instanceof E && 1 < c.length) {
            var h = d, e = c[1];
            if ("string" === typeof e || e instanceof HTMLDivElement)Ml(h, e), g++
        }
        for (; g < c.length; g++)e = c[g], void 0 === e ? D.k("Undefined value at argument " + g + " for object being constructed by GraphObject.make: " + d) : kp(d, e);
        return d
    };
    function kp(a, b) {
        if ("string" === typeof b)if (a instanceof na)a.text = b; else if (a instanceof y)a.Jb = b; else if (a instanceof Gl)a.source = b; else if (a instanceof x) {
            var c = Ga(x, b);
            null !== c ? a.type = c : D.k("Unknown Panel type as an argument to GraphObject.make: " + b)
        } else a instanceof Aa ? (c = Ga(Aa, b), null !== c ? a.type = c : D.k("Unknown Brush type as an argument to GraphObject.make: " + b)) : a instanceof Ze ? (c = Ga(Ze, b), null !== c ? a.type = c : D.k("Unknown Geometry type as an argument to GraphObject.make: " + b)) : a instanceof Zf ?
            (c = Ga(Zf, b), null !== c ? a.type = c : D.k("Unknown PathSegment type as an argument to GraphObject.make: " + b)) : D.k("Unable to use a string as an argument to GraphObject.make: " + b); else if (b instanceof P)c = b, a instanceof x || D.k("A GraphObject can only be added to a Panel, not to: " + a), a.add(c); else if (b instanceof ih) {
            var d = b, c = a, e;
            d.Ke && c.getRowDefinition ? e = c.getRowDefinition(d.index) : !d.Ke && c.getColumnDefinition ? e = c.getColumnDefinition(d.index) : D.k("A RowColumnDefinition can only be added to a Panel, not to: " +
                a);
            e.dq(d)
        } else if (b instanceof ya)"function" === typeof a.qc ? a.qc(b) : D.Xj(a, b); else if (b instanceof oh)a instanceof P ? a.bind(b) : a instanceof ih ? a.bind(b) : D.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: " + a); else if (b instanceof af)a instanceof Ze ? a.nc.add(b) : D.k("A PathFigure can only be added to a Geometry, not to: " + a); else if (b instanceof Zf)a instanceof af ? a.Db.add(b) : D.k("A PathSegment can only be added to a PathFigure, not to: " + a); else if (b instanceof Zg)a instanceof E ? a.Yb = b : a instanceof I ? a.Yb = b : D.k("A Layout can only be assigned to a Diagram or a Group, not to: " + a); else if (Array.isArray(b))for (c = 0; c < b.length; c++)kp(a, b[c]); else if ("object" === typeof b && null !== b)if (a instanceof Aa) {
            e = new ka;
            for (c in b)d = parseFloat(c), isNaN(d) ? e[c] = b[c] : a.addColorStop(d, b[c]);
            D.bv(a, e)
        } else if (a instanceof ih) {
            void 0 !== b.row ? (e = b.row, (void 0 === e || null === e || Infinity === e || isNaN(e) || 0 > e) && D.k("Must specify non-negative integer row for RowColumnDefinition " + b + ", not: " + e), a.Ke = !0,
                a.index = e) : void 0 !== b.column && (e = b.column, (void 0 === e || null === e || Infinity === e || isNaN(e) || 0 > e) && D.k("Must specify non-negative integer column for RowColumnDefinition " + b + ", not: " + e), a.Ke = !1, a.index = e);
            e = new ka;
            for (c in b)"row" !== c && "column" !== c && (e[c] = b[c]);
            D.bv(a, e)
        } else D.bv(a, b); else D.k('Unknown initializer "' + b + '" for object being constructed by GraphObject.make: ' + a)
    }

    var jp = new ma("string", "function");
    P.getBuilders = function () {
        var a = new ma("string", "function"), b;
        for (b in jp)if (b !== b.toLowerCase()) {
            var c = jp.na(b);
            "function" === typeof c && a.add(b, c)
        }
        a.freeze();
        return a
    };
    var lp;
    P.defineBuilder = lp = function (a, b) {
        D.h(a, "string", P, "defineBuilder:name");
        D.h(b, "function", P, "defineBuilder:func");
        var c = a.toLowerCase();
        "" !== a && "none" !== c && a !== c || D.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: " + a);
        jp.add(a, b)
    };
    var mp;
    P.takeBuilderArgument = mp = function (a, b, c) {
        void 0 === c && (c = null);
        var d = a[1];
        if ("function" === typeof c ? c(d) : "string" === typeof d)return a.splice(1, 1), d;
        if (void 0 === b)throw Error("no " + ("function" === typeof c ? "satisfactory" : "string") + " argument for GraphObject builder " + a[0]);
        return b
    };
    lp("Button", function () {
        var a = new Aa(Wg);
        a.addColorStop(0, "white");
        a.addColorStop(1, "lightgray");
        var b = new Aa(Wg);
        b.addColorStop(0, "white");
        b.addColorStop(1, "dodgerblue");
        a = ip(x, Ol, {
            xu: !0,
            pF: function (a, b) {
                var e = a.Hd("ButtonBorder");
                null !== e && (e.fill = b ? a._buttonFillNormal : a._buttonFillDisabled)
            },
            _buttonFillNormal: a,
            _buttonStrokeNormal: "gray",
            _buttonFillOver: b,
            _buttonStrokeOver: "blue",
            _buttonFillDisabled: "darkgray"
        }, ip(y, {
            name: "ButtonBorder", Jb: "Rectangle", C: new Q(0, 0, 2.761423749153968, 2.761423749153968),
            D: new Q(1, 1, -2.761423749153968, -2.761423749153968), fill: a, stroke: "gray"
        }));
        a.Mu = function (a, b) {
            if (b.zu()) {
                var e = b.Hd("ButtonBorder");
                if (e instanceof y) {
                    var g = b._buttonFillOver;
                    b._buttonFillNormal = e.fill;
                    e.fill = g;
                    g = b._buttonStrokeOver;
                    b._buttonStrokeNormal = e.stroke;
                    e.stroke = g
                }
            }
        };
        a.Nu = function (a, b) {
            if (b.zu()) {
                var e = b.Hd("ButtonBorder");
                e instanceof y && (e.fill = b._buttonFillNormal, e.stroke = b._buttonStrokeNormal)
            }
        };
        return a
    });
    lp("TreeExpanderButton", function () {
        var a = ip("Button", {
            _treeExpandedFigure: "MinusLine",
            _treeCollapsedFigure: "PlusLine"
        }, ip(y, {name: "ButtonIcon", Jb: "MinusLine", Ea: $d}, (new oh("figure", "isTreeExpanded", function (a, c) {
            var d = c.Q;
            return a ? d._treeExpandedFigure : d._treeCollapsedFigure
        })).py()), {visible: !1}, (new oh("visible", "isTreeLeaf", function (a) {
            return !a
        })).py());
        a.click = function (a, c) {
            var d = c.Z;
            d instanceof ba && (d = d.Df);
            if (d instanceof G) {
                var e = d.g;
                if (null !== e) {
                    e = e.xb;
                    if (d.Bc) {
                        if (!e.canCollapseTree(d))return
                    } else if (!e.canExpandTree(d))return;
                    a.Nc = !0;
                    d.Bc ? e.collapseTree(d) : e.expandTree(d)
                }
            }
        };
        return a
    });
    lp("SubGraphExpanderButton", function () {
        var a = ip("Button", {
            _subGraphExpandedFigure: "MinusLine",
            _subGraphCollapsedFigure: "PlusLine"
        }, ip(y, {
            name: "ButtonIcon",
            Jb: "MinusLine",
            Ea: $d
        }, (new oh("figure", "isSubGraphExpanded", function (a, c) {
            var d = c.Q;
            return a ? d._subGraphExpandedFigure : d._subGraphCollapsedFigure
        })).py()));
        a.click = function (a, c) {
            var d = c.Z;
            d instanceof ba && (d = d.Df);
            if (d instanceof I) {
                var e = d.g;
                if (null !== e) {
                    e = e.xb;
                    if (d.ud) {
                        if (!e.canCollapseSubGraph(d))return
                    } else if (!e.canExpandSubGraph(d))return;
                    a.Nc = !0;
                    d.ud ? e.collapseSubGraph(d) : e.expandSubGraph(d)
                }
            }
        };
        return a
    });
    lp("ContextMenuButton", function () {
        var a = ip("Button");
        a.stretch = yo;
        var b = a.Hd("ButtonBorder");
        b instanceof y && (b.Jb = "Rectangle", b.C = new Q(0, 0, 2, 3), b.D = new Q(1, 1, -2, -2));
        return a
    });
    lp("PanelExpanderButton", function (a) {
        var b = mp(a, "COLLAPSIBLE"), c = ip("Button", {
            _buttonExpandedFigure: "TriangleUp",
            _buttonCollapsedFigure: "TriangleDown"
        }, ip(y, "TriangleUp", {name: "ButtonIcon", Ea: new Ba(6, 4)}, (new oh("figure", "visible", function (a) {
            return a ? c._buttonExpandedFigure : c._buttonCollapsedFigure
        })).py(b)));
        a = c.Hd("ButtonBorder");
        a instanceof y && (a.stroke = null, a.fill = "transparent");
        c.click = function (a, c) {
            var g = c.g;
            if (null !== g && !g.qb) {
                var h = c.om();
                null === h && (h = c.Z);
                null !== h && (h = h.Hd(b), null !== h &&
                (g.Zb("Collapse/Expand Panel"), h.visible = !h.visible, g.Gd("Collapse/Expand Panel")))
            }
        };
        return c
    });
    lp("CheckBoxButton", function (a) {
        var b = mp(a);
        a = ip("Button", {
            "ButtonBorder.fill": "white",
            "ButtonBorder.stroke": "gray",
            width: 14,
            height: 14
        }, ip(y, {
            name: "ButtonIcon",
            OI: "M0 4 L3 9 9 0",
            lb: 2,
            stretch: sf,
            SA: ak,
            visible: !1
        }, "" !== b ? (new oh("visible", b)).FJ() : []));
        a.click = function (a, d) {
            var e = a.g;
            if (!(null === e || e.qb || "" !== b && e.ga.qb)) {
                a.Nc = !0;
                var g = d.Hd("ButtonIcon");
                e.Zb("checkbox");
                g.visible = !g.visible;
                "function" === typeof d._doClick && d._doClick(a, d);
                e.Gd("checkbox")
            }
        };
        return a
    });
    lp("CheckBox", function (a) {
        a = mp(a);
        a = ip("CheckBoxButton", a, {name: "Button", margin: new Kb(0, 1, 0, 0)});
        var b = ip(x, "Horizontal", a, {
            xu: !0,
            margin: 1,
            _buttonFillNormal: a._buttonFillNormal,
            _buttonStrokeNormal: a._buttonStrokeNormal,
            _buttonFillOver: a._buttonFillOver,
            _buttonStrokeOver: a._buttonStrokeOver,
            _buttonFillDisabled: a._buttonFillDisabled,
            Mu: a.Mu,
            Nu: a.Nu,
            click: a.click,
            _buttonClick: a.click
        });
        a.Mu = null;
        a.Nu = null;
        a.click = null;
        return b
    });
    function Do() {
        this.Rr = this.Ti = this.uj = this.Yq = this.ar = this.$q = this.Zq = this.ij = this.Hs = this.Gs = this.jj = this.kj = this.lj = this.Js = this.Is = this.Si = this.Xi = this.Qi = null
    }

    Do.prototype.copy = function () {
        var a = new Do;
        a.Qi = this.Qi;
        a.Xi = this.Xi;
        a.Si = this.Si;
        a.Is = this.Is;
        a.Js = this.Js;
        a.lj = this.lj;
        a.kj = this.kj;
        a.jj = this.jj;
        a.Gs = this.Gs;
        a.Hs = this.Hs;
        a.ij = this.ij;
        a.Zq = this.Zq;
        a.$q = this.$q;
        a.ar = this.ar;
        a.Yq = this.Yq;
        a.uj = this.uj;
        a.Ti = this.Ti;
        a.Rr = this.Rr;
        return a
    };
    function x(a) {
        P.call(this);
        void 0 === a ? this.da = dk : (D.Da(a, x, x, "type"), this.da = a);
        this.ya = new K(P);
        this.qf = Td;
        this.da === Rl && (this.$n = !0);
        this.Dr = Wc;
        this.Wi = wo;
        this.da === ea && np(this);
        this.Wp = ak;
        this.bs = be;
        this.cs = Jd;
        this.Zr = 0;
        this.Yr = 100;
        this.as = 10;
        this.$r = 0;
        this.tl = this.Pd = this.lk = this.Qm = this.Sm = null;
        this.os = NaN;
        this.Jg = this.cj = null;
        this.qp = "category";
        this.Ig = null;
        this.wj = new C(NaN, NaN, NaN, NaN);
        this.Dk = this.lt = this.xn = null;
        this.$j = ""
    }

    D.Ra(x, P);
    D.Di(x);
    D.ka("Panel", x);
    function np(a) {
        a.dk = Td;
        a.fi = 1;
        a.Vi = null;
        a.Om = null;
        a.ei = 1;
        a.di = null;
        a.Nm = null;
        a.ke = [];
        a.ge = [];
        a.on = op;
        a.Mm = op;
        a.vj = 0;
        a.fj = 0
    }

    x.prototype.cloneProtected = function (a) {
        P.prototype.cloneProtected.call(this, a);
        a.da = this.da;
        a.qf = this.qf.V();
        a.Dr = this.Dr.V();
        a.Wi = this.Wi;
        if (a.da === ea) {
            a.dk = this.dk.V();
            a.fi = this.fi;
            a.Vi = this.Vi;
            a.Om = this.Om;
            a.ei = this.ei;
            a.di = this.di;
            a.Nm = this.Nm;
            var b = [];
            if (0 < this.ke.length)for (var c = this.ke, d = c.length, e = 0; e < d; e++)if (void 0 !== c[e]) {
                var g = c[e].copy();
                g.ym(a);
                b[e] = g
            }
            a.ke = b;
            b = [];
            if (0 < this.ge.length)for (c = this.ge, d = c.length, e = 0; e < d; e++)void 0 !== c[e] && (g = c[e].copy(), g.ym(a), b[e] = g);
            a.ge = b;
            a.on = this.on;
            a.Mm = this.Mm;
            a.vj = this.vj;
            a.fj = this.fj
        }
        a.Wp = this.Wp;
        a.bs = this.bs.V();
        a.cs = this.cs.V();
        a.Zr = this.Zr;
        a.Yr = this.Yr;
        a.as = this.as;
        a.$r = this.$r;
        a.Sm = this.Sm;
        a.lk = this.lk;
        a.Pd = this.Pd;
        a.tl = this.tl;
        a.os = this.os;
        a.cj = this.cj;
        a.Jg = this.Jg;
        a.qp = this.qp;
        a.wj.assign(this.wj);
        a.$j = this.$j;
        null !== this.lt && (a.lt = this.lt)
    };
    x.prototype.Ei = function (a) {
        P.prototype.Ei.call(this, a);
        a.ya = this.ya;
        for (var b = a.ya.o, c = b.length, d = 0; d < c; d++)b[d].Dh = a;
        a.xn = null
    };
    x.prototype.copy = function () {
        var a = P.prototype.copy.call(this);
        if (null !== a) {
            for (var b = this.ya.o, c = b.length, d = 0; d < c; d++) {
                var e = b[d].copy(), g = a;
                e.ym(g);
                e.ln = null;
                var h = g.ya, k = h.count;
                h.$d(k, e);
                h = g.Z;
                if (null !== h) {
                    h.Nl = null;
                    null !== e.vd && h instanceof G && (h.Wk = !0);
                    var l = g.g;
                    null !== l && l.ra.jb || h.jd(pg, "elements", g, null, e, null, k)
                }
            }
            return a
        }
        return null
    };
    x.prototype.qc = function (a) {
        a.Oe === x ? this.type = a : P.prototype.qc.call(this, a)
    };
    x.prototype.toString = function () {
        return "Panel(" + this.type + ")#" + D.Jd(this)
    };
    var dk;
    x.Position = dk = D.s(x, "Position", 0);
    x.Horizontal = D.s(x, "Horizontal", 1);
    var Nl;
    x.Vertical = Nl = D.s(x, "Vertical", 2);
    var Wj;
    x.Spot = Wj = D.s(x, "Spot", 3);
    var Ol;
    x.Auto = Ol = D.s(x, "Auto", 4);
    var ea;
    x.Table = ea = D.s(x, "Table", 5);
    x.Viewbox = D.s(x, "Viewbox", 6);
    var Ro;
    x.TableRow = Ro = D.s(x, "TableRow", 7);
    var So;
    x.TableColumn = So = D.s(x, "TableColumn", 8);
    var rj;
    x.Link = rj = D.s(x, "Link", 9);
    var Rl;
    x.Grid = Rl = D.s(x, "Grid", 10);
    var pp;
    x.Graduated = pp = D.s(x, "Graduated", 11);
    D.defineProperty(x, {type: "type"}, function () {
        return this.da
    }, function (a) {
        var b = this.da;
        b !== a && (v && D.Da(a, x, x, "type"), b !== Ro && b !== So || D.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: " + a), this.da = a, this.da === Rl ? this.$n = !0 : this.da === ea && np(this), this.K(), this.i("type", b, a))
    });
    D.w(x, {elements: "elements"}, function () {
        return this.ya.j
    });
    D.w(x, {Ga: "naturalBounds"}, function () {
        return this.cd
    });
    D.defineProperty(x, {padding: "padding"}, function () {
        return this.qf
    }, function (a) {
        "number" === typeof a ? (0 > a && D.ua(a, ">= 0", x, "padding"), a = new Kb(a)) : (D.l(a, Kb, x, "padding"), 0 > a.left && D.ua(a.left, ">= 0", x, "padding:value.left"), 0 > a.right && D.ua(a.right, ">= 0", x, "padding:value.right"), 0 > a.top && D.ua(a.top, ">= 0", x, "padding:value.top"), 0 > a.bottom && D.ua(a.bottom, ">= 0", x, "padding:value.bottom"));
        var b = this.qf;
        b.O(a) || (this.qf = a = a.V(), this.K(), this.i("padding", b, a))
    });
    D.defineProperty(x, {jm: "defaultAlignment"}, function () {
        return this.Dr
    }, function (a) {
        var b = this.Dr;
        b.O(a) || (v && D.l(a, Q, x, "defaultAlignment"), this.Dr = a = a.V(), this.K(), this.i("defaultAlignment", b, a))
    });
    D.defineProperty(x, {me: "defaultStretch"}, function () {
        return this.Wi
    }, function (a) {
        var b = this.Wi;
        b !== a && (D.Da(a, P, x, "defaultStretch"), this.Wi = a, this.K(), this.i("defaultStretch", b, a))
    });
    D.defineProperty(x, {yL: "defaultSeparatorPadding"}, function () {
        return void 0 === this.dk ? Td : this.dk
    }, function (a) {
        if (void 0 !== this.dk) {
            "number" === typeof a ? a = new Kb(a) : v && D.l(a, Kb, x, "defaultSeparatorPadding");
            var b = this.dk;
            b.O(a) || (this.dk = a = a.V(), this.K(), this.i("defaultSeparatorPadding", b, a))
        }
    });
    D.defineProperty(x, {wL: "defaultRowSeparatorStroke"}, function () {
        return void 0 === this.Vi ? null : this.Vi
    }, function (a) {
        var b = this.Vi;
        b !== a && (null === a || "string" === typeof a || a instanceof Aa) && (a instanceof Aa && a.freeze(), this.Vi = a, this.qa(), this.i("defaultRowSeparatorStroke", b, a))
    });
    D.defineProperty(x, {xL: "defaultRowSeparatorStrokeWidth"}, function () {
        return void 0 === this.fi ? 1 : this.fi
    }, function (a) {
        if (void 0 !== this.fi) {
            var b = this.fi;
            b !== a && isFinite(a) && 0 <= a && (this.fi = a, this.K(), this.i("defaultRowSeparatorStrokeWidth", b, a))
        }
    });
    D.defineProperty(x, {vL: "defaultRowSeparatorDashArray"}, function () {
        return void 0 === this.Om ? null : this.Om
    }, function (a) {
        if (void 0 !== this.Om) {
            var b = this.Om;
            if (b !== a) {
                null === a || Array.isArray(a) || D.jc(a, "Array", x, "defaultRowSeparatorDashArray:value");
                if (null !== a) {
                    for (var c = a.length, d = 0, e = 0; e < c; e++) {
                        var g = a[e];
                        "number" === typeof g && 0 <= g && isFinite(g) || D.k("defaultRowSeparatorDashArray value " + g + " at index " + e + " must be a positive number or zero.");
                        d += g
                    }
                    if (0 === d) {
                        if (null === b)return;
                        a = null
                    }
                }
                this.Om = a;
                this.qa();
                this.i("defaultRowSeparatorDashArray", b, a)
            }
        }
    });
    D.defineProperty(x, {qL: "defaultColumnSeparatorStroke"}, function () {
        return void 0 === this.di ? null : this.di
    }, function (a) {
        if (void 0 !== this.di) {
            var b = this.di;
            b !== a && (null === a || "string" === typeof a || a instanceof Aa) && (a instanceof Aa && a.freeze(), this.di = a, this.qa(), this.i("defaultColumnSeparatorStroke", b, a))
        }
    });
    D.defineProperty(x, {rL: "defaultColumnSeparatorStrokeWidth"}, function () {
        return void 0 === this.ei ? 1 : this.ei
    }, function (a) {
        if (void 0 !== this.ei) {
            var b = this.ei;
            b !== a && isFinite(a) && 0 <= a && (this.ei = a, this.K(), this.i("defaultColumnSeparatorStrokeWidth", b, a))
        }
    });
    D.defineProperty(x, {pL: "defaultColumnSeparatorDashArray"}, function () {
        return void 0 === this.Nm ? null : this.Nm
    }, function (a) {
        if (void 0 !== this.Nm) {
            var b = this.Nm;
            if (b !== a) {
                null === a || Array.isArray(a) || D.jc(a, "Array", x, "defaultColumnSeparatorDashArray:value");
                if (null !== a) {
                    for (var c = a.length, d = 0, e = 0; e < c; e++) {
                        var g = a[e];
                        "number" === typeof g && 0 <= g && isFinite(g) || D.k("defaultColumnSeparatorDashArray value " + g + " at index " + e + " must be a positive number or zero.");
                        d += g
                    }
                    if (0 === d) {
                        if (null === b)return;
                        a = null
                    }
                }
                this.Nm =
                    a;
                this.qa();
                this.i("defaultColumnSeparatorDashArray", b, a)
            }
        }
    });
    D.defineProperty(x, {OM: "viewboxStretch"}, function () {
        return this.Wp
    }, function (a) {
        var b = this.Wp;
        b !== a && (D.Da(a, P, x, "viewboxStretch"), this.Wp = a, this.K(), this.i("viewboxStretch", b, a))
    });
    D.defineProperty(x, {Sx: "gridCellSize"}, function () {
        return this.bs
    }, function (a) {
        var b = this.bs;
        if (!b.O(a)) {
            D.l(a, Ba, x, "gridCellSize");
            a.F() && 0 !== a.width && 0 !== a.height || D.k("Invalid Panel.gridCellSize: " + a);
            this.bs = a.V();
            var c = this.g;
            null !== c && this === c.Xn && jm(c);
            this.qa();
            this.i("gridCellSize", b, a)
        }
    });
    D.defineProperty(x, {JF: "gridOrigin"}, function () {
        return this.cs
    }, function (a) {
        var b = this.cs;
        if (!b.O(a)) {
            D.l(a, N, x, "gridOrigin");
            a.F() || D.k("Invalid Panel.gridOrigin: " + a);
            this.cs = a.V();
            var c = this.g;
            null !== c && this === c.Xn && jm(c);
            this.qa();
            this.i("gridOrigin", b, a)
        }
    });
    D.defineProperty(x, {Vk: "graduatedMin"}, function () {
        return this.Zr
    }, function (a) {
        D.p(a, x, "graduatedMin");
        var b = this.Zr;
        b !== a && (this.Zr = a, this.K(), this.i("graduatedMin", b, a), Ho(this) && (a = this.Z, null !== a && Io(this, a, "graduatedRange")))
    });
    D.defineProperty(x, {VA: "graduatedMax"}, function () {
        return this.Yr
    }, function (a) {
        D.p(a, x, "graduatedMax");
        var b = this.Yr;
        b !== a && (this.Yr = a, this.K(), this.i("graduatedMax", b, a), Ho(this) && (a = this.Z, null !== a && Io(this, a, "graduatedRange")))
    });
    D.w(x, {tu: "graduatedRange"}, function () {
        return this.VA - this.Vk
    });
    D.defineProperty(x, {WA: "graduatedTickUnit"}, function () {
        return this.as
    }, function (a) {
        D.p(a, x, "graduatedTickUnit");
        var b = this.as;
        b !== a && 0 < a && (this.as = a, this.K(), this.i("graduatedTickUnit", b, a))
    });
    D.defineProperty(x, {IF: "graduatedTickBase"}, function () {
        return this.$r
    }, function (a) {
        D.p(a, x, "graduatedTickBase");
        var b = this.$r;
        b !== a && (this.$r = a, this.K(), this.i("graduatedTickBase", b, a))
    });
    f = x.prototype;
    f.Qs = function (a) {
        P.prototype.Qs.call(this, a);
        for (var b = this.ya.o, c = b.length, d = 0; d < c; d++)b[d].Qs(a)
    };
    f.Qk = function (a, b) {
        if (this.da === Rl) {
            var c = this.Gj() * b.scale;
            0 >= c && (c = 1);
            var d = this.Sx, e = d.width, d = d.height, g = this.Ga, h = g.width, g = g.height, k = Math.ceil(h / e), l = Math.ceil(g / d), m = this.JF;
            a.save();
            a.beginPath();
            a.rect(0, 0, h, g);
            a.clip();
            for (var n = [], p = this.ya.o, q = p.length, r = 0; r < q; r++) {
                var s = p[r], u = [];
                n.push(u);
                if (s.visible)for (var s = fn(s.Jb), t = r + 1; t < q; t++) {
                    var z = p[t];
                    z.visible && fn(z.Jb) === s && (z = z.interval, 2 <= z && u.push(z))
                }
            }
            p = this.ya.o;
            q = p.length;
            for (r = 0; r < q; r++) {
                var w = p[r];
                if (w.visible && (u = w.interval, !(2 >
                    e * u * c))) {
                    s = w.opacity;
                    t = 1;
                    if (1 !== s) {
                        if (0 === s)continue;
                        t = a.globalAlpha;
                        a.globalAlpha = t * s
                    }
                    var z = n[r], B = !1, A = !0, O = w.cH;
                    null !== O && (B = !0, A = a.NA(O, w.Cf));
                    if ("LineV" === w.Jb && null !== w.stroke) {
                        a.lineWidth = w.lb;
                        Vo(this, a, w.stroke, !1, !1);
                        a.beginPath();
                        for (var H = Math.floor(-m.x / e), S = H; S <= H + k; S++) {
                            var Y = S * e + m.x;
                            0 <= Y && Y <= h && qp(S, u, z) && (B && !A ? Go(a, Y, 0, Y, g, O, w.Cf) : (a.moveTo(Y, 0), a.lineTo(Y, g)))
                        }
                        a.stroke()
                    } else if ("LineH" === w.Jb && null !== w.stroke) {
                        a.lineWidth = w.lb;
                        Vo(this, a, w.stroke, !1, !1);
                        a.beginPath();
                        for (S = H = Math.floor(-m.y /
                            d); S <= H + l; S++)Y = S * d + m.y, 0 <= Y && Y <= g && qp(S, u, z) && (B && !A ? Go(a, 0, Y, h, Y, O, w.Cf) : (a.moveTo(0, Y), a.lineTo(h, Y)));
                        a.stroke()
                    } else if ("BarV" === w.Jb && null !== w.fill)for (Vo(this, a, w.fill, !0, !1), w = w.width, isNaN(w) && (w = e), S = H = Math.floor(-m.x / e); S <= H + k; S++)Y = S * e + m.x, 0 <= Y && Y <= h && qp(S, u, z) && a.fillRect(Y, 0, w, g); else if ("BarH" === w.Jb && null !== w.fill)for (Vo(this, a, w.fill, !0, !1), w = w.height, isNaN(w) && (w = d), S = H = Math.floor(-m.y / d); S <= H + l; S++)Y = S * d + m.y, 0 <= Y && Y <= g && qp(S, u, z) && a.fillRect(0, Y, h, w);
                    B && a.IA();
                    1 !== s && (a.globalAlpha =
                        t)
                }
            }
            a.restore();
            a.De(!1)
        } else if (this.da === pp) {
            e = this.Ga;
            c = e.width;
            e = e.height;
            a.save();
            a.beginPath();
            a.rect(-1, -1, c + 1, e + 1);
            a.clip();
            c = this.Wd();
            c.Ge(a, b);
            e = this.Gj() * b.scale;
            0 >= e && (e = 1);
            d = c.$;
            h = this.ya.o;
            g = this.Sm;
            k = h.length;
            for (l = 0; l < k; l++)if (q = h[l], m = g[l], n = m.length, q.visible && q !== c && 0 !== m.length)if (q instanceof y) {
                if (!(2 > this.WA * q.interval * c.sf.mu / this.tu * e))for (r = q.Fa, u = q.lb * q.scale, s = q.Ih, s.be() && (s = hc), p = 0; p < n; p++)t = q, z = m[p][0], B = d, H = m[p][1], S = r, w = u, A = s, O = t.Jc, O.reset(), O.translate(z.x + B.x,
                    z.y + B.y), O.rotate(H + t.angle, 0, 0), O.translate(-S.width * A.x + A.offsetX + w / 2, -S.height * A.y + A.offsetY + w / 2), O.scale(t.scale, t.scale), Xo(t, !1), t.Mi.set(t.Jc), t.Yo = t.scale, Yo(t, !1), q.Ge(a, b), q.Jc.reset()
            } else if (q instanceof na)for (null === this.Dk && (this.Dk = new na), r = this.Dk, Op(q, r), p = 0; p < n; p++)z = m[p], 3 < z.length && (s = z[6], r.Ud = z[2], r.wg = z[3], r.we = z[4], r.pf = z[5], r.cd = z[8], r.rc(s.x, s.y, s.width, s.height), q = r, u = d, t = z[7], z = z[8], B = q.Jc, B.reset(), B.translate(s.x + u.x, s.y + u.y), B.translate(-t.x, -t.y), Ko(q, B, z.x, z.y, z.width,
                z.height), Xo(q, !1), q.Mi.set(q.Jc), q.Yo = q.scale, Yo(q, !1), r.Ge(a, b));
            a.restore();
            a.De(!0)
        } else {
            this.da === ea && (a.lineCap = "butt", Pp(this, a, !0, this.ke, !0), Pp(this, a, !1, this.ge, !0), Qp(this, a, !0, this.ke), Qp(this, a, !1, this.ge), Pp(this, a, !0, this.ke, !1), Pp(this, a, !1, this.ge, !1));
            if (c = this.vq)a.save(), v && this.type !== Wj && D.trace("Warning: Panel.isClipping set on non-Spot Panel: " + this.toString());
            e = this.Wd();
            d = this.ya.o;
            h = d.length;
            for (g = 0; g < h; g++)k = d[g], c && k === e && (a.bq = !0), k.Ge(a, b), c && k === e && (a.bq = !1);
            c && (a.restore(),
                a.De(!0));
            v && v.GI && this instanceof J && v.FI(a, b, this)
        }
    };
    function Op(a, b) {
        b.T = a.T | 6144;
        b.Hc = a.Hc;
        b.Lb = a.Lb;
        b.kc = a.kc;
        b.Ze = a.Ze.V();
        b.oi = a.oi.V();
        b.ni = a.ni.V();
        b.gj = a.gj.copy();
        b.Cb = a.Cb;
        b.wg = a.wg;
        b.Rg = a.Rg;
        b.dn = a.dn.V();
        b.te = a.te.V();
        b.Im = a.Im.V();
        b.pn = a.pn;
        b.qn = a.qn.V();
        b.rn = a.rn;
        null !== a.zg && (b.zg = a.zg.copy());
        b.vn = a.vn;
        a instanceof na && (b.Ud = a.Ud, b.zc = a.zc, b.Cg = a.Cg, b.Tl = a.Tl, b.Bg = a.Bg, b.Xl = a.Xl, b.Wm = a.Wm, b.rk = a.rk, b.qk = a.qk, b.nj = a.nj, b.Jk = a.Jk, b.pf.gk = null, b.vi = a.vi, b.wi = a.wi, b.xh = a.xh, b.tp = a.tp, b.Gg = a.Gg, b.Fg = a.Fg, b.Eg = a.Eg, b.Rm = a.Rm)
    }

    function Qp(a, b, c, d) {
        for (var e = d.length, g = a.$, h = c ? a.Yd(0) : a.Xd(0), k = 0; k < e; k++) {
            var l = d[k];
            if (void 0 !== l && l !== h && 0 !== l.gb) {
                if (c) {
                    if (l.position > g.height)continue
                } else if (l.position > g.width)continue;
                var m = l.Pq;
                isNaN(m) && (m = c ? a.fi : a.ei);
                var n = l.Oq;
                null === n && (n = c ? a.Vi : a.di);
                0 !== m && null !== n && (Vo(a, b, n, !1, !1), b.beginPath(), n = l.position + m, c ? n > g.height && (m -= n - g.height) : n > g.width && (m -= n - g.width), l = l.position + m / 2, b.lineWidth = m, n = a.padding, c ? (l += n.top, m = n.left, n = g.width - n.right, b.moveTo(m, l), b.lineTo(n, l)) : (l +=
                    n.left, m = n.top, n = g.height - n.bottom, b.moveTo(l, m), b.lineTo(l, n)), b.stroke())
            }
        }
    }

    function Pp(a, b, c, d, e) {
        for (var g = d.length, h = a.$, k = 0; k < g; k++) {
            var l = d[k];
            if (void 0 !== l && null !== l.background && l.GA !== e && 0 !== l.gb) {
                var m = c ? h.height : h.width;
                if (!(l.position > m)) {
                    var n = l.hf(), p = l.Pq;
                    isNaN(p) && (p = c ? a.fi : a.ei);
                    var q = l.Oq;
                    null === q && (q = c ? a.Vi : a.di);
                    null === q && (p = 0);
                    n -= p;
                    p = l.position + p;
                    n += l.gb;
                    p + n > m && (n = m - p);
                    0 >= n || (m = a.padding, Vo(a, b, l.background, !0, !1), c ? b.fillRect(m.left, p + m.top, h.width - (m.left + m.right), n) : b.fillRect(p + m.left, m.top, n, h.height - (m.top + m.bottom)))
                }
            }
        }
    }

    function qp(a, b, c) {
        if (0 !== a % b)return !1;
        b = c.length;
        for (var d = 0; d < b; d++)if (0 === a % c[d])return !1;
        return !0
    }

    function fn(a) {
        return "LineV" === a || "BarV" === a
    }

    f.Vn = function (a, b, c, d, e) {
        var g = this.nh(), h = this.transform, k = 1 / (h.m11 * h.m22 - h.m12 * h.m21), l = h.m22 * k, m = -h.m12 * k, n = -h.m21 * k, p = h.m11 * k, q = k * (h.m21 * h.dy - h.m22 * h.dx), r = k * (h.m12 * h.dx - h.m11 * h.dy);
        if (null !== this.bm)return h = this.$, Ke(h.left, h.top, h.right, h.bottom, a, b, c, d, e);
        if (null !== this.background)g = a * l + b * n + q, k = a * m + b * p + r, a = c * l + d * n + q, l = c * m + d * p + r, e.n(0, 0), c = this.Ga, c = Ke(0, 0, c.width, c.height, g, k, a, l, e), e.transform(h); else {
            g || (l = 1, n = m = 0, p = 1, r = q = 0);
            k = a * l + b * n + q;
            a = a * m + b * p + r;
            l = c * l + d * n + q;
            d = c * m + d * p + r;
            e.n(l, d);
            m = (l -
                k) * (l - k) + (d - a) * (d - a);
            c = !1;
            p = this.ya.o;
            r = p.length;
            n = D.P();
            q = null;
            b = Infinity;
            var s = null;
            this.vq && (s = D.P(), q = this.Wd(), (c = q.Vn(k, a, l, d, s)) && (b = (k - s.x) * (k - s.x) + (a - s.y) * (a - s.y)));
            for (var u = 0; u < r; u++) {
                var t = p[u];
                t.visible && t !== q && t.Vn(k, a, l, d, n) && (c = !0, t = (k - n.x) * (k - n.x) + (a - n.y) * (a - n.y), t < m && (m = t, e.set(n)))
            }
            this.vq && (b > m && e.set(s), D.A(s));
            D.A(n);
            g && e.transform(h)
        }
        return c
    };
    f.K = function (a) {
        P.prototype.K.call(this, a);
        if (this.da === Ol || this.da === rj)a = this.Wd(), null !== a && a.K(!0);
        a = this.ya.o;
        for (var b = a.length, c = 0; c < b; c++) {
            var d = a[c];
            if (!d.Ea.F()) {
                var e = Mo(d, !1);
                (d instanceof Xj || d instanceof x || d instanceof na || e !== Yj) && d.K(!0)
            }
        }
    };
    f.uq = function () {
        if (!1 === Lm(this)) {
            im(this, !0);
            No(this, !0);
            for (var a = this.ya.o, b = a.length, c = 0; c < b; c++)a[c].uq()
        }
    };
    f.aj = function () {
        if (0 !== (this.T & 2048) === !1) {
            Xo(this, !0);
            Yo(this, !0);
            for (var a = this.ya.o, b = a.length, c = 0; c < b; c++)a[c].bB()
        }
    };
    f.bB = function () {
        Yo(this, !0);
        for (var a = this.ya.o, b = a.length, c = 0; c < b; c++)a[c].bB()
    };
    f.jo = function (a, b, c, d) {
        var e = this.wj;
        e.width = 0;
        e.height = 0;
        var g = this.Ea, h = this.kg;
        void 0 === c && (c = h.width, d = h.height);
        c = Math.max(c, h.width);
        d = Math.max(d, h.height);
        var k = this.mf;
        isNaN(g.width) || (a = Math.min(g.width, k.width));
        isNaN(g.height) || (b = Math.min(g.height, k.height));
        a = Math.max(c, a);
        b = Math.max(d, b);
        var l = this.padding;
        a = Math.max(a - l.left - l.right, 0);
        b = Math.max(b - l.top - l.bottom, 0);
        var m = this.ya.o;
        if (0 !== m.length) {
            var n = this.da.ac;
            switch (n) {
                case "Position":
                    var p = a, q = b, r = c, s = d, u = m.length;
                    e.x = 0;
                    e.y =
                        0;
                    e.width = 0;
                    e.height = 0;
                    for (var t = Rp(this), z = 0; z < u; z++) {
                        var w = m[z];
                        if (w.visible || w === t) {
                            var B = w.margin, A = B.right + B.left, O = B.top + B.bottom;
                            Gk(w, p, q, r, s);
                            var H = w.Fa, S = Math.max(H.width + A, 0), Y = Math.max(H.height + O, 0), R = w.position.x, da = w.position.y;
                            isFinite(R) || (R = 0);
                            isFinite(da) || (da = 0);
                            if (w instanceof y) {
                                var ia = w;
                                if (ia.VF)var V = ia.lb / 2, R = R - V, da = da - V
                            }
                            Rb(e, R, da, S, Y)
                        }
                    }
                    break;
                case "Vertical":
                    for (var Ua = a, kb = c, ua = m.length, Oa = D.mb(), Fa = Rp(this), Zb = 0; Zb < ua; Zb++) {
                        var Ub = m[Zb];
                        if (Ub.visible || Ub === Fa) {
                            var ce = Mo(Ub,
                                !1);
                            if (ce !== Yj && ce !== xo)Oa.push(Ub); else {
                                var vd = Ub.margin, yc = vd.right + vd.left, Eg = vd.top + vd.bottom;
                                Gk(Ub, Ua, Infinity, kb, 0);
                                var Hf = Ub.Fa, Xa = Math.max(Hf.width + yc, 0), rb = Math.max(Hf.height + Eg, 0);
                                e.width = Math.max(e.width, Xa);
                                e.height += rb
                            }
                        }
                    }
                    var sa = Oa.length;
                    if (0 !== sa) {
                        this.Ea.width ? Ua = Math.min(this.Ea.width, this.mf.width) : 0 !== e.width && (Ua = Math.min(e.width, this.mf.width));
                        for (Zb = 0; Zb < sa; Zb++)if (Ub = Oa[Zb], Ub.visible || Ub === Fa)vd = Ub.margin, yc = vd.right + vd.left, Eg = vd.top + vd.bottom, Gk(Ub, Ua, Infinity, kb, 0), Hf = Ub.Fa,
                            Xa = Math.max(Hf.width + yc, 0), rb = Math.max(Hf.height + Eg, 0), e.width = Math.max(e.width, Xa), e.height += rb;
                        D.za(Oa)
                    }
                    break;
                case "Horizontal":
                    for (var qa = b, lb = d, mb = m.length, ib = D.mb(), te = Rp(this), Ld = 0; Ld < mb; Ld++) {
                        var Ab = m[Ld];
                        if (Ab.visible || Ab === te) {
                            var Le = Mo(Ab, !1);
                            if (Le !== Yj && Le !== yo)ib.push(Ab); else {
                                var md = Ab.margin, gg = md.right + md.left, If = md.top + md.bottom;
                                Gk(Ab, Infinity, qa, 0, lb);
                                var Fg = Ab.Fa, nb = Math.max(Fg.width + gg, 0), mc = Math.max(Fg.height + If, 0);
                                e.width += nb;
                                e.height = Math.max(e.height, mc)
                            }
                        }
                    }
                    var bd = ib.length;
                    if (0 !== bd) {
                        this.Ea.height ? qa = Math.min(this.Ea.height, this.mf.height) : 0 !== e.height && (qa = Math.min(e.height, this.mf.height));
                        for (Ld = 0; Ld < bd; Ld++)if (Ab = ib[Ld], Ab.visible || Ab === te)md = Ab.margin, gg = md.right + md.left, If = md.top + md.bottom, Gk(Ab, Infinity, qa, 0, lb), Fg = Ab.Fa, nb = Math.max(Fg.width + gg, 0), mc = Math.max(Fg.height + If, 0), e.width += nb, e.height = Math.max(e.height, mc);
                        D.za(ib)
                    }
                    break;
                case "Spot":
                    a:{
                        var hg = a, Eb = b, Vb = c, ue = d, Gg = m.length, Md = this.Wd(), sb = Md.margin, Rc = 0, Jf = 0, Me = sb.right + sb.left, di = sb.top + sb.bottom;
                        Gk(Md, hg, Eb, Vb, ue);
                        for (var Va = Md.Fa, cb = Va.width, Dc = Va.height, zc = Math.max(cb + Me, 0), cd = Math.max(Dc + di, 0), uh = this.vq, Za = D.ug(-sb.left, -sb.top, zc, cd), Fb = !0, Bb = Rp(this), Ec = 0; Ec < Gg; Ec++) {
                            var Gb = m[Ec];
                            if (Gb !== Md && (Gb.visible || Gb === Bb)) {
                                sb = Gb.margin;
                                Rc = sb.right + sb.left;
                                Jf = sb.top + sb.bottom;
                                Gk(Gb, hg, Eb, 0, 0);
                                var Va = Gb.Fa, zc = Math.max(Va.width + Rc, 0), cd = Math.max(Va.height + Jf, 0), ub = Gb.alignment;
                                ub.gd() && (ub = this.jm);
                                ub.Vc() || (ub = kc);
                                var Hb = Gb.Ih;
                                Hb.gd() && (Hb = kc);
                                var de = null;
                                Gb instanceof x && "" !== Gb.$j && (Gb.rc(0,
                                    0, Va.width, Va.height), de = Gb.Hd(Gb.$j), de === Gb && (de = null));
                                var Lb, Ob;
                                if (null !== de) {
                                    for (var Sc = de.Ga, ei = de.margin, Pb = D.Fb(Hb.x * Sc.width + Hb.offsetX - ei.left, Hb.y * Sc.height + Hb.offsetY - ei.top); de !== Gb;)de.transform.wb(Pb), de = de.Q;
                                    Lb = ub.x * cb + ub.offsetX - Pb.x;
                                    Ob = ub.y * Dc + ub.offsetY - Pb.y;
                                    D.A(Pb)
                                } else Lb = ub.x * cb + ub.offsetX - (Hb.x * Va.width - Hb.offsetX) - sb.left, Ob = ub.y * Dc + ub.offsetY - (Hb.y * Va.height - Hb.offsetY) - sb.top;
                                Fb ? (Fb = !1, e.x = Lb, e.y = Ob, e.width = zc, e.height = cd) : Rb(e, Lb, Ob, zc, cd)
                            }
                        }
                        Fb ? e.assign(Za) : uh ? e.PF(Za.x,
                            Za.y, Za.width, Za.height) : Rb(e, Za.x, Za.y, Za.width, Za.height);
                        D.Kb(Za);
                        var Wb = Md.stretch;
                        Wb === wo && (Wb = Mo(Md, !1));
                        switch (Wb) {
                            case Yj:
                                break a;
                            case sf:
                                if (!isFinite(hg) && !isFinite(Eb))break a;
                                break;
                            case yo:
                                if (!isFinite(hg))break a;
                                break;
                            case xo:
                                if (!isFinite(Eb))break a
                        }
                        Va = Md.Fa;
                        cb = Va.width;
                        Dc = Va.height;
                        zc = Math.max(cb + Me, 0);
                        cd = Math.max(Dc + di, 0);
                        sb = Md.margin;
                        Za = D.ug(-sb.left, -sb.top, zc, cd);
                        for (Ec = 0; Ec < Gg; Ec++)Gb = m[Ec], Gb === Md || !Gb.visible && Gb !== Bb || (sb = Gb.margin, Rc = sb.right + sb.left, Jf = sb.top + sb.bottom, Va =
                            Gb.Fa, zc = Math.max(Va.width + Rc, 0), cd = Math.max(Va.height + Jf, 0), ub = Gb.alignment, ub.gd() && (ub = this.jm), ub.Vc() || (ub = kc), Hb = Gb.Ih, Hb.gd() && (Hb = kc), Fb ? (Fb = !1, e.x = ub.x * cb + ub.offsetX - (Hb.x * Va.width - Hb.offsetX) - sb.left, e.y = ub.y * Dc + ub.offsetY - (Hb.y * Va.height - Hb.offsetY) - sb.top, e.width = zc, e.height = cd) : Rb(e, ub.x * cb + ub.offsetX - (Hb.x * Va.width - Hb.offsetX) - sb.left, ub.y * Dc + ub.offsetY - (Hb.y * Va.height - Hb.offsetY) - sb.top, zc, cd));
                        Fb ? e.assign(Za) : uh ? e.PF(Za.x, Za.y, Za.width, Za.height) : Rb(e, Za.x, Za.y, Za.width, Za.height);
                        D.Kb(Za)
                    }
                    break;
                case "Auto":
                    var Fc = a, dd = b, wd = c, Hg = d, fi = m.length, vb = this.Wd(), ed = vb.margin, gi = Fc, Ne = dd, nc = ed.right + ed.left, ve = ed.top + ed.bottom;
                    Gk(vb, Fc, dd, wd, Hg);
                    var ec = vb.Fa, Gc = 0, xd = null;
                    vb instanceof y && (xd = vb, Gc = xd.lb * xd.scale);
                    var oc = Math.max(ec.width + nc, 0), Wa = Math.max(ec.height + ve, 0), pc = Sp(vb), hi = pc.x * oc + pc.offsetX, bf = pc.y * Wa + pc.offsetY, Nd = Tp(vb), ee = Nd.x * oc + Nd.offsetX, vh = Nd.y * Wa + Nd.offsetY;
                    isFinite(Fc) && (gi = Math.max(Math.abs(hi - ee) - Gc, 0));
                    isFinite(dd) && (Ne = Math.max(Math.abs(bf - vh) - Gc, 0));
                    var Od =
                        D.Dm();
                    Od.n(0, 0);
                    for (var wh = Rp(this), uj = 0; uj < fi; uj++) {
                        var xh = m[uj];
                        if (xh !== vb && (xh.visible || xh === wh)) {
                            var ed = xh.margin, Hk = ed.right + ed.left, wb = ed.top + ed.bottom;
                            Gk(xh, gi, Ne, 0, 0);
                            ec = xh.Fa;
                            oc = Math.max(ec.width + Hk, 0);
                            Wa = Math.max(ec.height + wb, 0);
                            Od.n(Math.max(oc, Od.width), Math.max(Wa, Od.height))
                        }
                    }
                    if (1 === fi)e.width = oc, e.height = Wa, D.Tk(Od); else {
                        var pc = Sp(vb), Nd = Tp(vb), fe = 0, nd = 0;
                        Nd.x !== pc.x && Nd.y !== pc.y && (fe = Od.width / Math.abs(Nd.x - pc.x), nd = Od.height / Math.abs(Nd.y - pc.y));
                        D.Tk(Od);
                        Gc = 0;
                        null !== xd && (Gc = xd.lb *
                            xd.scale, Zj(xd) === ak && (fe = nd = Math.max(fe, nd)));
                        var fe = fe + (Math.abs(pc.offsetX) + Math.abs(Nd.offsetX) + Gc), nd = nd + (Math.abs(pc.offsetY) + Math.abs(Nd.offsetY) + Gc), Oe = vb.stretch;
                        Oe === wo && (Oe = Mo(vb, !1));
                        switch (Oe) {
                            case Yj:
                                Hg = wd = 0;
                                break;
                            case sf:
                                isFinite(Fc) && (fe = Fc);
                                isFinite(dd) && (nd = dd);
                                break;
                            case yo:
                                isFinite(Fc) && (fe = Fc);
                                Hg = 0;
                                break;
                            case xo:
                                wd = 0, isFinite(dd) && (nd = dd)
                        }
                        vb.uq();
                        Gk(vb, fe, nd, wd, Hg);
                        e.width = vb.Fa.width + nc;
                        e.height = vb.Fa.height + ve
                    }
                    break;
                case "Table":
                    for (var ii = a, ji = b, vj = c, wj = d, Ib = m.length, yh = D.mb(),
                             zh = D.mb(), la = 0; la < Ib; la++) {
                        var ca = m[la], fc = ca instanceof x ? ca : null;
                        if (null === fc || fc.type !== Ro && fc.type !== So || !ca.visible)yh.push(ca); else {
                            v && (fc.Ea.F() && D.k(fc.toString() + " TableRow/TableColumn Panels cannot set a desiredSize: " + fc.Ea.toString()), fc.kg.O(Yd) || D.k(fc.toString() + " TableRow/TableColumn Panels cannot set a minSize: " + fc.kg.toString()), fc.mf.O(ie) || D.k(fc.toString() + " TableRow/TableColumn Panels cannot set a maxSize: " + fc.mf.toString()));
                            zh.push(fc);
                            for (var ig = fc.ya.o, ki = ig.length, Jb =
                                0; Jb < ki; Jb++) {
                                var li = ig[Jb];
                                fc.type === Ro ? li.Rb = ca.Rb : fc.type === So && (li.column = ca.column);
                                yh.push(li)
                            }
                        }
                    }
                    Ib = yh.length;
                    0 === Ib && (this.Yd(0), this.Xd(0));
                    for (var Xb = [], la = 0; la < Ib; la++)ca = yh[la], im(ca, !0), No(ca, !0), Xb[ca.Rb] || (Xb[ca.Rb] = []), Xb[ca.Rb][ca.column] || (Xb[ca.Rb][ca.column] = []), Xb[ca.Rb][ca.column].push(ca);
                    D.za(yh);
                    for (var cf = D.mb(), Pe = D.mb(), df = D.mb(), we = {count: 0}, xe = {count: 0}, fd = ii, Pd = ji, Ah = this.ke, Ib = Ah.length, la = 0; la < Ib; la++) {
                        var $ = Ah[la];
                        void 0 !== $ && ($.gb = 0)
                    }
                    Ah = this.ge;
                    Ib = Ah.length;
                    for (la =
                             0; la < Ib; la++)$ = Ah[la], void 0 !== $ && ($.gb = 0);
                    for (var od = Xb.length, jg = 0, la = 0; la < od; la++)Xb[la] && (jg = Math.max(jg, Xb[la].length));
                    for (var mi = Math.min(this.vj, od - 1), Bh = Math.min(this.fj, jg - 1), qc = 0, od = Xb.length, Ch = Rp(this), la = 0; la < od; la++)if (Xb[la])for (var jg = Xb[la].length, ob = this.Yd(la), Jb = ob.gb = 0; Jb < jg; Jb++)if (Xb[la][Jb]) {
                        var pb = this.Xd(Jb);
                        void 0 === cf[Jb] && (pb.gb = 0, cf[Jb] = !0);
                        for (var km = Xb[la][Jb], ef = km.length, Ik = 0; Ik < ef; Ik++)if (ca = km[Ik], ca.visible || ca === Ch) {
                            var ni = 1 < ca.rj || 1 < ca.Ri;
                            ni && (la < mi || Jb < Bh ||
                            Pe.push(ca));
                            var Ac = ca.margin, Kf = Ac.right + Ac.left, kg = Ac.top + Ac.bottom, Qb = $o(ca, ob, pb, !1), ff = ca.Ea, Jk = !isNaN(ff.height), lm = !isNaN(ff.width) && Jk;
                            ni || Qb === Yj || lm || la < mi || Jb < Bh || (void 0 !== we[Jb] || Qb !== sf && Qb !== yo || (we[Jb] = -1, we.count++), void 0 !== xe[la] || Qb !== sf && Qb !== xo || (xe[la] = -1, xe.count++), df.push(ca));
                            Gk(ca, Infinity, Infinity, 0, 0);
                            if (!(la < mi || Jb < Bh)) {
                                var Lf = ca.Fa, gf = Math.max(Lf.width + Kf, 0), hf = Math.max(Lf.height + kg, 0);
                                if (1 === ca.rj && (Qb === Yj || Qb === yo)) {
                                    var $ = this.Yd(la), rc = $.hf(), qc = Math.max(hf - $.gb,
                                        0);
                                    qc + rc > Pd && (qc = Math.max(Pd - rc, 0));
                                    var lg = 0 === $.gb;
                                    $.gb += qc;
                                    Pd = Math.max(Pd - (qc + (lg ? rc : 0)), 0)
                                }
                                1 !== ca.Ri || Qb !== Yj && Qb !== xo || ($ = this.Xd(Jb), rc = $.hf(), qc = Math.max(gf - $.gb, 0), qc + rc > fd && (qc = Math.max(fd - rc, 0)), lg = 0 === $.gb, $.gb += qc, fd = Math.max(fd - (qc + (lg ? rc : 0)), 0));
                                ni && ca.uq()
                            }
                        }
                    }
                    D.za(cf);
                    for (var Hc = 0, Cb = 0, Ib = this.cq, la = 0; la < Ib; la++) {
                        var oi = this.ge[la];
                        void 0 !== oi && (Hc += oi.Ya, 0 !== oi.Ya && (Hc += oi.hf()))
                    }
                    Ib = this.Mq;
                    for (la = 0; la < Ib; la++) {
                        var Ig = this.ke[la];
                        void 0 !== Ig && (Cb += Ig.Ya, 0 !== Ig.Ya && (Cb += Ig.hf()))
                    }
                    for (var fd =
                        Math.max(ii - Hc, 0), xj = Pd = Math.max(ji - Cb, 0), rp = fd, Ib = df.length, la = 0; la < Ib; la++) {
                        var ca = df[la], ob = this.Yd(ca.Rb), pb = this.Xd(ca.column), Jg = ca.Fa, Ac = ca.margin, Kf = Ac.right + Ac.left, kg = Ac.top + Ac.bottom;
                        we[ca.column] = 0 === pb.gb && void 0 !== we[ca.column] ? Math.max(Jg.width + Kf, we[ca.column]) : null;
                        xe[ca.Rb] = 0 === ob.gb && void 0 !== xe[ca.Rb] ? Math.max(Jg.height + kg, xe[ca.Rb]) : null
                    }
                    var Mf = 0, Kg = 0, Lg;
                    for (Lg in xe)"count" !== Lg && (Mf += xe[Lg]);
                    for (Lg in we)"count" !== Lg && (Kg += we[Lg]);
                    for (var qb = D.Dm(), la = 0; la < Ib; la++)if (ca = df[la],
                        ca.visible || ca === Ch) {
                        var ob = this.Yd(ca.Rb), pb = this.Xd(ca.column), $b = 0;
                        isFinite(pb.width) ? $b = pb.width : ($b = isFinite(fd) && null !== we[ca.column] ? 0 === Kg ? pb.gb + fd : we[ca.column] / Kg * rp : null !== we[ca.column] ? fd : pb.gb || fd, $b = Math.max(0, $b - pb.hf()));
                        var Ic = 0;
                        isFinite(ob.height) ? Ic = ob.height : (Ic = isFinite(Pd) && null !== xe[ca.Rb] ? 0 === Mf ? ob.gb + Pd : xe[ca.Rb] / Mf * xj : null !== xe[ca.Rb] ? Pd : ob.gb || Pd, Ic = Math.max(0, Ic - ob.hf()));
                        qb.n(Math.max(pb.Th, Math.min($b, pb.re)), Math.max(ob.Th, Math.min(Ic, ob.re)));
                        Qb = $o(ca, ob, pb, !1);
                        switch (Qb) {
                            case yo:
                                qb.height =
                                    Math.max(qb.height, ob.gb + Pd);
                                break;
                            case xo:
                                qb.width = Math.max(qb.width, pb.gb + fd)
                        }
                        Ac = ca.margin;
                        Kf = Ac.right + Ac.left;
                        kg = Ac.top + Ac.bottom;
                        ca.uq();
                        Gk(ca, qb.width, qb.height, pb.Th, ob.Th);
                        Lf = ca.Fa;
                        gf = Math.max(Lf.width + Kf, 0);
                        hf = Math.max(Lf.height + kg, 0);
                        isFinite(fd) && (gf = Math.min(gf, qb.width));
                        isFinite(Pd) && (hf = Math.min(hf, qb.height));
                        var jf = 0, jf = ob.gb;
                        ob.gb = Math.max(ob.gb, hf);
                        qc = ob.gb - jf;
                        Pd = Math.max(Pd - qc, 0);
                        jf = pb.gb;
                        pb.gb = Math.max(pb.gb, gf);
                        qc = pb.gb - jf;
                        fd = Math.max(fd - qc, 0)
                    }
                    D.za(df);
                    var Qd = D.Dm(), Ib = Pe.length;
                    if (0 !== Ib)for (var yd = D.mb(), kf = D.mb(), la = 0; la < od; la++)if (Xb[la])for (jg = Xb[la].length, ob = this.Yd(la), yd[la] = ob.gb, Jb = 0; Jb < jg; Jb++)Xb[la][Jb] && (pb = this.Xd(Jb), kf[Jb] = pb.gb);
                    for (la = 0; la < Ib; la++)if (ca = Pe[la], ca.visible || ca === Ch) {
                        ob = this.Yd(ca.Rb);
                        pb = this.Xd(ca.column);
                        qb.n(Math.max(pb.Th, Math.min(ii, pb.re)), Math.max(ob.Th, Math.min(ji, ob.re)));
                        Qb = $o(ca, ob, pb, !1);
                        switch (Qb) {
                            case sf:
                                0 !== kf[pb.index] && (qb.width = Math.min(qb.width, kf[pb.index]));
                                0 !== yd[ob.index] && (qb.height = Math.min(qb.height, yd[ob.index]));
                                break;
                            case yo:
                                0 !== kf[pb.index] && (qb.width = Math.min(qb.width, kf[pb.index]));
                                break;
                            case xo:
                                0 !== yd[ob.index] && (qb.height = Math.min(qb.height, yd[ob.index]))
                        }
                        isFinite(pb.width) && (qb.width = pb.width);
                        isFinite(ob.height) && (qb.height = ob.height);
                        Qd.n(0, 0);
                        for (var db = 1; db < ca.rj && !(ca.Rb + db >= this.Mq); db++)$ = this.Yd(ca.Rb + db), qc = Qb === sf || Qb === xo ? Math.max($.Th, 0 === yd[ca.Rb + db] ? $.re : Math.min(yd[ca.Rb + db], $.re)) : Math.max($.Th, isNaN($.rf) ? $.re : Math.min($.rf, $.re)), Qd.height += qc;
                        for (db = 1; db < ca.Ri && !(ca.column + db >= this.cq); db++)$ =
                            this.Xd(ca.column + db), qc = Qb === sf || Qb === yo ? Math.max($.Th, 0 === kf[ca.column + db] ? $.re : Math.min(kf[ca.column + db], $.re)) : Math.max($.Th, isNaN($.rf) ? $.re : Math.min($.rf, $.re)), Qd.width += qc;
                        qb.width += Qd.width;
                        qb.height += Qd.height;
                        Ac = ca.margin;
                        Kf = Ac.right + Ac.left;
                        kg = Ac.top + Ac.bottom;
                        Gk(ca, qb.width, qb.height, vj, wj);
                        for (var Lf = ca.Fa, gf = Math.max(Lf.width + Kf, 0), hf = Math.max(Lf.height + kg, 0), lf = 0, db = 0; db < ca.rj && !(ca.Rb + db >= this.Mq); db++)$ = this.Yd(ca.Rb + db), lf += $.total || 0;
                        if (lf < hf) {
                            var pd = hf - lf, Mg = hf - lf;
                            if (null !== ca.Ny)for (var mf =
                                ca.Ny, db = 0; db < ca.rj && !(0 >= pd) && !(ca.Rb + db >= this.Mq); db++) {
                                var $ = this.Yd(ca.Rb + db), Jc = $.Ya || 0, Nf = mf(ca, $, Mg);
                                v && "number" !== typeof Nf && D.k(ca + " spanAllocation does not return a number: " + Nf);
                                $.gb = Math.min($.re, Jc + Nf);
                                $.Ya !== Jc && (pd -= $.Ya - Jc)
                            }
                            for (; 0 < pd;) {
                                Jc = $.Ya || 0;
                                isNaN($.height) && $.re > Jc && ($.gb = Math.min($.re, Jc + pd), $.Ya !== Jc && (pd -= $.Ya - Jc));
                                if (0 === $.index)break;
                                $ = this.Yd($.index - 1)
                            }
                        }
                        for (var Qe = 0, db = 0; db < ca.Ri && !(ca.column + db >= this.cq); db++)$ = this.Xd(ca.column + db), Qe += $.total || 0;
                        if (Qe < gf) {
                            pd = gf - Qe;
                            Mg = gf - Qe;
                            if (null !== ca.Ny)for (mf = ca.Ny, db = 0; db < ca.Ri && !(0 >= pd) && !(ca.column + db >= this.cq); db++)$ = this.Xd(ca.column + db), Jc = $.Ya || 0, Nf = mf(ca, $, Mg), v && "number" !== typeof Nf && D.k(ca + " spanAllocation does not return a number: " + Nf), $.gb = Math.min($.re, Jc + Nf), $.Ya !== Jc && (pd -= $.Ya - Jc);
                            for (; 0 < pd;) {
                                Jc = $.Ya || 0;
                                isNaN($.width) && $.re > Jc && ($.gb = Math.min($.re, Jc + pd), $.Ya !== Jc && (pd -= $.Ya - Jc));
                                if (0 === $.index)break;
                                $ = this.Xd($.index - 1)
                            }
                        }
                    }
                    D.za(Pe);
                    D.Tk(Qd);
                    D.Tk(qb);
                    void 0 !== yd && D.za(yd);
                    void 0 !== kf && D.za(kf);
                    for (var Ng =
                        0, Og = 0, Qb = Mo(this, !0), yj = this.Ea, Kk = this.mf, ye = Cb = Hc = 0, gd = 0, Ib = this.cq, la = 0; la < Ib; la++)void 0 !== this.ge[la] && ($ = this.Xd(la), isFinite($.width) ? (ye += $.width, ye += $.hf()) : Up($) === Vp ? (ye += $.Ya, ye += $.hf()) : 0 !== $.Ya && (Hc += $.Ya, Hc += $.hf()));
                    var Ng = isFinite(yj.width) ? Math.min(yj.width, Kk.width) : Qb !== Yj && isFinite(ii) ? ii : Hc, Ng = Math.max(Ng, this.kg.width), Ng = Math.max(Ng - ye, 0), Lk = Math.max(Ng / Hc, 1);
                    isFinite(Lk) || (Lk = 1);
                    for (la = 0; la < Ib; la++)void 0 !== this.ge[la] && ($ = this.Xd(la), isFinite($.width) || Up($) === Vp || ($.gb =
                        $.Ya * Lk), $.position = e.width, 0 !== $.Ya && (e.width += $.Ya, e.width += $.hf()));
                    Ib = this.Mq;
                    for (la = 0; la < Ib; la++)void 0 !== this.ke[la] && ($ = this.Yd(la), isFinite($.height) ? (gd += $.height, gd += $.hf()) : Up($) === Vp ? (gd += $.Ya, gd += $.hf()) : 0 !== $.Ya && (Cb += $.Ya, 0 !== $.Ya && (Cb += $.hf())));
                    var Og = isFinite(yj.height) ? Math.min(yj.height, Kk.height) : Qb !== Yj && isFinite(ji) ? ji : Cb, Og = Math.max(Og, this.kg.height), Og = Math.max(Og - gd, 0), Dh = Math.max(Og / Cb, 1);
                    isFinite(Dh) || (Dh = 1);
                    for (la = 0; la < Ib; la++)void 0 !== this.ke[la] && ($ = this.Yd(la), isFinite($.height) ||
                    Up($) === Vp || ($.gb = $.Ya * Dh), $.position = e.height, 0 !== $.Ya && (e.height += $.Ya, 0 !== $.Ya && (e.height += $.hf())));
                    Ib = zh.length;
                    for (la = 0; la < Ib; la++) {
                        var qd = zh[la];
                        qd.type === Ro ? ($b = e.width, $ = this.Yd(qd.Rb), Ic = $.gb) : ($ = this.Xd(qd.column), $b = $.gb, Ic = e.height);
                        qd.Cd.n(0, 0, $b, Ic);
                        im(qd, !1);
                        Xb[qd.Rb] || (Xb[qd.Rb] = []);
                        Xb[qd.Rb][qd.column] || (Xb[qd.Rb][qd.column] = []);
                        Xb[qd.Rb][qd.column].push(qd)
                    }
                    D.za(zh);
                    this.lt = Xb;
                    break;
                case "Viewbox":
                    var zj = a, nm = b, qt = c, rt = d;
                    1 < m.length && D.k("Viewbox Panel cannot contain more than one GraphObject.");
                    var nf = m[0];
                    nf.Cb = 1;
                    nf.uq();
                    Gk(nf, Infinity, Infinity, qt, rt);
                    var Mk = nf.Fa, om = nf.margin, st = om.right + om.left, tt = om.top + om.bottom;
                    if (isFinite(zj) || isFinite(nm)) {
                        var kw = nf.scale, pm = Mk.width, qm = Mk.height, ut = Math.max(zj - st, 0), vt = Math.max(nm - tt, 0), Nk = 1;
                        this.Wp === ak ? 0 !== pm && 0 !== qm && (Nk = Math.min(ut / pm, vt / qm)) : 0 !== pm && 0 !== qm && (Nk = Math.max(ut / pm, vt / qm));
                        0 === Nk && (Nk = 1E-4);
                        nf.Cb *= Nk;
                        kw !== nf.scale && (im(nf, !0), Gk(nf, Infinity, Infinity, qt, rt))
                    }
                    Mk = nf.Fa;
                    e.width = isFinite(zj) ? zj : Math.max(Mk.width + st, 0);
                    e.height = isFinite(nm) ?
                        nm : Math.max(Mk.height + tt, 0);
                    break;
                case "Link":
                    var wt = m.length;
                    if (this instanceof ba || this instanceof J) {
                        var qi = null;
                        this instanceof J && (qi = this);
                        this instanceof ba && (qi = this.Df);
                        if (qi instanceof J) {
                            var Ok = qi;
                            if (0 === wt) {
                                var rm = this.Ga;
                                xb(rm, 0, 0);
                                var ze = this.Fa;
                                ze.n(0, 0, 0, 0)
                            } else {
                                var sm = this instanceof ba ? null : qi.path, Pg = qi.so, of = this.wj;
                                of.assign(Pg);
                                of.x = 0;
                                of.y = 0;
                                var Eh = Ok.points, ri = qi.ta;
                                this.Ku(!1);
                                var xt = Pg.width, yt = Pg.height;
                                this.hj.n(Pg.x, Pg.y);
                                null === this.rh && (this.rh = new K(C));
                                this.rh.clear();
                                null !== sm && (Wp(sm, xt, yt, this), ze = sm.Fa, of.$h(ze), this.rh.add(ze));
                                for (var Qg = D.Sf(), Pk = D.P(), Rg = D.P(), sp = 0; sp < wt; sp++) {
                                    var gc = m[sp];
                                    if (gc !== sm)if (gc.Lf && gc instanceof y)Wp(gc, xt, yt, this), ze = gc.Fa, of.$h(ze), this.rh.add(ze); else if (2 > ri)Gk(gc, Infinity, Infinity), ze = gc.Fa, of.$h(ze), this.rh.add(ze); else {
                                        var zd = gc.Ue, At = gc.HB, tp = gc.Ih;
                                        tp.be() && (tp = kc);
                                        var mg = gc.Nq, lw = gc.IB, Qk = 0, Rk = 0, tm = 0;
                                        if (zd < -ri || zd >= ri) {
                                            var Bt = Ok.mG, Of = Ok.lG;
                                            mg !== Mj && (tm = Ok.computeAngle(gc, mg, Of), gc.wg = tm);
                                            Qk = Bt.x - Pg.x;
                                            Rk = Bt.y - Pg.y
                                        } else {
                                            var Rd,
                                                pf;
                                            if (0 <= zd)Rd = Eh.ea(zd), pf = zd < ri - 1 ? Eh.ea(zd + 1) : Rd; else {
                                                var si = ri + zd;
                                                Rd = Eh.ea(si);
                                                pf = 0 < si ? Eh.ea(si - 1) : Rd
                                            }
                                            if (Rd.Uc(pf)) {
                                                var ti, ui;
                                                0 <= zd ? (ti = 0 < zd ? Eh.ea(zd - 1) : Rd, ui = zd < ri - 2 ? Eh.ea(zd + 2) : pf) : (ti = si < ri - 1 ? Eh.ea(si + 1) : Rd, ui = 1 < si ? Eh.ea(si - 2) : pf);
                                                var Ct = ti.Ff(Rd), Dt = pf.Ff(ui), Of = Ct > Dt + 10 ? 0 <= zd ? ti.Wb(Rd) : Rd.Wb(ti) : Dt > Ct + 10 ? 0 <= zd ? pf.Wb(ui) : ui.Wb(pf) : 0 <= zd ? ti.Wb(ui) : ui.Wb(ti)
                                            } else Of = 0 <= zd ? Rd.Wb(pf) : pf.Wb(Rd);
                                            mg !== Mj && (tm = Ok.computeAngle(gc, mg, Of), gc.wg = tm);
                                            Qk = Rd.x + (pf.x - Rd.x) * At - Pg.x;
                                            Rk = Rd.y + (pf.y - Rd.y) * At - Pg.y
                                        }
                                        Gk(gc,
                                            Infinity, Infinity);
                                        var ze = gc.Fa, rm = gc.Ga, Sk = 0;
                                        gc instanceof y && (Sk = gc.lb);
                                        var vi = rm.width + Sk, Aj = rm.height + Sk;
                                        Qg.reset();
                                        Qg.translate(-ze.x, -ze.y);
                                        Qg.scale(gc.scale, gc.scale);
                                        Qg.rotate(mg === Mj ? gc.angle : Of, vi / 2, Aj / 2);
                                        mg !== Xp && mg !== Yp || Qg.rotate(90, vi / 2, Aj / 2);
                                        mg !== Zp && mg !== $p || Qg.rotate(-90, vi / 2, Aj / 2);
                                        mg === aq && (45 < Of && 135 > Of || 225 < Of && 315 > Of) && Qg.rotate(-Of, vi / 2, Aj / 2);
                                        var Bj = new C(0, 0, vi, Aj);
                                        Pk.uo(Bj, tp);
                                        Qg.wb(Pk);
                                        var mw = -Pk.x + Sk / 2, nw = -Pk.y + Sk / 2;
                                        Rg.assign(lw);
                                        isNaN(Rg.x) && (Rg.x = 0 <= zd ? vi / 2 + 3 : -(vi / 2 + 3));
                                        isNaN(Rg.y) && (Rg.y = -(Aj / 2 + 3));
                                        Rg.rotate(Of);
                                        Qk += Rg.x;
                                        Rk += Rg.y;
                                        Bj.set(ze);
                                        Bj.x = Qk + mw;
                                        Bj.y = Rk + nw;
                                        this.rh.add(Bj);
                                        of.$h(Bj)
                                    }
                                }
                                if (this instanceof J)for (var Et = this.wf; Et.next();)Gk(Et.value, Infinity, Infinity);
                                this.wj = of;
                                var up = this.hj;
                                up.n(up.x + of.x, up.y + of.y);
                                xb(e, of.width || 0, of.height || 0);
                                D.Je(Qg);
                                D.A(Pk);
                                D.A(Rg)
                            }
                        }
                    }
                    break;
                case "Grid":
                    break;
                case "Graduated":
                    var ow = a, pw = b, qw = c, rw = d, Sg = this.Wd();
                    this.Qm = [];
                    var Cj = Sg.margin, sw = Cj.right + Cj.left, tw = Cj.top + Cj.bottom;
                    Gk(Sg, ow, pw, qw, rw);
                    var Ft = Sg.Fa, uw = Ft.height,
                        vw = Math.max(Ft.width + sw, 0), ww = Math.max(uw + tw, 0), Gt = new C(-Cj.left, -Cj.top, vw, ww);
                    this.Qm.push(Gt);
                    e.assign(Gt);
                    for (var Xk = Sg.sf, Ht = Sg.lb, vp = Xk.Px, Dj = Xk.lu, wi = Xk.mu, xw = vp.length, wp = 0, xp = 0, Ej = D.mb(), yp = 0; yp < xw; yp++) {
                        for (var zp = vp[yp], It = [], xp = wp = 0, yw = zp.length, Fj = 0; Fj < yw; Fj += 2) {
                            var Jt = zp[Fj], Kt = zp[Fj + 1];
                            if (0 !== Fj) {
                                var Ad = 180 * Math.atan2(Kt - xp, Jt - wp) / Math.PI;
                                0 > Ad && (Ad += 360);
                                It.push(Ad)
                            }
                            wp = Jt;
                            xp = Kt
                        }
                        Ej.push(It)
                    }
                    var Lt;
                    if (null === this.lk) {
                        for (var Mt = [], Ap = this.ya.o, Nt = Ap.length, Bp = 0; Bp < Nt; Bp++) {
                            var Yk = Ap[Bp],
                                Ot = [];
                            Mt.push(Ot);
                            if (Yk.visible)for (var zw = Yk.interval, Cp = 0; Cp < Nt; Cp++) {
                                var Zk = Ap[Cp];
                                if (Zk.visible && Yk !== Zk && !(Yk instanceof y && !(Zk instanceof y) || Yk instanceof na && !(Zk instanceof na))) {
                                    var Pt = Zk.interval;
                                    Pt > zw && Ot.push(Pt)
                                }
                            }
                        }
                        this.lk = Mt
                    }
                    Lt = this.lk;
                    var Qt = this.ya.o, Aw = Qt.length, Fh = 0, Rt = 0, St = wi;
                    this.Sm = [];
                    for (var vm = [], wm = 0; wm < Aw; wm++) {
                        var Gh = Qt[wm], vm = [];
                        if (Gh.visible && Gh !== Sg) {
                            var Tt = Gh.interval, Ut = this.WA;
                            if (!(2 > Ut * Tt * wi / this.tu)) {
                                var ge = this.IF, Vt = Lt[wm], xi = Dj[0][0], Pf = 0, Bd = 0, Rt = wi * Gh.HF - 1E-4,
                                    St = wi * Gh.FF + 1E-4, Gj = Ut * Tt;
                                if (ge < this.Vk)var yi = (this.Vk - ge) / Gj, yi = 0 === yi % 1 ? yi : Math.floor(yi + 1), ge = ge + yi * Gj; else ge > this.Vk + Gj && (yi = Math.floor((ge - this.Vk) / Gj), ge -= yi * Gj);
                                for (; ge <= this.VA;) {
                                    var Dp;
                                    a:{
                                        for (var Bw = Vt.length, Ep = 0; Ep < Bw; Ep++)if (zb((ge - this.IF) % (Vt[Ep] * this.WA), 0)) {
                                            Dp = !1;
                                            break a
                                        }
                                        Dp = !0
                                    }
                                    if (Dp && (Fh = (ge - this.Vk) * wi / this.tu, Fh > wi && (Fh = wi), Rt <= Fh && Fh <= St)) {
                                        for (var Ad = Ej[Pf][Bd], Hj = Dj[Pf][Bd]; Pf < Dj.length;) {
                                            for (; Fh > xi && Bd < Dj[Pf].length - 1;)Bd++, Ad = Ej[Pf][Bd], Hj = Dj[Pf][Bd], xi += Hj;
                                            if (Fh <= xi)break;
                                            Pf++;
                                            Bd = 0;
                                            Ad = Ej[Pf][Bd];
                                            Hj = Dj[Pf][Bd];
                                            xi += Hj
                                        }
                                        var Sd = vp[Pf], Wt = Sd[2 * Bd], Xt = Sd[2 * Bd + 1], xm = (Fh - (xi - Hj)) / Hj, Fp = new N(Wt + (Sd[2 * Bd + 2] - Wt) * xm + Ht / 2 - Xk.pb.x, Xt + (Sd[2 * Bd + 3] - Xt) * xm + Ht / 2 - Xk.pb.y);
                                        Fp.scale(Sg.scale, Sg.scale);
                                        var ng = Ad, Ij = Ej[Pf];
                                        1E-4 > xm ? 0 < Bd ? ng = Ij[Bd - 1] : zb(Sd[0], Sd[Sd.length - 2]) && zb(Sd[1], Sd[Sd.length - 1]) && (ng = Ij[Ij.length - 1]) : .9999 < xm && (Bd + 1 < Ij.length ? ng = Ij[Bd + 1] : zb(Sd[0], Sd[Sd.length - 2]) && zb(Sd[1], Sd[Sd.length - 1]) && (ng = Ij[0]));
                                        Ad !== ng && (180 < Math.abs(Ad - ng) && (Ad < ng ? Ad += 360 : ng += 360), Ad = (Ad + ng) /
                                            2 % 360);
                                        if (Gh instanceof na) {
                                            var ym = "", ym = null !== Gh.GF ? Gh.GF(ge) : (+ge.toFixed(2)).toString();
                                            v && D.h(ym, "string");
                                            "" !== ym && vm.push([Fp, Ad, ym])
                                        } else vm.push([Fp, Ad])
                                    }
                                    ge += Gj
                                }
                            }
                        }
                        this.Sm.push(vm)
                    }
                    D.za(Ej);
                    for (var Cw = this.Sm, Dw = m.length, zm = 0; zm < Dw; zm++) {
                        var zi = m[zm], Gp = Cw[zm];
                        if (zi.visible && zi !== Sg && 0 !== Gp.length) {
                            if (zi instanceof y) {
                                var Hh = zi, Yt = Gp, Ew = e, Hp = Hh.Ih;
                                Hp.be() && (Hp = hc);
                                var Fw = Hh.angle;
                                Hh.wg = 0;
                                Gk(Hh, Infinity, Infinity);
                                Hh.wg = Fw;
                                var Zt = Hh.Fa, Ip = Zt.width, Jp = Zt.height, $t = D.ug(0, 0, Ip, Jp), he = D.P();
                                he.uo($t,
                                    Hp);
                                D.Kb($t);
                                for (var Am = -he.x, Bm = -he.y, Ai = new C, Gw = Yt.length, Cm = 0; Cm < Gw; Cm++)for (var Kp = Yt[Cm], au = Kp[0].x, bu = Kp[0].y, cu = Kp[1], Dm = 0; 4 > Dm; Dm++) {
                                    switch (Dm) {
                                        case 0:
                                            he.n(Am, Bm);
                                            break;
                                        case 1:
                                            he.n(Am + Ip, Bm);
                                            break;
                                        case 2:
                                            he.n(Am, Bm + Jp);
                                            break;
                                        case 3:
                                            he.n(Am + Ip, Bm + Jp)
                                    }
                                    he.rotate(cu + Hh.angle);
                                    he.offset(au, bu);
                                    0 === Cm && 0 === Dm ? Ai.n(he.x, he.y, 0, 0) : Ai.Li(he);
                                    he.offset(-au, -bu);
                                    he.rotate(-cu - Hh.angle)
                                }
                                D.A(he);
                                this.Qm.push(Ai);
                                Rb(Ew, Ai.x, Ai.y, Ai.width, Ai.height)
                            } else if (zi instanceof na) {
                                var Em = zi, du = Gp, Hw = e;
                                null ===
                                this.Dk && (this.Dk = new na);
                                var Qf = this.Dk;
                                Op(Em, Qf);
                                var Lp = Em.Ih;
                                Lp.be() && (Lp = hc);
                                for (var Ih = Em.Nq, Iw = Em.IB, Bi = null, Fm = 0, Gm = 0, Tg = 0, Mp = 0, Jw = du.length, Hm = 0; Hm < Jw; Hm++) {
                                    var og = du[Hm], Fm = og[0].x, Gm = og[0].y, Tg = og[1];
                                    Ih !== Mj && (Mp = J.computeAngle(Ih, Tg), Qf.wg = Mp);
                                    Qf.text = og[2];
                                    Gk(Qf, Infinity, Infinity);
                                    var Jh = Qf.Fa, Jj = Qf.Ga, Kj = Jj.width, Lj = Jj.height, Ug = D.Sf();
                                    Ug.reset();
                                    Ug.translate(-Jh.x, -Jh.y);
                                    Ug.scale(Qf.scale, Qf.scale);
                                    Ug.rotate(Ih === Mj ? Qf.angle : Tg, Kj / 2, Lj / 2);
                                    Ih !== Xp && Ih !== Yp || Ug.rotate(90, Kj / 2, Lj / 2);
                                    Ih !==
                                    Zp && Ih !== $p || Ug.rotate(-90, Kj / 2, Lj / 2);
                                    Ih === aq && (45 < Tg && 135 > Tg || 225 < Tg && 315 > Tg) && Ug.rotate(-Tg, Kj / 2, Lj / 2);
                                    var eu = D.ug(0, 0, Kj, Lj), $k = D.P();
                                    $k.uo(eu, Lp);
                                    Ug.wb($k);
                                    var Kw = -$k.x, Lw = -$k.y, Vg = D.P();
                                    Vg.assign(Iw);
                                    isNaN(Vg.x) && (Vg.x = Kj / 2 + 3);
                                    isNaN(Vg.y) && (Vg.y = -(Lj / 2 + 3));
                                    Vg.rotate(Tg);
                                    var Fm = Fm + (Vg.x + Kw), Gm = Gm + (Vg.y + Lw), Np = new C(Fm, Gm, Jh.width, Jh.height), Mw = new C(Jh.x, Jh.y, Jh.width, Jh.height), Nw = new C(Jj.x, Jj.y, Jj.width, Jj.height), fu = new bq;
                                    fu.dq(Qf.pf);
                                    og.push(Mp);
                                    og.push(Qf.we);
                                    og.push(fu);
                                    og.push(Np);
                                    og.push(Mw);
                                    og.push(Nw);
                                    0 === Hm ? Bi = Np.copy() : Bi.$h(Np);
                                    D.A(Vg);
                                    D.A($k);
                                    D.Kb(eu);
                                    D.Je(Ug)
                                }
                                this.Qm.push(Bi);
                                Rb(Hw, Bi.x, Bi.y, Bi.width, Bi.height)
                            }
                            im(zi, !1)
                        }
                    }
                    break;
                case "TableRow":
                case "TableColumn":
                    D.k(this.toString() + " is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");
                    break;
                default:
                    D.k("Unknown panel type: " + n)
            }
        }
        var qf = e.width, rf = e.height, Im = this.padding, Ow = Im.top + Im.bottom, qf = qf + (Im.left + Im.right), rf = rf + Ow;
        isFinite(g.width) && (qf = g.width);
        isFinite(g.height) &&
        (rf = g.height);
        qf = Math.min(k.width, qf);
        rf = Math.min(k.height, rf);
        qf = Math.max(h.width, qf);
        rf = Math.max(h.height, rf);
        qf = Math.max(c, qf);
        rf = Math.max(d, rf);
        e.width = qf;
        e.height = rf;
        xb(this.cd, qf, rf);
        Jo(this, 0, 0, qf, rf)
    };
    x.prototype.findMainElement = x.prototype.Wd = function () {
        if (null === this.xn) {
            var a = this.ya.o, b = a.length;
            if (0 === b)return null;
            for (var c = 0; c < b; c++) {
                var d = a[c];
                if (!0 === d.Lf)return this.xn = d
            }
            this.xn = a[0]
        }
        return this.xn
    };
    function Rp(a) {
        return null !== a.Z ? a.Z.xf : null
    }

    x.prototype.zj = function (a, b, c, d) {
        var e = this.wj, g = this.ya.o, h = D.ug(0, 0, 0, 0);
        if (0 === g.length) {
            var k = this.$;
            k.x = a;
            k.y = b;
            k.width = c;
            k.height = d
        } else {
            if (!this.Ea.F()) {
                var l = Mo(this, !0), m = this.Cd, n = m.width, p = m.height, q = this.margin, r = q.left + q.right, s = q.top + q.bottom;
                n === c && p === d && (l = Yj);
                switch (l) {
                    case Yj:
                        if (n > c || p > d)this.K(), Gk(this, n > c ? c : n, p > d ? d : p);
                        break;
                    case sf:
                        this.K(!0);
                        Gk(this, c + r, d + s, 0, 0);
                        break;
                    case yo:
                        this.K(!0);
                        Gk(this, c + r, p + s, 0, 0);
                        break;
                    case xo:
                        this.K(!0), Gk(this, n + r, d + s, 0, 0)
                }
            }
            k = this.$;
            k.x = a;
            k.y = b;
            k.width = c;
            k.height = d;
            var u = this.da.ac;
            switch (u) {
                case "Position":
                    for (var t = g.length, z = e.x - this.padding.left, w = e.y - this.padding.top, B = 0; B < t; B++) {
                        var A = g[B], O = A.Fa, H = A.margin, S = A.position.x, Y = A.position.y;
                        h.x = isNaN(S) ? -z : S - z;
                        h.y = isNaN(Y) ? -w : Y - w;
                        if (A instanceof y) {
                            var R = A;
                            if (R.VF) {
                                var da = R.lb / 2;
                                h.x -= da;
                                h.y -= da
                            }
                        }
                        h.x += H.left;
                        h.y += H.top;
                        h.width = O.width;
                        h.height = O.height;
                        A.visible && A.rc(h.x, h.y, h.width, h.height)
                    }
                    break;
                case "Vertical":
                    for (var ia = g.length, V = this.padding.left, Ua = this.aG, kb = Ua ? e.height : this.padding.top,
                             ua = 0; ua < ia; ua++) {
                        var Oa = V, Fa = g[ua];
                        if (Fa.visible) {
                            var Zb = Fa.Fa, Ub = Fa.margin, ce = Ub.left + Ub.right, vd = V + this.padding.right, yc = Zb.width, Eg = Mo(Fa, !1);
                            if (isNaN(Fa.Ea.width) && Eg === sf || Eg === yo)yc = Math.max(e.width - ce - vd, 0);
                            var Hf = yc + ce + vd, Xa = Fa.alignment;
                            Xa.gd() && (Xa = this.jm);
                            Xa.Vc() || (Xa = kc);
                            Ua && (kb -= Zb.height + Ub.bottom + Ub.top);
                            Fa.rc(Oa + Xa.offsetX + Ub.left + (e.width * Xa.x - Hf * Xa.x), kb + Xa.offsetY + Ub.top, yc, Zb.height);
                            Ua || (kb += Zb.height + Ub.bottom + Ub.top)
                        }
                    }
                    break;
                case "Horizontal":
                    for (var rb = g.length, sa = this.padding.top,
                             qa = this.aG, lb = qa ? e.width : this.padding.left, mb = 0; mb < rb; mb++) {
                        var ib = sa, te = g[mb];
                        if (te.visible) {
                            var Ld = te.Fa, Ab = te.margin, Le = Ab.top + Ab.bottom, md = sa + this.padding.bottom, gg = Ld.height, If = Mo(te, !1);
                            if (isNaN(te.Ea.height) && If === sf || If === xo)gg = Math.max(e.height - Le - md, 0);
                            var Fg = gg + Le + md, nb = te.alignment;
                            nb.gd() && (nb = this.jm);
                            nb.Vc() || (nb = kc);
                            qa && (lb -= Ld.width + Ab.left + Ab.right);
                            te.rc(lb + nb.offsetX + Ab.left, ib + nb.offsetY + Ab.top + (e.height * nb.y - Fg * nb.y), Ld.width, gg);
                            qa || (lb += Ld.width + Ab.left + Ab.right)
                        }
                    }
                    break;
                case "Spot":
                    var mc =
                        g.length, bd = this.Wd(), hg = bd.Fa, Eb = hg.width, Vb = hg.height, ue = this.padding, Gg = ue.left, Md = ue.top;
                    h.x = Gg - e.x;
                    h.y = Md - e.y;
                    bd.rc(h.x, h.y, Eb, Vb);
                    for (var sb = 0; sb < mc; sb++) {
                        var Rc = g[sb];
                        if (Rc !== bd) {
                            var Jf = Rc.Fa, Me = Jf.width, di = Jf.height, Va = Rc.alignment;
                            Va.gd() && (Va = this.jm);
                            Va.Vc() || (Va = kc);
                            var cb = Rc.Ih;
                            cb.gd() && (cb = kc);
                            var Dc = null;
                            Rc instanceof x && "" !== Rc.$j && (Dc = Rc.Hd(Rc.$j), Dc === Rc && (Dc = null));
                            if (null !== Dc) {
                                for (var zc = Dc.Ga, cd = D.Fb(cb.x * zc.width + cb.offsetX, cb.y * zc.height + cb.offsetY); Dc !== Rc;)Dc.transform.wb(cd),
                                    Dc = Dc.Q;
                                h.x = Va.x * Eb + Va.offsetX - cd.x;
                                h.y = Va.y * Vb + Va.offsetY - cd.y;
                                D.A(cd)
                            } else h.x = Va.x * Eb + Va.offsetX - (cb.x * Me - cb.offsetX), h.y = Va.y * Vb + Va.offsetY - (cb.y * di - cb.offsetY);
                            h.x -= e.x;
                            h.y -= e.y;
                            Rc.visible && Rc.rc(Gg + h.x, Md + h.y, Me, di)
                        }
                    }
                    break;
                case "Auto":
                    var uh = g.length, Za = this.Wd(), Fb = Za.Fa, Bb = D.Rf();
                    Bb.n(0, 0, 1, 1);
                    var Ec = Za.margin, Gb = Ec.left, ub = Ec.top, Hb = this.padding, de = Hb.left, Lb = Hb.top;
                    h.x = Gb;
                    h.y = ub;
                    h.width = Fb.width;
                    h.height = Fb.height;
                    Za.rc(de + h.x, Lb + h.y, h.width, h.height);
                    var Ob = Sp(Za), Sc = Tp(Za), ei = 0 + Ob.y * Fb.height +
                        Ob.offsetY, Pb = 0 + Sc.x * Fb.width + Sc.offsetX, Wb = 0 + Sc.y * Fb.height + Sc.offsetY;
                    Bb.x = 0 + Ob.x * Fb.width + Ob.offsetX;
                    Bb.y = ei;
                    Rb(Bb, Pb, Wb, 0, 0);
                    Bb.x += Gb + de;
                    Bb.y += ub + Lb;
                    for (var Fc = 0; Fc < uh; Fc++) {
                        var dd = g[Fc];
                        if (dd !== Za) {
                            var wd = dd.Fa, Ec = dd.margin, Hg = Math.max(wd.width + Ec.right + Ec.left, 0), fi = Math.max(wd.height + Ec.top + Ec.bottom, 0), vb = dd.alignment;
                            vb.gd() && (vb = this.jm);
                            vb.Vc() || (vb = kc);
                            h.x = Bb.width * vb.x + vb.offsetX - Hg * vb.x + Ec.left + Bb.x;
                            h.y = Bb.height * vb.y + vb.offsetY - fi * vb.y + Ec.top + Bb.y;
                            h.width = Bb.width;
                            h.height = Bb.height;
                            dd.visible && (Sb(Bb.x, Bb.y, Bb.width, Bb.height, h.x, h.y, wd.width, wd.height) ? dd.rc(h.x, h.y, wd.width, wd.height) : dd.rc(h.x, h.y, wd.width, wd.height, new C(Bb.x, Bb.y, Bb.width, Bb.height)))
                        }
                    }
                    D.Kb(Bb);
                    break;
                case "Table":
                    for (var ed = g.length, gi = this.padding, Ne = gi.left, nc = gi.top, ve = this.lt, ec = 0, Gc = 0, xd = ve.length, oc = 0, Wa = 0; Wa < xd; Wa++)ve[Wa] && (oc = Math.max(oc, ve[Wa].length));
                    for (var pc = Math.min(this.vj, xd - 1); pc !== xd && (void 0 === this.ke[pc] || 0 === this.ke[pc].Ya);)pc++;
                    for (var pc = Math.min(pc, xd - 1), hi = -this.ke[pc].sb, bf =
                        Math.min(this.fj, oc - 1); bf !== oc && (void 0 === this.ge[bf] || 0 === this.ge[bf].Ya);)bf++;
                    for (var bf = Math.min(bf, oc - 1), Nd = -this.ge[bf].sb, ee = D.Dm(), Wa = 0; Wa < xd; Wa++)if (ve[Wa]) {
                        var oc = ve[Wa].length, vh = this.Yd(Wa), Gc = vh.sb + hi + nc;
                        0 !== vh.Ya && (Gc += vh.XE());
                        for (var Od = 0; Od < oc; Od++)if (ve[Wa][Od]) {
                            var wh = this.Xd(Od), ec = wh.sb + Nd + Ne;
                            0 !== wh.Ya && (ec += wh.XE());
                            for (var uj = ve[Wa][Od], xh = uj.length, Hk = 0; Hk < xh; Hk++) {
                                var wb = uj[Hk], fe = wb.Fa, nd = wb instanceof x ? wb : null;
                                if (null === nd || nd.type !== Ro && nd.type !== So) {
                                    ee.n(0, 0);
                                    for (var Oe =
                                        1; Oe < wb.rowSpan && !(Wa + Oe >= this.Mq); Oe++) {
                                        var ii = this.Yd(Wa + Oe);
                                        ee.height += ii.total
                                    }
                                    for (Oe = 1; Oe < wb.iI && !(Od + Oe >= this.cq); Oe++) {
                                        var ji = this.Xd(Od + Oe);
                                        ee.width += ji.total
                                    }
                                    var vj = wh.Ya + ee.width, wj = vh.Ya + ee.height;
                                    h.x = ec;
                                    h.y = Gc;
                                    h.width = vj;
                                    h.height = wj;
                                    var Ib = ec, yh = Gc, zh = vj, la = wj;
                                    ec + vj > e.width && (zh = Math.max(e.width - ec, 0));
                                    Gc + wj > e.height && (la = Math.max(e.height - Gc, 0));
                                    var ca = wb.alignment, fc = 0, ig = 0, ki = 0, Jb = 0;
                                    if (ca.gd()) {
                                        ca = this.jm;
                                        ca.Vc() || (ca = kc);
                                        var fc = ca.x, ig = ca.y, ki = ca.offsetX, Jb = ca.offsetY, li = wh.alignment,
                                            Xb = vh.alignment;
                                        li.Vc() && (fc = li.x, ki = li.offsetX);
                                        Xb.Vc() && (ig = Xb.y, Jb = Xb.offsetY)
                                    } else fc = ca.x, ig = ca.y, ki = ca.offsetX, Jb = ca.offsetY;
                                    if (isNaN(fc) || isNaN(ig))ig = fc = .5, Jb = ki = 0;
                                    var cf = fe.width, Pe = fe.height, df = wb.margin, we = df.left + df.right, xe = df.top + df.bottom, fd = $o(wb, vh, wh, !1);
                                    !isNaN(wb.Ea.width) || fd !== sf && fd !== yo || (cf = Math.max(vj - we, 0));
                                    !isNaN(wb.Ea.height) || fd !== sf && fd !== xo || (Pe = Math.max(wj - xe, 0));
                                    var Pd = wb.mf, Ah = wb.kg, cf = Math.min(Pd.width, cf), Pe = Math.min(Pd.height, Pe), cf = Math.max(Ah.width, cf), Pe = Math.max(Ah.height,
                                        Pe), $ = Pe + xe;
                                    h.x += h.width * fc - (cf + we) * fc + ki + df.left;
                                    h.y += h.height * ig - $ * ig + Jb + df.top;
                                    wb.visible && (Sb(Ib, yh, zh, la, h.x, h.y, fe.width, fe.height) ? wb.rc(h.x, h.y, cf, Pe) : wb.rc(h.x, h.y, cf, Pe, new C(Ib, yh, zh, la)))
                                } else {
                                    wb.aj();
                                    wb.cc.Xa();
                                    var od = wb.cc, jg = D.ug(od.x, od.y, od.width, od.height);
                                    od.x = nd.type === Ro ? Ne : ec;
                                    od.y = nd.type === So ? nc : Gc;
                                    od.width = fe.width;
                                    od.height = fe.height;
                                    wb.cc.freeze();
                                    No(wb, !1);
                                    if (!yb(jg, od)) {
                                        var mi = wb.Z;
                                        null !== mi && (mi.Xk(), wb.Qs(mi))
                                    }
                                    D.Kb(jg)
                                }
                            }
                        }
                    }
                    D.Tk(ee);
                    for (Wa = 0; Wa < ed; Wa++)wb = g[Wa], nd = wb instanceof x ? wb : null, null === nd || nd.type !== Ro && nd.type !== So || (od = wb.cc, wb.cd.Xa(), wb.cd.n(0, 0, od.width, od.height), wb.cd.freeze());
                    break;
                case "Viewbox":
                    var Bh = g[0], qc = Bh.Fa, Ch = Bh.margin, ob = Ch.top + Ch.bottom, pb = Math.max(qc.width + (Ch.right + Ch.left), 0), km = Math.max(qc.height + ob, 0), ef = Bh.alignment;
                    ef.gd() && (ef = this.jm);
                    ef.Vc() || (ef = kc);
                    h.x = e.width * ef.x - pb * ef.x + ef.offsetX;
                    h.y = e.height * ef.y - km * ef.y + ef.offsetY;
                    h.width = qc.width;
                    h.height = qc.height;
                    Bh.rc(h.x, h.y, h.width, h.height);
                    break;
                case "Link":
                    var Ik = g.length;
                    if (this instanceof ba || this instanceof J) {
                        var ni = null;
                        this instanceof J && (ni = this);
                        this instanceof ba && (ni = this.Df);
                        var Ac = ni, Kf = this instanceof ba ? null : Ac.path;
                        if (null !== this.rh) {
                            var kg = this.rh.o, Qb = 0;
                            if (null !== Kf && Qb < this.rh.count) {
                                var ff = kg[Qb];
                                Qb++;
                                Kf.rc(ff.x - this.wj.x, ff.y - this.wj.y, ff.width, ff.height)
                            }
                            for (var Jk = 0; Jk < Ik; Jk++) {
                                var lm = g[Jk];
                                lm !== Kf && Qb < this.rh.count && (ff = kg[Qb], Qb++, lm.rc(ff.x - this.wj.x, ff.y - this.wj.y, ff.width, ff.height))
                            }
                        }
                        var Lf = Ac.points, gf = Lf.count;
                        if (2 <= gf && this instanceof J)for (var hf = this.wf; hf.next();) {
                            var rc =
                                hf.value, lg = gf, Hc = Lf, Cb = rc.Ue, oi = rc.HB, Ig = rc.Ih, xj = rc.Nq, rp = rc.IB, Jg = 0, Mf = 0, Kg = 0;
                            if (Cb < -lg || Cb >= lg) {
                                var Lg = this.mG, qb = this.lG;
                                xj !== Mj && (Kg = this.computeAngle(rc, xj, qb), rc.angle = Kg);
                                Jg = Lg.x;
                                Mf = Lg.y
                            } else {
                                var $b = void 0, Ic = void 0;
                                if (0 <= Cb)$b = Hc.o[Cb], Ic = Cb < lg - 1 ? Hc.o[Cb + 1] : $b; else var jf = lg + Cb, $b = Hc.o[jf], Ic = 0 < jf ? Hc.o[jf - 1] : $b;
                                if ($b.Uc(Ic)) {
                                    var Qd = void 0, yd = void 0;
                                    0 <= Cb ? (Qd = 0 < Cb ? Hc.o[Cb - 1] : $b, yd = Cb < lg - 2 ? Hc.o[Cb + 2] : Ic) : (Qd = jf < lg - 1 ? Hc.o[jf + 1] : $b, yd = 1 < jf ? Hc.o[jf - 2] : Ic);
                                    var kf = Qd.Ff($b), db = Ic.Ff(yd), qb = kf >
                                    db + 10 ? 0 <= Cb ? Qd.Wb($b) : $b.Wb(Qd) : db > kf + 10 ? 0 <= Cb ? Ic.Wb(yd) : yd.Wb(Ic) : 0 <= Cb ? Qd.Wb(yd) : yd.Wb(Qd)
                                } else qb = 0 <= Cb ? $b.Wb(Ic) : Ic.Wb($b);
                                xj !== Mj && (Kg = this.computeAngle(rc, xj, qb), rc.angle = Kg);
                                Jg = $b.x + (Ic.x - $b.x) * oi;
                                Mf = $b.y + (Ic.y - $b.y) * oi
                            }
                            if (Ig.O(cc))rc.location = new N(Jg, Mf); else {
                                Ig.be() && (Ig = kc);
                                var lf = D.Sf();
                                lf.reset();
                                lf.scale(rc.scale, rc.scale);
                                lf.rotate(rc.angle, 0, 0);
                                var pd = rc.Ga, Mg = D.ug(0, 0, pd.width, pd.height), mf = D.P();
                                mf.uo(Mg, Ig);
                                lf.wb(mf);
                                var Jc = -mf.x, Nf = -mf.y, Qe = rp.copy();
                                isNaN(Qe.x) && (Qe.x = 0 <= Cb ? mf.x +
                                3 : -(mf.x + 3));
                                isNaN(Qe.y) && (Qe.y = -(mf.y + 3));
                                Qe.rotate(qb);
                                Jg += Qe.x;
                                Mf += Qe.y;
                                lf.mH(Mg);
                                var Jc = Jc + Mg.x, Nf = Nf + Mg.y, Ng = D.Fb(Jg + Jc, Mf + Nf);
                                rc.move(Ng);
                                D.A(Ng);
                                D.A(mf);
                                D.Kb(Mg);
                                D.Je(lf)
                            }
                        }
                        this.Ku(!1)
                    }
                    break;
                case "Grid":
                    break;
                case "Graduated":
                    if (null !== this.Qm) {
                        var Og = this.Wd(), yj = this.Sm, Kk = this.Qm, ye = 0, gd = Kk[ye];
                        ye++;
                        Og.rc(gd.x - e.x, gd.y - e.y, gd.width, gd.height);
                        for (var Lk = g.length, Dh = 0; Dh < Lk; Dh++) {
                            var qd = g[Dh], zj = yj[Dh];
                            qd.visible && qd !== Og && 0 !== zj.length && (gd = Kk[ye], ye++, qd.rc(gd.x - e.x, gd.y - e.y, gd.width, gd.height))
                        }
                        this.Qm =
                            null
                    }
                    break;
                case "TableRow":
                case "TableColumn":
                    D.k(this.toString() + " is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");
                    break;
                default:
                    D.k("Unknown panel type: " + u)
            }
            D.Kb(h)
        }
    };
    x.prototype.Nk = function (a) {
        var b = this.Ga, c = Rp(this);
        if (Sb(0, 0, b.width, b.height, a.x, a.y)) {
            for (var b = this.ya.o, d = b.length, e = D.Fb(0, 0); d--;) {
                var g = b[d];
                if (g.visible || g === c)if (gb(e.set(a), g.transform), g.Pa(e))return D.A(e), !0
            }
            D.A(e);
            return null === this.Lb && null === this.kc ? !1 : !0
        }
        return !1
    };
    x.prototype.Lx = function (a) {
        if (this.Ko === a)return this;
        for (var b = this.ya.o, c = b.length, d = 0; d < c; d++) {
            var e = b[d].Lx(a);
            if (null !== e)return e
        }
        return null
    };
    function gp(a, b, c) {
        c(a, b);
        if (b instanceof x) {
            b = b.ya.o;
            for (var d = b.length, e = 0; e < d; e++)gp(a, b[e], c)
        }
    }

    function Vm(a, b) {
        cq(a, a, b)
    }

    function cq(a, b, c) {
        c(b);
        b = b.ya.o;
        for (var d = b.length, e = 0; e < d; e++) {
            var g = b[e];
            g instanceof x && cq(a, g, c)
        }
    }

    x.prototype.walkVisualTree = x.prototype.IK = function (a) {
        dq(this, this, a)
    };
    function dq(a, b, c) {
        c(b);
        if (b instanceof x) {
            b = b.ya.o;
            for (var d = b.length, e = 0; e < d; e++)dq(a, b[e], c)
        }
    }

    x.prototype.findInVisualTree = x.prototype.hu = function (a) {
        return eq(this, this, a)
    };
    function eq(a, b, c) {
        if (c(b))return b;
        if (b instanceof x) {
            b = b.ya.o;
            for (var d = b.length, e = 0; e < d; e++) {
                var g = eq(a, b[e], c);
                if (null !== g)return g
            }
        }
        return null
    }

    x.prototype.findObject = x.prototype.Hd = function (a) {
        if (this.name === a)return this;
        for (var b = this.ya.o, c = b.length, d = 0; d < c; d++) {
            var e = b[d];
            if (e.name === a)return e;
            if (e instanceof x)if (null === e.cj && null === e.Jg) {
                if (e = e.Hd(a), null !== e)return e
            } else if (tn(e) && (e = e.ya.first(), null !== e && (e = e.Hd(a), null !== e)))return e
        }
        return null
    };
    function fq(a) {
        a = a.ya.o;
        for (var b = a.length, c = 0, d = 0; d < b; d++) {
            var e = a[d];
            if (e instanceof x)c = Math.max(c, fq(e)); else if (e instanceof y) {
                a:{
                    if (null !== !e.bg)switch (e.ap) {
                        case "None":
                        case "Square":
                        case "Ellipse":
                        case "Circle":
                        case "LineH":
                        case "LineV":
                        case "FramedRectangle":
                        case "RoundedRectangle":
                        case "Line1":
                        case "Line2":
                        case "Border":
                        case "Cube1":
                        case "Cube2":
                        case "Junction":
                        case "Cylinder1":
                        case "Cylinder2":
                        case "Cylinder3":
                        case "Cylinder4":
                        case "PlusLine":
                        case "XLine":
                        case "ThinCross":
                        case "ThickCross":
                            e = 0;
                            break a
                    }
                    e = e.Sg / 2 * e.wn * e.Gj()
                }
                c = Math.max(c, e)
            }
        }
        return c
    }

    f = x.prototype;
    f.nh = function () {
        return !(this.type === Ro || this.type === So)
    };
    f.Ie = function (a, b, c) {
        if (!1 === this.sg)return null;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        if (Mm(this))return null;
        var d = this.Ga, e = 1 / this.Gj(), g = this.nh(), h = g ? a : gb(D.Fb(a.x, a.y), this.transform), k = this.g, l = 10, m = 5;
        null !== k && (l = k.su("extraTouchArea"), m = l / 2);
        if (Sb(-(m * e), -(m * e), d.width + l * e, d.height + l * e, h.x, h.y)) {
            if (!this.$n) {
                var e = this.ya.o, n = e.length, k = D.P(), m = (l = this.vq) ? this.Wd() : null;
                if (l && (m.nh() ? gb(k.set(a), m.transform) : k.set(a), !m.Pa(k)))return D.A(k), g || D.A(h), null;
                for (var p = Rp(this); n--;) {
                    var q =
                        e[n];
                    if (q.visible || q === p)if (q.nh() ? gb(k.set(a), q.transform) : k.set(a), !l || q !== m) {
                        var r = null;
                        q instanceof x ? r = q.Ie(k, b, c) : !0 === q.sg && q.Pa(k) && (r = q);
                        if (null !== r && (null !== b && (r = b(r)), null !== r && (null === c || c(r))))return D.A(k), g || D.A(h), r
                    }
                }
                D.A(k)
            }
            if (null === this.background && null === this.bm)return g || D.A(h), null;
            a = Sb(0, 0, d.width, d.height, h.x, h.y) ? this : null;
            g || D.A(h);
            return a
        }
        g || D.A(h);
        return null
    };
    f.iu = function (a, b, c, d) {
        if (!1 === this.sg)return !1;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        d instanceof K || d instanceof L || (d = new K(P));
        var e = this.Ga, g = this.nh(), h = g ? a : gb(D.Fb(a.x, a.y), this.transform);
        if (Sb(0, 0, e.width, e.height, h.x, h.y)) {
            if (!this.$n) {
                for (var e = this.ya.o, k = e.length, l = D.P(), m = Rp(this); k--;) {
                    var n = e[k];
                    if (n.visible || n === m) {
                        n.nh() ? gb(l.set(a), n.transform) : l.set(a);
                        var p = n, n = n instanceof x ? n : null;
                        (null !== n ? n.iu(l, b, c, d) : p.Pa(l)) && !1 !== p.sg && (null !== b && (p = b(p)), null === p || null !== c && !c(p) ||
                        d.add(p))
                    }
                }
                D.A(l)
            }
            g || D.A(h);
            return null !== this.background || null !== this.bm
        }
        g || D.A(h);
        return !1
    };
    f.Rk = function (a, b, c, d, e, g) {
        if (!1 === this.sg)return !1;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        var h = g;
        void 0 === g && (h = D.Sf(), h.reset());
        h.multiply(this.transform);
        if (this.Kn(a, h))return gq(this, b, c, e), void 0 === g && D.Je(h), !0;
        if (this.hg(a, h)) {
            if (!this.$n)for (var k = Rp(this), l = this.ya.o, m = l.length; m--;) {
                var n = l[m];
                if (n.visible || n === k) {
                    var p = n.$, q = this.Ga;
                    if (!(p.x > q.width || p.y > q.height || 0 > p.x + p.width || 0 > p.y + p.height)) {
                        p = n;
                        n = n instanceof x ? n : null;
                        q = D.Sf();
                        q.set(h);
                        if (null !== n ? n.Rk(a, b, c, d, e, q) : Lo(p, a, d,
                                q))null !== b && (p = b(p)), null === p || null !== c && !c(p) || e.add(p);
                        D.Je(q)
                    }
                }
            }
            void 0 === g && D.Je(h);
            return d
        }
        void 0 === g && D.Je(h);
        return !1
    };
    function gq(a, b, c, d) {
        for (var e = a.ya.o, g = e.length; g--;) {
            var h = e[g];
            if (h.visible) {
                var k = h.$, l = a.Ga;
                k.x > l.width || k.y > l.height || 0 > k.x + k.width || 0 > k.y + k.height || (h instanceof x && gq(h, b, c, d), null !== b && (h = b(h)), null === h || null !== c && !c(h) || d.add(h))
            }
        }
    }

    f.Rn = function (a, b, c, d, e, g) {
        if (!1 === this.sg)return !1;
        void 0 === c && (c = null);
        void 0 === d && (d = null);
        var h = this.Ga, k = this.nh(), l = k ? a : gb(D.Fb(a.x, a.y), this.transform), m = k ? b : gb(D.Fb(b.x, b.y), this.transform), n = l.Ff(m), p = 0 < l.x && l.x < h.width && 0 < l.y && l.y < h.height || hb(l.x, l.y, 0, 0, 0, h.height) < n || hb(l.x, l.y, 0, h.height, h.width, h.height) < n || hb(l.x, l.y, h.width, h.height, h.width, 0) < n || hb(l.x, l.y, h.width, 0, 0, 0) < n, h = 0 < l.x && l.x < h.width && 0 < l.y && l.y < h.height && hb(l.x, l.y, 0, 0, 0, h.height) < n && hb(l.x, l.y, 0, h.height, h.width, h.height) <
            n && hb(l.x, l.y, h.width, h.height, h.width, 0) < n && hb(l.x, l.y, h.width, 0, 0, 0) < n;
        k || (D.A(l), D.A(m));
        if (p) {
            if (!this.$n) {
                for (var k = D.P(), l = D.P(), m = Rp(this), n = this.ya.o, q = n.length; q--;) {
                    var r = n[q];
                    if (r.visible || r === m) {
                        var s = r.$, u = this.Ga;
                        s.x > u.width || s.y > u.height || 0 > s.x + s.width || 0 > s.y + s.height || (r.nh() ? (s = r.transform, gb(k.set(a), s), gb(l.set(b), s)) : (k.set(a), l.set(b)), s = r, r = r instanceof x ? r : null, null !== r ? !r.Rn(k, l, c, d, e, g) : !s.wF(k, l, e)) || (null !== c && (s = c(s)), null === s || null !== d && !d(s) || g.add(s))
                    }
                }
                D.A(k);
                D.A(l)
            }
            return e ?
                p : h
        }
        return !1
    };
    function Sp(a) {
        var b = null;
        a instanceof y && (b = a.C, b === Wc && (b = null), a = a.sf, null !== a && null === b && (b = a.C));
        null === b && (b = dc);
        return b
    }

    function Tp(a) {
        var b = null;
        a instanceof y && (b = a.D, b === Wc && (b = null), a = a.sf, null !== a && null === b && (b = a.D));
        null === b && (b = uc);
        return b
    }

    x.prototype.add = x.prototype.add = function (a) {
        D.l(a, P, x, "add:element");
        this.$d(this.ya.count, a)
    };
    x.prototype.elt = x.prototype.ea = function (a) {
        return this.ya.ea(a)
    };
    x.prototype.insertAt = x.prototype.$d = function (a, b) {
        b instanceof F && D.k("Cannot add a Part to a Panel: " + b + "; use a Panel instead");
        if (this === b || this.vm(b))this === b && D.k("Cannot make a Panel contain itself: " + this.toString()), D.k("Cannot make a Panel indirectly contain itself: " + this.toString() + " already contains " + b.toString());
        var c = b.Q;
        null !== c && c !== this && D.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: " + b.toString() + ", already contained by " + c.toString() + ", cannot be shared by this Panel: " +
            this.toString());
        this.da !== Rl || b instanceof y || D.k("Can only add Shapes to a Grid Panel, not: " + b);
        this.da !== pp || b instanceof y || b instanceof na || D.k("Can only add Shapes or TextBlocks to a Graduated Panel, not: " + b);
        b.ym(this);
        b.ln = null;
        if (null !== this.$k) {
            var d = b.data;
            null !== d && "object" === typeof d && (null === this.Ig && (this.Ig = new ma(Object, x)), this.Ig.add(d, b))
        }
        var e = this.ya, d = -1;
        if (c === this) {
            for (var g = -1, h = this.ya.o, k = h.length, l = 0; l < k; l++)if (h[l] === b) {
                g = l;
                break
            }
            if (-1 !== g) {
                if (g === a || g + 1 >= e.count &&
                    a >= e.count)return;
                e.kd(g);
                d = g
            } else D.k("element " + b.toString() + " has panel " + c.toString() + " but is not contained by it.")
        }
        if (0 > a || a > e.count)a = e.count;
        e.$d(a, b);
        this.K();
        b.K();
        null !== b.vd ? this.Wk = !0 : b instanceof x && !0 === b.Wk && (this.Wk = !0);
        this.lk = null;
        c = this.Z;
        null !== c && (c.Nl = null, c.uk = NaN, this.Wk && c instanceof G && (c.Wk = !0), c.Wk && c instanceof G && (c.ze = null), e = this.g, null !== e && e.ra.jb || (-1 !== d && c.jd(qg, "elements", this, b, null, d, null), c.jd(pg, "elements", this, null, b, null, a), this.zu() || hq(this, b, !1)))
    };
    D.defineProperty(x, {Wk: null}, function () {
        return 0 !== (this.T & 8388608)
    }, function (a) {
        0 !== (this.T & 8388608) !== a && (this.T ^= 8388608)
    });
    function iq(a, b) {
        a.T = b ? a.T | 16777216 : a.T & -16777217
    }

    x.prototype.remove = x.prototype.remove = function (a) {
        D.l(a, P, x, "remove:element");
        for (var b = this.ya.o, c = b.length, d = -1, e = 0; e < c; e++)if (b[e] === a) {
            d = e;
            break
        }
        -1 !== d && this.uf(d)
    };
    x.prototype.removeAt = x.prototype.kd = function (a) {
        v && D.p(a, x, "removeAt:idx");
        0 <= a && this.uf(a)
    };
    x.prototype.uf = function (a) {
        var b = this.ya, c = b.ea(a);
        c.ln = null;
        c.ym(null);
        if (null !== this.Ig) {
            var d = c.data;
            "object" === typeof d && this.Ig.remove(d)
        }
        b.kd(a);
        im(this, !1);
        this.K();
        this.xn === c && (this.xn = null);
        this.lk = null;
        b = this.Z;
        null !== b && (b.Nl = null, b.uk = NaN, b.oe(), d = this.g, null !== d && d.ra.jb || b.jd(qg, "elements", this, c, null, a, null))
    };
    D.w(x, {Mq: "rowCount"}, function () {
        return void 0 === this.ke ? 0 : this.ke.length
    });
    x.prototype.getRowDefinition = x.prototype.Yd = function (a) {
        v && D.p(a, x, "getRowDefinition:idx");
        0 > a && D.ua(a, ">= 0", x, "getRowDefinition:idx");
        a = Math.round(a);
        var b = this.ke;
        if (void 0 === b[a]) {
            var c = new ih;
            c.ym(this);
            c.Ke = !0;
            c.index = a;
            b[a] = c
        }
        return b[a]
    };
    x.prototype.removeRowDefinition = x.prototype.DG = function (a) {
        v && D.p(a, x, "removeRowDefinition:idx");
        0 > a && D.ua(a, ">= 0", x, "removeRowDefinition:idx");
        a = Math.round(a);
        var b = this.ke;
        this.jd(qg, "coldefs", this, b[a], null, a, null);
        b[a] && delete b[a];
        this.K()
    };
    D.w(x, {cq: "columnCount"}, function () {
        return void 0 === this.ge ? 0 : this.ge.length
    });
    x.prototype.getColumnDefinition = x.prototype.Xd = function (a) {
        v && D.p(a, x, "getColumnDefinition:idx");
        0 > a && D.ua(a, ">= 0", x, "getColumnDefinition:idx");
        a = Math.round(a);
        var b = this.ge;
        if (void 0 === b[a]) {
            var c = new ih;
            c.ym(this);
            c.Ke = !1;
            c.index = a;
            b[a] = c
        }
        return b[a]
    };
    x.prototype.removeColumnDefinition = x.prototype.BG = function (a) {
        v && D.p(a, x, "removeColumnDefinition:idx");
        0 > a && D.ua(a, ">= 0", x, "removeColumnDefinition:idx");
        a = Math.round(a);
        var b = this.ge;
        this.jd(qg, "coldefs", this, b[a], null, a, null);
        b[a] && delete b[a];
        this.K()
    };
    D.defineProperty(x, {kK: "rowSizing"}, function () {
        return void 0 === this.on ? op : this.on
    }, function (a) {
        if (void 0 !== this.on) {
            var b = this.on;
            b !== a && (a !== op && a !== Vp && D.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: " + a), this.on = a, this.K(), this.i("rowSizing", b, a))
        }
    });
    D.defineProperty(x, {hI: "columnSizing"}, function () {
        return void 0 === this.Mm ? op : this.Mm
    }, function (a) {
        if (void 0 !== this.Mm) {
            var b = this.Mm;
            b !== a && (a !== op && a !== Vp && D.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: " + a), this.Mm = a, this.K(), this.i("columnSizing", b, a))
        }
    });
    D.defineProperty(x, {jH: "topIndex"}, function () {
        return void 0 === this.vj ? 0 : this.vj
    }, function (a) {
        if (void 0 !== this.vj) {
            var b = this.vj;
            b !== a && ((!isFinite(a) || 0 > a) && D.k("Panel.topIndex must be greater than zero and a real number, not: " + a), this.vj = a, this.K(), this.i("topIndex", b, a))
        }
    });
    D.defineProperty(x, {hG: "leftIndex"}, function () {
        return void 0 === this.fj ? 0 : this.fj
    }, function (a) {
        if (void 0 !== this.fj) {
            var b = this.fj;
            b !== a && ((!isFinite(a) || 0 > a) && D.k("Panel.leftIndex must be greater than zero and a real number, not: " + a), this.fj = a, this.K(), this.i("leftIndex", b, a))
        }
    });
    x.prototype.findRowForLocalY = function (a) {
        if (0 > a || this.type !== ea)return -1;
        for (var b = 0, c = this.ke, d = c.length, e = this.vj; e < d; e++) {
            var g = c[e];
            if (void 0 !== g && (b += g.total, a < b))break
        }
        return e
    };
    x.prototype.findColumnForLocalX = function (a) {
        if (0 > a || this.type !== ea)return -1;
        for (var b = 0, c = this.ge, d = c.length, e = this.fj; e < d; e++) {
            var g = c[e];
            if (void 0 !== g && (b += g.total, a < b))break
        }
        return e
    };
    x.prototype.graduatedPointForValue = function (a, b) {
        void 0 === b && (b = new N(NaN, NaN));
        if (this.type !== pp)return b.n(NaN, NaN), b;
        a = Math.min(Math.max(a, this.Vk), this.VA);
        var c = (a - this.Vk) / this.tu, d = this.Wd();
        d.sf.UI(c, b);
        c = D.Sf();
        c.set(d.transform);
        b.transform(c);
        D.Je(c);
        return b
    };
    x.prototype.graduatedValueForPoint = function (a) {
        if (this.type !== pp)return NaN;
        var b = this.Wd(), c = b.sf, d = D.Sf();
        d.set(b.transform);
        d.Ux();
        a.transform(d);
        D.Je(d);
        return c.QI(a) * this.tu + this.Vk
    };
    D.defineProperty(x, {data: "data"}, function () {
        return this.Pd
    }, function (a) {
        var b = this.Pd;
        if (b !== a) {
            var c = this instanceof F && !(this instanceof ba);
            c && D.h(a, "object", x, "data");
            Oh(this);
            this.Pd = a;
            var d = this.g;
            null !== d && (c ? this instanceof J ? (null !== b && d.ck.remove(b), null !== a && d.ck.add(a, this)) : this instanceof F && (null !== b && d.Ui.remove(b), null !== a && d.Ui.add(a, this)) : (c = this.Q, null !== c && null !== c.Ig && (null !== b && c.Ig.remove(b), null !== a && c.Ig.add(a, this))));
            this.i("data", b, a);
            null !== d && d.ra.jb || null !== a && this.Nb()
        }
    });
    D.defineProperty(x, {Eu: "itemIndex"}, function () {
        return this.os
    }, function (a) {
        var b = this.os;
        b !== a && (this.os = a, this.i("itemIndex", b, a))
    });
    function hp(a) {
        a = a.tl;
        return null !== a && a.J
    }

    function Oh(a) {
        var b = a.tl;
        if (null === b)null !== a.data && D.k("Template cannot have .data be non-null: " + a), a.tl = b = new K(oh); else if (b.J)return;
        var c = new K(P);
        iq(a, !1);
        gp(a, a, function (a, d) {
            var e = d.Dc;
            if (null !== e)for (cp(d, !1), e = e.j; e.next();) {
                var g = e.value;
                g.mode === qh && cp(d, !0);
                var h = g.Uq;
                null !== h && ("/" === h && iq(a, !0), h = rh(g, a, d), null !== h && (c.add(h), null === h.Mp && (h.Mp = new K(oh)), h.Mp.add(g)));
                b.add(g)
            }
            if (d instanceof x && d.type === ea) {
                if (0 < d.ke.length)for (e = d.ke, g = e.length, h = 0; h < g; h++) {
                    var k = e[h];
                    if (void 0 !==
                        k && null !== k.Dc)for (var l = k.Dc.j; l.next();) {
                        var t = l.value;
                        t.Tg = k;
                        t.Ft = 2;
                        t.Tp = k.index;
                        b.add(t)
                    }
                }
                if (0 < d.ge.length)for (e = d.ge, g = e.length, h = 0; h < g; h++)if (k = e[h], void 0 !== k && null !== k.Dc)for (l = k.Dc.j; l.next();)t = l.value, t.Tg = k, t.Ft = 1, t.Tp = k.index, b.add(t)
            }
        });
        for (var d = c.j; d.next();) {
            var e = d.value;
            if (null !== e.Mp) {
                cp(e, !0);
                for (var g = e.Mp.j; g.next();) {
                    var h = g.value;
                    null === e.Dc && (e.Dc = new K(oh));
                    e.Dc.add(h)
                }
            }
            e.Mp = null
        }
        for (d = b.j; d.next();)if (e = d.value, g = e.Tg, null !== g) {
            e.Tg = null;
            var k = e.hv, l = k.indexOf(".");
            0 < l &&
            g instanceof x && (h = k.substring(0, l), k = k.substr(l + 1), l = g.Hd(h), null !== l ? (g = l, e.hv = k) : D.trace('Warning: unable to find GraphObject named "' + h + '" for Binding: ' + e.toString()));
            g instanceof ih ? (e.Cm = D.Jd(g.Q), g.Q.Ko = e.Cm) : (e.Cm = D.Jd(g), g.Ko = e.Cm)
        }
        b.freeze();
        a instanceof F && (a.pe() && a.kf(), v && !jq && gp(a, a, function (a, c) {
            if (c instanceof x && (c.type === Ol || c.type === Wj || c.type === pp) && 1 >= c.elements.count && !(c instanceof F)) {
                if (1 === c.elements.count) {
                    var d = null !== c.$k;
                    if (!d)for (var e = b.j; e.next();)if ("itemArray" ===
                        e.value.hv) {
                        d = !0;
                        break
                    }
                }
                d || (D.trace("Auto, Spot, or Graduated Panel should not have zero or one elements: " + c.toString() + " in " + a.toString()), jq = !0)
            }
        }))
    }

    var jq = !1;
    x.prototype.copyTemplate = function () {
        var a = this.copy();
        a.IK(function (a) {
            a instanceof x && (a.tl = null, a.Pd = null);
            var c = a.Dc;
            null !== c && (a.Dc = null, c.each(function (c) {
                a.bind(c.copy())
            }))
        });
        return a
    };
    x.prototype.updateTargetBindings = x.prototype.Nb = function (a) {
        var b = this.tl;
        if (null !== b)for (void 0 === a && (a = ""), b = b.j; b.next();) {
            var c = b.value, d = c.$G;
            if ("" === a || "" === d || d === a)if (d = c.hv, null !== c.mI || "" !== d) {
                var d = this.data, e = c.Uq;
                if (null !== e)d = "" === e ? this : "/" === e ? this : "." === e ? this : ".." === e ? this : this.Hd(e); else {
                    var g = this.g;
                    null !== g && c.by && (d = g.ga.al)
                }
                if (null === d)v && D.trace("Binding error: missing GraphObject named " + e + " in " + this.toString()); else {
                    var g = this, h = c.Cm;
                    if (-1 !== h) {
                        if (g = this.Lx(h), null === g)continue
                    } else null !==
                    c.Tg && (g = c.Tg);
                    "/" === e ? d = g.Z : "." === e ? d = g : ".." === e && (d = g.Q);
                    e = c.Ft;
                    if (0 !== e) {
                        if (!(g instanceof x))continue;
                        h = g;
                        1 === e ? g = h.Xd(c.Tp) : 2 === e && (g = h.Yd(c.Tp))
                    }
                    void 0 !== g && c.pH(g, d)
                }
            }
        }
    };
    D.defineProperty(x, {$k: "itemArray"}, function () {
        return this.cj
    }, function (a) {
        var b = this.cj;
        if (b !== a) {
            v && null !== a && !D.isArray(a) && D.k("Panel.itemArray must be an Array-like object or null, not: " + a);
            var c = this.g;
            null !== c && null !== b && an(c, this);
            this.cj = a;
            null !== c && null !== a && Xm(c, this);
            this.i("itemArray", b, a);
            null !== c && c.ra.jb || this.BB()
        }
    });
    function tn(a) {
        return a.type === Wj || a.type === Ol || a.type === rj || a.type === ea && 0 < a.ya.length && (a = a.ya.ea(0), a.Lf && a instanceof x && (a.type === Ro || a.type === So)) ? !0 : !1
    }

    x.prototype.rebuildItemElements = x.prototype.BB = function () {
        var a = 0;
        for (tn(this) && (a = 1); this.ya.length > a;)this.uf(this.ya.length - 1);
        a = this.$k;
        if (null !== a)for (var b = D.cb(a), c = 0; c < b; c++)sn(this, D.La(a, c), c)
    };
    x.prototype.findItemPanelForData = x.prototype.JI = function (a) {
        if (void 0 === a || null === a || null === this.Ig)return null;
        D.h(a, "object", x, "findItemPanelForData");
        return this.Ig.na(a)
    };
    function sn(a, b, c) {
        if (!(void 0 === b || null === b || 0 > c)) {
            var d;
            d = kq(a, b);
            var e = a.uJ, g = null;
            null !== e && (g = e.na(d));
            null === g && (lq || (lq = !0, D.trace('No item template Panel found for category "' + d + '" on ' + a), D.trace("  Using default item template."), d = new x, e = new na, e.bind(new oh("text", "", ha)), d.add(e), mq = d), g = mq);
            d = g;
            null !== d && (Oh(d), d = d.copy(), 0 !== (d.T & 16777216) && (e = a.om(), null !== e && iq(e, !0)), "object" === typeof b && (null === a.Ig && (a.Ig = new ma(Object, x)), a.Ig.add(b, d)), e = c, tn(a) && e++, a.$d(e, d), d.Pd = b, un(a, e,
                c), d.Pd = null, d.data = b)
        }
    }

    function un(a, b, c) {
        for (a = a.ya; b < a.length;) {
            var d = a.ea(b);
            if (d instanceof x) {
                var e = b, g = c;
                d.type === Ro ? d.Rb = e : d.type === So && (d.column = e);
                d.Eu = g
            }
            b++;
            c++
        }
    }

    D.defineProperty(x, {TL: "itemTemplate"}, function () {
        return null === this.Jg ? null : this.Jg.na("")
    }, function (a) {
        if (null === this.Jg) {
            if (null === a)return;
            this.Jg = new ma("string", x)
        }
        var b = this.Jg.na("");
        b !== a && (D.l(a, x, x, "itemTemplate"), (a instanceof F || a.Lf) && D.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: " + a), this.Jg.add("", a), this.i("itemTemplate", b, a), a = this.g, null !== a && a.ra.jb || this.BB())
    });
    D.defineProperty(x, {uJ: "itemTemplateMap"}, function () {
        return this.Jg
    }, function (a) {
        var b = this.Jg;
        if (b !== a) {
            D.l(a, ma, x, "itemTemplateMap");
            for (var c = a.j; c.next();) {
                var d = c.value;
                (d instanceof F || d.Lf) && D.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: " + d)
            }
            this.Jg = a;
            this.i("itemTemplateMap", b, a);
            a = this.g;
            null !== a && a.ra.jb || this.BB()
        }
    });
    D.defineProperty(x, {dG: "itemCategoryProperty"}, function () {
        return this.qp
    }, function (a) {
        var b = this.qp;
        b !== a && ("string" !== typeof a && "function" !== typeof a && D.jc(a, "string or function", x, "itemCategoryProperty"), this.qp = a, this.i("itemCategoryProperty", b, a))
    });
    function kq(a, b) {
        if (null === b)return "";
        var c = a.qp, d = "";
        if ("function" === typeof c)d = c(b); else if ("string" === typeof c && "object" === typeof b) {
            if ("" === c)return "";
            d = D.vb(b, c)
        } else return "";
        if (void 0 === d)return "";
        if ("string" === typeof d)return d;
        D.k("Panel.getCategoryForItemData found a non-string category for " + b + ": " + d);
        return ""
    }

    var lq = !1, mq = null;
    D.defineProperty(x, {$n: "isAtomic"}, function () {
        return 0 !== (this.T & 1048576)
    }, function (a) {
        var b = 0 !== (this.T & 1048576);
        b !== a && (D.h(a, "boolean", x, "isAtomic"), this.T ^= 1048576, this.i("isAtomic", b, a))
    });
    D.defineProperty(x, {vq: "isClipping"}, function () {
        return 0 !== (this.T & 2097152)
    }, function (a) {
        var b = 0 !== (this.T & 2097152);
        b !== a && (D.h(a, "boolean", x, "isClipping"), this.T ^= 2097152, this.K(), this.i("isClipping", b, a))
    });
    D.defineProperty(x, {aG: "isOpposite"}, function () {
        return 0 !== (this.T & 33554432)
    }, function (a) {
        var b = 0 !== (this.T & 33554432);
        b !== a && (D.h(a, "boolean", x, "isOpposite"), this.T ^= 33554432, this.K(), this.i("isOpposite", b, a))
    });
    D.defineProperty(x, {isEnabled: "isEnabled"}, function () {
        return 0 !== (this.T & 4194304)
    }, function (a) {
        var b = 0 !== (this.T & 4194304);
        if (b !== a) {
            D.h(a, "boolean", x, "isEnabled");
            var c = null === this.Q || this.Q.zu();
            this.T ^= 4194304;
            this.i("isEnabled", b, a);
            b = this.g;
            null !== b && b.ra.jb || c && hq(this, this, a)
        }
    });
    function hq(a, b, c) {
        var d = b.pF;
        null !== d && d(b, c);
        if (b instanceof x) {
            b = b.ya.o;
            for (var d = b.length, e = 0; e < d; e++) {
                var g = b[e];
                c && g instanceof x && !g.isEnabled || hq(a, g, c)
            }
        }
    }

    D.defineProperty(x, {MK: "alignmentFocusName"}, function () {
        return this.$j
    }, function (a) {
        var b = this.$j;
        b !== a && (v && D.h(a, "string", x, "alignmentFocusName"), this.$j = a, this.K(), this.i("alignmentFocusName", b, a))
    });
    function ih() {
        D.vc(this);
        this.Dh = null;
        this.jw = !0;
        this.Ec = 0;
        this.rf = NaN;
        this.wk = 0;
        this.vk = Infinity;
        this.te = Wc;
        this.sb = this.Ya = 0;
        this.Dc = null;
        this.xt = nq;
        this.Rg = wo;
        this.st = this.Ak = null;
        this.tt = NaN;
        this.Lb = this.qi = null;
        this.yr = !1
    }

    D.ka("RowColumnDefinition", ih);
    ih.prototype.copy = function () {
        var a = new ih;
        a.jw = this.jw;
        a.Ec = this.Ec;
        a.rf = this.rf;
        a.wk = this.wk;
        a.vk = this.vk;
        a.te = this.te;
        a.Ya = this.Ya;
        a.sb = this.sb;
        a.Rg = this.Rg;
        a.xt = this.xt;
        a.Ak = null === this.Ak ? null : this.Ak.V();
        a.st = this.st;
        a.tt = this.tt;
        a.qi = null;
        null !== this.qi && (a.qi = D.fm(this.qi));
        a.Lb = this.Lb;
        a.yr = this.yr;
        a.Dc = this.Dc;
        return a
    };
    ih.prototype.dq = function (a) {
        D.l(a, ih, ih, "copyFrom:pd");
        a.Ke ? this.height = a.height : this.width = a.width;
        this.Th = a.Th;
        this.re = a.re;
        this.alignment = a.alignment;
        this.stretch = a.stretch;
        this.ev = a.ev;
        this.Ak = null === a.Ak ? null : a.Ak.V();
        this.Oq = a.Oq;
        this.Pq = a.Pq;
        this.qi = null;
        a.qi && (this.qi = D.fm(a.qi));
        this.background = a.background;
        this.GA = a.GA;
        this.Dc = a.Dc
    };
    ih.prototype.qc = function (a) {
        a.Oe === ih ? this.ev = a : D.Xj(this, a)
    };
    ih.prototype.toString = function () {
        return "RowColumnDefinition " + (this.Ke ? "(Row " : "(Column ") + this.index + ") #" + D.Jd(this)
    };
    var nq;
    ih.Default = nq = D.s(ih, "Default", 0);
    var Vp;
    ih.None = Vp = D.s(ih, "None", 1);
    var op;
    ih.ProportionalExtra = op = D.s(ih, "ProportionalExtra", 2);
    ih.prototype.ym = function (a) {
        this.Dh = a
    };
    ih.prototype.computeEffectiveSpacingTop = ih.prototype.XE = function () {
        var a = 0;
        if (0 !== this.index) {
            var b = this.Dh, c = this.Oq;
            null === c && null !== b && (c = this.Ke ? b.Vi : b.di);
            null !== c && (a = this.Pq, isNaN(a) && (a = null !== b ? this.Ke ? b.fi : b.ei : 0))
        }
        b = this.UG;
        if (null === b)if (b = this.Dh, null !== b)b = b.dk; else return a;
        return a + (this.Ke ? b.top : b.left)
    };
    ih.prototype.computeEffectiveSpacing = ih.prototype.hf = function () {
        var a = 0;
        if (0 !== this.index) {
            var b = this.Dh, c = this.Oq;
            null === c && null !== b && (c = this.Ke ? b.Vi : b.di);
            null !== c && (a = this.Pq, isNaN(a) && (a = null !== b ? this.Ke ? b.fi : b.ei : 0))
        }
        b = this.UG;
        if (null === b)if (b = this.Dh, null !== b)b = b.dk; else return a;
        return a + (this.Ke ? b.top + b.bottom : b.left + b.right)
    };
    ih.prototype.sd = function (a, b, c, d, e) {
        var g = this.Dh;
        if (null !== g && (g.jd(eg, a, this, b, c, d, e), null !== this.Dc && (b = g.g, null !== b && !b.Ve && (g = g.om(), null !== g && (b = g.data, null !== b)))))for (c = this.Dc.j; c.next();)c.value.Oy(this, b, a, g)
    };
    D.w(ih, {Q: "panel"}, function () {
        return this.Dh
    });
    D.defineProperty(ih, {Ke: "isRow"}, function () {
        return this.jw
    }, function (a) {
        this.jw = a
    });
    D.defineProperty(ih, {index: "index"}, function () {
        return this.Ec
    }, function (a) {
        this.Ec = a
    });
    D.defineProperty(ih, {height: "height"}, function () {
        return this.rf
    }, function (a) {
        var b = this.rf;
        b !== a && (v && D.h(a, "number", ih, "height"), 0 > a && D.ua(a, ">= 0", ih, "height"), this.rf = a, this.gb = this.Ya, null !== this.Q && this.Q.K(), this.sd("height", b, a))
    });
    D.defineProperty(ih, {width: "width"}, function () {
        return this.rf
    }, function (a) {
        var b = this.rf;
        b !== a && (v && D.h(a, "number", ih, "width"), 0 > a && D.ua(a, ">= 0", ih, "width"), this.rf = a, this.gb = this.Ya, null !== this.Q && this.Q.K(), this.sd("width", b, a))
    });
    D.defineProperty(ih, {Th: "minimum"}, function () {
        return this.wk
    }, function (a) {
        var b = this.wk;
        b !== a && (v && D.h(a, "number", ih, "minimum"), (0 > a || !isFinite(a)) && D.ua(a, ">= 0", ih, "minimum"), this.wk = a, this.gb = this.Ya, null !== this.Q && this.Q.K(), this.sd("minimum", b, a))
    });
    D.defineProperty(ih, {re: "maximum"}, function () {
        return this.vk
    }, function (a) {
        var b = this.vk;
        b !== a && (v && D.h(a, "number", ih, "maximum"), 0 > a && D.ua(a, ">= 0", ih, "maximum"), this.vk = a, this.gb = this.Ya, null !== this.Q && this.Q.K(), this.sd("maximum", b, a))
    });
    D.defineProperty(ih, {alignment: "alignment"}, function () {
        return this.te
    }, function (a) {
        var b = this.te;
        b.O(a) || (v && D.l(a, Q, ih, "alignment"), this.te = a.V(), null !== this.Q && this.Q.K(), this.sd("alignment", b, a))
    });
    D.defineProperty(ih, {stretch: "stretch"}, function () {
        return this.Rg
    }, function (a) {
        var b = this.Rg;
        b !== a && (v && D.Da(a, P, ih, "stretch"), this.Rg = a, null !== this.Q && this.Q.K(), this.sd("stretch", b, a))
    });
    D.defineProperty(ih, {UG: "separatorPadding"}, function () {
        return this.Ak
    }, function (a) {
        "number" === typeof a ? a = new Kb(a) : null !== a && v && D.l(a, Kb, ih, "separatorPadding");
        var b = this.Ak;
        null !== a && null !== b && b.O(a) || (null !== a && (a = a.V()), this.Ak = a, null !== this.Q && this.Q.K(), this.sd("separatorPadding", b, a))
    });
    D.defineProperty(ih, {Oq: "separatorStroke"}, function () {
        return this.st
    }, function (a) {
        var b = this.st;
        b !== a && (null === a || "string" === typeof a || a instanceof Aa) && (a instanceof Aa && a.freeze(), this.st = a, null !== this.Q && this.Q.K(), this.sd("separatorStroke", b, a))
    });
    D.defineProperty(ih, {Pq: "separatorStrokeWidth"}, function () {
        return this.tt
    }, function (a) {
        var b = this.tt;
        b !== a && (this.tt = a, null !== this.Q && this.Q.K(), this.sd("separatorStrokeWidth", b, a))
    });
    D.defineProperty(ih, {zM: "separatorDashArray"}, function () {
        return this.qi
    }, function (a) {
        var b = this.qi;
        if (b !== a) {
            null === a || Array.isArray(a) || D.jc(a, "Array", ih, "separatorDashArray:value");
            if (null !== a) {
                for (var c = a.length, d = 0, e = 0; e < c; e++) {
                    var g = a[e];
                    "number" === typeof g && 0 <= g && isFinite(g) || D.k("separatorDashArray value " + g + " at index " + e + " must be a positive number or zero.");
                    d += g
                }
                if (0 === d) {
                    if (null === b)return;
                    a = null
                }
            }
            this.qi = a;
            null !== this.Q && this.Q.qa();
            this.sd("separatorDashArray", b, a)
        }
    });
    D.defineProperty(ih, {background: "background"}, function () {
        return this.Lb
    }, function (a) {
        var b = this.Lb;
        b !== a && (null === a || "string" === typeof a || a instanceof Aa) && (a instanceof Aa && a.freeze(), this.Lb = a, null !== this.Q && this.Q.qa(), this.sd("background", b, a))
    });
    D.defineProperty(ih, {GA: "coversSeparators"}, function () {
        return this.yr
    }, function (a) {
        var b = this.yr;
        b !== a && (D.h(a, "boolean", ih, "coversSeparators"), this.yr = a, null !== this.Q && this.Q.qa(), this.sd("coversSeparators", b, a))
    });
    D.defineProperty(ih, {ev: "sizing"}, function () {
        return this.xt
    }, function (a) {
        var b = this.xt;
        b !== a && (v && D.Da(a, ih, ih, "sizing"), this.xt = a, null !== this.Q && this.Q.K(), this.sd("sizing", b, a))
    });
    function Up(a) {
        if (a.ev === nq) {
            var b = a.Dh;
            return a.Ke ? b.kK : b.hI
        }
        return a.ev
    }

    D.defineProperty(ih, {gb: "actual"}, function () {
        return this.Ya
    }, function (a) {
        this.Ya = isNaN(this.rf) ? Math.max(Math.min(this.vk, a), this.wk) : Math.max(Math.min(this.vk, this.rf), this.wk)
    });
    D.defineProperty(ih, {total: "total"}, function () {
        return this.Ya + this.hf()
    }, function (a) {
        this.Ya = isNaN(this.rf) ? Math.max(Math.min(this.vk, a), this.wk) : Math.max(Math.min(this.vk, this.rf), this.wk);
        this.Ya = Math.max(0, this.Ya - this.hf())
    });
    D.defineProperty(ih, {position: "position"}, function () {
        return this.sb
    }, function (a) {
        this.sb = a
    });
    ih.prototype.bind = ih.prototype.bind = function (a) {
        a.Tg = this;
        var b = this.Q;
        if (null !== b) {
            var c = b.om();
            null !== c && hp(c) && D.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: " + a + " on " + b)
        }
        null === this.Dc && (this.Dc = new K(oh));
        this.Dc.add(a)
    };
    function y() {
        P.call(this);
        this.bg = this.ab = null;
        this.ap = "None";
        this.Xr = wo;
        this.zc = this.Qd = "black";
        this.Sg = 1;
        this.Pp = "butt";
        this.Rp = "miter";
        this.wn = 10;
        this.Qp = null;
        this.Cf = 0;
        this.yi = this.xi = Wc;
        this.Vs = this.Us = NaN;
        this.fs = !1;
        this.Xs = null;
        this.dp = this.Vp = "None";
        this.Gg = 1;
        this.Fg = 0;
        this.Eg = 1
    }

    D.Ra(y, P);
    D.ka("Shape", y);
    y.prototype.cloneProtected = function (a) {
        P.prototype.cloneProtected.call(this, a);
        a.ab = this.ab;
        a.ap = this.ap;
        a.Xr = this.Xr;
        a.bg = this.bg;
        a.Qd = this.Qd;
        a.zc = this.zc;
        a.Sg = this.Sg;
        a.Pp = this.Pp;
        a.Rp = this.Rp;
        a.wn = this.wn;
        null !== this.Qp && (a.Qp = D.fm(this.Qp));
        a.Cf = this.Cf;
        a.xi = this.xi.V();
        a.yi = this.yi.V();
        a.Us = this.Us;
        a.Vs = this.Vs;
        a.fs = this.fs;
        a.Xs = this.Xs;
        a.Vp = this.Vp;
        a.dp = this.dp;
        a.Gg = this.Gg;
        a.Fg = this.Fg;
        a.Eg = this.Eg
    };
    y.prototype.qc = function (a) {
        a === Yj || a === ak || a === bk || a === wo ? this.SA = a : P.prototype.qc.call(this, a)
    };
    y.prototype.toString = function () {
        return "Shape(" + ("None" !== this.Jb ? this.Jb : "None" !== this.Vq ? this.Vq : this.QA) + ")#" + D.Jd(this)
    };
    function oq(a, b, c, d) {
        var e = c.length;
        if (!(4 > e)) {
            for (var g = d.Fa, h = Math.max(1, g.width), g = g.height, k = c[0], l = c[1], m = 0, n = 0, p = 0, q = 0, r = 0, s = 0, u = q = 0, t = D.mb(), z = 2; z < e; z += 2)m = c[z], n = c[z + 1], p = m - k, q = n - l, 0 === p && (p = .001), r = q / p, s = Math.atan2(q, p), q = Math.sqrt(p * p + q * q), t.push([p, s, r, q]), u += q, k = m, l = n;
            k = c[0];
            l = c[1];
            p = d.Fa.width;
            d instanceof y && (p -= d.lb);
            1 > p && (p = 1);
            for (var e = c = p, m = h / 2, n = 0 === m ? !1 : !0, z = 0, q = t[z], p = q[0], s = q[1], r = q[2], q = q[3], w = 0; .1 <= u;) {
                0 === w && (n ? (e = c, e -= m, u -= m, n = !1) : e = c, 0 === e && (e = 1));
                if (e > u) {
                    D.za(t);
                    return
                }
                e >
                q ? (w = e - q, e = q) : w = 0;
                var B = Math.sqrt(e * e / (1 + r * r));
                0 > p && (B = -B);
                k += B;
                l += r * B;
                a.translate(k, l);
                a.rotate(s);
                a.translate(-(h / 2), -(g / 2));
                0 === w && d.Qk(a, b);
                a.translate(h / 2, g / 2);
                a.rotate(-s);
                a.translate(-k, -l);
                u -= e;
                q -= e;
                if (0 !== w) {
                    z++;
                    if (z === t.length) {
                        D.za(t);
                        return
                    }
                    q = t[z];
                    p = q[0];
                    s = q[1];
                    r = q[2];
                    q = q[3];
                    e = w
                }
            }
            D.za(t)
        }
    }

    y.prototype.Qk = function (a, b) {
        if (null !== this.zc || null !== this.Qd) {
            null !== this.Qd && Vo(this, a, this.Qd, !0, !1);
            null !== this.zc && Vo(this, a, this.zc, !1, !1);
            var c = this.Sg;
            if (0 === c) {
                var d = this.Z;
                d instanceof ba && d.type === rj && "Selection" === d.Fd && d.zb instanceof y && d.Df.Wd() === d.zb && (c = d.zb.lb)
            }
            a.lineWidth = c;
            a.lineJoin = this.Rp;
            a.lineCap = this.Pp;
            a.miterLimit = this.wn;
            var e = !1;
            this.Z && b.Hj("drawShadows") && (e = this.Z.Zk);
            var g = !0;
            null !== this.zc && null === this.Qd && (g = !1);
            var d = !1, h = !0, k = this.cH;
            null !== k && (d = !0, h = a.NA(k,
                this.Cf));
            var l = this.ab;
            if (null !== l) {
                if (l.da === tf)a.beginPath(), d && !h ? Go(a, l.yc, l.Ic, l.Bb, l.Ib, k, this.Cf) : (a.moveTo(l.yc, l.Ic), a.lineTo(l.Bb, l.Ib)), null !== this.Qd && a.Zg(this.Qd), 0 !== c && null !== this.zc && a.Wj(); else if (l.da === uf) {
                    var m = l.yc, n = l.Ic, p = l.Bb, q = l.Ib, l = Math.min(m, p), r = Math.min(n, q), m = Math.abs(p - m), n = Math.abs(q - n);
                    null !== this.Qd && (a.beginPath(), a.rect(l, r, m, n), a.Zg(this.Qd));
                    if (null !== this.zc) {
                        var s = p = 0, u = 0;
                        g && e && (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY =
                            0, a.shadowBlur = 0);
                        d && !h ? (h = D.mb(), h.push(l), h.push(r), h.push(l + m), h.push(r), h.push(l + m), h.push(r + n), h.push(l), h.push(r + n), h.push(l), h.push(r), a.beginPath(), pq(a, h, k, this.Cf), a.Wj(), D.za(h)) : 0 !== c && (a.beginPath(), a.rect(l, r, m, n), a.Wj());
                        g && e && (a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u)
                    }
                } else if (l.da === vf)m = l.yc, n = l.Ic, p = l.Bb, q = l.Ib, l = Math.abs(p - m) / 2, r = Math.abs(q - n) / 2, m = Math.min(m, p) + l, n = Math.min(n, q) + r, a.beginPath(), a.moveTo(m, n - r), a.bezierCurveTo(m + Id * l, n - r, m + l, n - Id * r, m + l, n), a.bezierCurveTo(m +
                    l, n + Id * r, m + Id * l, n + r, m, n + r), a.bezierCurveTo(m - Id * l, n + r, m - l, n + Id * r, m - l, n), a.bezierCurveTo(m - l, n - Id * r, m - Id * l, n - r, m, n - r), a.closePath(), null !== this.Qd && a.Zg(this.Qd), d && !h && (h = D.mb(), Ce(m, n - r, m + Id * l, n - r, m + l, n - Id * r, m + l, n, .5, h), Ce(m + l, n, m + l, n + Id * r, m + Id * l, n + r, m, n + r, .5, h), Ce(m, n + r, m - Id * l, n + r, m - l, n + Id * r, m - l, n, .5, h), Ce(m - l, n, m - l, n - Id * r, m - Id * l, n - r, m, n - r, .5, h), a.beginPath(), pq(a, h, k, this.Cf), D.za(h)), 0 !== c && null !== this.zc && (g && e ? (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY =
                    0, a.shadowBlur = 0, a.Wj(), a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u) : a.Wj()); else if (l.da === $e) {
                    r = l.fk;
                    n = r.length;
                    for (q = 0; q < n; q++) {
                        m = r.o[q];
                        a.beginPath();
                        a.moveTo(m.la, m.ja);
                        for (var p = m.Db.o, s = p.length, t = null, u = 0; u < s; u++) {
                            var z = p[u];
                            switch (z.da) {
                                case Ff:
                                    a.moveTo(z.G, z.H);
                                    break;
                                case xf:
                                    a.lineTo(z.G, z.H);
                                    break;
                                case Gf:
                                    a.bezierCurveTo(z.Rd, z.ff, z.Eh, z.Pg, z.Bb, z.Ib);
                                    break;
                                case Rf:
                                    a.quadraticCurveTo(z.Rd, z.ff, z.Bb, z.Ib);
                                    break;
                                case Sf:
                                    if (z.radiusX === z.radiusY)t = Math.PI / 180, a.arc(z.Rd, z.ff, z.radiusX,
                                        z.Me * t, (z.Me + z.zf) * t, 0 > z.zf); else {
                                        var t = Uf(z, m), w = t.length;
                                        if (0 === w) {
                                            a.lineTo(z.oa, z.va);
                                            break
                                        }
                                        for (var B = 0; B < w; B++) {
                                            var A = t[B];
                                            0 === B && a.lineTo(A[0], A[1]);
                                            a.bezierCurveTo(A[2], A[3], A[4], A[5], A[6], A[7])
                                        }
                                    }
                                    break;
                                case Tf:
                                    B = w = 0;
                                    if (null !== t && t.type === Sf) {
                                        t = Uf(t, m);
                                        A = t.length;
                                        if (0 === A) {
                                            a.lineTo(z.oa, z.va);
                                            break
                                        }
                                        t = t[A - 1] || null;
                                        null !== t && (w = t[6], B = t[7])
                                    } else w = null !== t ? t.G : m.la, B = null !== t ? t.H : m.ja;
                                    t = Vf(z, m, w, B);
                                    w = t.length;
                                    if (0 === w) {
                                        a.lineTo(z.oa, z.va);
                                        break
                                    }
                                    for (B = 0; B < w; B++)A = t[B], a.bezierCurveTo(A[2], A[3],
                                        A[4], A[5], A[6], A[7]);
                                    break;
                                default:
                                    D.k("Segment not of valid type: " + z.da)
                            }
                            z.ii && a.closePath();
                            t = z
                        }
                        e ? (u = s = p = 0, m.np ? (!0 === m.Um && null !== this.Qd ? (a.Zg(this.Qd), g = !0) : g = !1, 0 !== c && null !== this.zc && (g && (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), d && !h || a.Wj(), g && (a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u))) : (g && (p = a.shadowOffsetX, s = a.shadowOffsetY, u = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), !0 === m.Um && null !== this.Qd &&
                        a.Zg(this.Qd), 0 !== c && null !== this.zc && (d && !h || a.Wj()), g && (a.shadowOffsetX = p, a.shadowOffsetY = s, a.shadowBlur = u))) : (!0 === m.Um && null !== this.Qd && a.Zg(this.Qd), 0 === c || null === this.zc || d && !h || a.Wj())
                    }
                    if (d && !h)for (c = g, g = l.fk, h = g.length, l = 0; l < h; l++) {
                        r = g.o[l];
                        a.beginPath();
                        n = D.mb();
                        n.push(r.la);
                        n.push(r.ja);
                        q = r.la;
                        m = r.ja;
                        p = q;
                        s = m;
                        u = r.Db.o;
                        z = u.length;
                        for (t = 0; t < z; t++) {
                            w = u[t];
                            switch (w.da) {
                                case Ff:
                                    pq(a, n, k, this.Cf);
                                    n.length = 0;
                                    n.push(w.G);
                                    n.push(w.H);
                                    q = w.G;
                                    m = w.H;
                                    p = q;
                                    s = m;
                                    break;
                                case xf:
                                    n.push(w.G);
                                    n.push(w.H);
                                    q = w.G;
                                    m = w.H;
                                    break;
                                case Gf:
                                    Ce(q, m, w.Rd, w.ff, w.Eh, w.Pg, w.Bb, w.Ib, .5, n);
                                    q = w.G;
                                    m = w.H;
                                    break;
                                case Rf:
                                    Ge(q, m, w.Rd, w.ff, w.Bb, w.Ib, .5, n);
                                    q = w.G;
                                    m = w.H;
                                    break;
                                case Sf:
                                    B = Uf(w, r);
                                    A = B.length;
                                    if (0 === A) {
                                        n.push(w.oa);
                                        n.push(w.va);
                                        q = w.oa;
                                        m = w.va;
                                        break
                                    }
                                    for (var O = 0; O < A; O++) {
                                        var H = B[O];
                                        Ce(q, m, H[2], H[3], H[4], H[5], H[6], H[7], .5, n);
                                        q = H[6];
                                        m = H[7]
                                    }
                                    break;
                                case Tf:
                                    B = Vf(w, r, q, m);
                                    A = B.length;
                                    if (0 === A) {
                                        n.push(w.oa);
                                        n.push(w.va);
                                        q = w.oa;
                                        m = w.va;
                                        break
                                    }
                                    for (O = 0; O < A; O++)H = B[O], Ce(q, m, H[2], H[3], H[4], H[5], H[6], H[7], .5, n), q = H[6], m = H[7];
                                    break;
                                default:
                                    D.k("Segment not of valid type: " +
                                        w.da)
                            }
                            w.ii && (n.push(p), n.push(s), pq(a, n, k, this.Cf))
                        }
                        pq(a, n, k, this.Cf);
                        D.za(n);
                        null !== this.zc && (q = n = r = 0, c && e && (r = a.shadowOffsetX, n = a.shadowOffsetY, q = a.shadowBlur, a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0), a.Wj(), c && e && (a.shadowOffsetX = r, a.shadowOffsetY = n, a.shadowBlur = q))
                    }
                }
                d && a.IA();
                if (null !== this.ty) {
                    d = this.ty;
                    Gk(d, Infinity, Infinity);
                    k = d.Fa;
                    d.rc(0, 0, k.width, k.height);
                    c = this.sf;
                    a.save();
                    a.beginPath();
                    k = D.mb();
                    if (c.type === tf)k.push(c.la), k.push(c.ja), k.push(c.G), k.push(c.H), oq(a, b, k, d); else if (c.type ===
                        $e)for (h = c.nc.j; h.next();) {
                        l = h.value;
                        k.length = 0;
                        k.push(l.la);
                        k.push(l.ja);
                        g = l.la;
                        r = l.ja;
                        n = g;
                        q = r;
                        m = l.Db.o;
                        p = m.length;
                        for (s = 0; s < p; s++) {
                            u = m[s];
                            switch (u.da) {
                                case Ff:
                                    oq(a, b, k, d);
                                    k.length = 0;
                                    k.push(u.G);
                                    k.push(u.H);
                                    g = u.G;
                                    r = u.H;
                                    n = g;
                                    q = r;
                                    break;
                                case xf:
                                    k.push(u.G);
                                    k.push(u.H);
                                    g = u.G;
                                    r = u.H;
                                    break;
                                case Gf:
                                    Ce(g, r, u.Rd, u.ff, u.Eh, u.Pg, u.Bb, u.Ib, .5, k);
                                    g = u.G;
                                    r = u.H;
                                    break;
                                case Rf:
                                    Ge(g, r, u.Rd, u.ff, u.Bb, u.Ib, .5, k);
                                    g = u.G;
                                    r = u.H;
                                    break;
                                case Sf:
                                    c = Uf(u, l);
                                    e = c.length;
                                    if (0 === e) {
                                        k.push(u.oa);
                                        k.push(u.va);
                                        g = u.oa;
                                        r = u.va;
                                        break
                                    }
                                    for (z =
                                             0; z < e; z++)t = c[z], Ce(g, r, t[2], t[3], t[4], t[5], t[6], t[7], .5, k), g = t[6], r = t[7];
                                    break;
                                case Tf:
                                    c = Vf(u, l, g, r);
                                    e = c.length;
                                    if (0 === e) {
                                        k.push(u.oa);
                                        k.push(u.va);
                                        g = u.oa;
                                        r = u.va;
                                        break
                                    }
                                    for (z = 0; z < e; z++)t = c[z], Ce(g, r, t[2], t[3], t[4], t[5], t[6], t[7], .5, k), g = t[6], r = t[7];
                                    break;
                                default:
                                    D.k("Segment not of valid type: " + u.da)
                            }
                            u.ii && (k.push(n), k.push(q), oq(a, b, k, d))
                        }
                        oq(a, b, k, d)
                    } else if (c.type === uf)k.push(c.la), k.push(c.ja), k.push(c.G), k.push(c.ja), k.push(c.G), k.push(c.H), k.push(c.la), k.push(c.H), k.push(c.la), k.push(c.ja),
                        oq(a, b, k, d); else if (c.type === vf) {
                        h = new af;
                        h.la = c.G;
                        h.ja = (c.ja + c.H) / 2;
                        g = new Zf(Sf);
                        g.Me = 0;
                        g.zf = 360;
                        g.oa = (c.la + c.G) / 2;
                        g.va = (c.ja + c.H) / 2;
                        g.radiusX = Math.abs(c.la - c.G) / 2;
                        g.radiusY = Math.abs(c.ja - c.H) / 2;
                        h.add(g);
                        c = Uf(g, h);
                        e = c.length;
                        if (0 === e)k.push(g.oa), k.push(g.va); else for (g = h.la, r = h.ja, z = 0; z < e; z++)t = c[z], Ce(g, r, t[2], t[3], t[4], t[5], t[6], t[7], .5, k), g = t[6], r = t[7];
                        oq(a, b, k, d)
                    }
                    D.za(k);
                    a.restore();
                    a.De(!1)
                }
            }
        }
    };
    function pq(a, b, c, d) {
        var e = b.length;
        if (!(4 > e)) {
            var g = .001, h = c.length, k = b[0], l = b[1];
            if (4 === e)Go(a, k, l, b[2], b[3], c, d); else {
                a.moveTo(k, l);
                for (var m = g = 0, n = 0, p = 0, q = 0, r = p = 0, s = D.mb(), u = 2; u < e; u += 2)g = b[u], m = b[u + 1], n = g - k, p = m - l, 0 === n && (n = .001), q = p / n, p = Math.sqrt(n * n + p * p), s.push([n, q, p]), r += p, k = g, l = m;
                k = b[0];
                l = b[1];
                b = 0;
                for (var e = !0, g = c[b % h], m = 0 !== d, u = 0, p = s[u], n = p[0], q = p[1], p = p[2], t = 0; .1 <= r;) {
                    0 === t && (g = c[b % h], b++, m && (d %= g, g -= d, m = !1));
                    g > r && (g = r);
                    g > p ? (t = g - p, g = p) : t = 0;
                    var z = Math.sqrt(g * g / (1 + q * q));
                    0 > n && (z = -z);
                    k += z;
                    l +=
                        q * z;
                    e ? a.lineTo(k, l) : a.moveTo(k, l);
                    r -= g;
                    p -= g;
                    if (0 !== t) {
                        u++;
                        if (u === s.length) {
                            D.za(s);
                            return
                        }
                        p = s[u];
                        n = p[0];
                        q = p[1];
                        p = p[2];
                        g = t
                    } else e = !e
                }
                D.za(s)
            }
        }
    }

    y.prototype.getDocumentPoint = y.prototype.eb = function (a, b) {
        void 0 === b && (b = new N);
        if (a instanceof Q) {
            a.be() && D.k("getDocumentPoint Spot must be a real, specific Spot, not: " + a.toString());
            var c = this.Ga, d = this.lb;
            b.n(a.x * (c.width + d) - d / 2 + c.x + a.offsetX, a.y * (c.height + d) - d / 2 + c.y + a.offsetY)
        } else b.set(a);
        this.Jh.wb(b);
        return b
    };
    y.prototype.Nk = function (a, b) {
        var c = this.sf;
        if (null === c || null === this.fill && null === this.stroke)return !1;
        var d = c.pb, e = this.lb / 2;
        c.type !== tf || b || (e += 2);
        var g = D.Rf();
        g.assign(d);
        g.If(e + 2, e + 2);
        if (!g.Pa(a))return D.Kb(g), !1;
        d = e + 1E-4;
        if (c.type === tf) {
            if (null === this.stroke)return !1;
            d = (c.G - c.la) * (a.x - c.la) + (c.H - c.ja) * (a.y - c.ja);
            if (0 > (c.la - c.G) * (a.x - c.G) + (c.ja - c.H) * (a.y - c.H) || 0 > d)return !1;
            D.Kb(g);
            return se(c.la, c.ja, c.G, c.H, e, a.x, a.y)
        }
        if (c.type === uf) {
            var h = c.la, k = c.ja, l = c.G, m = c.H;
            g.x = Math.min(h, l);
            g.y = Math.min(k,
                m);
            g.width = Math.abs(l - h);
            g.height = Math.abs(m - k);
            if (null === this.fill) {
                g.If(-d, -d);
                if (g.Pa(a))return D.Kb(g), !1;
                g.If(d, d)
            }
            null !== this.stroke && g.If(e, e);
            e = g.Pa(a);
            D.Kb(g);
            return e
        }
        if (c.type === vf) {
            var h = c.la, k = c.ja, l = c.G, m = c.H, c = Math.min(h, l), n = Math.min(k, m), h = Math.abs(l - h) / 2, k = Math.abs(m - k) / 2, c = a.x - (c + h), n = a.y - (n + k);
            if (null === this.fill) {
                h -= d;
                k -= d;
                if (0 >= h || 0 >= k || 1 >= c * c / (h * h) + n * n / (k * k))return D.Kb(g), !1;
                h += d;
                k += d
            }
            null !== this.stroke && (h += e, k += e);
            D.Kb(g);
            return 0 >= h || 0 >= k ? !1 : 1 >= c * c / (h * h) + n * n / (k * k)
        }
        if (c.type ===
            $e)return D.Kb(g), null === this.fill ? Xf(c, a.x, a.y, e) : c.Pa(a, e, 1 < this.lb, b);
        D.k("Unknown Geometry type: " + c.type);
        return !1
    };
    y.prototype.jo = function (a, b, c, d) {
        var e = this.Ea, g = this.Sg;
        a = Math.max(a, 0);
        b = Math.max(b, 0);
        var h;
        if (null !== this.bg)h = this.sf.pb; else {
            var k = this.Jb, l = oe[k];
            if (void 0 === l) {
                var m = qq[k];
                "string" === typeof m && (m = qq[m]);
                "function" === typeof m ? (l = m(null, 100, 100), oe[k] = l) : D.k("Unsupported Figure: " + k)
            }
            h = l.pb
        }
        var k = h.width, l = h.height, m = h.width, n = h.height;
        switch (Mo(this, !0)) {
            case Yj:
                d = c = 0;
                break;
            case sf:
                m = Math.max(a - g, 0);
                n = Math.max(b - g, 0);
                break;
            case yo:
                m = Math.max(a - g, 0);
                d = 0;
                break;
            case xo:
                c = 0, n = Math.max(b - g, 0)
        }
        isFinite(e.width) &&
        (m = e.width);
        isFinite(e.height) && (n = e.height);
        e = this.mf;
        h = this.kg;
        c = Math.max(c, h.width) - g;
        d = Math.max(d, h.height) - g;
        m = Math.min(e.width, m);
        n = Math.min(e.height, n);
        m = isFinite(m) ? Math.max(c, m) : Math.max(k, c);
        n = isFinite(n) ? Math.max(d, n) : Math.max(l, d);
        c = Zj(this);
        switch (c) {
            case Yj:
                break;
            case sf:
                k = m;
                l = n;
                break;
            case ak:
                c = Math.min(m / k, n / l);
                isFinite(c) || (c = 1);
                k *= c;
                l *= c;
                break;
            default:
                D.k(c + " is not a valid geometryStretch.")
        }
        null !== this.bg ? (k = Math.max(k, .01), l = Math.max(l, .01), h = null !== this.bg ? this.bg : this.ab, e = k,
            d = l, c = h.copy(), h = h.pb, e /= h.width, d /= h.height, isFinite(e) || (e = 1), isFinite(d) || (d = 1), 1 === e && 1 === d || c.scale(e, d), v && c.freeze(), this.ab = c) : null !== this.ab && zb(this.ab.mp, a - g) && zb(this.ab.kp, b - g) || (this.ab = y.makeGeometry(this, k, l));
        h = this.ab.pb;
        Infinity === a || Infinity === b ? Jo(this, h.x - g / 2, h.y - g / 2, 0 === a && 0 === k ? 0 : h.width + g, 0 === b && 0 === l ? 0 : h.height + g) : Jo(this, -(g / 2), -(g / 2), m + g, n + g)
    };
    function Wp(a, b, c, d) {
        if (!1 !== Lm(a)) {
            a.Cd.Xa();
            var e = a.Sg;
            0 === e && d instanceof ba && d.type === rj && d.zb instanceof y && (e = d.zb.lb);
            e *= a.Cb;
            d instanceof J && null !== d.ab ? (b = d.ab.pb, Jo(a, b.x - e / 2, b.y - e / 2, b.width + e, b.height + e)) : Jo(a, -(e / 2), -(e / 2), b + e, c + e);
            a.Cd.freeze();
            a.Cd.F() || D.k("Non-real measuredBounds has been set. Object " + a + ", measuredBounds: " + a.Cd.toString());
            im(a, !1)
        }
    }

    function Zj(a) {
        var b = a.SA;
        return null !== a.bg ? b === wo ? sf : b : b === wo ? oe[a.Jb].me : b
    }

    y.prototype.zj = function (a, b, c, d) {
        Oo(this, a, b, c, d)
    };
    y.prototype.getNearestIntersectionPoint = y.prototype.DF = function (a, b, c) {
        return this.Vn(a.x, a.y, b.x, b.y, c)
    };
    y.prototype.Vn = function (a, b, c, d, e) {
        var g = this.transform, h = 1 / (g.m11 * g.m22 - g.m12 * g.m21), k = g.m22 * h, l = -g.m12 * h, m = -g.m21 * h, n = g.m11 * h, p = h * (g.m21 * g.dy - g.m22 * g.dx), q = h * (g.m12 * g.dx - g.m11 * g.dy), g = a * k + b * m + p, h = a * l + b * n + q, k = c * k + d * m + p, l = c * l + d * n + q, m = this.lb / 2, p = this.ab;
        null === p && (Gk(this, Infinity, Infinity), p = this.ab);
        q = p.pb;
        n = !1;
        if (p.type === tf)if (1.5 >= this.lb)n = Je(p.yc, p.Ic, p.Bb, p.Ib, g, h, k, l, e); else {
            var r = 0, s = 0;
            p.yc === p.Bb ? (r = m, s = 0) : (b = (p.Ib - p.Ic) / (p.Bb - p.yc), s = m / Math.sqrt(1 + b * b), r = s * b);
            d = D.mb();
            b = new N;
            Je(p.yc +
                r, p.Ic + s, p.Bb + r, p.Ib + s, g, h, k, l, b) && d.push(b);
            b = new N;
            Je(p.yc - r, p.Ic - s, p.Bb - r, p.Ib - s, g, h, k, l, b) && d.push(b);
            b = new N;
            Je(p.yc + r, p.Ic + s, p.yc - r, p.Ic - s, g, h, k, l, b) && d.push(b);
            b = new N;
            Je(p.Bb + r, p.Ib + s, p.Bb - r, p.Ib - s, g, h, k, l, b) && d.push(b);
            b = d.length;
            if (0 === b)return D.za(d), !1;
            n = !0;
            s = Infinity;
            for (r = 0; r < b; r++) {
                var k = d[r], u = (k.x - g) * (k.x - g) + (k.y - h) * (k.y - h);
                u < s && (s = u, e.x = k.x, e.y = k.y)
            }
            D.za(d)
        } else if (p.type === uf)b = q.x - m, n = Ke(b, q.y - m, q.x + q.width + m, q.y + q.height + m, g, h, k, l, e); else if (p.type === vf)a:if (b = q.copy().If(m,
                m), 0 === b.width)n = Je(b.x, b.y, b.x, b.y + b.height, g, h, k, l, e); else if (0 === b.height)n = Je(b.x, b.y, b.x + b.width, b.y, g, h, k, l, e); else {
            a = b.width / 2;
            var t = b.height / 2;
            d = b.x + a;
            b = b.y + t;
            c = 9999;
            g !== k && (c = (h - l) / (g - k));
            if (9999 > Math.abs(c)) {
                n = h - b - c * (g - d);
                if (0 > a * a * c * c + t * t - n * n) {
                    e.x = NaN;
                    e.y = NaN;
                    n = !1;
                    break a
                }
                m = Math.sqrt(a * a * c * c + t * t - n * n);
                k = (-(a * a * c * n) + a * t * m) / (t * t + a * a * c * c) + d;
                a = (-(a * a * c * n) - a * t * m) / (t * t + a * a * c * c) + d;
                l = c * (k - d) + n + b;
                b = c * (a - d) + n + b;
                d = Math.abs((g - k) * (g - k)) + Math.abs((h - l) * (h - l));
                h = Math.abs((g - a) * (g - a)) + Math.abs((h - b) * (h -
                        b));
                d < h ? (e.x = k, e.y = l) : (e.x = a, e.y = b)
            } else {
                k = t * t;
                l = g - d;
                k -= k / (a * a) * l * l;
                if (0 > k) {
                    e.x = NaN;
                    e.y = NaN;
                    n = !1;
                    break a
                }
                m = Math.sqrt(k);
                l = b + m;
                b -= m;
                d = Math.abs(l - h);
                h = Math.abs(b - h);
                d < h ? (e.x = g, e.y = l) : (e.x = g, e.y = b)
            }
            n = !0
        } else if (p.type === $e) {
            var z = 0, w = 0, B = u = 0, q = D.P(), r = k - g, s = l - h, s = r * r + s * s;
            e.x = k;
            e.y = l;
            for (r = 0; r < p.nc.count; r++)for (var A = p.nc.o[r], O = A.Db, z = A.la, w = A.ja, H = z, S = w, Y = 0; Y < O.count; Y++) {
                var R = O.o[Y], da = R.type, u = R.G, B = R.H, ia = !1;
                switch (da) {
                    case Ff:
                        H = u;
                        S = B;
                        break;
                    case xf:
                        ia = rq(z, w, u, B, g, h, k, l, q);
                        break;
                    case Gf:
                        var ia =
                            R.Cc, da = R.Zc, V = R.Uh, Ua = R.Vh, ia = He(z, w, ia, da, V, Ua, u, B, g, h, k, l, .5, q);
                        break;
                    case Rf:
                        ia = (z + 2 * R.Cc) / 3;
                        da = (w + 2 * R.Zc) / 3;
                        V = (2 * R.Cc + u) / 3;
                        Ua = (2 * R.Cc + u) / 3;
                        ia = He(z, w, ia, da, V, Ua, u, B, g, h, k, l, .5, q);
                        break;
                    case Sf:
                    case Tf:
                        da = R.type === Sf ? Uf(R, A) : Vf(R, A, z, w);
                        V = da.length;
                        if (0 === V) {
                            ia = rq(z, w, R.oa, R.va, g, h, k, l, q);
                            break
                        }
                        for (B = 0; B < V; B++)t = da[B], 0 === B && rq(z, w, t[0], t[1], g, h, k, l, q) && (u = sq(g, h, q, s, e), u < s && (s = u, n = !0)), He(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], g, h, k, l, .5, q) && (u = sq(g, h, q, s, e), u < s && (s = u, n = !0));
                        u = t[6];
                        B = t[7];
                        break;
                    default:
                        D.k("Unknown Segment type: " + da)
                }
                z = u;
                w = B;
                ia && (u = sq(g, h, q, s, e), u < s && (s = u, n = !0));
                R.Vx && (u = H, B = S, rq(z, w, u, B, g, h, k, l, q) && (u = sq(g, h, q, s, e), u < s && (s = u, n = !0)))
            }
            g = c - a;
            h = d - b;
            b = Math.sqrt(g * g + h * h);
            0 !== b && (g /= b, h /= b);
            e.x -= g * m;
            e.y -= h * m;
            D.A(q)
        } else D.k("Unknown Geometry type: " + p.type);
        if (!n)return !1;
        this.transform.wb(e);
        return !0
    };
    function sq(a, b, c, d, e) {
        a = c.x - a;
        b = c.y - b;
        b = a * a + b * b;
        return b < d ? (e.x = c.x, e.y = c.y, b) : d
    }

    function rq(a, b, c, d, e, g, h, k, l) {
        var m = !1, n = (e - h) * (b - d) - (g - k) * (a - c);
        if (0 === n)return !1;
        l.x = ((e * k - g * h) * (a - c) - (e - h) * (a * d - b * c)) / n;
        l.y = ((e * k - g * h) * (b - d) - (g - k) * (a * d - b * c)) / n;
        (a > c ? a - c : c - a) < (b > d ? b - d : d - b) ? (e = b < d ? b : d, a = b < d ? d : b, (l.y > e || zb(l.y, e)) && (l.y < a || zb(l.y, a)) && (m = !0)) : (e = a < c ? a : c, a = a < c ? c : a, (l.x > e || zb(l.x, e)) && (l.x < a || zb(l.x, a)) && (m = !0));
        return m
    }

    y.prototype.containedInRect = y.prototype.Kn = function (a, b) {
        if (void 0 === b)return a.Ok(this.$);
        var c = this.ab;
        null === c && (Gk(this, Infinity, Infinity), c = this.ab);
        var c = c.pb, d = this.lb / 2, e = !1, g = D.P();
        g.n(c.x - d, c.y - d);
        a.Pa(b.wb(g)) && (g.n(c.x - d, c.bottom + d), a.Pa(b.wb(g)) && (g.n(c.right + d, c.bottom + d), a.Pa(b.wb(g)) && (g.n(c.right + d, c.y - d), a.Pa(b.wb(g)) && (e = !0))));
        D.A(g);
        return e
    };
    y.prototype.intersectsRect = y.prototype.hg = function (a, b) {
        if (this.Kn(a, b) || void 0 === b && (b = this.transform, a.Ok(this.$)))return !0;
        var c = D.Sf();
        c.set(b);
        c.Ux();
        var d = a.left, e = a.right, g = a.top, h = a.bottom, k = D.P();
        k.n(d, g);
        c.wb(k);
        if (this.Nk(k, !0))return D.A(k), !0;
        k.n(e, g);
        c.wb(k);
        if (this.Nk(k, !0))return D.A(k), !0;
        k.n(d, h);
        c.wb(k);
        if (this.Nk(k, !0))return D.A(k), !0;
        k.n(e, h);
        c.wb(k);
        if (this.Nk(k, !0))return D.A(k), !0;
        var l = D.P(), m = D.P();
        c.set(b);
        c.sB(this.transform);
        c.Ux();
        l.x = e;
        l.y = g;
        l.transform(c);
        k.x = d;
        k.y =
            g;
        k.transform(c);
        var n = !1;
        tq(this, k, l, m) ? n = !0 : (k.x = e, k.y = h, k.transform(c), tq(this, k, l, m) ? n = !0 : (l.x = d, l.y = h, l.transform(c), tq(this, k, l, m) ? n = !0 : (k.x = d, k.y = g, k.transform(c), tq(this, k, l, m) && (n = !0))));
        D.A(k);
        D.Je(c);
        D.A(l);
        D.A(m);
        return n
    };
    function tq(a, b, c, d) {
        if (!a.DF(b, c, d))return !1;
        a = b.x;
        b = b.y;
        var e = c.x;
        c = c.y;
        var g = d.x;
        d = d.y;
        if (a === e) {
            var h = 0;
            a = 0;
            b < c ? (h = b, a = c) : (h = c, a = b);
            return d >= h && d <= a
        }
        a < e ? (h = a, a = e) : h = e;
        return g >= h && g <= a
    }

    y.prototype.wF = function (a, b, c) {
        function d(a, b) {
            for (var c = a.length, d = 0; d < c; d += 2)if (b.jq(a[d], a[d + 1]) > e)return !0;
            return !1
        }

        if (c && null !== this.fill && this.Nk(a, !0))return !0;
        var e = a.Ff(b);
        b = e;
        1.5 < this.lb && (e = this.lb / 2 + Math.sqrt(e), e *= e);
        var g = this.ab;
        if (null === g && (Gk(this, Infinity, Infinity), g = this.ab, null === g))return !1;
        if (!c) {
            var h = g.pb, k = h.x, l = h.y, m = h.x + h.width, h = h.y + h.height;
            if (jb(a.x, a.y, k, l) <= e && jb(a.x, a.y, m, l) <= e && jb(a.x, a.y, k, h) <= e && jb(a.x, a.y, m, h) <= e)return !0
        }
        k = g.yc;
        l = g.Ic;
        m = g.Bb;
        h = g.Ib;
        if (g.type ===
            tf) {
            if (c = hb(a.x, a.y, k, l, m, h), g = (k - m) * (a.x - m) + (l - h) * (a.y - h), c <= (0 <= (m - k) * (a.x - k) + (h - l) * (a.y - l) && 0 <= g ? e : b))return !0
        } else {
            if (g.type === uf)return b = !1, c && (b = hb(a.x, a.y, k, l, k, h) <= e || hb(a.x, a.y, k, l, m, l) <= e || hb(a.x, a.y, m, l, m, h) <= e || hb(a.x, a.y, k, h, m, h) <= e), b;
            if (g.type === vf) {
                b = a.x - (k + m) / 2;
                var g = a.y - (l + h) / 2, n = Math.abs(m - k) / 2, p = Math.abs(h - l) / 2;
                if (0 === n || 0 === p)return c = hb(a.x, a.y, k, l, m, h), c <= e ? !0 : !1;
                if (c) {
                    if (a = Ye(n, p, b, g), a * a <= e)return !0
                } else return jb(b, g, -n, 0) >= e || jb(b, g, 0, -p) >= e || jb(b, g, 0, p) >= e || jb(b, g, n, 0) >=
                e ? !1 : !0
            } else if (g.type === $e) {
                h = g.pb;
                k = h.x;
                l = h.y;
                m = h.x + h.width;
                h = h.y + h.height;
                if (a.x > m && a.x < k && a.y > h && a.y < l && hb(a.x, a.y, k, l, k, h) > e && hb(a.x, a.y, k, l, m, l) > e && hb(a.x, a.y, m, h, k, h) > e && hb(a.x, a.y, m, h, m, l) > e)return !1;
                b = Math.sqrt(e);
                if (c) {
                    if (null === this.fill ? Xf(g, a.x, a.y, b) : g.Pa(a, b, !0))return !0
                } else {
                    c = g.nc;
                    for (b = 0; b < c.count; b++) {
                        k = c.o[b];
                        n = k.la;
                        p = k.ja;
                        if (a.jq(n, p) > e)return !1;
                        l = k.Db.o;
                        m = l.length;
                        for (h = 0; h < m; h++) {
                            var q = l[h];
                            switch (q.type) {
                                case Ff:
                                case xf:
                                    n = q.G;
                                    p = q.H;
                                    if (a.jq(n, p) > e)return !1;
                                    break;
                                case Gf:
                                    g = D.mb();
                                    Ce(n, p, q.Cc, q.Zc, q.Uh, q.Vh, q.G, q.H, .8, g);
                                    n = d(g, a);
                                    D.za(g);
                                    if (n)return !1;
                                    n = q.G;
                                    p = q.H;
                                    if (a.jq(n, p) > e)return !1;
                                    break;
                                case Rf:
                                    g = D.mb();
                                    Ge(n, p, q.Cc, q.Zc, q.G, q.H, .8, g);
                                    n = d(g, a);
                                    D.za(g);
                                    if (n)return !1;
                                    n = q.G;
                                    p = q.H;
                                    if (a.jq(n, p) > e)return !1;
                                    break;
                                case Sf:
                                case Tf:
                                    var r = q.type === Sf ? Uf(q, k) : Vf(q, k, n, p), s = r.length;
                                    if (0 === s) {
                                        n = q.oa;
                                        p = q.va;
                                        if (a.jq(n, p) > e)return !1;
                                        break
                                    }
                                    q = null;
                                    g = D.mb();
                                    for (b = 0; b < s; b++)if (q = r[b], g.length = 0, Ce(q[0], q[1], q[2], q[3], q[4], q[5], q[6], q[7], .8, g), d(g, a))return D.za(g), !1;
                                    D.za(g);
                                    null !== q && (n =
                                        q[6], p = q[7]);
                                    break;
                                default:
                                    D.k("Unknown Segment type: " + q.type)
                            }
                        }
                    }
                    return !0
                }
            }
        }
        return !1
    };
    D.defineProperty(y, {sf: "geometry"}, function () {
        return null !== this.ab ? this.ab : this.bg
    }, function (a) {
        var b = this.ab;
        if (b !== a) {
            null !== a ? (v && D.l(a, Ze, y, "geometry"), this.bg = this.ab = a.freeze()) : this.bg = this.ab = null;
            var c = this.Z;
            null !== c && (c.uk = NaN);
            this.K();
            this.i("geometry", b, a);
            Ho(this) && (a = this.Z, null !== a && Io(this, a, "geometryString"))
        }
    });
    D.defineProperty(y, {OI: "geometryString"}, function () {
        return null === this.sf ? "" : this.sf.toString()
    }, function (a) {
        a = zf(a);
        var b = a.normalize();
        this.sf = a;
        this.position = a = D.Fb(-b.x, -b.y);
        D.A(a)
    });
    D.defineProperty(y, {VF: "isGeometryPositioned"}, function () {
        return this.fs
    }, function (a) {
        v && D.h(a, "boolean", y, "isGeometryPositioned");
        var b = this.fs;
        b !== a && (this.fs = a, this.K(), this.i("isGeometryPositioned", b, a))
    });
    y.prototype.Se = function () {
        this.ab = null
    };
    D.defineProperty(y, {fill: "fill"}, function () {
        return this.Qd
    }, function (a) {
        var b = this.Qd;
        b !== a && (v && null !== a && D.Zt(a, "Shape.fill"), a instanceof Aa && a.freeze(), this.Qd = a, this.qa(), this.i("fill", b, a))
    });
    D.defineProperty(y, {stroke: "stroke"}, function () {
        return this.zc
    }, function (a) {
        var b = this.zc;
        b !== a && (v && null !== a && D.Zt(a, "Shape.stroke"), a instanceof Aa && a.freeze(), this.zc = a, this.qa(), this.i("stroke", b, a))
    });
    D.defineProperty(y, {lb: "strokeWidth"}, function () {
        return this.Sg
    }, function (a) {
        var b = this.Sg;
        if (b !== a)if (v && D.p(a, y, "strokeWidth"), 0 <= a) {
            this.Sg = a;
            this.K();
            var c = this.Z;
            null !== c && (c.uk = NaN);
            this.i("strokeWidth", b, a)
        } else D.ua(a, "value >= 0", y, "strokeWidth:value")
    });
    D.defineProperty(y, {EM: "strokeCap"}, function () {
        return this.Pp
    }, function (a) {
        var b = this.Pp;
        b !== a && ("string" !== typeof a || "butt" !== a && "round" !== a && "square" !== a ? D.ua(a, '"butt", "round", or "square"', y, "strokeCap") : (this.Pp = a, this.qa(), this.i("strokeCap", b, a)))
    });
    D.defineProperty(y, {GM: "strokeJoin"}, function () {
        return this.Rp
    }, function (a) {
        var b = this.Rp;
        b !== a && ("string" !== typeof a || "miter" !== a && "bevel" !== a && "round" !== a ? D.ua(a, '"miter", "bevel", or "round"', y, "strokeJoin") : (this.Rp = a, this.qa(), this.i("strokeJoin", b, a)))
    });
    D.defineProperty(y, {HM: "strokeMiterLimit"}, function () {
        return this.wn
    }, function (a) {
        var b = this.wn;
        if (b !== a)if (v && D.p(a, y, "strokeMiterLimit"), 1 <= a) {
            this.wn = a;
            this.qa();
            var c = this.Z;
            null !== c && (c.uk = NaN);
            this.i("strokeMiterLimit", b, a)
        } else D.ua(a, "value >= 1", y, "strokeWidth:value")
    });
    D.defineProperty(y, {cH: "strokeDashArray"}, function () {
        return this.Qp
    }, function (a) {
        var b = this.Qp;
        if (b !== a) {
            null === a || Array.isArray(a) || D.jc(a, "Array", y, "strokeDashArray:value");
            if (null !== a) {
                for (var c = a.length, d = 0, e = 0; e < c; e++) {
                    var g = a[e];
                    "number" === typeof g && 0 <= g && isFinite(g) || D.k("strokeDashArray:value " + g + " at index " + e + " must be a positive number or zero.");
                    d += g
                }
                if (0 === d) {
                    if (null === b)return;
                    a = null
                }
            }
            this.Qp = a;
            this.qa();
            this.i("strokeDashArray", b, a)
        }
    });
    D.defineProperty(y, {FM: "strokeDashOffset"}, function () {
        return this.Cf
    }, function (a) {
        var b = this.Cf;
        b !== a && (v && D.p(a, y, "strokeDashOffset"), 0 <= a && (this.Cf = a, this.qa(), this.i("strokeDashOffset", b, a)))
    });
    D.defineProperty(y, {Jb: "figure"}, function () {
        return this.ap
    }, function (a) {
        var b = this.ap;
        if (b !== a) {
            v && D.h(a, "string", y, "figure");
            var c = qq[a];
            "function" === typeof c ? c = a : (c = qq[a.toLowerCase()]) || D.k("Unknown Shape.figure: " + a);
            b !== c && (a = this.Z, null !== a && (a.uk = NaN), this.ap = c, this.bg = null, this.Se(), this.K(), this.i("figure", b, c))
        }
    });
    D.defineProperty(y, {Vq: "toArrow"}, function () {
        return this.Vp
    }, function (a) {
        var b = this.Vp;
        !0 === a ? a = "Standard" : !1 === a && (a = "");
        if (b !== a) {
            v && D.h(a, "string", y, "toArrow");
            var c = uq(a);
            null === c ? D.k("Unknown Shape.toArrow: " + a) : b !== c && (this.Vp = c, this.bg = null, this.Se(), this.K(), vq(this), this.i("toArrow", b, c))
        }
    });
    D.defineProperty(y, {QA: "fromArrow"}, function () {
        return this.dp
    }, function (a) {
        var b = this.dp;
        !0 === a ? a = "Standard" : !1 === a && (a = "");
        if (b !== a) {
            v && D.h(a, "string", y, "fromArrow");
            var c = uq(a);
            null === c ? D.k("Unknown Shape.fromArrow: " + a) : b !== c && (this.dp = c, this.bg = null, this.Se(), this.K(), vq(this), this.i("fromArrow", b, c))
        }
    });
    function vq(a) {
        var b = a.g;
        null !== b && b.ra.jb || (a.Nq = wq, "None" !== a.Vp ? (a.Ue = -1, a.Ih = id) : "None" !== a.dp && (a.Ue = 0, a.Ih = new Q(1 - id.x, id.y)))
    }

    D.defineProperty(y, {C: "spot1"}, function () {
        return this.xi
    }, function (a) {
        D.l(a, Q, y, "spot1");
        var b = this.xi;
        b.O(a) || (this.xi = a = a.V(), this.K(), this.i("spot1", b, a))
    });
    D.defineProperty(y, {D: "spot2"}, function () {
        return this.yi
    }, function (a) {
        D.l(a, Q, y, "spot2");
        var b = this.yi;
        b.O(a) || (this.yi = a = a.V(), this.K(), this.i("spot2", b, a))
    });
    D.defineProperty(y, {Qc: "parameter1"}, function () {
        return this.Us
    }, function (a) {
        var b = this.Us;
        b !== a && (this.Us = a, this.Se(), this.K(), this.i("parameter1", b, a))
    });
    D.defineProperty(y, {Tu: "parameter2"}, function () {
        return this.Vs
    }, function (a) {
        var b = this.Vs;
        b !== a && (this.Vs = a, this.Se(), this.K(), this.i("parameter2", b, a))
    });
    D.w(y, {Ga: "naturalBounds"}, function () {
        if (null !== this.ab)return this.cd.assign(this.ab.pb), this.cd;
        var a = this.Ea;
        return new C(0, 0, a.width, a.height)
    });
    D.defineProperty(y, {ty: "pathPattern"}, function () {
        return this.Xs
    }, function (a) {
        var b = this.Xs;
        b !== a && (v && D.l(a, P, y, "pathPattern"), this.Xs = a, this.qa(), this.i("pathPattern", b, a))
    });
    D.defineProperty(y, {tM: "pathObject"}, function () {
        return this.ty
    }, function (a) {
        this.ty = a
    });
    D.defineProperty(y, {SA: "geometryStretch"}, function () {
        return this.Xr
    }, function (a) {
        var b = this.Xr;
        b !== a && (D.Da(a, P, y, "geometryStretch"), this.Xr = a, this.i("geometryStretch", b, a))
    });
    D.defineProperty(y, {interval: "interval"}, function () {
        return this.Gg
    }, function (a) {
        var b = this.Gg;
        v && D.p(a, y, "interval");
        a = Math.floor(a);
        if (b !== a && 0 <= a) {
            this.Gg = a;
            var c = this.g;
            null !== c && this.Q === c.Xn && jm(c);
            this.K();
            c = this.Q;
            null !== c && c.type === pp && (c.lk = null);
            this.i("interval", b, a)
        }
    });
    D.defineProperty(y, {HF: "graduatedStart"}, function () {
        return this.Fg
    }, function (a) {
        var b = this.Fg;
        v && D.p(a, y, "graduatedStart");
        b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.Fg = a, this.K(), this.i("graduatedStart", b, a))
    });
    D.defineProperty(y, {FF: "graduatedEnd"}, function () {
        return this.Eg
    }, function (a) {
        var b = this.Eg;
        v && D.p(a, y, "graduatedEnd");
        b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.Eg = a, this.K(), this.i("graduatedEnd", b, a))
    });
    y.makeGeometry = function (a, b, c) {
        var d = null;
        if ("None" !== a.Vq)d = pe[a.Vq]; else if ("None" !== a.QA)d = pe[a.QA]; else {
            var e = qq[a.Jb];
            "string" === typeof e && (e = qq[e]);
            void 0 === e && D.k("Unknown Shape.figure: " + a.Jb);
            d = e(a, b, c);
            d.mp = b;
            d.kp = c
        }
        null === d && (e = qq.Rectangle, "function" === typeof e && (d = e(a, b, c)));
        return d
    };
    y.getFigureGenerators = function () {
        var a = new ma("string", "function"), b;
        for (b in qq)if (b !== b.toLowerCase()) {
            var c = qq[b];
            "function" === typeof c && a.add(b, c)
        }
        a.freeze();
        return a
    };
    y.defineFigureGenerator = function (a, b) {
        D.h(a, "string", y, "defineFigureGenerator:name");
        "string" === typeof b ? "" !== b && qq[b] || D.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: " + b) : D.h(b, "function", y, "defineFigureGenerator:func");
        var c = a.toLowerCase();
        "" !== a && "none" !== c && a !== c || D.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: " + a);
        qq[a] = b;
        qq[c] = a
    };
    y.getArrowheadGeometries = function () {
        var a = new ma("string", Ze), b;
        for (b in xq)if (void 0 === pe[b]) {
            var c = zf(xq[b], !1);
            pe[b] = c;
            c = b.toLowerCase();
            c !== b && (pe[c] = b)
        }
        for (b in pe)b !== b.toLowerCase() && (c = pe[b], c instanceof Ze && a.add(b, c));
        a.freeze();
        return a
    };
    y.defineArrowheadGeometry = function (a, b) {
        D.h(a, "string", y, "defineArrowheadGeometry:name");
        var c = null;
        "string" === typeof b ? (D.h(b, "string", y, "defineArrowheadGeometry:pathstr"), c = zf(b, !1)) : (D.l(b, Ze, y, "defineArrowheadGeometry:pathstr"), c = b);
        var d = a.toLowerCase();
        "" !== a && "none" !== d && a !== d || D.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: " + a);
        pe[a] = c;
        pe[d] = a
    };
    function na() {
        P.call(this);
        this.Ud = "";
        this.zc = "black";
        this.Cg = "13px sans-serif";
        this.Tl = "start";
        this.Bg = Yj;
        this.Xl = Zc;
        this.Wm = !0;
        this.qk = this.rk = !1;
        this.nj = yq;
        this.Jk = zq;
        this.sw = this.we = 0;
        this.Tz = this.Uz = null;
        this.pf = new bq;
        this.Qr = !1;
        this.af = this.or = this.Gt = this.Ul = this.Ht = null;
        this.wi = this.vi = 0;
        this.xh = Infinity;
        this.tp = 0;
        this.Gg = 1;
        this.Fg = 0;
        this.Eg = 1;
        this.Rm = null
    }

    D.Ra(na, P);
    D.ka("TextBlock", na);
    var Aq = /[ \u200b\u00ad]/;
    na.prototype.cloneProtected = function (a) {
        P.prototype.cloneProtected.call(this, a);
        a.Ud = this.Ud;
        a.zc = this.zc;
        a.Cg = this.Cg;
        a.Tl = this.Tl;
        a.Bg = this.Bg;
        a.Xl = this.Xl;
        a.Wm = this.Wm;
        a.rk = this.rk;
        a.qk = this.qk;
        a.nj = this.nj;
        a.Jk = this.Jk;
        a.we = this.we;
        a.sw = this.sw;
        a.Uz = this.Uz;
        a.Tz = this.Tz;
        a.pf.dq(this.pf);
        a.Qr = this.Qr;
        a.Ht = this.Ht;
        a.Ul = this.Ul;
        a.Gt = this.Gt;
        a.or = this.or;
        a.af = this.af;
        a.vi = this.vi;
        a.wi = this.wi;
        a.xh = this.xh;
        a.tp = this.tp;
        a.Gg = this.Gg;
        a.Fg = this.Fg;
        a.Eg = this.Eg;
        a.Rm = this.Rm
    };
    na.prototype.qc = function (a) {
        a.Oe === na ? this.rH = a : P.prototype.qc.call(this, a)
    };
    na.prototype.toString = function () {
        return 22 < this.Ud.length ? 'TextBlock("' + this.Ud.substring(0, 20) + '"...)' : 'TextBlock("' + this.Ud + '")'
    };
    var Bq = new ka, Cq = 0, Dq = new ka, Eq = 0, Fq = "...", Gq = "", Hq = (new ja(null)).Pk;
    na.getEllipsis = function () {
        return Fq
    };
    na.setEllipsis = function (a) {
        Fq = a;
        Dq = new ka;
        Eq = 0
    };
    var Iq;
    na.None = Iq = D.s(na, "None", 0);
    var Jq;
    na.WrapFit = Jq = D.s(na, "WrapFit", 1);
    var zq;
    na.WrapDesiredSize = zq = D.s(na, "WrapDesiredSize", 2);
    var yq;
    na.OverflowClip = yq = D.s(na, "OverflowClip", 0);
    var Kq;
    na.OverflowEllipsis = Kq = D.s(na, "OverflowEllipsis", 1);
    na.prototype.K = function () {
        P.prototype.K.call(this);
        this.Tz = this.Uz = null
    };
    D.defineProperty(na, {font: "font"}, function () {
        return this.Cg
    }, function (a) {
        var b = this.Cg;
        b !== a && (v && (D.h(a, "string", na, "font"), Lq(a) || D.k('Not a valid font: "' + a + '"')), this.Cg = a, this.pf.gk = null, this.K(), this.i("font", b, a))
    });
    var Lq;
    na.isValidFont = Lq = function (a) {
        var b = Hq.font;
        if (a === b || "10px sans-serif" === a)return !0;
        Hq.font = "10px sans-serif";
        var c;
        Hq.font = a;
        var d = Hq.font;
        if ("10px sans-serif" !== d)return Hq.font = b, !0;
        Hq.font = "19px serif";
        c = Hq.font;
        Hq.font = a;
        d = Hq.font;
        Hq.font = b;
        return d !== c
    };
    D.defineProperty(na, {text: "text"}, function () {
        return this.Ud
    }, function (a) {
        var b = this.Ud;
        a = null !== a && void 0 !== a ? a.toString() : "";
        b !== a && (this.Ud = a, this.K(), this.i("text", b, a))
    });
    D.defineProperty(na, {textAlign: "textAlign"}, function () {
        return this.Tl
    }, function (a) {
        var b = this.Tl;
        b !== a && (v && D.h(a, "string", na, "textAlign"), "start" === a || "end" === a || "left" === a || "right" === a || "center" === a ? (this.Tl = a, this.qa(), this.i("textAlign", b, a)) : D.ua(a, '"start", "end", "left", "right", or "center"', na, "textAlign"))
    });
    D.defineProperty(na, {nu: "flip"}, function () {
        return this.Bg
    }, function (a) {
        var b = this.Bg;
        b !== a && (D.Da(a, P, na, "flip"), this.Bg = a, this.qa(), this.i("flip", b, a))
    });
    D.defineProperty(na, {MM: "verticalAlignment"}, function () {
        return this.Xl
    }, function (a) {
        var b = this.Xl;
        b.O(a) || (v && D.l(a, Q, na, "verticalAlignment"), a.be() && D.k("TextBlock.verticalAlignment for " + this + " must be a real Spot, not:" + a), this.Xl = a = a.V(), Zo(this), this.i("verticalAlignment", b, a))
    });
    D.w(na, {Ga: "naturalBounds"}, function () {
        if (!this.cd.F()) {
            var a = Mq(this, this.Ud, this.pf, 999999).width, b = Nq(this, a, this.pf), c = this.Ea;
            isNaN(c.width) || (a = c.width);
            isNaN(c.height) || (b = c.height);
            xb(this.cd, a, b)
        }
        return this.cd
    });
    D.defineProperty(na, {ay: "isMultiline"}, function () {
        return this.Wm
    }, function (a) {
        var b = this.Wm;
        b !== a && (v && D.h(a, "boolean", na, "isMultiline"), this.Wm = a, this.K(), this.i("isMultiline", b, a))
    });
    D.defineProperty(na, {SL: "isUnderline"}, function () {
        return this.rk
    }, function (a) {
        var b = this.rk;
        b !== a && (v && D.h(a, "boolean", na, "isUnderline"), this.rk = a, this.qa(), this.i("isUnderline", b, a))
    });
    D.defineProperty(na, {RL: "isStrikethrough"}, function () {
        return this.qk
    }, function (a) {
        var b = this.qk;
        b !== a && (v && D.h(a, "boolean", na, "isStrikethrough"), this.qk = a, this.qa(), this.i("isStrikethrough", b, a))
    });
    D.defineProperty(na, {rH: "wrap"}, function () {
        return this.Jk
    }, function (a) {
        var b = this.Jk;
        b !== a && (v && D.Da(a, na, na, "wrap"), this.Jk = a, this.K(), this.i("wrap", b, a))
    });
    D.defineProperty(na, {overflow: "overflow"}, function () {
        return this.nj
    }, function (a) {
        var b = this.nj;
        b !== a && (v && D.Da(a, na, na, "overflow"), this.nj = a, this.K(), this.i("overflow", b, a))
    });
    D.defineProperty(na, {stroke: "stroke"}, function () {
        return this.zc
    }, function (a) {
        var b = this.zc;
        b !== a && (v && null !== a && D.Zt(a, "TextBlock.stroke"), a instanceof Aa && a.freeze(), this.zc = a, this.qa(), this.i("stroke", b, a))
    });
    D.w(na, {zJ: "lineCount"}, function () {
        return this.we
    });
    D.defineProperty(na, {MA: "editable"}, function () {
        return this.Qr
    }, function (a) {
        var b = this.Qr;
        b !== a && (v && D.h(a, "boolean", na, "editable"), this.Qr = a, this.i("editable", b, a))
    });
    D.defineProperty(na, {fH: "textEditor"}, function () {
        return this.Ht
    }, function (a) {
        var b = this.Ht;
        b !== a && (!v || a instanceof HTMLElement || a instanceof gk || D.k("TextEditingTool.defaultTextEditor must be an HTMLElement or HTMLInfo."), this.Ht = a, this.i("textEditor", b, a))
    });
    D.defineProperty(na, {OA: "errorFunction"}, function () {
        return this.af
    }, function (a) {
        var b = this.af;
        b !== a && (null !== a && D.h(a, "function", na, "errorFunction"), this.af = a, this.i("errorFunction", b, a))
    });
    D.defineProperty(na, {interval: "interval"}, function () {
        return this.Gg
    }, function (a) {
        var b = this.Gg;
        v && D.p(a, na, "interval");
        a = Math.floor(a);
        if (b !== a && 0 <= a) {
            this.Gg = a;
            this.K();
            var c = this.Q;
            null !== c && c.type === pp && (c.lk = null);
            this.i("interval", b, a)
        }
    });
    D.defineProperty(na, {HF: "graduatedStart"}, function () {
        return this.Fg
    }, function (a) {
        var b = this.Fg;
        v && D.p(a, na, "graduatedStart");
        b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.Fg = a, this.K(), this.i("graduatedStart", b, a))
    });
    D.defineProperty(na, {FF: "graduatedEnd"}, function () {
        return this.Eg
    }, function (a) {
        var b = this.Eg;
        v && D.p(a, na, "graduatedEnd");
        b !== a && (0 > a ? a = 0 : 1 < a && (a = 1), this.Eg = a, this.K(), this.i("graduatedEnd", b, a))
    });
    D.defineProperty(na, {GF: "graduatedFunction"}, function () {
        return this.Rm
    }, function (a) {
        var b = this.Rm;
        b !== a && (null !== a && D.h(a, "function", na, "graduatedFunction"), this.Rm = a, this.K(), this.i("graduatedFunction", b, a))
    });
    na.prototype.Qk = function (a, b) {
        if (null !== this.zc && 0 !== this.Ud.length && null !== this.Cg) {
            var c = this.Ga.width, d = this.Ga.height, e = Oq(this), g = a.textAlign = this.Tl, h = b.js;
            "start" === g && (g = h ? "right" : "left");
            "end" === g && (g = h ? "left" : "right");
            Vo(this, a, this.zc, !0, !1);
            (this.rk || this.qk) && Vo(this, a, this.zc, !1, !1);
            var k = 0, h = !1, l = D.Fb(0, 0);
            this.Jh.wb(l);
            var m = D.Fb(0, e);
            this.Jh.wb(m);
            var n = l.Ff(m);
            D.A(l);
            D.A(m);
            l = b.scale;
            8 > n * l * l && (h = !0);
            b.pd !== a && (h = !1);
            !1 === b.Hj("textGreeking") && (h = !1);
            n = this.vi;
            l = this.wi;
            switch (this.nu) {
                case Ao:
                    a.translate(c,
                        0);
                    a.scale(-1, 1);
                    break;
                case zo:
                    a.translate(0, d);
                    a.scale(1, -1);
                    break;
                case Bo:
                    a.translate(c, d), a.scale(-1, -1)
            }
            var m = this.we, p = (n + e + l) * m;
            d > p && (k = this.Xl, k = k.y * d - k.y * p + k.offsetY);
            for (var p = this.pf, q = 0; q < m; q++) {
                var r = p.Af[q], s = p.Ye[q];
                r > c && (r = c);
                var k = k + n, u = s, s = a, t = k, z = c, w = e, B = g, A = 0;
                h ? ("left" === B ? A = 0 : "right" === B ? A = z - r : "center" === B && (A = (z - r) / 2), s.fillRect(0 + A, t + .25 * w, r, 1)) : ("left" === B ? A = 0 : "right" === B ? A = z : "center" === B && (A = z / 2), s.fillText(u, 0 + A, t + w - .25 * w), u = w / 20 | 0, 0 === u && (u = 1), "right" === B ? A -= r : "center" ===
                B && (A -= r / 2), this.rk && (s.beginPath(), s.lineWidth = u, s.moveTo(0 + A, t + w - .2 * w), s.lineTo(0 + A + r, t + w - .2 * w), s.stroke()), this.qk && (s.beginPath(), s.lineWidth = u, t = t + w - w / 2.2 | 0, 0 !== u % 2 && (t += .5), s.moveTo(0 + A, t), s.lineTo(0 + A + r, t), s.stroke()));
                k += e + l
            }
            switch (this.nu) {
                case Ao:
                    a.scale(-1, 1);
                    a.translate(-c, 0);
                    break;
                case zo:
                    a.scale(1, -1);
                    a.translate(0, -d);
                    break;
                case Bo:
                    a.scale(-1, -1), a.translate(-c, -d)
            }
        }
    };
    na.prototype.jo = function (a, b, c, d) {
        this.tp = a;
        var e = this.pf;
        e.reset();
        var g = 0, h = 0;
        if (isNaN(this.Ea.width)) {
            g = this.Ud.replace(/\r\n/g, "\n").replace(/\r/g, "\n");
            if (0 === g.length)g = 0; else if (this.ay) {
                for (var k = h = 0, l = !1; !l;) {
                    var m = g.indexOf("\n", k);
                    -1 === m && (m = g.length, l = !0);
                    k = Pq(g.substr(k, m - k).replace(/^\s+|\s+$/g, ""), this.Cg);
                    k > h && (h = k);
                    k = m + 1
                }
                g = h
            } else h = g.indexOf("\n", 0), 0 <= h && (g = g.substr(0, h)), g = k = Pq(g, this.Cg);
            g = Math.min(g, a / this.scale);
            g = Math.max(8, g)
        } else g = this.Ea.width;
        null !== this.Q && (g = Math.min(g,
            this.Q.mf.width), g = Math.max(g, this.Q.kg.width));
        h = Nq(this, g, e);
        m = h = isNaN(this.Ea.height) ? Math.min(h, b / this.scale) : this.Ea.height;
        if (0 !== e.df && 1 !== e.Ye.length && this.nj === Kq && (b = this.Cg, l = this.nj === Kq ? Qq(b) : 0, k = this.vi + this.wi, k = Math.max(0, Oq(this) + k), m = Math.min(this.HJ - 1, Math.max(Math.floor(m / k + .01) - 1, 0)), !(m + 1 >= e.Ye.length))) {
            k = e.Ye[m];
            for (a = Math.max(1, a - l); Pq(k, b) > a && 1 < k.length;)k = k.substr(0, k.length - 1);
            k += Fq;
            a = Pq(k, b);
            e.Ye[m] = k;
            e.Ye = e.Ye.slice(0, m + 1);
            e.Af[m] = a;
            e.Af = e.Af.slice(0, m + 1);
            e.xj = e.Ye.length;
            e.df = Math.max(e.df, a);
            this.we = e.xj
        }
        if (this.rH === Jq || isNaN(this.Ea.width))g = e.df, isNaN(this.Ea.width) && (g = Math.max(8, g));
        g = Math.max(c, g);
        h = Math.max(d, h);
        xb(this.cd, g, h);
        Jo(this, 0, 0, g, h)
    };
    na.prototype.zj = function (a, b, c, d) {
        Oo(this, a, b, c, d)
    };
    function Mq(a, b, c, d) {
        b = b.replace(/^\s+|\s+$/g, "");
        var e = 0, g = 0, h = 0, k = a.Cg, g = a.vi + a.wi, l = Math.max(0, Oq(a) + g), h = a.nj === Kq ? Qq(k) : 0;
        if (a.we >= a.xh)return new Ba(0, l);
        if (a.Jk === Iq) {
            c.xj = 1;
            g = Pq(b, k);
            if (0 === h || g <= d)return c.df = Math.max(c.df, g), c.Af.push(c.df), c.Ye.push(b), new Ba(g, l);
            var m = Rq(b);
            b = b.substr(m.length);
            for (var n = Rq(b), g = Pq(m + n, k); 0 < n.length && g <= d;)m += n, b = b.substr(n.length), n = Rq(b), g = Pq((m + n).replace(/^\s+|\s+$/g, ""), k);
            m += n.replace(/^\s+|\s+$/g, "");
            for (d = Math.max(1, d - h); Pq(m, k) > d && 1 < m.length;)m =
                m.substr(0, m.length - 1);
            m += Fq;
            h = Pq(m, k);
            c.Af.push(h);
            c.df = h;
            c.Ye.push(m);
            return new Ba(h, l)
        }
        var p = 0;
        0 === b.length && (p = 1, c.Af.push(0), c.Ye.push(b));
        for (; 0 < b.length;) {
            m = Rq(b);
            for (b = b.substr(m.length); Pq(m, k) > d;) {
                n = 1;
                g = Pq(m.substr(0, n), k);
                for (h = 0; g <= d;)n++, h = g, g = Pq(m.substr(0, n), k);
                1 === n ? (c.Af[a.we + p] = g, e = Math.max(e, g)) : (c.Af[a.we + p] = h, e = Math.max(e, h));
                n--;
                1 > n && (n = 1);
                c.Ye[a.we + p] = m.substr(0, n);
                p++;
                m = m.substr(n);
                if (a.we + p > a.xh)break
            }
            n = Rq(b);
            for (g = Pq(m + n, k); 0 < n.length && g <= d;)m += n, b = b.substr(n.length), n =
                Rq(b), g = Pq((m + n).replace(/^\s+|\s+$/g, ""), k);
            m = m.replace(/^\s+|\s+$/g, "");
            if ("" !== m && ("\u00ad" === m[m.length - 1] && (m = m.substring(0, m.length - 1) + "\u2010"), 0 === n.length ? (c.Af.push(g), e = Math.max(e, g)) : (h = Pq(m, k), c.Af.push(h), e = Math.max(e, h)), c.Ye.push(m), p++, a.we + p > a.xh))break
        }
        c.xj = Math.min(a.xh, p);
        c.df = Math.max(c.df, e);
        return new Ba(c.df, l * c.xj)
    }

    function Rq(a) {
        for (var b = a.length, c = 0; c < b && !Aq.test(a.charAt(c));)c++;
        for (; c < b && Aq.test(a.charAt(c));)c++;
        return c >= b ? a : a.substr(0, c)
    }

    function Pq(a, b) {
        Gq !== b && (Gq = Hq.font = b);
        return Hq.measureText(a).width
    }

    function Oq(a) {
        if (null !== a.pf.gk)return a.pf.gk;
        var b = a.Cg;
        Gq !== b && (Gq = Hq.font = b);
        var c = 0;
        void 0 !== Bq[b] && 5E3 > Cq ? c = Bq[b] : (c = 1.3 * Hq.measureText("M").width, Bq[b] = c, Cq++);
        return a.pf.gk = c
    }

    function Qq(a) {
        Gq !== a && (Gq = Hq.font = a);
        var b = 0;
        void 0 !== Dq[a] && 5E3 > Eq ? b = Dq[a] : (b = Hq.measureText(Fq).width, Dq[a] = b, Eq++);
        return b
    }

    function Nq(a, b, c) {
        var d = a.Ud.replace(/\r\n/g, "\n").replace(/\r/g, "\n"), e = a.vi + a.wi, e = Math.max(0, Oq(a) + e);
        if (0 === d.length)return c.df = 0, a.we = 1, e;
        if (!a.ay) {
            var g = d.indexOf("\n", 0);
            0 <= g && (d = d.substr(0, g))
        }
        for (var g = 0, h = a.we = 0, k = -1, l = !1; !l;)k = d.indexOf("\n", h), -1 === k && (k = d.length, l = !0), h <= k && (h = d.substr(h, k - h), a.Jk !== Iq ? (c.xj = 0, h = Mq(a, h, c, b), g += h.height, a.we += c.xj) : (Mq(a, h, c, b), g += e, a.we++), a.we === a.xh && (l = !0)), h = k + 1;
        return a.sw = g
    }

    D.defineProperty(na, {VB: "textValidation"}, function () {
        return this.Ul
    }, function (a) {
        var b = this.Ul;
        b !== a && (null !== a && D.h(a, "function", na, "textValidation"), this.Ul = a, this.i("textValidation", b, a))
    });
    D.defineProperty(na, {eH: "textEdited"}, function () {
        return this.Gt
    }, function (a) {
        var b = this.Gt;
        b !== a && (null !== a && D.h(a, "function", na, "textEdited"), this.Gt = a, this.i("textEdited", b, a))
    });
    D.defineProperty(na, {BM: "spacingAbove"}, function () {
        return this.vi
    }, function (a) {
        var b = this.vi;
        b !== a && (v && D.h(a, "number", na, "spacingAbove"), this.vi = a, this.i("spacingAbove", b, a))
    });
    D.defineProperty(na, {CM: "spacingBelow"}, function () {
        return this.wi
    }, function (a) {
        var b = this.wi;
        b !== a && (v && D.h(a, "number", na, "spacingBelow"), this.wi = a, this.i("spacingBelow", b, a))
    });
    D.defineProperty(na, {HJ: "maxLines"}, function () {
        return this.xh
    }, function (a) {
        var b = this.xh;
        b !== a && (v && D.h(a, "number", na, "maxLines"), a = Math.floor(a), 0 >= a && D.ua(a, "> 0", na, "maxLines"), this.xh = a, this.i("maxLines", b, a), this.K())
    });
    D.w(na, {bM: "metrics"}, function () {
        return this.pf
    });
    D.defineProperty(na, {kL: "choices"}, function () {
        return this.or
    }, function (a) {
        var b = this.or;
        b !== a && (null === a || Array.isArray(a) || D.jc(a, "Array", na, "choices:value"), this.or = a, this.i("choices", b, a))
    });
    function bq() {
        this.df = this.xj = 0;
        this.Af = [];
        this.Ye = [];
        this.gk = null
    }

    bq.prototype.reset = function () {
        this.df = this.xj = 0;
        this.gk = null;
        this.Af = [];
        this.Ye = []
    };
    bq.prototype.dq = function (a) {
        this.xj = a.xj;
        this.gk = a.gk;
        this.df = a.df;
        this.Af = D.fm(a.Af);
        this.Ye = D.fm(a.Ye)
    };
    D.w(bq, {hL: "arrSize"}, function () {
        return this.Af
    });
    D.w(bq, {iL: "arrText"}, function () {
        return this.Ye
    });
    D.w(bq, {aM: "maxLineWidth"}, function () {
        return this.df
    });
    D.w(bq, {KL: "fontHeight"}, function () {
        return this.gk
    });
    function Gl() {
        P.call(this);
        this.$e = null;
        this.zt = "";
        this.Bk = le;
        this.hp = sf;
        this.zi = this.af = null;
        this.gp = kc;
        this.Bg = Yj;
        this.Sp = null;
        this.Oz = !1;
        this.bp = !0;
        this.qw = !1;
        this.Kp = null
    }

    D.Ra(Gl, P);
    D.ka("Picture", Gl);
    Gl.prototype.cloneProtected = function (a) {
        P.prototype.cloneProtected.call(this, a);
        a.element = this.$e;
        a.zt = this.zt;
        a.Bk = this.Bk.V();
        a.hp = this.hp;
        a.Bg = this.Bg;
        a.af = this.af;
        a.zi = this.zi;
        a.gp = this.gp.V();
        a.bp = this.bp;
        a.Kp = this.Kp
    };
    Gl.prototype.qc = function (a) {
        a === Yj || a === ak || a === bk ? this.dJ = a : P.prototype.qc.call(this, a)
    };
    Gl.prototype.toString = function () {
        return "Picture(" + this.source + ")#" + D.Jd(this)
    };
    var Sq = new ka, Tq = 0, Al = [];

    function Uq() {
        var a = Al;
        if (0 === a.length)for (var b = window.document.getElementsByTagName("canvas"), c = b.length, d = 0; d < c; d++) {
            var e = b[d];
            e.parentElement && e.parentElement.ca && a.push(e.parentElement.ca)
        }
        return a
    }

    var Vq;
    Gl.clearCache = Vq = function (a) {
        void 0 === a && (a = "");
        D.h(a, "string", Gl, "clearCache:url");
        "" !== a ? Sq[a] && (delete Sq[a], Tq--) : (Sq = new ka, Tq = 0)
    };
    D.defineProperty(Gl, {element: "element"}, function () {
        return this.$e
    }, function (a) {
        var b = this.$e;
        if (b !== a) {
            null === a || a instanceof HTMLImageElement || a instanceof HTMLVideoElement || a instanceof HTMLCanvasElement || D.k("Picture.element must be an instance of Image, Canvas, or Video, not: " + a);
            this.Oz = a instanceof HTMLCanvasElement;
            this.$e = a;
            if (null !== a)if (a instanceof HTMLCanvasElement || !0 === a.complete)a.fp instanceof Event && null !== this.af && this.af(this, a.fp), !0 === a.gw && null !== this.zi && this.zi(this, a.cA),
                a.gw = !0, this.Ea.F() || (im(this, !1), this.K()); else {
                var c = this;
                a.hD || (a.addEventListener("load", function (b) {
                    Wq(a, b);
                    c.Ea.F() || (im(c, !1), c.K())
                }), a.addEventListener("error", function (b) {
                    Xq(a, b)
                }), a.hD = !0)
            }
            this.i("element", b, a);
            this.qa()
        }
    });
    D.defineProperty(Gl, {source: "source"}, function () {
        return this.zt
    }, function (a) {
        var b = this.zt;
        if (b !== a) {
            D.h(a, "string", Gl, "source");
            this.zt = a;
            var c = Sq, d = this.g;
            if (void 0 !== c[a])var e = c[a].Zp[0].source; else {
                30 < Tq && (Vq(), c = Sq);
                var e = D.createElement("img"), g = this;
                e.addEventListener("load", function (a) {
                    Wq(e, a);
                    g.Ea.F() || (im(g, !1), g.K())
                });
                e.addEventListener("error", function (a) {
                    Xq(e, a)
                });
                e.hD = !0;
                var h = this.Kp;
                null !== h && (e.crossOrigin = h(this));
                e.src = a;
                c[a] = new Yq(e);
                Tq++
            }
            null !== d && wn(d, this);
            this.element = e;
            null !== d && vn(d, this);
            this.K();
            this.qa();
            this.i("source", b, a)
        }
    });
    function Wq(a, b) {
        a.gw = !0;
        a.fp = !1;
        for (var c = null, d = Uq(), e = d.length, g = 0; g < e; g++) {
            var h = d[g], k = h.Ep.na(a.src);
            if (null !== k)for (var l = k.length, m = 0; m < l; m++)c = k[m], h.$z.add(c), h.Te(), null === a.cA && (a.cA = b, null !== c.zi && c.zi(c, b))
        }
    }

    function Xq(a, b) {
        a.fp = b;
        for (var c = null, d = Uq(), e = d.length, g = 0; g < e; g++)if (c = d[g].Ep.na(a.src), null !== c) {
            for (var h = c.length, k = D.mb(), l = 0; l < h; l++)k.push(c[l]);
            for (l = 0; l < h; l++)c = k[l], null !== c.af && c.af(c, b);
            D.za(k)
        }
    }

    D.defineProperty(Gl, {AM: "sourceCrossOrigin"}, function () {
        return this.Kp
    }, function (a) {
        if (this.Kp !== a && (null !== a && D.h(a, "function", Gl, "sourceCrossOrigin"), this.Kp = a, null !== this.element)) {
            var b = this.element.src;
            null === a && "string" === typeof b ? this.element.crossOrigin = null : null !== a && (this.element.crossOrigin = a(this));
            this.element.src = b
        }
    });
    D.defineProperty(Gl, {Vj: "sourceRect"}, function () {
        return this.Bk
    }, function (a) {
        var b = this.Bk;
        b.O(a) || (D.l(a, C, Gl, "sourceRect"), this.Bk = a = a.V(), this.qa(), this.i("sourceRect", b, a))
    });
    D.defineProperty(Gl, {dJ: "imageStretch"}, function () {
        return this.hp
    }, function (a) {
        var b = this.hp;
        b !== a && (D.Da(a, P, Gl, "imageStretch"), this.hp = a, this.qa(), this.i("imageStretch", b, a))
    });
    D.defineProperty(Gl, {nu: "flip"}, function () {
        return this.Bg
    }, function (a) {
        var b = this.Bg;
        b !== a && (D.Da(a, P, Gl, "flip"), this.Bg = a, this.qa(), this.i("flip", b, a))
    });
    D.defineProperty(Gl, {ML: "imageAlignment"}, function () {
        return this.gp
    }, function (a) {
        D.l(a, Q, Gl, "imageAlignment");
        var b = this.gp;
        b.O(a) || (this.gp = a = a.V(), this.K(), this.i("imageAlignment", b, a))
    });
    D.defineProperty(Gl, {OA: "errorFunction"}, function () {
        return this.af
    }, function (a) {
        var b = this.af;
        b !== a && (null !== a && D.h(a, "function", Gl, "errorFunction"), this.af = a, this.i("errorFunction", b, a))
    });
    D.defineProperty(Gl, {KM: "successFunction"}, function () {
        return this.zi
    }, function (a) {
        var b = this.zi;
        b !== a && (null !== a && D.h(a, "function", Gl, "successFunction"), this.zi = a, this.i("successFunction", b, a))
    });
    Gl.prototype.Qk = function (a, b) {
        var c = this.$e;
        if (null !== c) {
            var d = c.src;
            null !== d && "" !== d || D.k('Element has no source ("src") attribute: ' + c);
            if (!(c.fp instanceof Event) && !0 === c.gw) {
                var d = this.Ga, e = 0, g = 0, h = this.Oz, k = h ? +c.width : c.naturalWidth, h = h ? +c.height : c.naturalHeight;
                void 0 === k && c.videoWidth && (k = c.videoWidth);
                void 0 === h && c.videoHeight && (h = c.videoHeight);
                k = k || d.width;
                h = h || d.height;
                if (0 !== k && 0 !== h) {
                    var l = k, m = h;
                    this.Vj.F() && (e = this.Bk.x, g = this.Bk.y, k = this.Bk.width, h = this.Bk.height);
                    var n = k, p = h, q = this.hp,
                        r = this.gp;
                    switch (q) {
                        case Yj:
                            if (this.Vj.F())break;
                            n >= d.width && (e = e + r.offsetX + (n * r.x - d.width * r.x));
                            p >= d.height && (g = g + r.offsetY + (p * r.y - d.height * r.y));
                            k = Math.min(d.width, n);
                            h = Math.min(d.height, p);
                            break;
                        case sf:
                            n = d.width;
                            p = d.height;
                            break;
                        case ak:
                        case bk:
                            var s = 0;
                            q === ak ? (s = Math.min(d.height / p, d.width / n), n *= s, p *= s) : q === bk && (s = Math.max(d.height / p, d.width / n), n *= s, p *= s, n >= d.width && (e = (e + r.offsetX + (n * r.x - d.width * r.x) / n) * k), p >= d.height && (g = (g + r.offsetY + (p * r.y - d.height * r.y) / p) * h), k *= 1 / (n / d.width), h *= 1 / (p / d.height),
                                n = d.width, p = d.height)
                    }
                    var q = this.Gj() * b.scale, u = k * h / (n * q * p * q), s = Sq[this.source], q = null;
                    if (void 0 !== s && 16 < u) {
                        2 > s.Zp.length && (Zq(s, 4, l, m), Zq(s, 16, l, m));
                        for (var l = s.Zp, m = l.length, q = l[0], t = 0; t < m; t++)if (l[t].Fq * l[t].Fq < u)q = l[t]; else break
                    }
                    if (!b.Mr) {
                        if (null === this.Sp)if (null === this.$e)this.Sp = !1; else {
                            l = (new ja(null)).Pk;
                            l.drawImage(this.$e, 0, 0);
                            try {
                                l.getImageData(0, 0, 1, 1).data[3] && (this.Sp = !1), this.Sp = !1
                            } catch (z) {
                                this.Sp = !0
                            }
                        }
                        if (this.Sp)return
                    }
                    l = 0;
                    n < d.width && (l = r.offsetX + (d.width * r.x - n * r.x));
                    m = 0;
                    p < d.height &&
                    (m = r.offsetY + (d.height * r.y - p * r.y));
                    switch (this.nu) {
                        case Ao:
                            a.translate(Math.min(d.width, n), 0);
                            a.scale(-1, 1);
                            break;
                        case zo:
                            a.translate(0, Math.min(d.height, p));
                            a.scale(1, -1);
                            break;
                        case Bo:
                            a.translate(Math.min(d.width, n), Math.min(d.height, p)), a.scale(-1, -1)
                    }
                    if (b.Hj("pictureRatioOptimization") && !b.Pz && void 0 !== s && null !== q && 1 !== q.Fq) {
                        a.save();
                        s = q.Fq;
                        try {
                            a.drawImage(q.source, e / s, g / s, Math.min(q.source.width, k / s), Math.min(q.source.height, h / s), l, m, Math.min(d.width, n), Math.min(d.height, p))
                        } catch (w) {
                            v && this.bp &&
                            D.trace(w.toString()), this.bp = !1
                        }
                        a.restore()
                    } else try {
                        a.drawImage(c, e, g, k, h, l, m, Math.min(d.width, n), Math.min(d.height, p))
                    } catch (B) {
                        v && this.bp && D.trace(B.toString()), this.bp = !1
                    }
                    switch (this.nu) {
                        case Ao:
                            a.scale(-1, 1);
                            a.translate(-Math.min(d.width, n), 0);
                            break;
                        case zo:
                            a.scale(1, -1);
                            a.translate(0, -Math.min(d.height, p));
                            break;
                        case Bo:
                            a.scale(-1, -1), a.translate(-Math.min(d.width, n), -Math.min(d.height, p))
                    }
                }
            }
        }
    };
    D.w(Gl, {Ga: "naturalBounds"}, function () {
        return this.cd
    });
    Gl.prototype.jo = function (a, b, c, d) {
        var e = this.Ea, g = Mo(this, !0), h = this.$e, k = this.Oz;
        if (k || !this.qw && h && h.complete)this.qw = !0;
        null === h && (isFinite(a) || (a = 0), isFinite(b) || (b = 0));
        isFinite(e.width) || g === sf || g === yo ? (isFinite(a) || (a = this.Vj.F() ? this.Vj.width : k ? +h.width : h.naturalWidth), c = 0) : null !== h && !1 !== this.qw && (a = this.Vj.F() ? this.Vj.width : k ? +h.width : h.naturalWidth);
        isFinite(e.height) || g === sf || g === xo ? (isFinite(b) || (b = this.Vj.F() ? this.Vj.height : k ? +h.height : h.naturalHeight), d = 0) : null !== h && !1 !== this.qw && (b =
            this.Vj.F() ? this.Vj.height : k ? +h.height : h.naturalHeight);
        isFinite(e.width) && (a = e.width);
        isFinite(e.height) && (b = e.height);
        e = this.mf;
        g = this.kg;
        c = Math.max(c, g.width);
        d = Math.max(d, g.height);
        a = Math.min(e.width, a);
        b = Math.min(e.height, b);
        a = Math.max(c, a);
        b = Math.max(d, b);
        null === h || h.complete || (isFinite(a) || (a = 0), isFinite(b) || (b = 0));
        xb(this.cd, a, b);
        Jo(this, 0, 0, a, b)
    };
    Gl.prototype.zj = function (a, b, c, d) {
        Oo(this, a, b, c, d)
    };
    function Yq(a) {
        this.Zp = [new $q(a, 1)]
    }

    function Zq(a, b, c, d) {
        var e = new ja(null), g = e.Pk, h = 1 / b;
        e.width = c / b;
        e.height = d / b;
        b = new $q(e.Vd, b);
        c = a.Zp[a.Zp.length - 1];
        g.setTransform(h * c.Fq, 0, 0, h * c.Fq, 0, 0);
        g.drawImage(c.source, 0, 0);
        a.Zp.push(b)
    }

    function $q(a, b) {
        this.source = a;
        this.Fq = b
    }

    function Da() {
        this.q = new Ze;
        this.ec = null
    }

    f = Da.prototype;
    f.reset = function () {
        this.q = new Ze;
        this.ec = null
    };
    function T(a, b, c, d, e, g) {
        null === a.q && D.k("StreamGeometryContext has been closed");
        void 0 !== e && !0 === e ? (null === a.ec && D.k("Need to call beginFigure first"), d = new Zf(Ff), d.G = b, d.H = c, a.ec.Db.add(d)) : (a.ec = new af, a.ec.la = b, a.ec.ja = c, a.ec.Au = d, a.q.nc.add(a.ec));
        void 0 !== g && (a.ec.np = g)
    }

    function W(a) {
        null === a.q && D.k("StreamGeometryContext has been closed");
        null === a.ec && D.k("Need to call beginFigure first");
        var b = a.ec.Db.length;
        0 < b && a.ec.Db.ea(b - 1).close()
    }

    function Cf(a) {
        null === a.q && D.k("StreamGeometryContext has been closed");
        null === a.ec && D.k("Need to call beginFigure first");
        0 < a.ec.Db.length && (a.ec.Au = !0)
    }

    f.kb = function (a) {
        null === this.q && D.k("StreamGeometryContext has been closed");
        null === this.ec && D.k("Need to call beginFigure first");
        this.ec.Zk = a
    };
    f.moveTo = function (a, b, c) {
        void 0 === c && (c = !1);
        null === this.q && D.k("StreamGeometryContext has been closed");
        null === this.ec && D.k("Need to call beginFigure first");
        var d = new Zf(Ff);
        d.G = a;
        d.H = b;
        c && d.close();
        this.ec.Db.add(d)
    };
    f.lineTo = function (a, b, c) {
        void 0 === c && (c = !1);
        null === this.q && D.k("StreamGeometryContext has been closed");
        null === this.ec && D.k("Need to call beginFigure first");
        var d = new Zf(xf);
        d.G = a;
        d.H = b;
        c && d.close();
        this.ec.Db.add(d)
    };
    function U(a, b, c, d, e, g, h, k) {
        void 0 === k && (k = !1);
        null === a.q && D.k("StreamGeometryContext has been closed");
        null === a.ec && D.k("Need to call beginFigure first");
        var l = new Zf(Gf);
        l.Cc = b;
        l.Zc = c;
        l.Uh = d;
        l.Vh = e;
        l.G = g;
        l.H = h;
        k && l.close();
        a.ec.Db.add(l)
    }

    function Af(a, b, c, d, e) {
        var g;
        void 0 === g && (g = !1);
        null === a.q && D.k("StreamGeometryContext has been closed");
        null === a.ec && D.k("Need to call beginFigure first");
        var h = new Zf(Rf);
        h.Cc = b;
        h.Zc = c;
        h.G = d;
        h.H = e;
        g && h.close();
        a.ec.Db.add(h)
    }

    f.arcTo = function (a, b, c, d, e, g, h) {
        void 0 === g && (g = 0);
        void 0 === h && (h = !1);
        null === this.q && D.k("StreamGeometryContext has been closed");
        null === this.ec && D.k("Need to call beginFigure first");
        var k = new Zf(Sf);
        k.Me = a;
        k.zf = b;
        k.oa = c;
        k.va = d;
        k.radiusX = e;
        k.radiusY = 0 !== g ? g : e;
        h && k.close();
        this.ec.Db.add(k)
    };
    function Bf(a, b, c, d, e, g, h, k) {
        var l;
        void 0 === l && (l = !1);
        null === a.q && D.k("StreamGeometryContext has been closed");
        null === a.ec && D.k("Need to call beginFigure first");
        b = new Zf(Tf, h, k, b, c, d, e, g);
        l && b.close();
        a.ec.Db.add(b)
    }

    function ar(a) {
        a = br(a);
        var b = D.mb();
        b[0] = a[0];
        for (var c = 1, d = 1; d < a.length;)b[c] = a[d], b[c + 1] = a[d], b[c + 2] = a[d + 1], d += 2, c += 3;
        D.za(a);
        return b
    }

    function br(a) {
        var b = cr(a), c = D.mb(), d = Math.floor(b.length / 2), e = b.length - 1;
        a = 0 === a % 2 ? 2 : 1;
        for (var g = 0; g < e; g++) {
            var h = b[g], k = b[g + 1], l = b[(d + g - 1) % e], m = b[(d + g + a) % e];
            c[2 * g] = h;
            c[2 * g + 1] = Re(h.x, h.y, l.x, l.y, k.x, k.y, m.x, m.y, new N)
        }
        c[c.length] = c[0];
        D.za(b);
        return c
    }

    function cr(a) {
        for (var b = D.mb(), c = 1.5 * Math.PI, d = 0, e = 0; e < a; e++)d = 2 * Math.PI / a * e + c, b[e] = new N(.5 + .5 * Math.cos(d), .5 + .5 * Math.sin(d));
        b.push(b[0]);
        return b
    }

    var qq = {
        None: "Rectangle", Rectangle: function (a, b, c) {
            a = new Ze;
            a.type = uf;
            a.la = 0;
            a.ja = 0;
            a.G = b;
            a.H = c;
            return a
        }, Square: function (a, b, c) {
            a = new Ze;
            a.me = ak;
            a.type = uf;
            a.la = 0;
            a.ja = 0;
            a.G = Math.min(b, c);
            a.H = Math.min(b, c);
            return a
        }, Ellipse: function (a, b, c) {
            a = new Ze;
            a.type = vf;
            a.la = 0;
            a.ja = 0;
            a.G = b;
            a.H = c;
            a.C = me;
            a.D = ne;
            return a
        }, Circle: function (a, b, c) {
            a = new Ze;
            a.me = ak;
            a.type = vf;
            a.la = 0;
            a.ja = 0;
            a.G = Math.min(b, c);
            a.H = Math.min(b, c);
            a.C = me;
            a.D = ne;
            return a
        }, Connector: "Ellipse", TriangleRight: function (a, b, c) {
            a = new Ze;
            var d = new af,
                e = new Zf;
            e.G = b;
            e.H = .5 * c;
            d.Db.add(e);
            b = new Zf;
            b.G = 0;
            b.H = c;
            d.Db.add(b.close());
            a.nc.add(d);
            a.C = new Q(0, .25);
            a.D = new Q(.5, .75);
            return a
        }, TriangleDown: function (a, b, c) {
            a = new Ze;
            var d = new af, e = new Zf;
            e.G = b;
            e.H = 0;
            d.Db.add(e);
            e = new Zf;
            e.G = .5 * b;
            e.H = c;
            d.Db.add(e.close());
            a.nc.add(d);
            a.C = new Q(.25, 0);
            a.D = new Q(.75, .5);
            return a
        }, TriangleLeft: function (a, b, c) {
            a = new Ze;
            var d = new af;
            d.la = b;
            d.ja = c;
            var e = new Zf;
            e.G = 0;
            e.H = .5 * c;
            d.Db.add(e);
            c = new Zf;
            c.G = b;
            c.H = 0;
            d.Db.add(c.close());
            a.nc.add(d);
            a.C = new Q(.5, .25);
            a.D = new Q(1,
                .75);
            return a
        }, TriangleUp: function (a, b, c) {
            a = new Ze;
            var d = new af;
            d.la = b;
            d.ja = c;
            var e = new Zf;
            e.G = 0;
            e.H = c;
            d.Db.add(e);
            c = new Zf;
            c.G = .5 * b;
            c.H = 0;
            d.Db.add(c.close());
            a.nc.add(d);
            a.C = new Q(.25, .5);
            a.D = new Q(.75, 1);
            return a
        }, Line1: function (a, b, c) {
            a = new Ze;
            a.type = tf;
            a.la = 0;
            a.ja = 0;
            a.G = b;
            a.H = c;
            return a
        }, Line2: function (a, b, c) {
            a = new Ze;
            a.type = tf;
            a.la = b;
            a.ja = 0;
            a.G = 0;
            a.H = c;
            return a
        }, MinusLine: "LineH", LineH: function (a, b, c) {
            a = new Ze;
            a.type = tf;
            a.la = 0;
            a.ja = c / 2;
            a.G = b;
            a.H = c / 2;
            return a
        }, LineV: function (a, b, c) {
            a = new Ze;
            a.type =
                tf;
            a.la = b / 2;
            a.ja = 0;
            a.G = b / 2;
            a.H = c;
            return a
        }, BarH: "Rectangle", BarV: "Rectangle", Curve1: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            U(a, Id * b, 0, 1 * b, (1 - Id) * c, b, c);
            b = a.q;
            D.u(a);
            return b
        }, Curve2: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            U(a, 0, Id * c, (1 - Id) * b, c, b, c);
            b = a.q;
            D.u(a);
            return b
        }, Curve3: function (a, b, c) {
            a = D.v();
            T(a, 1 * b, 0, !1);
            U(a, 1 * b, Id * c, Id * b, 1 * c, 0, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, Curve4: function (a, b, c) {
            a = D.v();
            T(a, 1 * b, 0, !1);
            U(a, (1 - Id) * b, 0, 0, (1 - Id) * c, 0, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, Alternative: "Triangle", Merge: "Triangle",
        Triangle: function (a, b, c) {
            a = D.v();
            T(a, .5 * b, 0 * c, !0);
            a.lineTo(0 * b, 1 * c);
            a.lineTo(1 * b, 1 * c, !0);
            b = a.q;
            b.C = new Q(.25, .5);
            b.D = new Q(.75, 1);
            D.u(a);
            return b
        }, Decision: "Diamond", Diamond: function (a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !0);
            a.lineTo(0, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(1 * b, .5 * c, !0);
            b = a.q;
            b.C = new Q(.25, .25);
            b.D = new Q(.75, .75);
            D.u(a);
            return b
        }, Pentagon: function (a, b, c) {
            var d = cr(5);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 5 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.2, .22);
            b.D = new Q(.8,
                .9);
            D.u(a);
            return b
        }, DataTransmission: "Hexagon", Hexagon: function (a, b, c) {
            var d = cr(6);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 6 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.07, .25);
            b.D = new Q(.93, .75);
            D.u(a);
            return b
        }, Heptagon: function (a, b, c) {
            var d = cr(7);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 7 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.2, .15);
            b.D = new Q(.8, .85);
            D.u(a);
            return b
        }, Octagon: function (a, b, c) {
            var d = cr(8);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 8 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.15, .15);
            b.D = new Q(.85, .85);
            D.u(a);
            return b
        }, Nonagon: function (a, b, c) {
            var d = cr(9);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 9 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.17, .13);
            b.D = new Q(.82, .82);
            D.u(a);
            return b
        }, Decagon: function (a, b, c) {
            var d = cr(10);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 10 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.16, .16);
            b.D = new Q(.84, .84);
            D.u(a);
            return b
        },
        Dodecagon: function (a, b, c) {
            var d = cr(12);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 12 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.16, .16);
            b.D = new Q(.84, .84);
            D.u(a);
            return b
        }, FivePointedStar: function (a, b, c) {
            var d = br(5);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 10 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.312, .383);
            b.D = new Q(.693, .765);
            D.u(a);
            return b
        }, SixPointedStar: function (a, b, c) {
            var d = br(6);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 12 > e; e++)a.lineTo(d[e].x *
                b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.17, .251);
            b.D = new Q(.833, .755);
            D.u(a);
            return b
        }, SevenPointedStar: function (a, b, c) {
            var d = br(7);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 14 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.363, .361);
            b.D = new Q(.641, .709);
            D.u(a);
            return b
        }, EightPointedStar: function (a, b, c) {
            var d = br(8);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 16 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.252, .255);
            b.D = new Q(.75, .75);
            D.u(a);
            return b
        }, NinePointedStar: function (a,
                                      b, c) {
            var d = br(9);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 18 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.355, .361);
            b.D = new Q(.645, .651);
            D.u(a);
            return b
        }, TenPointedStar: function (a, b, c) {
            var d = br(10);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; 20 > e; e++)a.lineTo(d[e].x * b, d[e].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.281, .261);
            b.D = new Q(.723, .748);
            D.u(a);
            return b
        }, FivePointedBurst: function (a, b, c) {
            var d = ar(5);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3)U(a, d[e].x *
                b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.312, .383);
            b.D = new Q(.693, .765);
            D.u(a);
            return b
        }, SixPointedBurst: function (a, b, c) {
            var d = ar(6);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3)U(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.17, .251);
            b.D = new Q(.833, .755);
            D.u(a);
            return b
        }, SevenPointedBurst: function (a, b, c) {
            var d = ar(7);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3)U(a, d[e].x *
                b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.363, .361);
            b.D = new Q(.641, .709);
            D.u(a);
            return b
        }, EightPointedBurst: function (a, b, c) {
            var d = ar(8);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3)U(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.252, .255);
            b.D = new Q(.75, .75);
            D.u(a);
            return b
        }, NinePointedBurst: function (a, b, c) {
            var d = ar(9);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3)U(a, d[e].x *
                b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.355, .361);
            b.D = new Q(.645, .651);
            D.u(a);
            return b
        }, TenPointedBurst: function (a, b, c) {
            var d = ar(10);
            a = D.v();
            T(a, d[0].x * b, d[0].y * c, !0);
            for (var e = 1; e < d.length; e += 3)U(a, d[e].x * b, d[e].y * c, d[e + 1].x * b, d[e + 1].y * c, d[e + 2].x * b, d[e + 2].y * c);
            D.za(d);
            W(a);
            b = a.q;
            b.C = new Q(.281, .261);
            b.D = new Q(.723, .748);
            D.u(a);
            return b
        }, Cloud: function (a, b, c) {
            a = D.v();
            T(a, .08034461 * b, .1944299 * c, !0);
            U(a, -.09239631 * b, .07836421 * c, .1406031 * b, -.0542823 * c, .2008615 *
                b, .05349299 * c);
            U(a, .2450511 * b, -.00697547 * c, .3776197 * b, -.01112067 * c, .4338609 * b, .074219 * c);
            U(a, .4539471 * b, 0, .6066018 * b, -.02526587 * c, .6558228 * b, .07004196 * c);
            U(a, .6914277 * b, -.01904177 * c, .8921095 * b, -.01220843 * c, .8921095 * b, .08370865 * c);
            U(a, 1.036446 * b, .04105738 * c, 1.020377 * b, .3022052 * c, .9147671 * b, .3194596 * c);
            U(a, 1.04448 * b, .360238 * c, .992256 * b, .5219009 * c, .9082935 * b, .562044 * c);
            U(a, 1.032337 * b, .5771781 * c, 1.018411 * b, .8120651 * c, .9212406 * b, .8217117 * c);
            U(a, 1.028411 * b, .9571472 * c, .8556702 * b, 1.052487 * c, .7592566 * b, .9156953 *
                c);
            U(a, .7431877 * b, 1.009325 * c, .5624123 * b, 1.021761 * c, .5101666 * b, .9310455 * c);
            U(a, .4820677 * b, 1.031761 * c, .3030112 * b, 1.002796 * c, .2609328 * b, .9344623 * c);
            U(a, .2329994 * b, 1.01518 * c, .03213784 * b, 1.01518 * c, .08034461 * b, .870098 * c);
            U(a, -.02812061 * b, .9032597 * c, -.01205169 * b, .6835638 * c, .06829292 * b, .6545475 * c);
            U(a, -.01812061 * b, .6089503 * c, -.00606892 * b, .4555777 * c, .06427569 * b, .4265613 * c);
            U(a, -.01606892 * b, .3892545 * c, -.01205169 * b, .1944299 * c, .08034461 * b, .1944299 * c);
            W(a);
            b = a.q;
            b.C = new Q(.1, .1);
            b.D = new Q(.9, .9);
            D.u(a);
            return b
        },
        Gate: "Crescent", Crescent: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            U(a, 1 * b, 0, 1 * b, 1 * c, 0, 1 * c);
            U(a, .5 * b, .75 * c, .5 * b, .25 * c, 0, 0);
            W(a);
            b = a.q;
            b.C = new Q(.511, .19);
            b.D = new Q(.776, .76);
            D.u(a);
            return b
        }, FramedRectangle: function (a, b, c) {
            var d = D.v(), e = a ? a.Qc : NaN;
            a = a ? a.Tu : NaN;
            isNaN(e) && (e = .1);
            isNaN(a) && (a = .1);
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c, !0);
            T(d, e * b, a * c, !1, !0);
            d.lineTo(e * b, (1 - a) * c);
            d.lineTo((1 - e) * b, (1 - a) * c);
            d.lineTo((1 - e) * b, a * c, !0);
            b = d.q;
            b.C = new Q(e, a);
            b.D = new Q(1 - e, 1 - a);
            D.u(d);
            return b
        },
        Delay: "HalfEllipse", HalfEllipse: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            U(a, Id * b, 0, 1 * b, (.5 - Id / 2) * c, 1 * b, .5 * c);
            U(a, 1 * b, (.5 + Id / 2) * c, Id * b, 1 * c, 0, 1 * c);
            W(a);
            b = a.q;
            b.C = new Q(0, .2);
            b.D = new Q(.75, .8);
            D.u(a);
            return b
        }, Heart: function (a, b, c) {
            a = D.v();
            T(a, .5 * b, 1 * c, !0);
            U(a, .1 * b, .8 * c, 0, .5 * c, 0 * b, .3 * c);
            U(a, 0 * b, 0, .45 * b, 0, .5 * b, .3 * c);
            U(a, .55 * b, 0, 1 * b, 0, 1 * b, .3 * c);
            U(a, b, .5 * c, .9 * b, .8 * c, .5 * b, 1 * c);
            W(a);
            b = a.q;
            b.C = new Q(.15, .29);
            b.D = new Q(.86, .68);
            D.u(a);
            return b
        }, Spade: function (a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !0);
            a.lineTo(.51 * b, .01 * c);
            U(a, .6 * b, .2 * c, b, .25 * c, b, .5 * c);
            U(a, b, .8 * c, .6 * b, .8 * c, .55 * b, .7 * c);
            U(a, .5 * b, .75 * c, .55 * b, .95 * c, .75 * b, c);
            a.lineTo(.25 * b, c);
            U(a, .45 * b, .95 * c, .5 * b, .75 * c, .45 * b, .7 * c);
            U(a, .4 * b, .8 * c, 0, .8 * c, 0, .5 * c);
            U(a, 0, .25 * c, .4 * b, .2 * c, .49 * b, .01 * c);
            W(a);
            b = a.q;
            b.C = new Q(.19, .26);
            b.D = new Q(.8, .68);
            D.u(a);
            return b
        }, Club: function (a, b, c) {
            a = D.v();
            T(a, .4 * b, .6 * c, !0);
            U(a, .5 * b, .75 * c, .45 * b, .95 * c, .15 * b, 1 * c);
            a.lineTo(.85 * b, c);
            U(a, .55 * b, .95 * c, .5 * b, .75 * c, .6 * b, .6 * c);
            var d = .2, e = .3, g = 0, h = 4 * (Math.SQRT2 - 1) / 3 * d;
            U(a, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - h + e) *
                b, (.5 + d + g) * c, (.5 + e) * b, (.5 + d + g) * c);
            U(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            U(a, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            U(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e + .05) * b, (.5 - h + g - .02) * c, .65 * b, .36771243 * c);
            d = .2;
            e = 0;
            g = -.3;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            U(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            U(a, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            U(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            U(a, (.5 - d +
                e) * b, (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, .35 * b, .36771243 * c);
            d = .2;
            e = -.3;
            g = 0;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            U(a, (.5 + d + e - .05) * b, (.5 - h + g - .02) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            U(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            U(a, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, (.5 + e) * b, (.5 + d + g) * c);
            U(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, .4 * b, .6 * c);
            W(a);
            b = a.q;
            b.C = new Q(.06, .39);
            b.D = new Q(.93, .58);
            D.u(a);
            return b
        }, Ring: function (a, b, c) {
            a = D.v();
            var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
            T(a, b, .5 *
                c, !0);
            U(a, b, (.5 - d) * c, (.5 + d) * b, 0, .5 * b, 0);
            U(a, (.5 - d) * b, 0, 0, (.5 - d) * c, 0, .5 * c);
            U(a, 0, (.5 + d) * c, (.5 - d) * b, c, .5 * b, c);
            U(a, (.5 + d) * b, c, b, (.5 + d) * c, b, .5 * c);
            d = 4 * (Math.SQRT2 - 1) / 3 * .4;
            T(a, .5 * b, .1 * c, !0, !0);
            U(a, (.5 + d) * b, .1 * c, .9 * b, (.5 - d) * c, .9 * b, .5 * c);
            U(a, .9 * b, (.5 + d) * c, (.5 + d) * b, .9 * c, .5 * b, .9 * c);
            U(a, (.5 - d) * b, .9 * c, .1 * b, (.5 + d) * c, .1 * b, .5 * c);
            U(a, .1 * b, (.5 - d) * c, (.5 - d) * b, .1 * c, .5 * b, .1 * c);
            b = a.q;
            b.C = new Q(.146, .146);
            b.D = new Q(.853, .853);
            b.me = ak;
            D.u(a);
            return b
        }, YinYang: function (a, b, c) {
            var d = .5;
            a = D.v();
            d = .5;
            T(a, .5 * b, 0, !0);
            a.arcTo(270,
                180, .5 * b, .5 * b, .5 * b);
            U(a, 1 * b, d * c, 0, d * c, d * b, 0, !0);
            var d = .1, e = .25;
            T(a, (.5 + d) * b, e * c, !0, !0);
            a.arcTo(0, -360, .5 * b, c * e, d * b);
            W(a);
            T(a, .5 * b, 0, !1);
            a.arcTo(270, -180, .5 * b, .5 * b, .5 * b);
            a.kb(!1);
            e = .75;
            T(a, (.5 + d) * b, e * c, !0);
            a.arcTo(0, 360, .5 * b, c * e, d * b);
            W(a);
            b = a.q;
            b.me = ak;
            D.u(a);
            return b
        }, Peace: function (a, b, c) {
            a = D.v();
            var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
            T(a, b, .5 * c, !0);
            U(a, b, (.5 - d) * c, (.5 + d) * b, 0, .5 * b, 0);
            U(a, (.5 - d) * b, 0, 0, (.5 - d) * c, 0, .5 * c);
            U(a, 0, (.5 + d) * c, (.5 - d) * b, c, .5 * b, c);
            U(a, (.5 + d) * b, c, b, (.5 + d) * c, b, .5 * c);
            d = 4 * (Math.SQRT2 - 1) / 3 * .4;
            T(a, .5 * b, .1 * c, !0, !0);
            U(a, (.5 + d) * b, .1 * c, .9 * b, (.5 - d) * c, .9 * b, .5 * c);
            U(a, .9 * b, (.5 + d) * c, (.5 + d) * b, .9 * c, .5 * b, .9 * c);
            U(a, (.5 - d) * b, .9 * c, .1 * b, (.5 + d) * c, .1 * b, .5 * c);
            U(a, .1 * b, (.5 - d) * c, (.5 - d) * b, .1 * c, .5 * b, .1 * c);
            var d = .07, e = 0, g = -.707 * .11, h = 4 * (Math.SQRT2 - 1) / 3 * d;
            T(a, (.5 + d + e) * b, (.5 + g) * c, !0);
            U(a, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            U(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            U(a, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, (.5 + e) * b, (.5 + d + g) * c);
            U(a, (.5 + h + e) * b, (.5 + d + g) *
                c, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            d = .07;
            e = -.707 * .11;
            g = .707 * .11;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            T(a, (.5 + d + e) * b, (.5 + g) * c, !0);
            U(a, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            U(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            U(a, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, (.5 + e) * b, (.5 + d + g) * c);
            U(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            d = .07;
            e = .707 * .11;
            g = .707 * .11;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            T(a, (.5 + d + e) * b, (.5 + g) * c, !0);
            U(a, (.5 + d + e) * b, (.5 - h +
                g) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            U(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            U(a, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, (.5 + e) * b, (.5 + d + g) * c);
            U(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            b = a.q;
            b.C = new Q(.146, .146);
            b.D = new Q(.853, .853);
            b.me = ak;
            D.u(a);
            return b
        }, NotAllowed: function (a, b, c) {
            var d = .5 * Id, e = .5;
            a = D.v();
            T(a, .5 * b, (.5 - e) * c, !0);
            U(a, (.5 - d) * b, (.5 - e) * c, (.5 - e) * b, (.5 - d) * c, (.5 - e) * b, .5 * c);
            U(a, (.5 - e) * b, (.5 + d) * c, (.5 - d) * b, (.5 + e) * c, .5 * b,
                (.5 + e) * c);
            U(a, (.5 + d) * b, (.5 + e) * c, (.5 + e) * b, (.5 + d) * c, (.5 + e) * b, .5 * c);
            U(a, (.5 + e) * b, (.5 - d) * c, (.5 + d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
            var e = .4, d = .4 * Id, g = D.P(), h = D.P(), k = D.P(), l = D.P();
            De(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .42, g, h, k, l, l);
            var m = D.P(), n = D.P(), p = D.P();
            De(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .58, l, l, p, m, n);
            var q = D.P(), r = D.P(), s = D.P();
            De(.5, .5 + e, .5 - d, .5 + e, .5 - e, .5 + d, .5 - e, .5, .42, q, r, s, l, l);
            var u = D.P(), t = D.P(), z = D.P();
            De(.5, .5 + e, .5 - d, .5 + e, .5 - e, .5 + d, .5 - e, .5, .58, l, l, z, u, t);
            T(a, z.x * b, z.y * c, !0, !0);
            U(a, u.x * b,
                u.y * c, t.x * b, t.y * c, (.5 - e) * b, .5 * c);
            U(a, (.5 - e) * b, (.5 - d) * c, (.5 - d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
            U(a, g.x * b, g.y * c, h.x * b, h.y * c, k.x * b, k.y * c);
            a.lineTo(z.x * b, z.y * c);
            W(a);
            T(a, s.x * b, s.y * c, !0, !0);
            a.lineTo(p.x * b, p.y * c);
            U(a, m.x * b, m.y * c, n.x * b, n.y * c, (.5 + e) * b, .5 * c);
            U(a, (.5 + e) * b, (.5 + d) * c, (.5 + d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            U(a, q.x * b, q.y * c, r.x * b, r.y * c, s.x * b, s.y * c);
            W(a);
            D.A(g);
            D.A(h);
            D.A(k);
            D.A(l);
            D.A(m);
            D.A(n);
            D.A(p);
            D.A(q);
            D.A(r);
            D.A(s);
            D.A(u);
            D.A(t);
            D.A(z);
            b = a.q;
            D.u(a);
            b.me = ak;
            return b
        }, Fragile: function (a, b, c) {
            a = D.v();
            T(a,
                0, 0, !0);
            a.lineTo(.25 * b, 0);
            a.lineTo(.2 * b, .15 * c);
            a.lineTo(.3 * b, .25 * c);
            a.lineTo(.29 * b, .33 * c);
            a.lineTo(.35 * b, .25 * c);
            a.lineTo(.3 * b, .15 * c);
            a.lineTo(.4 * b, 0);
            a.lineTo(1 * b, 0);
            U(a, 1 * b, .25 * c, .75 * b, .5 * c, .55 * b, .5 * c);
            a.lineTo(.55 * b, .9 * c);
            a.lineTo(.7 * b, .9 * c);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(.3 * b, 1 * c);
            a.lineTo(.3 * b, .9 * c);
            a.lineTo(.45 * b, .9 * c);
            a.lineTo(.45 * b, .5 * c);
            U(a, .25 * b, .5 * c, 0, .25 * c, 0, 0);
            W(a);
            b = a.q;
            b.C = new Q(.25, 0);
            b.D = new Q(.75, .4);
            D.u(a);
            return b
        }, HourGlass: function (a, b, c) {
            a = D.v();
            T(a, .65 * b, .5 * c, !0);
            a.lineTo(1 * b,
                1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(.35 * b, .5 * c);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, Lightning: function (a, b, c) {
            a = D.v();
            T(a, 0 * b, .55 * c, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(.25 * b, .45 * c);
            a.lineTo(.9 * b, .48 * c);
            a.lineTo(.4 * b, 1 * c);
            a.lineTo(.65 * b, .55 * c);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, Parallelogram1: function (a, b, c) {
            a = a ? a.Qc : NaN;
            isNaN(a) && (a = .1);
            var d = D.v();
            T(d, a * b, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo((1 - a) * b, 1 * c);
            d.lineTo(0, 1 * c);
            W(d);
            b = d.q;
            b.C = new Q(a, 0);
            b.D = new Q(1 - a, 1);
            D.u(d);
            return b
        }, Input: "Output", Output: function (a,
                                              b, c) {
            a = D.v();
            T(a, 0, 1 * c, !0);
            a.lineTo(.1 * b, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(.9 * b, 1 * c);
            W(a);
            b = a.q;
            b.C = new Q(.1, 0);
            b.D = new Q(.9, 1);
            D.u(a);
            return b
        }, Parallelogram2: function (a, b, c) {
            a = a ? a.Qc : NaN;
            isNaN(a) && (a = .25);
            var d = D.v();
            T(d, a * b, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo((1 - a) * b, 1 * c);
            d.lineTo(0, 1 * c);
            W(d);
            b = d.q;
            b.C = new Q(a, 0);
            b.D = new Q(1 - a, 1);
            D.u(d);
            return b
        }, ThickCross: function (a, b, c) {
            a = a ? a.Qc : NaN;
            isNaN(a) && (a = .25);
            var d = D.v();
            T(d, (.5 - a / 2) * b, 0, !0);
            d.lineTo((.5 + a / 2) * b, 0);
            d.lineTo((.5 + a / 2) * b, (.5 - a / 2) * c);
            d.lineTo(1 * b, (.5 -
                a / 2) * c);
            d.lineTo(1 * b, (.5 + a / 2) * c);
            d.lineTo((.5 + a / 2) * b, (.5 + a / 2) * c);
            d.lineTo((.5 + a / 2) * b, 1 * c);
            d.lineTo((.5 - a / 2) * b, 1 * c);
            d.lineTo((.5 - a / 2) * b, (.5 + a / 2) * c);
            d.lineTo(0, (.5 + a / 2) * c);
            d.lineTo(0, (.5 - a / 2) * c);
            d.lineTo((.5 - a / 2) * b, (.5 - a / 2) * c);
            W(d);
            b = d.q;
            b.C = new Q(.5 - a / 2, .5 - a / 2);
            b.D = new Q(.5 + a / 2, .5 + a / 2);
            D.u(d);
            return b
        }, ThickX: function (a, b, c) {
            a = .25 / Math.SQRT2;
            var d = D.v();
            T(d, .3 * b, 0, !0);
            d.lineTo(.5 * b, .2 * c);
            d.lineTo(.7 * b, 0);
            d.lineTo(1 * b, .3 * c);
            d.lineTo(.8 * b, .5 * c);
            d.lineTo(1 * b, .7 * c);
            d.lineTo(.7 * b, 1 * c);
            d.lineTo(.5 * b, .8 *
                c);
            d.lineTo(.3 * b, 1 * c);
            d.lineTo(0, .7 * c);
            d.lineTo(.2 * b, .5 * c);
            d.lineTo(0, .3 * c);
            W(d);
            b = d.q;
            b.C = new Q(.5 - a, .5 - a);
            b.D = new Q(.5 + a, .5 + a);
            D.u(d);
            return b
        }, ThinCross: function (a, b, c) {
            var d = a ? a.Qc : NaN;
            isNaN(d) && (d = .1);
            a = D.v();
            T(a, (.5 - d / 2) * b, 0, !0);
            a.lineTo((.5 + d / 2) * b, 0);
            a.lineTo((.5 + d / 2) * b, (.5 - d / 2) * c);
            a.lineTo(1 * b, (.5 - d / 2) * c);
            a.lineTo(1 * b, (.5 + d / 2) * c);
            a.lineTo((.5 + d / 2) * b, (.5 + d / 2) * c);
            a.lineTo((.5 + d / 2) * b, 1 * c);
            a.lineTo((.5 - d / 2) * b, 1 * c);
            a.lineTo((.5 - d / 2) * b, (.5 + d / 2) * c);
            a.lineTo(0, (.5 + d / 2) * c);
            a.lineTo(0, (.5 - d / 2) * c);
            a.lineTo((.5 -
                d / 2) * b, (.5 - d / 2) * c);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, ThinX: function (a, b, c) {
            a = D.v();
            T(a, .1 * b, 0, !0);
            a.lineTo(.5 * b, .4 * c);
            a.lineTo(.9 * b, 0);
            a.lineTo(1 * b, .1 * c);
            a.lineTo(.6 * b, .5 * c);
            a.lineTo(1 * b, .9 * c);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.5 * b, .6 * c);
            a.lineTo(.1 * b, 1 * c);
            a.lineTo(0, .9 * c);
            a.lineTo(.4 * b, .5 * c);
            a.lineTo(0, .1 * c);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, RightTriangle: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            W(a);
            b = a.q;
            b.C = new Q(0, .5);
            b.D = new Q(.5, 1);
            D.u(a);
            return b
        }, RoundedIBeam: function (a, b, c) {
            a =
                D.v();
            T(a, 0, 0, !0);
            a.lineTo(1 * b, 0);
            U(a, .5 * b, .25 * c, .5 * b, .75 * c, 1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            U(a, .5 * b, .75 * c, .5 * b, .25 * c, 0, 0);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, RoundedRectangle: function (a, b, c) {
            var d = a ? a.Qc : NaN;
            isNaN(d) && (d = 5);
            d = Math.min(d, b / 3);
            d = Math.min(d, c / 3);
            a = d * Id;
            var e = D.v();
            T(e, d, 0, !0);
            e.lineTo(b - d, 0);
            U(e, b - a, 0, b, a, b, d);
            e.lineTo(b, c - d);
            U(e, b, c - a, b - a, c, b - d, c);
            e.lineTo(d, c);
            U(e, a, c, 0, c - a, 0, c - d);
            e.lineTo(0, d);
            U(e, 0, a, a, 0, d, 0);
            W(e);
            b = e.q;
            1 < a ? (b.C = new Q(0, 0, a, a), b.D = new Q(1, 1, -a, -a)) : (b.C = dc, b.D = uc);
            D.u(e);
            return b
        },
        Border: function (a, b, c) {
            var d = a ? a.Qc : NaN;
            isNaN(d) && (d = 5);
            d = Math.min(d, b / 3);
            d = Math.min(d, c / 3);
            a = D.v();
            T(a, d, 0, !0);
            a.lineTo(b - d, 0);
            U(a, b - 0, 0, b, 0, b, d);
            a.lineTo(b, c - d);
            U(a, b, c - 0, b - 0, c, b - d, c);
            a.lineTo(d, c);
            U(a, 0, c, 0, c - 0, 0, c - d);
            a.lineTo(0, d);
            U(a, 0, 0, 0, 0, d, 0);
            W(a);
            b = a.q;
            b.C = dc;
            b.D = uc;
            D.u(a);
            return b
        }, SquareIBeam: function (a, b, c) {
            var d = a ? a.Qc : NaN;
            isNaN(d) && (d = .2);
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, d * c);
            a.lineTo((.5 + d / 2) * b, d * c);
            a.lineTo((.5 + d / 2) * b, (1 - d) * c);
            a.lineTo(1 * b, (1 - d) * c);
            a.lineTo(1 * b, 1 *
                c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, (1 - d) * c);
            a.lineTo((.5 - d / 2) * b, (1 - d) * c);
            a.lineTo((.5 - d / 2) * b, d * c);
            a.lineTo(0, d * c);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, Trapezoid: function (a, b, c) {
            a = a ? a.Qc : NaN;
            isNaN(a) && (a = .2);
            var d = D.v();
            T(d, a * b, 0, !0);
            d.lineTo((1 - a) * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            W(d);
            b = d.q;
            b.C = new Q(a, 0);
            b.D = new Q(1 - a, 1);
            D.u(d);
            return b
        }, ManualLoop: "ManualOperation", ManualOperation: function (a, b, c) {
            var d = a ? a.Qc : NaN;
            isNaN(d) && (d = 0);
            a = D.v();
            T(a, d, 0, !0);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.1 *
                b, 1 * c);
            W(a);
            b = a.q;
            b.C = new Q(.1, 0);
            b.D = new Q(.9, 1);
            D.u(a);
            return b
        }, GenderMale: function (a, b, c) {
            a = D.v();
            var d = .4 * Id, e = .4, g = D.P(), h = D.P(), k = D.P(), l = D.P();
            T(a, (.5 - e) * b, .5 * c, !0);
            U(a, (.5 - e) * b, (.5 - d) * c, (.5 - d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
            De(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .44, k, l, h, g, g);
            U(a, k.x * b, k.y * c, l.x * b, l.y * c, h.x * b, h.y * c);
            var m = D.Fb(h.x, h.y);
            De(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .56, g, g, h, k, l);
            var n = D.Fb(h.x, h.y);
            a.lineTo((.1 * m.x + .855) * b, .1 * m.y * c);
            a.lineTo(.85 * b, .1 * m.y * c);
            a.lineTo(.85 * b, 0);
            a.lineTo(1 *
                b, 0);
            a.lineTo(1 * b, .15 * c);
            a.lineTo((.1 * n.x + .9) * b, .15 * c);
            a.lineTo((.1 * n.x + .9) * b, (.1 * n.y + .05 * .9) * c);
            a.lineTo(n.x * b, n.y * c);
            U(a, k.x * b, k.y * c, l.x * b, l.y * c, (.5 + e) * b, .5 * c);
            U(a, (.5 + e) * b, (.5 + d) * c, (.5 + d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            U(a, (.5 - d) * b, (.5 + e) * c, (.5 - e) * b, (.5 + d) * c, (.5 - e) * b, .5 * c);
            e = .35;
            d = .35 * Id;
            T(a, .5 * b, (.5 - e) * c, !0, !0);
            U(a, (.5 - d) * b, (.5 - e) * c, (.5 - e) * b, (.5 - d) * c, (.5 - e) * b, .5 * c);
            U(a, (.5 - e) * b, (.5 + d) * c, (.5 - d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            U(a, (.5 + d) * b, (.5 + e) * c, (.5 + e) * b, (.5 + d) * c, (.5 + e) * b, .5 * c);
            U(a, (.5 + e) * b, (.5 - d) * c, (.5 +
                d) * b, (.5 - e) * c, .5 * b, (.5 - e) * c);
            T(a, (.5 - e) * b, .5 * c, !0);
            D.A(g);
            D.A(h);
            D.A(k);
            D.A(l);
            D.A(m);
            D.A(n);
            b = a.q;
            b.C = new Q(.202, .257);
            b.D = new Q(.692, .839);
            b.me = ak;
            D.u(a);
            return b
        }, GenderFemale: function (a, b, c) {
            a = D.v();
            var d = .375, e = 0, g = -.125, h = 4 * (Math.SQRT2 - 1) / 3 * d;
            T(a, (.525 + e) * b, (.5 + d + g) * c, !0);
            U(a, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            U(a, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            U(a, (.5 - h + e) * b, (.5 - d + g) * c, (.5 - d + e) * b, (.5 - h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            U(a, (.5 - d + e) * b,
                (.5 + h + g) * c, (.5 - h + e) * b, (.5 + d + g) * c, (.475 + e) * b, (.5 + d + g) * c);
            a.lineTo(.475 * b, .85 * c);
            a.lineTo(.425 * b, .85 * c);
            a.lineTo(.425 * b, .9 * c);
            a.lineTo(.475 * b, .9 * c);
            a.lineTo(.475 * b, 1 * c);
            a.lineTo(.525 * b, 1 * c);
            a.lineTo(.525 * b, .9 * c);
            a.lineTo(.575 * b, .9 * c);
            a.lineTo(.575 * b, .85 * c);
            a.lineTo(.525 * b, .85 * c);
            W(a);
            d = .325;
            e = 0;
            g = -.125;
            h = 4 * (Math.SQRT2 - 1) / 3 * d;
            T(a, (.5 + d + e) * b, (.5 + g) * c, !0, !0);
            U(a, (.5 + d + e) * b, (.5 + h + g) * c, (.5 + h + e) * b, (.5 + d + g) * c, (.5 + e) * b, (.5 + d + g) * c);
            U(a, (.5 - h + e) * b, (.5 + d + g) * c, (.5 - d + e) * b, (.5 + h + g) * c, (.5 - d + e) * b, (.5 + g) * c);
            U(a, (.5 -
                d + e) * b, (.5 - h + g) * c, (.5 - h + e) * b, (.5 - d + g) * c, (.5 + e) * b, (.5 - d + g) * c);
            U(a, (.5 + h + e) * b, (.5 - d + g) * c, (.5 + d + e) * b, (.5 - h + g) * c, (.5 + d + e) * b, (.5 + g) * c);
            T(a, (.525 + e) * b, (.5 + d + g) * c, !0);
            b = a.q;
            b.C = new Q(.232, .136);
            b.D = new Q(.782, .611);
            b.me = ak;
            D.u(a);
            return b
        }, PlusLine: function (a, b, c) {
            a = D.v();
            T(a, 0, .5 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.moveTo(.5 * b, 0);
            a.lineTo(.5 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, XLine: function (a, b, c) {
            a = D.v();
            T(a, 0, 1 * c, !1);
            a.lineTo(1 * b, 0);
            a.moveTo(0, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, AsteriskLine: function (a, b, c) {
            a =
                D.v();
            var d = .2 / Math.SQRT2;
            T(a, d * b, (1 - d) * c, !1);
            a.lineTo((1 - d) * b, d * c);
            a.moveTo(d * b, d * c);
            a.lineTo((1 - d) * b, (1 - d) * c);
            a.moveTo(0 * b, .5 * c);
            a.lineTo(1 * b, .5 * c);
            a.moveTo(.5 * b, 0 * c);
            a.lineTo(.5 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, CircleLine: function (a, b, c) {
            var d = .5 * Id;
            a = D.v();
            T(a, 1 * b, .5 * c, !1);
            U(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            U(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            U(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            b = a.q;
            b.C = new Q(.146, .146);
            b.D = new Q(.853, .853);
            b.me = ak;
            D.u(a);
            return b
        }, Pie: function (a,
                          b, c) {
            a = D.v();
            var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
            T(a, (.5 * Math.SQRT2 / 2 + .5) * b, (.5 - .5 * Math.SQRT2 / 2) * c, !0);
            U(a, .7 * b, 0 * c, .5 * b, 0 * c, .5 * b, 0 * c);
            U(a, (.5 - d + 0) * b, 0 * c, 0 * b, (.5 - d + 0) * c, 0 * b, .5 * c);
            U(a, 0 * b, (.5 + d + 0) * c, (.5 - d + 0) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 + d + 0) * b, 1 * c, 1 * b, (.5 + d + 0) * c, 1 * b, .5 * c);
            a.lineTo(.5 * b, .5 * c);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, PiePiece: function (a, b, c) {
            var d = Id / Math.SQRT2 * .5, e = Math.SQRT2 / 2, g = 1 - Math.SQRT2 / 2;
            a = D.v();
            T(a, b, c, !0);
            U(a, b, (1 - d) * c, (e + d) * b, (g + d) * c, e * b, g * c);
            a.lineTo(0, c);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, StopSign: function (a,
                               b, c) {
            a = 1 / (Math.SQRT2 + 2);
            var d = D.v();
            T(d, a * b, 0, !0);
            d.lineTo((1 - a) * b, 0);
            d.lineTo(1 * b, a * c);
            d.lineTo(1 * b, (1 - a) * c);
            d.lineTo((1 - a) * b, 1 * c);
            d.lineTo(a * b, 1 * c);
            d.lineTo(0, (1 - a) * c);
            d.lineTo(0, a * c);
            W(d);
            b = d.q;
            b.C = new Q(a / 2, a / 2);
            b.D = new Q(1 - a / 2, 1 - a / 2);
            D.u(d);
            return b
        }, LogicImplies: function (a, b, c) {
            var d = a ? a.Qc : NaN;
            isNaN(d) && (d = .2);
            a = D.v();
            T(a, (1 - d) * b, 0 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.lineTo((1 - d) * b, c);
            a.moveTo(0, .5 * c);
            a.lineTo(b, .5 * c);
            b = a.q;
            b.C = dc;
            b.D = new Q(.8, .5);
            D.u(a);
            return b
        }, LogicIff: function (a, b, c) {
            var d = a ? a.Qc :
                NaN;
            isNaN(d) && (d = .2);
            a = D.v();
            T(a, (1 - d) * b, 0 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.lineTo((1 - d) * b, c);
            a.moveTo(0, .5 * c);
            a.lineTo(b, .5 * c);
            a.moveTo(d * b, 0);
            a.lineTo(0, .5 * c);
            a.lineTo(d * b, c);
            b = a.q;
            b.C = new Q(.2, 0);
            b.D = new Q(.8, .5);
            D.u(a);
            return b
        }, LogicNot: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, LogicAnd: function (a, b, c) {
            a = D.v();
            T(a, 0, 1 * c, !1);
            a.lineTo(.5 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            b.C = new Q(.25, .5);
            b.D = new Q(.75, 1);
            D.u(a);
            return b
        }, LogicOr: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(1 * b, 0);
            b = a.q;
            b.C = new Q(.219, 0);
            b.D = new Q(.78, .409);
            D.u(a);
            return b
        }, LogicXor: function (a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, 1 * c);
            a.moveTo(0, .5 * c);
            a.lineTo(1 * b, .5 * c);
            var d = .5 * Id;
            U(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            U(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            U(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            b = a.q;
            b.me = ak;
            D.u(a);
            return b
        }, LogicTruth: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(1 * b, 0);
            a.moveTo(.5 * b, 0);
            a.lineTo(.5 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, LogicFalsity: function (a, b, c) {
            a = D.v();
            T(a, 0, 1 * c, !1);
            a.lineTo(1 * b, 1 * c);
            a.moveTo(.5 * b, 1 * c);
            a.lineTo(.5 * b, 0);
            b = a.q;
            D.u(a);
            return b
        }, LogicThereExists: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(0, .5 * c);
            a.moveTo(1 * b, .5 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, LogicForAll: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(1 * b, 0);
            a.moveTo(.25 * b, .5 * c);
            a.lineTo(.75 * b, .5 * c);
            b = a.q;
            b.C = new Q(.25, 0);
            b.D = new Q(.75, .5);
            D.u(a);
            return b
        }, LogicIsDefinedAs: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(b, 0);
            a.moveTo(0, .5 * c);
            a.lineTo(b, .5 * c);
            a.moveTo(0, c);
            a.lineTo(b, c);
            b = a.q;
            b.C = new Q(.01, .01);
            b.D = new Q(.99, .49);
            D.u(a);
            return b
        }, LogicIntersect: function (a, b, c) {
            var d = .5 * Id;
            a = D.v();
            T(a, 0, 1 * c, !1);
            a.lineTo(0, .5 * c);
            U(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            U(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            b.C = new Q(0, .5);
            b.D = uc;
            D.u(a);
            return b
        }, LogicUnion: function (a, b, c) {
            var d = .5 * Id;
            a = D.v();
            T(a, 1 * b, 0, !1);
            a.lineTo(1 * b, .5 * c);
            U(a,
                1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            a.lineTo(0, 0);
            b = a.q;
            b.C = dc;
            b.D = new Q(1, .5);
            D.u(a);
            return b
        }, Arrow: function (a, b, c) {
            var d = a ? a.Qc : NaN, e = a ? a.Tu : NaN;
            isNaN(d) && (d = .3);
            isNaN(e) && (e = .3);
            a = D.v();
            T(a, 0, (.5 - e / 2) * c, !0);
            a.lineTo((1 - d) * b, (.5 - e / 2) * c);
            a.lineTo((1 - d) * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo((1 - d) * b, 1 * c);
            a.lineTo((1 - d) * b, (.5 + e / 2) * c);
            a.lineTo(0, (.5 + e / 2) * c);
            W(a);
            b = a.q;
            b.C = new Q(0, .5 - e / 2);
            d = Re(0, .5 + e / 2, 1, .5 + e / 2, 1 - d, 1, 1, .5, D.P());
            b.D = new Q(d.x, d.y);
            D.A(d);
            D.u(a);
            return b
        },
        ISOProcess: "Chevron", Chevron: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.5 * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(.5 * b, .5 * c);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, DoubleArrow: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.3 * b, .214 * c);
            a.lineTo(.3 * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.3 * b, 1 * c);
            a.lineTo(.3 * b, .786 * c);
            a.lineTo(0, 1 * c);
            W(a);
            T(a, .3 * b, .214 * c, !1);
            a.lineTo(.3 * b, .786 * c);
            a.kb(!1);
            b = a.q;
            D.u(a);
            return b
        }, DoubleEndArrow: function (a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(.7 * b, .7 * c);
            a.lineTo(.3 * b, .7 * c);
            a.lineTo(.3 * b, 1 * c);
            a.lineTo(0, .5 * c);
            a.lineTo(.3 * b, 0);
            a.lineTo(.3 * b, .3 * c);
            a.lineTo(.7 * b, .3 * c);
            a.lineTo(.7 * b, 0);
            W(a);
            b = a.q;
            c = Re(0, .5, .3, 0, 0, .3, .3, .3, D.P());
            b.C = new Q(c.x, c.y);
            c = Re(.7, 1, 1, .5, .7, .7, 1, .7, c);
            b.D = new Q(c.x, c.y);
            D.A(c);
            D.u(a);
            return b
        }, IBeamArrow: function (a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(.7 * b, .7 * c);
            a.lineTo(.2 * b, .7 * c);
            a.lineTo(.2 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(.2 * b, 0);
            a.lineTo(.2 * b, .3 * c);
            a.lineTo(.7 * b, .3 * c);
            a.lineTo(.7 * b, 0);
            W(a);
            b = a.q;
            b.C = new Q(0, .3);
            c = Re(.7, 1, 1, .5, .7, .7, 1, .7, D.P());
            b.D = new Q(c.x, c.y);
            D.A(c);
            D.u(a);
            return b
        }, Pointer: function (a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(0, 1 * c);
            a.lineTo(.2 * b, .5 * c);
            a.lineTo(0, 0);
            W(a);
            b = a.q;
            b.C = new Q(.2, .35);
            c = Re(.2, .65, 1, .65, 0, 1, 1, .5, D.P());
            b.D = new Q(c.x, c.y);
            D.A(c);
            D.u(a);
            return b
        }, RoundedPointer: function (a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(0, 1 * c);
            U(a, .5 * b, .75 * c, .5 * b, .25 * c, 0, 0);
            W(a);
            b = a.q;
            b.C = new Q(.4, .35);
            c = Re(.2, .65, 1, .65, 0, 1, 1, .5, D.P());
            b.D = new Q(c.x,
                c.y);
            D.A(c);
            D.u(a);
            return b
        }, SplitEndArrow: function (a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(.7 * b, .7 * c);
            a.lineTo(0, .7 * c);
            a.lineTo(.2 * b, .5 * c);
            a.lineTo(0, .3 * c);
            a.lineTo(.7 * b, .3 * c);
            a.lineTo(.7 * b, 0);
            W(a);
            b = a.q;
            b.C = new Q(.2, .3);
            c = Re(.7, 1, 1, .5, .7, .7, 1, .7, D.P());
            b.D = new Q(c.x, c.y);
            D.A(c);
            D.u(a);
            return b
        }, MessageToUser: "SquareArrow", SquareArrow: function (a, b, c) {
            a = D.v();
            T(a, 1 * b, .5 * c, !0);
            a.lineTo(.7 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(.7 * b, 0);
            W(a);
            b = a.q;
            b.C = dc;
            b.D = new Q(.7, 1);
            D.u(a);
            return b
        }, Cone1: function (a, b, c) {
            var d = .5 * Id, e = .1 * Id;
            a = D.v();
            T(a, 0, .9 * c, !0);
            a.lineTo(.5 * b, 0);
            a.lineTo(1 * b, .9 * c);
            U(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            W(a);
            b = a.q;
            b.C = new Q(.25, .5);
            b.D = new Q(.75, .97);
            D.u(a);
            return b
        }, Cone2: function (a, b, c) {
            a = D.v();
            T(a, 0, .9 * c, !0);
            U(a, (1 - .85 / .9) * b, 1 * c, .85 / .9 * b, 1 * c, 1 * b, .9 * c);
            a.lineTo(.5 * b, 0);
            a.lineTo(0, .9 * c);
            W(a);
            T(a, 0, .9 * c, !1);
            U(a, (1 - .85 / .9) * b, .8 * c, .85 / .9 * b, .8 * c, 1 * b, .9 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(.25, .5);
            b.D = new Q(.75, .82);
            D.u(a);
            return b
        },
        Cube1: function (a, b, c) {
            a = D.v();
            T(a, .5 * b, 1 * c, !0);
            a.lineTo(1 * b, .85 * c);
            a.lineTo(1 * b, .15 * c);
            a.lineTo(.5 * b, 0 * c);
            a.lineTo(0 * b, .15 * c);
            a.lineTo(0 * b, .85 * c);
            W(a);
            T(a, .5 * b, 1 * c, !1);
            a.lineTo(.5 * b, .3 * c);
            a.lineTo(0, .15 * c);
            a.moveTo(.5 * b, .3 * c);
            a.lineTo(1 * b, .15 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(0, .3);
            b.D = new Q(.5, .85);
            D.u(a);
            return b
        }, Cube2: function (a, b, c) {
            a = D.v();
            T(a, 0, .3 * c, !0);
            a.lineTo(0 * b, 1 * c);
            a.lineTo(.7 * b, c);
            a.lineTo(1 * b, .7 * c);
            a.lineTo(1 * b, 0 * c);
            a.lineTo(.3 * b, 0 * c);
            W(a);
            T(a, 0, .3 * c, !1);
            a.lineTo(.7 * b, .3 * c);
            a.lineTo(1 * b,
                0 * c);
            a.moveTo(.7 * b, .3 * c);
            a.lineTo(.7 * b, 1 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(0, .3);
            b.D = new Q(.7, 1);
            D.u(a);
            return b
        }, MagneticData: "Cylinder1", Cylinder1: function (a, b, c) {
            var d = .5 * Id, e = .1 * Id;
            a = D.v();
            T(a, 0, .1 * c, !0);
            U(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
            U(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
            a.lineTo(b, .9 * c);
            U(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            a.lineTo(0, .1 * c);
            T(a, 0, .1 * c, !1);
            U(a, 0, (.1 + e) * c, (.5 - d) * b, .2 * c, .5 * b, .2 * c);
            U(a, (.5 + d) * b, .2 * c, 1 * b, (.1 + e) * c, 1 * b, .1 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(0,
                .2);
            b.D = new Q(1, .9);
            D.u(a);
            return b
        }, Cylinder2: function (a, b, c) {
            var d = .5 * Id, e = .1 * Id;
            a = D.v();
            T(a, 0, .9 * c, !0);
            a.lineTo(0, .1 * c);
            U(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
            U(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
            a.lineTo(1 * b, .9 * c);
            U(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            T(a, 0, .9 * c, !1);
            U(a, 0, (.9 - e) * c, (.5 - d) * b, .8 * c, .5 * b, .8 * c);
            U(a, (.5 + d) * b, .8 * c, 1 * b, (.9 - e) * c, 1 * b, .9 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(0, .1);
            b.D = new Q(1, .8);
            D.u(a);
            return b
        }, Cylinder3: function (a, b, c) {
            var d = .1 * Id, e = .5 * Id;
            a = D.v();
            T(a, .1 * b, 0, !0);
            a.lineTo(.9 * b, 0);
            U(a, (.9 + d) * b, 0, 1 * b, (.5 - e) * c, 1 * b, .5 * c);
            U(a, 1 * b, (.5 + e) * c, (.9 + d) * b, 1 * c, .9 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            U(a, (.1 - d) * b, 1 * c, 0, (.5 + e) * c, 0, .5 * c);
            U(a, 0, (.5 - e) * c, (.1 - d) * b, 0, .1 * b, 0);
            T(a, .1 * b, 0, !1);
            U(a, (.1 + d) * b, 0, .2 * b, (.5 - e) * c, .2 * b, .5 * c);
            U(a, .2 * b, (.5 + e) * c, (.1 + d) * b, 1 * c, .1 * b, 1 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(.2, 0);
            b.D = new Q(.9, 1);
            D.u(a);
            return b
        }, DirectData: "Cylinder4", Cylinder4: function (a, b, c) {
            var d = .1 * Id, e = .5 * Id;
            a = D.v();
            T(a, .9 * b, 0, !0);
            U(a, (.9 + d) * b, 0, 1 * b, (.5 - e) * c, 1 * b, .5 * c);
            U(a, 1 * b, (.5 +
                e) * c, (.9 + d) * b, 1 * c, .9 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            U(a, (.1 - d) * b, 1 * c, 0, (.5 + e) * c, 0, .5 * c);
            U(a, 0, (.5 - e) * c, (.1 - d) * b, 0, .1 * b, 0);
            a.lineTo(.9 * b, 0);
            T(a, .9 * b, 0, !1);
            U(a, (.9 - d) * b, 0, .8 * b, (.5 - e) * c, .8 * b, .5 * c);
            U(a, .8 * b, (.5 + e) * c, (.9 - d) * b, 1 * c, .9 * b, 1 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(.1, 0);
            b.D = new Q(.8, 1);
            D.u(a);
            return b
        }, Prism1: function (a, b, c) {
            a = D.v();
            T(a, .25 * b, .25 * c, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(b, .5 * c);
            a.lineTo(.5 * b, c);
            a.lineTo(0, c);
            W(a);
            T(a, .25 * b, .25 * c, !1);
            a.lineTo(.5 * b, c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(.408, .172);
            b.D = new Q(.833,
                .662);
            D.u(a);
            return b
        }, Prism2: function (a, b, c) {
            a = D.v();
            T(a, 0, .25 * c, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(1 * b, .25 * c);
            a.lineTo(.75 * b, .75 * c);
            a.lineTo(0, 1 * c);
            W(a);
            T(a, 0, c, !1);
            a.lineTo(.25 * b, .5 * c);
            a.lineTo(b, .25 * c);
            a.moveTo(0, .25 * c);
            a.lineTo(.25 * b, .5 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(.25, .5);
            b.D = new Q(.75, .75);
            D.u(a);
            return b
        }, Pyramid1: function (a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !0);
            a.lineTo(b, .75 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, .75 * c);
            W(a);
            T(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, 1 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(.25, .367);
            b.D = new Q(.75,
                .875);
            D.u(a);
            return b
        }, Pyramid2: function (a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !0);
            a.lineTo(b, .85 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, .85 * c);
            W(a);
            T(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, .7 * c);
            a.lineTo(0, .85 * c);
            a.moveTo(.5 * b, .7 * c);
            a.lineTo(1 * b, .85 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(.25, .367);
            b.D = new Q(.75, .875);
            D.u(a);
            return b
        }, Actor: function (a, b, c) {
            var d = .2 * Id, e = .1 * Id, g = .5, h = .1;
            a = D.v();
            T(a, g * b, (h + .1) * c, !0);
            U(a, (g - d) * b, (h + .1) * c, (g - .2) * b, (h + e) * c, (g - .2) * b, h * c);
            U(a, (g - .2) * b, (h - e) * c, (g - d) * b, (h - .1) * c, g * b, (h - .1) * c);
            U(a, (g + d) * b, (h - .1) * c,
                (g + .2) * b, (h - e) * c, (g + .2) * b, h * c);
            U(a, (g + .2) * b, (h + e) * c, (g + d) * b, (h + .1) * c, g * b, (h + .1) * c);
            d = .05;
            e = Id * d;
            T(a, .5 * b, .2 * c, !0);
            a.lineTo(.95 * b, .2 * c);
            g = .95;
            h = .25;
            U(a, (g + e) * b, (h - d) * c, (g + d) * b, (h - e) * c, (g + d) * b, h * c);
            a.lineTo(1 * b, .6 * c);
            a.lineTo(.85 * b, .6 * c);
            a.lineTo(.85 * b, .35 * c);
            d = .025;
            e = Id * d;
            g = .825;
            h = .35;
            U(a, (g + d) * b, (h - e) * c, (g + e) * b, (h - d) * c, g * b, (h - d) * c);
            U(a, (g - e) * b, (h - d) * c, (g - d) * b, (h - e) * c, (g - d) * b, h * c);
            a.lineTo(.8 * b, 1 * c);
            a.lineTo(.55 * b, 1 * c);
            a.lineTo(.55 * b, .7 * c);
            d = .05;
            e = Id * d;
            g = .5;
            h = .7;
            U(a, (g + d) * b, (h - e) * c, (g + e) * b, (h - d) * c,
                g * b, (h - d) * c);
            U(a, (g - e) * b, (h - d) * c, (g - d) * b, (h - e) * c, (g - d) * b, h * c);
            a.lineTo(.45 * b, 1 * c);
            a.lineTo(.2 * b, 1 * c);
            a.lineTo(.2 * b, .35 * c);
            d = .025;
            e = Id * d;
            g = .175;
            h = .35;
            U(a, (g + d) * b, (h - e) * c, (g + e) * b, (h - d) * c, g * b, (h - d) * c);
            U(a, (g - e) * b, (h - d) * c, (g - d) * b, (h - e) * c, (g - d) * b, h * c);
            a.lineTo(.15 * b, .6 * c);
            a.lineTo(0 * b, .6 * c);
            a.lineTo(0 * b, .25 * c);
            d = .05;
            e = Id * d;
            g = .05;
            h = .25;
            U(a, (g - d) * b, (h - e) * c, (g - e) * b, (h - d) * c, g * b, (h - d) * c);
            a.lineTo(.5 * b, .2 * c);
            b = a.q;
            b.C = new Q(.2, .2);
            b.D = new Q(.8, .65);
            D.u(a);
            return b
        }, Card: function (a, b, c) {
            a = D.v();
            T(a, 1 * b, 0 * c, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0 * b, 1 * c);
            a.lineTo(0 * b, .2 * c);
            a.lineTo(.2 * b, 0 * c);
            W(a);
            b = a.q;
            b.C = new Q(0, .2);
            b.D = uc;
            D.u(a);
            return b
        }, Collate: function (a, b, c) {
            a = D.v();
            T(a, .5 * b, .5 * c, !0);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(.5 * b, .5 * c);
            T(a, .5 * b, .5 * c, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(.5 * b, .5 * c);
            b = a.q;
            b.C = new Q(.25, 0);
            b.D = new Q(.75, .25);
            D.u(a);
            return b
        }, CreateRequest: function (a, b, c) {
            a = a ? a.Qc : NaN;
            isNaN(a) && (a = .1);
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            W(d);
            T(d, 0,
                a * c, !1);
            d.lineTo(1 * b, a * c);
            d.moveTo(0, (1 - a) * c);
            d.lineTo(1 * b, (1 - a) * c);
            d.kb(!1);
            b = d.q;
            b.C = new Q(0, a);
            b.D = new Q(1, 1 - a);
            D.u(d);
            return b
        }, Database: function (a, b, c) {
            a = D.v();
            var d = .5 * Id, e = .1 * Id;
            T(a, 1 * b, .1 * c, !0);
            a.lineTo(1 * b, .9 * c);
            U(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            a.lineTo(0, .1 * c);
            U(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
            U(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
            T(a, 1 * b, .1 * c, !1);
            U(a, 1 * b, (.1 + e) * c, (.5 + d) * b, .2 * c, .5 * b, .2 * c);
            U(a, (.5 - d) * b, .2 * c, 0, (.1 + e) * c, 0, .1 * c);
            a.moveTo(1 * b, .2 * c);
            U(a, 1 * b, (.2 + e) * c, (.5 + d) * b, .3 * c, .5 * b, .3 * c);
            U(a, (.5 - d) * b, .3 * c, 0, (.2 + e) * c, 0, .2 * c);
            a.moveTo(1 * b, .3 * c);
            U(a, 1 * b, (.3 + e) * c, (.5 + d) * b, .4 * c, .5 * b, .4 * c);
            U(a, (.5 - d) * b, .4 * c, 0, (.3 + e) * c, 0, .3 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(0, .4);
            b.D = new Q(1, .9);
            D.u(a);
            return b
        }, StoredData: "DataStorage", DataStorage: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.75 * b, 0);
            U(a, 1 * b, 0, 1 * b, 1 * c, .75 * b, 1 * c);
            a.lineTo(0, 1 * c);
            U(a, .25 * b, .9 * c, .25 * b, .1 * c, 0, 0);
            W(a);
            b = a.q;
            b.C = new Q(.226, 0);
            b.D = new Q(.81, 1);
            D.u(a);
            return b
        }, DiskStorage: function (a, b, c) {
            a =
                D.v();
            var d = .5 * Id, e = .1 * Id;
            T(a, 1 * b, .1 * c, !0);
            a.lineTo(1 * b, .9 * c);
            U(a, 1 * b, (.9 + e) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0, (.9 + e) * c, 0, .9 * c);
            a.lineTo(0, .1 * c);
            U(a, 0, (.1 - e) * c, (.5 - d) * b, 0, .5 * b, 0);
            U(a, (.5 + d) * b, 0, 1 * b, (.1 - e) * c, 1 * b, .1 * c);
            T(a, 1 * b, .1 * c, !1);
            U(a, 1 * b, (.1 + e) * c, (.5 + d) * b, .2 * c, .5 * b, .2 * c);
            U(a, (.5 - d) * b, .2 * c, 0, (.1 + e) * c, 0, .1 * c);
            a.moveTo(1 * b, .2 * c);
            U(a, 1 * b, (.2 + e) * c, (.5 + d) * b, .3 * c, .5 * b, .3 * c);
            U(a, (.5 - d) * b, .3 * c, 0, (.2 + e) * c, 0, .2 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(0, .3);
            b.D = new Q(1, .9);
            D.u(a);
            return b
        }, Display: function (a,
                              b, c) {
            a = D.v();
            T(a, .25 * b, 0, !0);
            a.lineTo(.75 * b, 0);
            U(a, 1 * b, 0, 1 * b, 1 * c, .75 * b, 1 * c);
            a.lineTo(.25 * b, 1 * c);
            a.lineTo(0, .5 * c);
            W(a);
            b = a.q;
            b.C = new Q(.25, 0);
            b.D = new Q(.75, 1);
            D.u(a);
            return b
        }, DividedEvent: function (a, b, c) {
            a = a ? a.Qc : NaN;
            isNaN(a) ? a = .2 : .15 > a && (a = .15);
            var d = D.v(), e = .2 * Id;
            T(d, 0, .2 * c, !0);
            U(d, 0, (.2 - e) * c, (.2 - e) * b, 0, .2 * b, 0);
            d.lineTo(.8 * b, 0);
            U(d, (.8 + e) * b, 0, 1 * b, (.2 - e) * c, 1 * b, .2 * c);
            d.lineTo(1 * b, .8 * c);
            U(d, 1 * b, (.8 + e) * c, (.8 + e) * b, 1 * c, .8 * b, 1 * c);
            d.lineTo(.2 * b, 1 * c);
            U(d, (.2 - e) * b, 1 * c, 0, (.8 + e) * c, 0, .8 * c);
            d.lineTo(0, .2 * c);
            T(d, 0, a * c, !1);
            d.lineTo(1 * b, a * c);
            d.kb(!1);
            b = d.q;
            b.C = new Q(0, a);
            b.D = new Q(1, 1 - a);
            D.u(d);
            return b
        }, DividedProcess: function (a, b, c) {
            a = a ? a.Qc : NaN;
            if (isNaN(a) || .1 > a)a = .1;
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            W(d);
            T(d, 0, a * c, !1);
            d.lineTo(1 * b, a * c);
            d.kb(!1);
            b = d.q;
            b.C = new Q(0, a);
            b.D = uc;
            D.u(d);
            return b
        }, Document: function (a, b, c) {
            c /= .8;
            a = D.v();
            T(a, 0, .7 * c, !0);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .7 * c);
            U(a, .5 * b, .4 * c, .5 * b, 1 * c, 0, .7 * c);
            W(a);
            b = a.q;
            b.C = dc;
            b.D = new Q(1, .6);
            D.u(a);
            return b
        }, ExternalOrganization: function (a, b, c) {
            a = a ? a.Qc : NaN;
            if (isNaN(a) || .2 > a)a = .2;
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            W(d);
            T(d, a * b, 0, !1);
            d.lineTo(0, a * c);
            d.moveTo(1 * b, a * c);
            d.lineTo((1 - a) * b, 0);
            d.moveTo(0, (1 - a) * c);
            d.lineTo(a * b, 1 * c);
            d.moveTo((1 - a) * b, 1 * c);
            d.lineTo(1 * b, (1 - a) * c);
            d.kb(!1);
            b = d.q;
            b.C = new Q(a / 2, a / 2);
            b.D = new Q(1 - a / 2, 1 - a / 2);
            D.u(d);
            return b
        }, ExternalProcess: function (a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, .5 * c);
            W(a);
            T(a, .1 * b, .4 * c, !1);
            a.lineTo(.1 * b, .6 * c);
            a.moveTo(.9 * b, .6 * c);
            a.lineTo(.9 * b, .4 * c);
            a.moveTo(.6 * b, .1 * c);
            a.lineTo(.4 * b, .1 * c);
            a.moveTo(.4 * b, .9 * c);
            a.lineTo(.6 * b, .9 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(.25, .25);
            b.D = new Q(.75, .75);
            D.u(a);
            return b
        }, File: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(1 * b, .25 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            W(a);
            T(a, .75 * b, 0, !1);
            a.lineTo(.75 * b, .25 * c);
            a.lineTo(1 * b, .25 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(0, .25);
            b.D = uc;
            D.u(a);
            return b
        }, Interrupt: function (a, b, c) {
            a = D.v();
            T(a, 1 * b,
                .5 * c, !0);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(1 * b, .5 * c);
            T(a, 1 * b, .5 * c, !1);
            a.lineTo(1 * b, 1 * c);
            T(a, 1 * b, .5 * c, !1);
            a.lineTo(1 * b, 0);
            b = a.q;
            b.C = new Q(0, .25);
            b.D = new Q(.5, .75);
            D.u(a);
            return b
        }, InternalStorage: function (a, b, c) {
            var d = a ? a.Qc : NaN;
            a = a ? a.Tu : NaN;
            isNaN(d) && (d = .1);
            isNaN(a) && (a = .1);
            var e = D.v();
            T(e, 0, 0, !0);
            e.lineTo(1 * b, 0);
            e.lineTo(1 * b, 1 * c);
            e.lineTo(0, 1 * c);
            W(e);
            T(e, d * b, 0, !1);
            e.lineTo(d * b, 1 * c);
            e.moveTo(0, a * c);
            e.lineTo(1 * b, a * c);
            e.kb(!1);
            b = e.q;
            b.C = new Q(d, a);
            b.D = uc;
            D.u(e);
            return b
        }, Junction: function (a, b,
                               c) {
            a = D.v();
            var d = 1 / Math.SQRT2, e = (1 - 1 / Math.SQRT2) / 2, g = .5 * Id;
            T(a, 1 * b, .5 * c, !0);
            U(a, 1 * b, (.5 + g) * c, (.5 + g) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - g) * b, 1 * c, 0, (.5 + g) * c, 0, .5 * c);
            U(a, 0, (.5 - g) * c, (.5 - g) * b, 0, .5 * b, 0);
            U(a, (.5 + g) * b, 0, 1 * b, (.5 - g) * c, 1 * b, .5 * c);
            T(a, (e + d) * b, (e + d) * c, !1);
            a.lineTo(e * b, e * c);
            a.moveTo(e * b, (e + d) * c);
            a.lineTo((e + d) * b, e * c);
            a.kb(!1);
            b = a.q;
            b.me = ak;
            D.u(a);
            return b
        }, LinedDocument: function (a, b, c) {
            c /= .8;
            a = D.v();
            T(a, 0, .7 * c, !0);
            a.lineTo(0, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .7 * c);
            U(a, .5 * b, .4 * c, .5 * b, 1 * c, 0, .7 * c);
            W(a);
            T(a, .1 *
                b, 0, !1);
            a.lineTo(.1 * b, .75 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(.1, 0);
            b.D = new Q(1, .6);
            D.u(a);
            return b
        }, LoopLimit: function (a, b, c) {
            a = D.v();
            T(a, 0, 1 * c, !0);
            a.lineTo(0, .25 * c);
            a.lineTo(.25 * b, 0);
            a.lineTo(.75 * b, 0);
            a.lineTo(1 * b, .25 * c);
            a.lineTo(1 * b, 1 * c);
            W(a);
            b = a.q;
            b.C = new Q(0, .25);
            b.D = uc;
            D.u(a);
            return b
        }, SequentialData: "MagneticTape", MagneticTape: function (a, b, c) {
            a = D.v();
            var d = .5 * Id;
            T(a, .5 * b, 1 * c, !0);
            U(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            U(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            U(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            U(a, 1 * b, (.5 +
                d) * c, (.5 + d) * b, .9 * c, .6 * b, .9 * c);
            a.lineTo(1 * b, .9 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(.5 * b, 1 * c);
            b = a.q;
            b.C = new Q(.15, .15);
            b.D = new Q(.85, .8);
            D.u(a);
            return b
        }, ManualInput: function (a, b, c) {
            a = D.v();
            T(a, 1 * b, 0, !0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, .25 * c);
            W(a);
            b = a.q;
            b.C = new Q(0, .25);
            b.D = uc;
            D.u(a);
            return b
        }, MessageFromUser: function (a, b, c) {
            a = a ? a.Qc : NaN;
            isNaN(a) && (a = .7);
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(a * b, .5 * c);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            W(d);
            b = d.q;
            b.C = dc;
            b.D = new Q(a, 1);
            D.u(d);
            return b
        },
        MicroformProcessing: function (a, b, c) {
            a = a ? a.Qc : NaN;
            isNaN(a) && (a = .25);
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(.5 * b, a * c);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(.5 * b, (1 - a) * c);
            d.lineTo(0, 1 * c);
            W(d);
            b = d.q;
            b.C = new Q(0, a);
            b.D = new Q(1, 1 - a);
            D.u(d);
            return b
        }, MicroformRecording: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.75 * b, .25 * c);
            a.lineTo(1 * b, .15 * c);
            a.lineTo(1 * b, .85 * c);
            a.lineTo(.75 * b, .75 * c);
            a.lineTo(0, 1 * c);
            W(a);
            b = a.q;
            b.C = new Q(0, .25);
            b.D = new Q(1, .75);
            D.u(a);
            return b
        }, MultiDocument: function (a, b, c) {
            c /= .8;
            a = D.v();
            T(a, b, 0, !0);
            a.lineTo(b, .5 * c);
            U(a, .96 * b, .47 * c, .93 * b, .45 * c, .9 * b, .44 * c);
            a.lineTo(.9 * b, .6 * c);
            U(a, .86 * b, .57 * c, .83 * b, .55 * c, .8 * b, .54 * c);
            a.lineTo(.8 * b, .7 * c);
            U(a, .4 * b, .4 * c, .4 * b, 1 * c, 0, .7 * c);
            a.lineTo(0, .2 * c);
            a.lineTo(.1 * b, .2 * c);
            a.lineTo(.1 * b, .1 * c);
            a.lineTo(.2 * b, .1 * c);
            a.lineTo(.2 * b, 0);
            W(a);
            T(a, .1 * b, .2 * c, !1);
            a.lineTo(.8 * b, .2 * c);
            a.lineTo(.8 * b, .54 * c);
            a.moveTo(.2 * b, .1 * c);
            a.lineTo(.9 * b, .1 * c);
            a.lineTo(.9 * b, .44 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(0, .25);
            b.D = new Q(.8, .77);
            D.u(a);
            return b
        }, MultiProcess: function (a, b, c) {
            a = D.v();
            T(a, .1 * b, .1 * c, !0);
            a.lineTo(.2 * b, .1 * c);
            a.lineTo(.2 * b, 0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, .8 * c);
            a.lineTo(.9 * b, .8 * c);
            a.lineTo(.9 * b, .9 * c);
            a.lineTo(.8 * b, .9 * c);
            a.lineTo(.8 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, .2 * c);
            a.lineTo(.1 * b, .2 * c);
            W(a);
            T(a, .2 * b, .1 * c, !1);
            a.lineTo(.9 * b, .1 * c);
            a.lineTo(.9 * b, .8 * c);
            a.moveTo(.1 * b, .2 * c);
            a.lineTo(.8 * b, .2 * c);
            a.lineTo(.8 * b, .9 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(0, .2);
            b.D = new Q(.8, 1);
            D.u(a);
            return b
        }, OfflineStorage: function (a, b, c) {
            a = a ? a.Qc : NaN;
            isNaN(a) && (a = .1);
            var d = 1 - a, e = D.v();
            T(e, 0, 0, !0);
            e.lineTo(1 *
                b, 0);
            e.lineTo(.5 * b, 1 * c);
            W(e);
            T(e, .5 * a * b, a * c, !1);
            e.lineTo((1 - .5 * a) * b, a * c);
            e.kb(!1);
            b = e.q;
            b.C = new Q(d / 4 + .5 * a, a);
            b.D = new Q(3 * d / 4 + .5 * a, a + .5 * d);
            D.u(e);
            return b
        }, OffPageConnector: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(.75 * b, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.75 * b, 1 * c);
            a.lineTo(0, 1 * c);
            W(a);
            b = a.q;
            b.C = dc;
            b.D = new Q(.75, 1);
            D.u(a);
            return b
        }, Or: function (a, b, c) {
            a = D.v();
            var d = .5 * Id;
            T(a, 1 * b, .5 * c, !0);
            U(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            U(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            U(a,
                (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            T(a, 1 * b, .5 * c, !1);
            a.lineTo(0, .5 * c);
            a.moveTo(.5 * b, 1 * c);
            a.lineTo(.5 * b, 0);
            a.kb(!1);
            b = a.q;
            b.me = ak;
            D.u(a);
            return b
        }, PaperTape: function (a, b, c) {
            c /= .8;
            a = D.v();
            T(a, 0, .7 * c, !0);
            a.lineTo(0, .3 * c);
            U(a, .5 * b, .6 * c, .5 * b, 0, 1 * b, .3 * c);
            a.lineTo(1 * b, .7 * c);
            U(a, .5 * b, .4 * c, .5 * b, 1 * c, 0, .7 * c);
            W(a);
            b = a.q;
            b.C = new Q(0, .49);
            b.D = new Q(1, .75);
            D.u(a);
            return b
        }, PrimitiveFromCall: function (a, b, c) {
            var d = a ? a.Qc : NaN;
            a = a ? a.Tu : NaN;
            isNaN(d) && (d = .1);
            isNaN(a) && (a = .3);
            var e = D.v();
            T(e, 0, 0, !0);
            e.lineTo(1 * b, 0);
            e.lineTo((1 -
                a) * b, .5 * c);
            e.lineTo(1 * b, 1 * c);
            e.lineTo(0, 1 * c);
            W(e);
            b = e.q;
            b.C = new Q(d, 0);
            b.D = new Q(1 - a, 1);
            D.u(e);
            return b
        }, PrimitiveToCall: function (a, b, c) {
            var d = a ? a.Qc : NaN;
            a = a ? a.Tu : NaN;
            isNaN(d) && (d = .1);
            isNaN(a) && (a = .3);
            var e = D.v();
            T(e, 0, 0, !0);
            e.lineTo((1 - a) * b, 0);
            e.lineTo(1 * b, .5 * c);
            e.lineTo((1 - a) * b, 1 * c);
            e.lineTo(0, 1 * c);
            W(e);
            b = e.q;
            b.C = new Q(d, 0);
            b.D = new Q(1 - a, 1);
            D.u(e);
            return b
        }, Subroutine: "Procedure", Procedure: function (a, b, c) {
            a = a ? a.Qc : NaN;
            isNaN(a) && (a = .1);
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0,
                1 * c);
            W(d);
            T(d, (1 - a) * b, 0, !1);
            d.lineTo((1 - a) * b, 1 * c);
            d.moveTo(a * b, 0);
            d.lineTo(a * b, 1 * c);
            d.kb(!1);
            b = d.q;
            b.C = new Q(a, 0);
            b.D = new Q(1 - a, 1);
            D.u(d);
            return b
        }, Process: function (a, b, c) {
            a = a ? a.Qc : NaN;
            isNaN(a) && (a = .1);
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(0, 1 * c);
            W(d);
            T(d, a * b, 0, !1);
            d.lineTo(a * b, 1 * c);
            d.kb(!1);
            b = d.q;
            b.C = new Q(a, 0);
            b.D = uc;
            D.u(d);
            return b
        }, Sort: function (a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            a.lineTo(0, .5 * c);
            W(a);
            T(a, 0, .5 * c, !1);
            a.lineTo(1 * b, .5 *
                c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(.25, .25);
            b.D = new Q(.75, .5);
            D.u(a);
            return b
        }, Start: function (a, b, c) {
            a = D.v();
            T(a, .25 * b, 0, !0);
            T(a, .25 * b, 0, !0);
            a.arcTo(270, 180, .75 * b, .5 * c, .25 * b, .5 * c);
            a.arcTo(90, 180, .25 * b, .5 * c, .25 * b, .5 * c);
            T(a, .25 * b, 0, !1);
            a.lineTo(.25 * b, 1 * c);
            a.moveTo(.75 * b, 0);
            a.lineTo(.75 * b, 1 * c);
            a.kb(!1);
            b = a.q;
            b.C = new Q(.25, 0);
            b.D = new Q(.75, 1);
            D.u(a);
            return b
        }, Terminator: function (a, b, c) {
            a = D.v();
            T(a, .25 * b, 0, !0);
            a.arcTo(270, 180, .75 * b, .5 * c, .25 * b, .5 * c);
            a.arcTo(90, 180, .25 * b, .5 * c, .25 * b, .5 * c);
            b = a.q;
            b.C = new Q(.23, 0);
            b.D = new Q(.77, 1);
            D.u(a);
            return b
        }, TransmittalTape: function (a, b, c) {
            a = a ? a.Qc : NaN;
            isNaN(a) && (a = .1);
            var d = D.v();
            T(d, 0, 0, !0);
            d.lineTo(1 * b, 0);
            d.lineTo(1 * b, 1 * c);
            d.lineTo(.75 * b, (1 - a) * c);
            d.lineTo(0, (1 - a) * c);
            W(d);
            b = d.q;
            b.C = dc;
            b.D = new Q(1, 1 - a);
            D.u(d);
            return b
        }, AndGate: function (a, b, c) {
            a = D.v();
            var d = .5 * Id;
            T(a, 0, 0, !0);
            a.lineTo(.5 * b, 0);
            U(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            U(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            a.lineTo(0, 1 * c);
            W(a);
            b = a.q;
            b.C = dc;
            b.D = new Q(.55, 1);
            D.u(a);
            return b
        }, Buffer: function (a, b, c) {
            a = D.v();
            T(a,
                0, 0, !0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(0, 1 * c);
            W(a);
            b = a.q;
            b.C = new Q(0, .25);
            b.D = new Q(.5, .75);
            D.u(a);
            return b
        }, Clock: function (a, b, c) {
            a = D.v();
            var d = .5 * Id;
            T(a, 1 * b, .5 * c, !0);
            U(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            U(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            U(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            T(a, 1 * b, .5 * c, !1);
            a.lineTo(1 * b, .5 * c);
            T(a, .8 * b, .75 * c, !1);
            a.lineTo(.8 * b, .25 * c);
            a.lineTo(.6 * b, .25 * c);
            a.lineTo(.6 * b, .75 * c);
            a.lineTo(.4 * b, .75 * c);
            a.lineTo(.4 * b, .25 * c);
            a.lineTo(.2 * b, .25 * c);
            a.lineTo(.2 *
                b, .75 * c);
            a.kb(!1);
            b = a.q;
            b.me = ak;
            D.u(a);
            return b
        }, Ground: function (a, b, c) {
            a = D.v();
            T(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, .4 * c);
            a.moveTo(.2 * b, .6 * c);
            a.lineTo(.8 * b, .6 * c);
            a.moveTo(.3 * b, .8 * c);
            a.lineTo(.7 * b, .8 * c);
            a.moveTo(.4 * b, 1 * c);
            a.lineTo(.6 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, Inverter: function (a, b, c) {
            a = D.v();
            var d = .1 * Id;
            T(a, .8 * b, .5 * c, !0);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(.8 * b, .5 * c);
            T(a, 1 * b, .5 * c, !0);
            U(a, 1 * b, (.5 + d) * c, (.9 + d) * b, .6 * c, .9 * b, .6 * c);
            U(a, (.9 - d) * b, .6 * c, .8 * b, (.5 + d) * c, .8 * b, .5 * c);
            U(a, .8 * b, (.5 - d) * c, (.9 - d) * b, .4 *
                c, .9 * b, .4 * c);
            U(a, (.9 + d) * b, .4 * c, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            b = a.q;
            b.C = new Q(0, .25);
            b.D = new Q(.4, .75);
            D.u(a);
            return b
        }, NandGate: function (a, b, c) {
            a = D.v();
            var d = .5 * Id, e = .4 * Id, g = .1 * Id;
            T(a, .8 * b, .5 * c, !0);
            U(a, .8 * b, (.5 + e) * c, (.4 + d) * b, 1 * c, .4 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(.4 * b, 0);
            U(a, (.4 + d) * b, 0, .8 * b, (.5 - e) * c, .8 * b, .5 * c);
            T(a, 1 * b, .5 * c, !0);
            U(a, 1 * b, (.5 + g) * c, (.9 + g) * b, .6 * c, .9 * b, .6 * c);
            U(a, (.9 - g) * b, .6 * c, .8 * b, (.5 + g) * c, .8 * b, .5 * c);
            U(a, .8 * b, (.5 - g) * c, (.9 - g) * b, .4 * c, .9 * b, .4 * c);
            U(a, (.9 + g) * b, .4 * c, 1 * b, (.5 - g) * c, 1 * b, .5 *
                c);
            b = a.q;
            b.C = new Q(0, .05);
            b.D = new Q(.55, .95);
            D.u(a);
            return b
        }, NorGate: function (a, b, c) {
            a = D.v();
            var d = .5, e = Id * d, g = 0, h = .5;
            T(a, .8 * b, .5 * c, !0);
            U(a, .7 * b, (h + e) * c, (g + e) * b, (h + d) * c, 0, 1 * c);
            U(a, .25 * b, .75 * c, .25 * b, .25 * c, 0, 0);
            U(a, (g + e) * b, (h - d) * c, .7 * b, (h - e) * c, .8 * b, .5 * c);
            d = .1;
            e = .1 * Id;
            g = .9;
            h = .5;
            T(a, (g - d) * b, h * c, !0);
            U(a, (g - d) * b, (h - e) * c, (g - e) * b, (h - d) * c, g * b, (h - d) * c);
            U(a, (g + e) * b, (h - d) * c, (g + d) * b, (h - e) * c, (g + d) * b, h * c);
            U(a, (g + d) * b, (h + e) * c, (g + e) * b, (h + d) * c, g * b, (h + d) * c);
            U(a, (g - e) * b, (h + d) * c, (g - d) * b, (h + e) * c, (g - d) * b, h * c);
            b = a.q;
            b.C =
                new Q(.2, .25);
            b.D = new Q(.6, .75);
            D.u(a);
            return b
        }, OrGate: function (a, b, c) {
            a = D.v();
            var d = .5 * Id;
            T(a, 0, 0, !0);
            U(a, (0 + d + d) * b, 0 * c, .8 * b, (.5 - d) * c, 1 * b, .5 * c);
            U(a, .8 * b, (.5 + d) * c, (0 + d + d) * b, 1 * c, 0, 1 * c);
            U(a, .25 * b, .75 * c, .25 * b, .25 * c, 0, 0);
            W(a);
            b = a.q;
            b.C = new Q(.2, .25);
            b.D = new Q(.75, .75);
            D.u(a);
            return b
        }, XnorGate: function (a, b, c) {
            a = D.v();
            var d = .5, e = Id * d, g = .2, h = .5;
            T(a, .1 * b, 0, !1);
            U(a, .35 * b, .25 * c, .35 * b, .75 * c, .1 * b, 1 * c);
            T(a, .8 * b, .5 * c, !0);
            U(a, .7 * b, (h + e) * c, (g + e) * b, (h + d) * c, .2 * b, 1 * c);
            U(a, .45 * b, .75 * c, .45 * b, .25 * c, .2 * b, 0);
            U(a, (g + e) *
                b, (h - d) * c, .7 * b, (h - e) * c, .8 * b, .5 * c);
            d = .1;
            e = .1 * Id;
            g = .9;
            h = .5;
            T(a, (g - d) * b, h * c, !0);
            U(a, (g - d) * b, (h - e) * c, (g - e) * b, (h - d) * c, g * b, (h - d) * c);
            U(a, (g + e) * b, (h - d) * c, (g + d) * b, (h - e) * c, (g + d) * b, h * c);
            U(a, (g + d) * b, (h + e) * c, (g + e) * b, (h + d) * c, g * b, (h + d) * c);
            U(a, (g - e) * b, (h + d) * c, (g - d) * b, (h + e) * c, (g - d) * b, h * c);
            b = a.q;
            b.C = new Q(.4, .25);
            b.D = new Q(.65, .75);
            D.u(a);
            return b
        }, XorGate: function (a, b, c) {
            a = D.v();
            var d = .5 * Id;
            T(a, .1 * b, 0, !1);
            U(a, .35 * b, .25 * c, .35 * b, .75 * c, .1 * b, 1 * c);
            T(a, .2 * b, 0, !0);
            U(a, (.2 + d) * b, 0 * c, .9 * b, (.5 - d) * c, 1 * b, .5 * c);
            U(a, .9 * b, (.5 + d) *
                c, (.2 + d) * b, 1 * c, .2 * b, 1 * c);
            U(a, .45 * b, .75 * c, .45 * b, .25 * c, .2 * b, 0);
            W(a);
            b = a.q;
            b.C = new Q(.4, .25);
            b.D = new Q(.8, .75);
            D.u(a);
            return b
        }, Capacitor: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(0, 1 * c);
            a.moveTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, Resistor: function (a, b, c) {
            a = D.v();
            T(a, 0, .5 * c, !1);
            a.lineTo(.1 * b, 0);
            a.lineTo(.2 * b, 1 * c);
            a.lineTo(.3 * b, 0);
            a.lineTo(.4 * b, 1 * c);
            a.lineTo(.5 * b, 0);
            a.lineTo(.6 * b, 1 * c);
            a.lineTo(.7 * b, .5 * c);
            b = a.q;
            D.u(a);
            return b
        }, Inductor: function (a, b, c) {
            a = D.v();
            var d = .1 * Id, e = .1;
            T(a, (e - .5 *
                d) * b, c, !1);
            U(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
            e = .3;
            U(a, (e + .1) * b, 0, (e + d) * b, c, e * b, c);
            U(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
            e = .5;
            U(a, (e + .1) * b, 0, (e + d) * b, c, e * b, c);
            U(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
            e = .7;
            U(a, (e + .1) * b, 0, (e + d) * b, c, e * b, c);
            U(a, (e - d) * b, c, (e - .1) * b, 0, (e + .1) * b, 0);
            e = .9;
            U(a, (e + .1) * b, 0, (e + d) * b, c, (e + .5 * d) * b, c);
            b = a.q;
            D.u(a);
            return b
        }, ACvoltageSource: function (a, b, c) {
            a = D.v();
            var d = .5 * Id;
            T(a, 0 * b, .5 * c, !1);
            U(a, 0 * b, (.5 - d) * c, (.5 - d) * b, 0 * c, .5 * b, 0 * c);
            U(a, (.5 + d) * b, 0 * c, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            U(a, 1 * b, (.5 + d) *
                c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0 * b, (.5 + d) * c, 0 * b, .5 * c);
            a.moveTo(.1 * b, .5 * c);
            U(a, .5 * b, 0 * c, .5 * b, 1 * c, .9 * b, .5 * c);
            b = a.q;
            b.me = ak;
            D.u(a);
            return b
        }, DCvoltageSource: function (a, b, c) {
            a = D.v();
            T(a, 0, .75 * c, !1);
            a.lineTo(0, .25 * c);
            a.moveTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, Diode: function (a, b, c) {
            a = D.v();
            T(a, 1 * b, 0, !1);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            a.lineTo(1 * b, .5 * c);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            b.C = new Q(0, .25);
            b.D = new Q(.5, .75);
            D.u(a);
            return b
        }, Wifi: function (a, b, c) {
            var d = b, e = c;
            b *= .38;
            c *= .6;
            a = D.v();
            var g = .8 * Id, h = .8, k = 0, l = .5, d = (d - b) / 2, e = (e - c) / 2;
            T(a, k * b + d, (l + h) * c + e, !0);
            U(a, (k - g) * b + d, (l + h) * c + e, (k - h) * b + d, (l + g) * c + e, (k - h) * b + d, l * c + e);
            U(a, (k - h) * b + d, (l - g) * c + e, (k - g) * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            U(a, k * b + d, (l - h) * c + e, (k - h + .5 * g) * b + d, (l - g) * c + e, (k - h + .5 * g) * b + d, l * c + e);
            U(a, (k - h + .5 * g) * b + d, (l + g) * c + e, k * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            W(a);
            g = .4 * Id;
            h = .4;
            k = .2;
            l = .5;
            T(a, k * b + d, (l + h) * c + e, !0);
            U(a, (k - g) * b + d, (l + h) * c + e, (k - h) * b + d, (l + g) * c + e, (k - h) * b + d, l * c + e);
            U(a, (k - h) * b + d, (l - g) * c + e, (k - g) * b + d, (l - h) * c + e, k *
                b + d, (l - h) * c + e);
            U(a, k * b + d, (l - h) * c + e, (k - h + .5 * g) * b + d, (l - g) * c + e, (k - h + .5 * g) * b + d, l * c + e);
            U(a, (k - h + .5 * g) * b + d, (l + g) * c + e, k * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            W(a);
            g = .2 * Id;
            h = .2;
            l = k = .5;
            T(a, (k - h) * b + d, l * c + e, !0);
            U(a, (k - h) * b + d, (l - g) * c + e, (k - g) * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            U(a, (k + g) * b + d, (l - h) * c + e, (k + h) * b + d, (l - g) * c + e, (k + h) * b + d, l * c + e);
            U(a, (k + h) * b + d, (l + g) * c + e, (k + g) * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            U(a, (k - g) * b + d, (l + h) * c + e, (k - h) * b + d, (l + g) * c + e, (k - h) * b + d, l * c + e);
            g = .4 * Id;
            h = .4;
            k = .8;
            l = .5;
            T(a, k * b + d, (l - h) * c + e, !0);
            U(a, (k + g) * b + d, (l -
                h) * c + e, (k + h) * b + d, (l - g) * c + e, (k + h) * b + d, l * c + e);
            U(a, (k + h) * b + d, (l + g) * c + e, (k + g) * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            U(a, k * b + d, (l + h) * c + e, (k + h - .5 * g) * b + d, (l + g) * c + e, (k + h - .5 * g) * b + d, l * c + e);
            U(a, (k + h - .5 * g) * b + d, (l - g) * c + e, k * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            W(a);
            g = .8 * Id;
            h = .8;
            k = 1;
            l = .5;
            T(a, k * b + d, (l - h) * c + e, !0);
            U(a, (k + g) * b + d, (l - h) * c + e, (k + h) * b + d, (l - g) * c + e, (k + h) * b + d, l * c + e);
            U(a, (k + h) * b + d, (l + g) * c + e, (k + g) * b + d, (l + h) * c + e, k * b + d, (l + h) * c + e);
            U(a, k * b + d, (l + h) * c + e, (k + h - .5 * g) * b + d, (l + g) * c + e, (k + h - .5 * g) * b + d, l * c + e);
            U(a, (k + h - .5 * g) * b + d, (l - g) * c +
                e, k * b + d, (l - h) * c + e, k * b + d, (l - h) * c + e);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, Email: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !0);
            a.lineTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, 0);
            W(a);
            T(a, 0, 0, !1);
            a.lineTo(.5 * b, .6 * c);
            a.lineTo(1 * b, 0);
            a.moveTo(0, 1 * c);
            a.lineTo(.45 * b, .54 * c);
            a.moveTo(1 * b, 1 * c);
            a.lineTo(.55 * b, .54 * c);
            a.kb(!1);
            b = a.q;
            D.u(a);
            return b
        }, Ethernet: function (a, b, c) {
            a = D.v();
            T(a, .35 * b, 0, !0);
            a.lineTo(.65 * b, 0);
            a.lineTo(.65 * b, .4 * c);
            a.lineTo(.35 * b, .4 * c);
            a.lineTo(.35 * b, 0);
            W(a);
            T(a, .1 * b, 1 * c, !0, !0);
            a.lineTo(.4 * b, 1 * c);
            a.lineTo(.4 * b, .6 * c);
            a.lineTo(.1 * b, .6 * c);
            a.lineTo(.1 * b, 1 * c);
            W(a);
            T(a, .6 * b, 1 * c, !0, !0);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.9 * b, .6 * c);
            a.lineTo(.6 * b, .6 * c);
            a.lineTo(.6 * b, 1 * c);
            W(a);
            T(a, 0, .5 * c, !1);
            a.lineTo(1 * b, .5 * c);
            a.moveTo(.5 * b, .5 * c);
            a.lineTo(.5 * b, .4 * c);
            a.moveTo(.75 * b, .5 * c);
            a.lineTo(.75 * b, .6 * c);
            a.moveTo(.25 * b, .5 * c);
            a.lineTo(.25 * b, .6 * c);
            a.kb(!1);
            b = a.q;
            D.u(a);
            return b
        }, Power: function (a, b, c) {
            a = D.v();
            var d = .4 * Id, e = .4, g = D.P(), h = D.P(), k = D.P(), l = D.P();
            De(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .5, g, g, h, k, l);
            var m = D.Fb(h.x,
                h.y);
            T(a, h.x * b, h.y * c, !0);
            U(a, k.x * b, k.y * c, l.x * b, l.y * c, (.5 + e) * b, .5 * c);
            U(a, (.5 + e) * b, (.5 + d) * c, (.5 + d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            U(a, (.5 - d) * b, (.5 + e) * c, (.5 - e) * b, (.5 + d) * c, (.5 - e) * b, .5 * c);
            De(.5 - e, .5, .5 - e, .5 - d, .5 - d, .5 - e, .5, .5 - e, .5, k, l, h, g, g);
            U(a, k.x * b, k.y * c, l.x * b, l.y * c, h.x * b, h.y * c);
            d = .3 * Id;
            e = .3;
            De(.5 - e, .5, .5 - e, .5 - d, .5 - d, .5 - e, .5, .5 - e, .5, k, l, h, g, g);
            a.lineTo(h.x * b, h.y * c);
            U(a, l.x * b, l.y * c, k.x * b, k.y * c, (.5 - e) * b, .5 * c);
            U(a, (.5 - e) * b, (.5 + d) * c, (.5 - d) * b, (.5 + e) * c, .5 * b, (.5 + e) * c);
            U(a, (.5 + d) * b, (.5 + e) * c, (.5 + e) * b, (.5 + d) * c, (.5 +
                e) * b, .5 * c);
            De(.5, .5 - e, .5 + d, .5 - e, .5 + e, .5 - d, .5 + e, .5, .5, g, g, h, k, l);
            U(a, l.x * b, l.y * c, k.x * b, k.y * c, h.x * b, h.y * c);
            W(a);
            T(a, .45 * b, 0, !0);
            a.lineTo(.45 * b, .5 * c);
            a.lineTo(.55 * b, .5 * c);
            a.lineTo(.55 * b, 0);
            W(a);
            D.A(g);
            D.A(h);
            D.A(k);
            D.A(l);
            D.A(m);
            b = a.q;
            b.C = new Q(.25, .55);
            b.D = new Q(.75, .8);
            D.u(a);
            return b
        }, Fallout: function (a, b, c) {
            a = D.v();
            var d = .5 * Id;
            T(a, 0 * b, .5 * c, !0);
            U(a, 0 * b, (.5 - d) * c, (.5 - d) * b, 0 * c, .5 * b, 0 * c);
            U(a, (.5 + d) * b, 0 * c, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            U(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0 * b, (.5 + d) * c, 0 * b,
                .5 * c);
            var e = d = 0;
            T(a, (.3 + d) * b, (.8 + e) * c, !0, !0);
            a.lineTo((.5 + d) * b, (.5 + e) * c);
            a.lineTo((.1 + d) * b, (.5 + e) * c);
            a.lineTo((.3 + d) * b, (.8 + e) * c);
            d = .4;
            e = 0;
            W(a);
            T(a, (.3 + d) * b, (.8 + e) * c, !0, !0);
            a.lineTo((.5 + d) * b, (.5 + e) * c);
            a.lineTo((.1 + d) * b, (.5 + e) * c);
            a.lineTo((.3 + d) * b, (.8 + e) * c);
            d = .2;
            e = -.3;
            W(a);
            T(a, (.3 + d) * b, (.8 + e) * c, !0, !0);
            a.lineTo((.5 + d) * b, (.5 + e) * c);
            a.lineTo((.1 + d) * b, (.5 + e) * c);
            a.lineTo((.3 + d) * b, (.8 + e) * c);
            W(a);
            b = a.q;
            b.me = ak;
            D.u(a);
            return b
        }, IrritationHazard: function (a, b, c) {
            a = D.v();
            T(a, .2 * b, 0 * c, !0);
            a.lineTo(.5 * b, .3 * c);
            a.lineTo(.8 *
                b, 0 * c);
            a.lineTo(1 * b, .2 * c);
            a.lineTo(.7 * b, .5 * c);
            a.lineTo(1 * b, .8 * c);
            a.lineTo(.8 * b, 1 * c);
            a.lineTo(.5 * b, .7 * c);
            a.lineTo(.2 * b, 1 * c);
            a.lineTo(0 * b, .8 * c);
            a.lineTo(.3 * b, .5 * c);
            a.lineTo(0 * b, .2 * c);
            W(a);
            b = a.q;
            b.C = new Q(.3, .3);
            b.D = new Q(.7, .7);
            D.u(a);
            return b
        }, ElectricalHazard: function (a, b, c) {
            a = D.v();
            T(a, .37 * b, 0 * c, !0);
            a.lineTo(.5 * b, .11 * c);
            a.lineTo(.77 * b, .04 * c);
            a.lineTo(.33 * b, .49 * c);
            a.lineTo(1 * b, .37 * c);
            a.lineTo(.63 * b, .86 * c);
            a.lineTo(.77 * b, .91 * c);
            a.lineTo(.34 * b, 1 * c);
            a.lineTo(.34 * b, .78 * c);
            a.lineTo(.44 * b, .8 * c);
            a.lineTo(.65 *
                b, .56 * c);
            a.lineTo(0 * b, .68 * c);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, FireHazard: function (a, b, c) {
            a = D.v();
            T(a, .1 * b, 1 * c, !0);
            U(a, -.25 * b, .63 * c, .45 * b, .44 * c, .29 * b, 0 * c);
            U(a, .48 * b, .17 * c, .54 * b, .35 * c, .51 * b, .42 * c);
            U(a, .59 * b, .29 * c, .58 * b, .28 * c, .59 * b, .18 * c);
            U(a, .8 * b, .34 * c, .88 * b, .43 * c, .75 * b, .6 * c);
            U(a, .87 * b, .48 * c, .88 * b, .43 * c, .88 * b, .31 * c);
            U(a, 1.17 * b, .76 * c, .82 * b, .8 * c, .9 * b, 1 * c);
            W(a);
            b = a.q;
            b.C = new Q(.05, .645);
            b.D = new Q(.884, .908);
            D.u(a);
            return b
        }, BpmnActivityLoop: function (a, b, c) {
            a = D.v();
            var d = 4 * (Math.SQRT2 - 1) / 3 * .5;
            T(a, .65 * b, 1 * c,
                !1);
            U(a, (1 - d + 0) * b, 1 * c, 1 * b, (.5 + d + 0) * c, 1 * b, .5 * c);
            U(a, 1 * b, (.5 - d + 0) * c, (.5 + d + 0) * b, 0 * c, .5 * b, 0 * c);
            U(a, (.5 - d + 0) * b, 0 * c, 0 * b, (.5 - d + 0) * c, 0 * b, .5 * c);
            U(a, 0 * b, (.5 + d + 0) * c, (.5 - d + 0) * b, 1 * c, .35 * b, .98 * c);
            a.moveTo(.25 * b, .8 * c);
            a.lineTo(.35 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, BpmnActivityParallel: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(0, 1 * c);
            a.moveTo(.5 * b, 0);
            a.lineTo(.5 * b, 1 * c);
            a.moveTo(1 * b, 0);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, BpmnActivitySequential: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            a.lineTo(1 *
                b, 0);
            a.moveTo(0, .5 * c);
            a.lineTo(1 * b, .5 * c);
            a.moveTo(0, 1 * c);
            a.lineTo(1 * b, 1 * c);
            b = a.q;
            D.u(a);
            return b
        }, BpmnActivityAdHoc: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            T(a, 1 * b, 1 * c, !1);
            T(a, 0, .5 * c, !1);
            U(a, .2 * b, .35 * c, .3 * b, .35 * c, .5 * b, .5 * c);
            U(a, .7 * b, .65 * c, .8 * b, .65 * c, 1 * b, .5 * c);
            b = a.q;
            D.u(a);
            return b
        }, BpmnActivityCompensation: function (a, b, c) {
            a = D.v();
            T(a, 0, .5 * c, !0);
            a.lineTo(.5 * b, 0);
            a.lineTo(.5 * b, .5 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(1 * b, 0);
            a.lineTo(.5 * b, .5 * c);
            a.lineTo(.5 * b, 1 * c);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, BpmnTaskMessage: function (a,
                                      b, c) {
            a = D.v();
            T(a, 0, .2 * c, !0);
            a.lineTo(1 * b, .2 * c);
            a.lineTo(1 * b, .8 * c);
            a.lineTo(0, .8 * c);
            a.lineTo(0, .8 * c);
            W(a);
            T(a, 0, .2 * c, !1);
            a.lineTo(.5 * b, .5 * c);
            a.lineTo(1 * b, .2 * c);
            a.kb(!1);
            b = a.q;
            D.u(a);
            return b
        }, BpmnTaskScript: function (a, b, c) {
            a = D.v();
            T(a, .7 * b, 1 * c, !0);
            a.lineTo(.3 * b, 1 * c);
            U(a, .6 * b, .5 * c, 0, .5 * c, .3 * b, 0);
            a.lineTo(.7 * b, 0);
            U(a, .4 * b, .5 * c, 1 * b, .5 * c, .7 * b, 1 * c);
            W(a);
            T(a, .45 * b, .73 * c, !1);
            a.lineTo(.7 * b, .73 * c);
            a.moveTo(.38 * b, .5 * c);
            a.lineTo(.63 * b, .5 * c);
            a.moveTo(.31 * b, .27 * c);
            a.lineTo(.56 * b, .27 * c);
            a.kb(!1);
            b = a.q;
            D.u(a);
            return b
        },
        BpmnTaskUser: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            T(a, .335 * b, (1 - .555) * c, !0);
            a.lineTo(.335 * b, .595 * c);
            a.lineTo(.665 * b, .595 * c);
            a.lineTo(.665 * b, (1 - .555) * c);
            U(a, .88 * b, .46 * c, .98 * b, .54 * c, 1 * b, .68 * c);
            a.lineTo(1 * b, 1 * c);
            a.lineTo(0, 1 * c);
            a.lineTo(0, .68 * c);
            U(a, .02 * b, .54 * c, .12 * b, .46 * c, .335 * b, (1 - .555) * c);
            a.lineTo(.365 * b, .405 * c);
            var d = .5 - .285, e = Math.PI / 4, g = 4 * (1 - Math.cos(e)) / (3 * Math.sin(e)), e = g * d, g = g * d;
            U(a, (.5 - (e + d) / 2) * b, (d + (d + g) / 2) * c, (.5 - d) * b, (d + g) * c, (.5 - d) * b, d * c);
            U(a, (.5 - d) * b, (d - g) * c, (.5 - e) * b, (d - d) * c, .5 * b, (d - d) * c);
            U(a, (.5 + e) * b, (d - d) * c, (.5 + d) * b, (d - g) * c, (.5 + d) * b, d * c);
            U(a, (.5 + d) * b, (d + g) * c, (.5 + (e + d) / 2) * b, (d + (d + g) / 2) * c, .635 * b, .405 * c);
            a.lineTo(.635 * b, .405 * c);
            a.lineTo(.665 * b, (1 - .555) * c);
            a.lineTo(.665 * b, .595 * c);
            a.lineTo(.335 * b, .595 * c);
            T(a, .2 * b, 1 * c, !1);
            a.lineTo(.2 * b, .8 * c);
            T(a, .8 * b, 1 * c, !1);
            a.lineTo(.8 * b, .8 * c);
            b = a.q;
            D.u(a);
            return b
        }, BpmnEventConditional: function (a, b, c) {
            a = D.v();
            T(a, .1 * b, 0, !0);
            a.lineTo(.9 * b, 0);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.1 * b, 1 * c);
            W(a);
            T(a, .2 * b, .2 * c, !1);
            a.lineTo(.8 * b, .2 * c);
            a.moveTo(.2 * b, .4 * c);
            a.lineTo(.8 *
                b, .4 * c);
            a.moveTo(.2 * b, .6 * c);
            a.lineTo(.8 * b, .6 * c);
            a.moveTo(.2 * b, .8 * c);
            a.lineTo(.8 * b, .8 * c);
            a.kb(!1);
            b = a.q;
            D.u(a);
            return b
        }, BpmnEventError: function (a, b, c) {
            a = D.v();
            T(a, 0, 1 * c, !0);
            a.lineTo(.33 * b, 0);
            a.lineTo(.66 * b, .5 * c);
            a.lineTo(1 * b, 0);
            a.lineTo(.66 * b, 1 * c);
            a.lineTo(.33 * b, .5 * c);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, BpmnEventEscalation: function (a, b, c) {
            a = D.v();
            T(a, 0, 0, !1);
            T(a, 1 * b, 1 * c, !1);
            T(a, .1 * b, 1 * c, !0);
            a.lineTo(.5 * b, 0);
            a.lineTo(.9 * b, 1 * c);
            a.lineTo(.5 * b, .5 * c);
            W(a);
            b = a.q;
            D.u(a);
            return b
        }, BpmnEventTimer: function (a, b, c) {
            a =
                D.v();
            var d = .5 * Id;
            T(a, 1 * b, .5 * c, !0);
            U(a, 1 * b, (.5 + d) * c, (.5 + d) * b, 1 * c, .5 * b, 1 * c);
            U(a, (.5 - d) * b, 1 * c, 0, (.5 + d) * c, 0, .5 * c);
            U(a, 0, (.5 - d) * c, (.5 - d) * b, 0, .5 * b, 0);
            U(a, (.5 + d) * b, 0, 1 * b, (.5 - d) * c, 1 * b, .5 * c);
            T(a, .5 * b, 0, !1);
            a.lineTo(.5 * b, .15 * c);
            a.moveTo(.5 * b, 1 * c);
            a.lineTo(.5 * b, .85 * c);
            a.moveTo(0, .5 * c);
            a.lineTo(.15 * b, .5 * c);
            a.moveTo(1 * b, .5 * c);
            a.lineTo(.85 * b, .5 * c);
            a.moveTo(.5 * b, .5 * c);
            a.lineTo(.58 * b, .1 * c);
            a.moveTo(.5 * b, .5 * c);
            a.lineTo(.78 * b, .54 * c);
            a.kb(!1);
            b = a.q;
            b.me = ak;
            D.u(a);
            return b
        }
    }, dr;
    for (dr in qq)qq[dr.toLowerCase()] = dr;
    var xq = {
        "": "",
        Standard: "F1 m 0,0 l 8,4 -8,4 2,-4 z",
        Backward: "F1 m 8,0 l -2,4 2,4 -8,-4 z",
        Triangle: "F1 m 0,0 l 8,4.62 -8,4.62 z",
        BackwardTriangle: "F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",
        Boomerang: "F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",
        BackwardBoomerang: "F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",
        SidewaysV: "m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",
        BackwardV: "m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",
        OpenTriangle: "m 0,0 l 8,4 -8,4",
        BackwardOpenTriangle: "m 8,0 l -8,4 8,4",
        OpenTriangleLine: "m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",
        BackwardOpenTriangleLine: "m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",
        OpenTriangleTop: "m 0,0 l 8,4 m 0,4",
        BackwardOpenTriangleTop: "m 8,0 l -8,4 m 0,4",
        OpenTriangleBottom: "m 0,8 l 8,-4",
        BackwardOpenTriangleBottom: "m 0,4 l 8,4",
        HalfTriangleTop: "F1 m 0,0 l 0,4 8,0 z m 0,8",
        BackwardHalfTriangleTop: "F1 m 8,0 l 0,4 -8,0 z m 0,8",
        HalfTriangleBottom: "F1 m 0,4 l 0,4 8,-4 z",
        BackwardHalfTriangleBottom: "F1 m 8,4 l 0,4 -8,-4 z",
        ForwardSemiCircle: "m 4,0 b 270 180 0 4 4",
        BackwardSemiCircle: "m 4,8 b 90 180 0 -4 4",
        Feather: "m 0,0 l 3,4 -3,4",
        BackwardFeather: "m 3,0 l -3,4 3,4",
        DoubleFeathers: "m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
        BackwardDoubleFeathers: "m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",
        TripleFeathers: "m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",
        BackwardTripleFeathers: "m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",
        ForwardSlash: "m 0,8 l 5,-8",
        BackSlash: "m 0,0 l 5,8",
        DoubleForwardSlash: "m 0,8 l 4,-8 m -2,8 l 4,-8",
        DoubleBackSlash: "m 0,0 l 4,8 m -2,-8 l 4,8",
        TripleForwardSlash: "m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",
        TripleBackSlash: "m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",
        Fork: "m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
        BackwardFork: "m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",
        LineFork: "m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",
        BackwardLineFork: "m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",
        CircleFork: "F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
        BackwardCircleFork: "F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",
        CircleLineFork: "F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
        BackwardCircleLineFork: "F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",
        Circle: "F1 m 8,4 b 0 360 -4 0 4 z",
        Block: "F1 m 0,0 l 0,8 8,0 0,-8 z",
        StretchedDiamond: "F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",
        Diamond: "F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",
        Chevron: "F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",
        StretchedChevron: "F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",
        NormalArrow: "F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",
        X: "m 0,0 l 8,8 m 0,-8 l -8,8",
        TailedNormalArrow: "F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",
        DoubleTriangle: "F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",
        BigEndArrow: "F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",
        ConcaveTailArrow: "F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",
        RoundedTriangle: "F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",
        SimpleArrow: "F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",
        AccelerationArrow: "F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",
        BoxArrow: "F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",
        TriangleLine: "F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",
        CircleEndedArrow: "F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",
        DynamicWidthArrow: "F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",
        EquilibriumArrow: "m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",
        FastForward: "F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",
        Kite: "F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",
        HalfArrowTop: "F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",
        HalfArrowBottom: "F1 m 0,8 l 4,-4 4,0 -8,4 z",
        OpposingDirectionDoubleArrow: "F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",
        PartialDoubleTriangle: "F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",
        LineCircle: "F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        DoubleLineCircle: "F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        TripleLineCircle: "F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",
        CircleLine: "F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",
        DiamondCircle: "F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",
        PlusCircle: "F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",
        OpenRightTriangleTop: "m 8,0 l 0,4 -8,0 m 0,4",
        OpenRightTriangleBottom: "m 8,8 l 0,-4 -8,0",
        Line: "m 0,0 l 0,8",
        DoubleLine: "m 0,0 l 0,8 m 2,0 l 0,-8",
        TripleLine: "m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",
        PentagonArrow: "F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"
    };

    function uq(a) {
        var b = pe[a];
        if (void 0 === b) {
            var c = a.toLowerCase();
            if ("none" === c)return "None";
            b = pe[c];
            if (void 0 === b) {
                var d = null, e;
                for (e in xq)if (e.toLowerCase() === c) {
                    d = e;
                    break
                }
                if (null !== d)return a = zf(xq[d], !1), pe[d] = a, c !== d && (pe[c] = d), d
            }
        }
        return "string" === typeof b ? b : b instanceof Ze ? a : null
    }

    function F(a) {
        x.call(this, a);
        this.S = 2408959;
        this.Il = this.Oi = "";
        this.gt = this.dt = this.pt = this.qs = null;
        this.rt = "";
        this.oh = this.ds = this.qt = this.sn = null;
        this.ft = "";
        this.Gp = null;
        this.et = ke;
        this.ht = "";
        this.Hp = null;
        this.Ud = "";
        this.nw = this.rr = this.ul = null;
        this.hj = (new N(NaN, NaN)).freeze();
        this.vs = "";
        this.Ll = null;
        this.ws = dc;
        this.Es = Wd;
        this.xs = Xd;
        this.Lr = null;
        this.rs = er;
        this.un = Vd;
        this.tn = "gray";
        this.Qg = 4;
        this.AD = -1;
        this.Pt = NaN;
        this.xH = new C;
        this.Nl = null;
        this.uk = NaN
    }

    D.Ra(F, x);
    D.ka("Part", F);
    F.prototype.cloneProtected = function (a) {
        x.prototype.cloneProtected.call(this, a);
        a.S = this.S & -4097 | 49152;
        a.Oi = this.Oi;
        a.Il = this.Il;
        a.qs = this.qs;
        a.pt = this.pt;
        a.dt = this.dt;
        a.gt = this.gt;
        a.rt = this.rt;
        a.qt = this.qt;
        a.ds = this.ds;
        a.oh = null;
        a.ft = this.ft;
        a.et = this.et.V();
        a.ht = this.ht;
        a.Ud = this.Ud;
        a.rr = this.rr;
        a.hj.assign(this.hj);
        a.vs = this.vs;
        a.ws = this.ws.V();
        a.Es = this.Es.V();
        a.xs = this.xs.V();
        a.Lr = this.Lr;
        a.rs = this.rs;
        a.un = this.un.V();
        a.tn = this.tn;
        a.Qg = this.Qg;
        a.Pt = this.Pt
    };
    F.prototype.Ei = function (a) {
        x.prototype.Ei.call(this, a);
        a.Xk();
        a.sn = null;
        a.Gp = null;
        a.Hp = null;
        a.Ll = null;
        a.Nl = null
    };
    F.prototype.toString = function () {
        var a = D.tf(Object.getPrototypeOf(this)) + "#" + D.Jd(this);
        null !== this.data && (a += "(" + ha(this.data) + ")");
        return a
    };
    F.LayoutNone = 0;
    var Um;
    F.LayoutAdded = Um = 1;
    var cn;
    F.LayoutRemoved = cn = 2;
    F.LayoutShown = 4;
    F.LayoutHidden = 8;
    F.LayoutNodeSized = 16;
    var Jn;
    F.LayoutGroupLayout = Jn = 32;
    F.LayoutNodeReplaced = 64;
    var er;
    F.LayoutStandard = er = Um | cn | 28 | Jn | 64;
    F.LayoutAll = 16777215;
    F.prototype.ro = function (a, b, c, d, e, g, h) {
        var k = this.g;
        null !== k && (a === pg && "elements" === b ? e instanceof x ? Vm(e, function (a) {
            Xm(k, a);
            Wm(k, a)
        }) : e instanceof Gl && vn(k, e) : a === qg && "elements" === b && (e instanceof x ? Vm(e, function (a) {
            an(k, a);
            $m(k, a)
        }) : e instanceof Gl && wn(k, e)), k.jd(a, b, c, d, e, g, h))
    };
    F.prototype.updateTargetBindings = F.prototype.Nb = function (a) {
        x.prototype.Nb.call(this, a);
        if (null !== this.data) {
            a = this.ya.o;
            for (var b = a.length, c = 0; c < b; c++) {
                var d = a[c];
                d instanceof x && Vm(d, function (a) {
                    null !== a.data && a.Nb()
                })
            }
        }
    };
    F.prototype.updateRelationshipsFromData = function () {
        var a = this.data;
        if (null !== a) {
            var b = this.g;
            if (null !== b) {
                var c = b.ga;
                c instanceof X && (a = c.Un(a), b = b.KI(a), null === b || b instanceof I) && (this.Ka = b)
            }
        }
    };
    D.w(F, {ox: "adornments"}, function () {
        return null === this.oh ? Ja : this.oh.fG
    });
    F.prototype.findAdornment = F.prototype.kq = function (a) {
        v && D.h(a, "string", F, "findAdornment:category");
        var b = this.oh;
        return null === b ? null : b.na(a)
    };
    F.prototype.addAdornment = F.prototype.Yl = function (a, b) {
        if (null !== b) {
            v && (D.h(a, "string", F, "addAdornment:category"), D.l(b, ba, F, "addAdornment:ad"));
            var c = null, d = this.oh;
            null !== d && (c = d.na(a));
            if (c !== b) {
                if (null !== c) {
                    var e = c.g;
                    null !== e && e.remove(c)
                }
                null === d && (this.oh = d = new ma("string", ba));
                b.Oi !== a && (b.Fd = a);
                d.add(a, b);
                c = this.g;
                null !== c && (c.add(b), b.data = this.data)
            }
        }
    };
    F.prototype.removeAdornment = F.prototype.Uj = function (a) {
        v && D.h(a, "string", F, "removeAdornment:category");
        var b = this.oh;
        if (null !== b) {
            var c = b.na(a);
            if (null !== c) {
                var d = c.g;
                null !== d && d.remove(c)
            }
            b.remove(a);
            0 === b.count && (this.oh = null)
        }
    };
    F.prototype.clearAdornments = F.prototype.$t = function () {
        var a = this.oh;
        if (null !== a) {
            for (var b = D.mb(), a = a.j; a.next();)b.push(a.key);
            for (var a = b.length, c = 0; c < a; c++)this.Uj(b[c]);
            D.za(b)
        }
    };
    F.prototype.updateAdornments = function () {
        var a = this.g;
        if (null !== a) {
            a:{
                if (this.ib && this.TG) {
                    var b = this.to;
                    if (!(null !== b && this.$.F() && this.isVisible() && b.Pj() && b.$.F()))break a;
                    var c = this.kq("Selection");
                    if (null === c) {
                        c = this.mK;
                        null === c && (c = this instanceof J ? a.DJ : this instanceof I ? a.ZI : a.UJ);
                        if (!(c instanceof ba))break a;
                        Oh(c);
                        c = c.copy();
                        null !== c && (c.zb = b)
                    }
                    if (null !== c) {
                        var d = c.placeholder;
                        if (null !== d) {
                            var e = b.Gj(), g = 0;
                            b instanceof y && (g = b.lb);
                            var h = D.Dm();
                            h.n((b.Ga.width + g) * e, (b.Ga.height + g) * e);
                            d.Ea =
                                h;
                            D.Tk(h)
                        }
                        c.angle = b.qm();
                        c.type !== rj && (d = D.P(), c.location = b.eb(dc, d), D.A(d));
                        this.Yl("Selection", c);
                        break a
                    }
                }
                this.Uj("Selection")
            }
            fr(this, a);
            for (a = this.ox; a.next();)b = a.value, b.Nb(), b.K()
        }
    };
    function fr(a, b) {
        b.nb.nf.each(function (b) {
            b.isEnabled && b.updateAdornments(a)
        });
        b.nb.updateAdornments(a)
    }

    D.w(F, {layer: "layer"}, function () {
        return this.nw
    });
    D.w(F, {g: "diagram"}, function () {
        var a = this.nw;
        return null !== a ? a.g : null
    });
    D.defineProperty(F, {Nf: "layerName"}, function () {
        return this.Il
    }, function (a) {
        var b = this.Il;
        if (b !== a) {
            D.h(a, "string", F, "layerName");
            var c = this.g;
            if (null === c || null !== c.mm(a) && !c.br)if (this.Il = a, null !== c && c.Ac(), this.i("layerName", b, a), b = this.layer, null !== b && b.name !== a && (c = b.g, null !== c && (a = c.mm(a), null !== a && a !== b))) {
                var d = b.uf(-1, this, !0);
                0 <= d && c.jd(qg, "parts", b, this, null, d, !0);
                b.visible !== a.visible && this.Ld(a.visible);
                d = a.rq(99999999, this, !0);
                0 <= d && c.jd(pg, "parts", a, null, this, !0, d);
                d = this.iy;
                if (null !==
                    d) {
                    var e = c.$a;
                    c.$a = !0;
                    d(this, b, a);
                    c.$a = e
                }
            }
        }
    });
    D.defineProperty(F, {iy: "layerChanged"}, function () {
        return this.qs
    }, function (a) {
        var b = this.qs;
        b !== a && (null !== a && D.h(a, "function", F, "layerChanged"), this.qs = a, this.i("layerChanged", b, a))
    });
    D.defineProperty(F, {Do: "zOrder"}, function () {
        return this.Pt
    }, function (a) {
        var b = this.Pt;
        if (b !== a) {
            D.h(a, "number", F, "zOrder");
            this.Pt = a;
            var c = this.layer;
            null !== c && xl(c, -1, this);
            this.i("zOrder", b, a);
            a = this.g;
            null !== a && a.qa()
        }
    });
    F.prototype.invalidateAdornments = F.prototype.oe = function () {
        var a = this.g;
        null !== a && (Vl(a), 0 !== (this.S & 16384) !== !0 && (this.S |= 16384, a.Te()))
    };
    function tl(a) {
        0 !== (a.S & 16384) !== !1 && (a.updateAdornments(), a.S &= -16385)
    }

    function gr(a) {
        if (!1 === Nm(a)) {
            var b = a.g;
            null !== b && (b.Hg.add(a), b.Te());
            hr(a, !0);
            a.aj()
        }
    }

    function ir(a) {
        a.S |= 2097152;
        if (!1 !== Nm(a)) {
            var b = a.position, c = a.location;
            c.F() && b.F() || jr(a, b, c);
            var c = a.cc, d = c.copy();
            c.Xa();
            c.x = b.x;
            c.y = b.y;
            c.freeze();
            a.qy(d, c);
            hr(a, !1)
        }
    }

    D.w(F, {xf: "locationObject"}, function () {
        if (null === this.Ll) {
            var a = this.my;
            "" !== a ? (a = this.Hd(a), this.Ll = null !== a ? a : this) : this.Ll = this instanceof ba ? this.type !== rj && null !== this.placeholder ? this.placeholder : this : this
        }
        return this.Ll.visible ? this.Ll : this
    });
    D.defineProperty(F, {OJ: "minLocation"}, function () {
        return this.Es
    }, function (a) {
        var b = this.Es;
        b.O(a) || (v && D.l(a, N, F, "minLocation"), this.Es = a = a.V(), this.i("minLocation", b, a))
    });
    D.defineProperty(F, {IJ: "maxLocation"}, function () {
        return this.xs
    }, function (a) {
        var b = this.xs;
        b.O(a) || (v && D.l(a, N, F, "maxLocation"), this.xs = a = a.V(), this.i("maxLocation", b, a))
    });
    D.defineProperty(F, {my: "locationObjectName"}, function () {
        return this.vs
    }, function (a) {
        var b = this.vs;
        b !== a && (v && D.h(a, "string", F, "locationObjectName"), this.vs = a, this.Ll = null, this.K(), this.i("locationObjectName", b, a))
    });
    D.defineProperty(F, {Of: "locationSpot"}, function () {
        return this.ws
    }, function (a) {
        var b = this.ws;
        b.O(a) || (v && (D.l(a, Q, F, "locationSpot"), a.Vc() || D.k("Part.locationSpot must be a specific Spot value, not: " + a)), this.ws = a = a.V(), this.K(), this.i("locationSpot", b, a))
    });
    F.prototype.move = function (a) {
        this.position = a
    };
    F.prototype.moveTo = F.prototype.moveTo = function (a, b) {
        var c = D.Fb(a, b);
        this.move(c);
        D.A(c)
    };
    F.prototype.isVisible = function () {
        if (!this.visible)return !1;
        var a = this.layer;
        if (null !== a && !a.visible)return !1;
        a = this.g;
        if (null !== a && (a = a.Wa, a.vf && (a = a.hn.na(this), null !== a && a.zy)))return !0;
        a = this.Ka;
        return null === a || a.ud && a.isVisible() ? !0 : !1
    };
    F.prototype.Ld = function (a) {
        var b = this.g;
        a ? (this.N(4), this.oe(), null !== b && b.Hg.add(this)) : (this.N(8), this.$t());
        this.Xk();
        null !== b && (b.Ac(), b.qa())
    };
    F.prototype.findObject = F.prototype.Hd = function (a) {
        if (this.name === a)return this;
        var b = this.Nl;
        null === b && (this.Nl = b = new ka);
        if (void 0 !== b[a])return b[a];
        for (var c = this.ya.o, d = c.length, e = 0; e < d; e++) {
            var g = c[e];
            if (g.name === a)return b[a] = g;
            if (g instanceof x)if (null === g.cj && null === g.Jg) {
                if (g = g.Hd(a), null !== g)return b[a] = g
            } else if (tn(g) && (g = g.ya.first(), null !== g && g.name === a))return b[a] = g
        }
        return b[a] = null
    };
    function kr(a, b, c, d) {
        void 0 === d && (d = new N);
        c = c.be() ? kc : c;
        var e = b.Ga;
        d.n(e.width * c.x + c.offsetX, e.height * c.y + c.offsetY);
        if (null === b || b === a)return d;
        b.transform.wb(d);
        for (b = b.Q; null !== b && b !== a;)b.transform.wb(d), b = b.Q;
        a.gj.wb(d);
        d.offset(-a.Cd.x, -a.Cd.y);
        return d
    }

    F.prototype.ensureBounds = F.prototype.kf = function () {
        Gk(this, Infinity, Infinity);
        this.rc()
    };
    function wl(a, b) {
        var c = a.xH, d;
        isNaN(a.uk) && (a.uk = fq(a));
        d = a.uk;
        var e = 2 * d;
        if (!a.Zk)return c.n(b.x - 1 - d, b.y - 1 - d, b.width + 2 + e, b.height + 2 + e), c;
        d = b.x;
        var e = b.y, g = b.width, h = b.height, k = a.shadowBlur, l = a.qK, g = g + k, h = h + k;
        d -= k / 2;
        e -= k / 2;
        0 < l.x ? g += l.x : (d += l.x, g -= l.x);
        0 < l.y ? h += l.y : (e += l.y, h -= l.y);
        c.n(d - 1, e - 1, g + 2, h + 2);
        return c
    }

    F.prototype.rc = function () {
        this.aj();
        if (!1 === Mm(this))ir(this); else {
            var a = this.cc, b = D.Rf();
            b.assign(a);
            a.Xa();
            var c = sl(this);
            this.zj(0, 0, this.Cd.width, this.Cd.height);
            var d = this.position;
            jr(this, d, this.location);
            a.x = d.x;
            a.y = d.y;
            a.freeze();
            this.qy(b, a);
            No(this, !1);
            b.O(a) ? this.Pf(c) : !this.pe() || ab(b.width, a.width) && ab(b.height, a.height) || 0 <= this.AD && this.N(16);
            D.Kb(b);
            hr(this, !1)
        }
    };
    F.prototype.qy = function (a, b) {
        var c = this.g;
        if (null !== c) {
            var d = !1;
            if (!1 === c.nk && a.F()) {
                var e = c.fd, g = c.padding, h = e.x + g.left, k = e.y + g.top, l = e.width - 2 * g.right, e = e.height - 2 * g.bottom;
                a.x > h && a.y > k && a.right < l && a.bottom < e && b.x > h && b.y > k && b.right < l && b.bottom < e && (d = !0)
            }
            0 !== (this.S & 65536) !== !0 && a.O(b) || Ym(this, d, c);
            c.qa();
            yb(a, b) || (this instanceof G && !c.ra.jb && this.ig(), this.Xk())
        }
    };
    D.defineProperty(F, {location: "location"}, function () {
        return this.hj
    }, function (a) {
        v && D.l(a, N, F, "location");
        var b = a.x, c = a.y, d = this.hj, e = d.x, g = d.y;
        (e === b || isNaN(e) && isNaN(b)) && (g === c || isNaN(g) && isNaN(c)) || (a = a.V(), b = a, this instanceof J ? b = !1 : (this.hj = b, this.S |= 2097152, !1 === Mm(this) && (gr(this), c = this.sb, c.F() && (e = c.copy(), c.n(c.x + (b.x - d.x), c.y + (b.y - d.y)), lr(this, this.g, c, e), this.i("position", e, c))), b = !0), b && this.i("location", d, a))
    });
    f = F.prototype;
    f.NB = function (a, b) {
        if (this instanceof J || !a.F())return !1;
        var c = this.g;
        if (null !== c && (lr(this, c, a, b), !0 === c.ra.jb))return !0;
        this.sb = a;
        this.S &= -2097153;
        c = this.hj;
        if (c.F()) {
            var d = c.copy();
            c.n(c.x + (a.x - b.x), c.y + (a.y - b.y));
            this.i("location", d, c)
        }
        !1 === Nm(this) && !1 === Mm(this) && (gr(this), ir(this));
        return !0
    };
    function lr(a, b, c, d) {
        null === b || a instanceof ba || (b = b.Wa, b.xc && gl(b, a, "position", d.copy(), c.copy(), !1))
    }

    f.My = function (a, b) {
        var c = this.hj, d = this.sb;
        Nm(this) || Mm(this) ? c.n(NaN, NaN) : c.n(c.x + a - d.x, c.y + b - d.y);
        d.n(a, b);
        gr(this)
    };
    f.OB = function () {
        this.S &= -2097153;
        gr(this)
    };
    function jr(a, b, c) {
        var d = D.P(), e = a.Of, g = a.xf;
        e.be() && D.k("determineOffset: Part's locationSpot must be real: " + e.toString());
        var h = g.Ga, k = g instanceof y ? g.lb : 0;
        d.dv(0, 0, h.width + k, h.height + k, e);
        if (g !== a)for (d.offset(-k / 2, -k / 2), g.transform.wb(d), e = g.Q; null !== e && e !== a;)e.transform.wb(d), e = e.Q;
        a.gj.wb(d);
        d.offset(-a.Cd.x, -a.Cd.y);
        e = a.g;
        g = c.F();
        h = b.F();
        g && h ? 0 !== (a.S & 2097152) ? mr(a, b, c, e, d) : nr(a, b, c, e, d) : g ? mr(a, b, c, e, d) : h && nr(a, b, c, e, d);
        a.S |= 2097152;
        D.A(d);
        a.aj()
    }

    function mr(a, b, c, d, e) {
        var g = b.x, h = b.y;
        b.n(c.x - e.x, c.y - e.y);
        null !== d && (c = d.Wa, (e = c.ok) || !c.xc || a instanceof ba || gl(c, a, "position", new N(g, h), b, !1), e || b.x === g && b.y === h || (c = d.Eb, d.Eb = !0, a.i("position", new N(g, h), b), d.Eb = c))
    }

    function nr(a, b, c, d, e) {
        var g = c.copy();
        c.n(b.x + e.x, b.y + e.y);
        c.O(g) || null === d || (b = d.Eb, d.Eb = !0, a.i("location", g, c), d.Eb = b)
    }

    function Ym(a, b, c) {
        Po(a, !1);
        a instanceof G && c.cB(a);
        a.layer.Wc || b || c.Ac();
        b = a.cc;
        var d = c.ub;
        d.F() ? (sl(a) ? Nb(b, d) || a.Pf(!1) : b.hg(d) && a.Pf(!0), a.updateAdornments()) : c.Dl = !0
    }

    f.wm = function () {
        return !0
    };
    function ul(a, b) {
        var c = a.cc;
        if (0 !== c.width && 0 !== c.height && !isNaN(c.x) && !isNaN(c.y) && a.isVisible()) {
            var d = a.transform;
            null !== a.kc && (Vo(a, b, a.kc, !0, !0), b.fillRect(c.x, c.y, c.width, c.height));
            null === a.kc && null === a.Lb && (Vo(a, b, "rgba(0,0,0,0.4)", !0, !1), b.fillRect(c.x, c.y, c.width, c.height));
            null !== a.Lb && (d.Bu() || b.transform(d.m11, d.m12, d.m21, d.m22, d.dx, d.dy), c = a.Ga, Vo(a, b, a.Lb, !0, !1), b.fillRect(0, 0, c.width, c.height), d.Bu() || (c = 1 / (d.m11 * d.m22 - d.m12 * d.m21), b.transform(d.m22 * c, -d.m12 * c, -d.m21 * c, d.m11 * c, c * (d.m21 *
                d.dy - d.m22 * d.dx), c * (d.m12 * d.dx - d.m11 * d.dy))))
        }
    }

    f.pe = function () {
        return !0
    };
    f.Lj = function () {
        return !0
    };
    D.defineProperty(F, {Fd: "category"}, function () {
        return this.Oi
    }, function (a) {
        var b = this.Oi;
        if (b !== a) {
            D.h(a, "string", F, "category");
            var c = this.g, d = this.data, e = null;
            if (null !== c && null !== d && !(this instanceof ba)) {
                var g = c.ga.ra;
                g.isEnabled && !g.jb && (e = this.clone(), e.ya.Tc(this.ya))
            }
            this.Oi = a;
            this.i("category", b, a);
            null === c || null === d || this instanceof ba ? (e = this.Df, null !== e && (a = e.oh, null !== a && a.remove(b), e.Yl(this.Fd, this))) : (g = c.ga, g.ra.jb || (this instanceof J ? (g instanceof X ? g.VG(d, a) : g instanceof zg && g.oK(d,
                a), c = Dn(c, a), null !== c && (Oh(c), c = c.copy(), null !== c && or(this, c, b, a))) : (null !== g && g.Jy(d, a), c = An(c, d, a), null !== c && (Oh(c), c = c.copy(), null === c || c instanceof J || (c.location = this.location, or(this, c, b, a)))), null !== e && (b = this.clone(), b.ya.Tc(this.ya), this.i("self", e, b))))
        }
    });
    D.defineProperty(F, {self: "self"}, function () {
        return this
    }, function (a) {
        or(this, a, this.Fd, a.Fd)
    });
    var pr = !1;

    function or(a, b, c, d) {
        b.constructor === a.constructor || pr || (pr = !0, D.trace('Should not change the class of the Part when changing category from "' + c + '" to "' + d + '"'), D.trace("  Old class: " + D.tf(a) + ", new class: " + D.tf(b) + ", part: " + a.toString()));
        a.$t();
        var e = a.data;
        c = a.Nf;
        var g = a.ib, h = a.ah, k = !0, l = !0, m = !1;
        if (a instanceof G)var n = a, k = n.Oj, l = n.Bc, m = n.Wq;
        b.Ei(a);
        b.cloneProtected(a);
        a.Oi = d;
        a.K();
        a.qa();
        b = a.g;
        d = !0;
        null !== b && (d = b.Eb, b.Eb = !0);
        a.Pd = e;
        null !== e && a.Nb();
        null !== b && (b.Eb = d);
        e = a.Nf;
        e !== c && (a.Il = c,
            a.Nf = e);
        a instanceof G && (n = a, n.Oj = k, n.Bc = l, n.Wq = m, n.pe() && n.N(64));
        a.ib = g;
        a.ah = h
    }

    F.prototype.canCopy = function () {
        if (!this.aF)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.Lk)return !1;
        a = a.g;
        return null === a ? !0 : a.Lk ? !0 : !1
    };
    F.prototype.canDelete = function () {
        if (!this.eF)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.Cn)return !1;
        a = a.g;
        return null === a ? !0 : a.Cn ? !0 : !1
    };
    F.prototype.canEdit = function () {
        if (!this.dH)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.tx)return !1;
        a = a.g;
        return null === a ? !0 : a.tx ? !0 : !1
    };
    F.prototype.canGroup = function () {
        if (!this.LF)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.px)return !1;
        a = a.g;
        return null === a ? !0 : a.px ? !0 : !1
    };
    F.prototype.canMove = function () {
        if (!this.oG)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.am)return !1;
        a = a.g;
        return null === a ? !0 : a.am ? !0 : !1
    };
    F.prototype.canReshape = function () {
        if (!this.GG)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.qx)return !1;
        a = a.g;
        return null === a ? !0 : a.qx ? !0 : !1
    };
    F.prototype.canResize = function () {
        if (!this.HG)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.Xt)return !1;
        a = a.g;
        return null === a ? !0 : a.Xt ? !0 : !1
    };
    F.prototype.canRotate = function () {
        if (!this.MG)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.sx)return !1;
        a = a.g;
        return null === a ? !0 : a.sx ? !0 : !1
    };
    F.prototype.canSelect = function () {
        if (!this.dl)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.Ef)return !1;
        a = a.g;
        return null === a ? !0 : a.Ef ? !0 : !1
    };
    D.defineProperty(F, {aF: "copyable"}, function () {
        return 0 !== (this.S & 1)
    }, function (a) {
        var b = 0 !== (this.S & 1);
        b !== a && (v && D.h(a, "boolean", F, "copyable"), this.S ^= 1, this.i("copyable", b, a))
    });
    D.defineProperty(F, {eF: "deletable"}, function () {
        return 0 !== (this.S & 2)
    }, function (a) {
        var b = 0 !== (this.S & 2);
        b !== a && (v && D.h(a, "boolean", F, "deletable"), this.S ^= 2, this.i("deletable", b, a))
    });
    D.defineProperty(F, {dH: "textEditable"}, function () {
        return 0 !== (this.S & 4)
    }, function (a) {
        var b = 0 !== (this.S & 4);
        b !== a && (v && D.h(a, "boolean", F, "textEditable"), this.S ^= 4, this.i("textEditable", b, a), this.oe())
    });
    D.defineProperty(F, {LF: "groupable"}, function () {
        return 0 !== (this.S & 8)
    }, function (a) {
        var b = 0 !== (this.S & 8);
        b !== a && (v && D.h(a, "boolean", F, "groupable"), this.S ^= 8, this.i("groupable", b, a))
    });
    D.defineProperty(F, {oG: "movable"}, function () {
        return 0 !== (this.S & 16)
    }, function (a) {
        var b = 0 !== (this.S & 16);
        b !== a && (v && D.h(a, "boolean", F, "movable"), this.S ^= 16, this.i("movable", b, a))
    });
    D.defineProperty(F, {TG: "selectionAdorned"}, function () {
        return 0 !== (this.S & 32)
    }, function (a) {
        var b = 0 !== (this.S & 32);
        b !== a && (v && D.h(a, "boolean", F, "selectionAdorned"), this.S ^= 32, this.i("selectionAdorned", b, a), this.oe())
    });
    D.defineProperty(F, {Yx: "isInDocumentBounds"}, function () {
        return 0 !== (this.S & 64)
    }, function (a) {
        var b = 0 !== (this.S & 64);
        if (b !== a) {
            v && D.h(a, "boolean", F, "isInDocumentBounds");
            this.S ^= 64;
            var c = this.g;
            null !== c && c.Ac();
            this.i("isInDocumentBounds", b, a)
        }
    });
    D.defineProperty(F, {fB: "isLayoutPositioned"}, function () {
        return 0 !== (this.S & 128)
    }, function (a) {
        var b = 0 !== (this.S & 128);
        b !== a && (v && D.h(a, "boolean", F, "isLayoutPositioned"), this.S ^= 128, this.i("isLayoutPositioned", b, a), this.N(a ? 4 : 8))
    });
    D.defineProperty(F, {dl: "selectable"}, function () {
        return 0 !== (this.S & 256)
    }, function (a) {
        var b = 0 !== (this.S & 256);
        b !== a && (v && D.h(a, "boolean", F, "selectable"), this.S ^= 256, this.i("selectable", b, a), this.oe())
    });
    D.defineProperty(F, {GG: "reshapable"}, function () {
        return 0 !== (this.S & 512)
    }, function (a) {
        var b = 0 !== (this.S & 512);
        b !== a && (v && D.h(a, "boolean", F, "reshapable"), this.S ^= 512, this.i("reshapable", b, a), this.oe())
    });
    D.defineProperty(F, {HG: "resizable"}, function () {
        return 0 !== (this.S & 1024)
    }, function (a) {
        var b = 0 !== (this.S & 1024);
        b !== a && (v && D.h(a, "boolean", F, "resizable"), this.S ^= 1024, this.i("resizable", b, a), this.oe())
    });
    D.defineProperty(F, {MG: "rotatable"}, function () {
        return 0 !== (this.S & 2048)
    }, function (a) {
        var b = 0 !== (this.S & 2048);
        b !== a && (v && D.h(a, "boolean", F, "rotatable"), this.S ^= 2048, this.i("rotatable", b, a), this.oe())
    });
    D.defineProperty(F, {ib: "isSelected"}, function () {
        return 0 !== (this.S & 4096)
    }, function (a) {
        var b = 0 !== (this.S & 4096);
        if (b !== a) {
            v && D.h(a, "boolean", F, "isSelected");
            var c = this.g;
            if (!a || this.canSelect() && !(null !== c && c.selection.count >= c.JJ)) {
                this.S ^= 4096;
                var d = !1;
                if (null !== c) {
                    d = c.Eb;
                    c.Eb = !0;
                    var e = c.selection;
                    e.Xa();
                    a ? e.add(this) : e.remove(this);
                    e.freeze()
                }
                this.i("isSelected", b, a);
                this.oe();
                a = this.nK;
                null !== a && a(this);
                null !== c && (c.Te(), c.Eb = d)
            }
        }
    });
    D.defineProperty(F, {ah: "isHighlighted"}, function () {
        return 0 !== (this.S & 524288)
    }, function (a) {
        var b = 0 !== (this.S & 524288);
        if (b !== a) {
            v && D.h(a, "boolean", F, "isHighlighted");
            this.S ^= 524288;
            var c = this.g;
            null !== c && (c = c.tm, c.Xa(), a ? c.add(this) : c.remove(this), c.freeze());
            this.i("isHighlighted", b, a);
            this.qa();
            a = this.bJ;
            null !== a && a(this)
        }
    });
    D.defineProperty(F, {Zk: "isShadowed"}, function () {
        return 0 !== (this.S & 8192)
    }, function (a) {
        var b = 0 !== (this.S & 8192);
        b !== a && (v && D.h(a, "boolean", F, "isShadowed"), this.S ^= 8192, this.i("isShadowed", b, a), this.qa())
    });
    function Nm(a) {
        return 0 !== (a.S & 32768)
    }

    function hr(a, b) {
        a.S = b ? a.S | 32768 : a.S & -32769
    }

    function Po(a, b) {
        a.S = b ? a.S | 65536 : a.S & -65537
    }

    function sl(a) {
        return 0 !== (a.S & 131072)
    }

    F.prototype.Pf = function (a) {
        this.S = a ? this.S | 131072 : this.S & -131073
    };
    function qr(a, b) {
        a.S = b ? a.S | 1048576 : a.S & -1048577
    }

    D.defineProperty(F, {SF: "isAnimated"}, function () {
        return 0 !== (this.S & 262144)
    }, function (a) {
        var b = 0 !== (this.S & 262144);
        b !== a && (v && D.h(a, "boolean", F, "isAnimated"), this.S ^= 262144, this.i("isAnimated", b, a))
    });
    D.defineProperty(F, {bJ: "highlightedChanged"}, function () {
        return this.ds
    }, function (a) {
        var b = this.ds;
        b !== a && (null !== a && D.h(a, "function", F, "highlightedChanged"), this.ds = a, this.i("highlightedChanged", b, a))
    });
    D.defineProperty(F, {Hy: "selectionObjectName"}, function () {
        return this.rt
    }, function (a) {
        var b = this.rt;
        b !== a && (v && D.h(a, "string", F, "selectionObjectName"), this.rt = a, this.sn = null, this.i("selectionObjectName", b, a))
    });
    D.defineProperty(F, {mK: "selectionAdornmentTemplate"}, function () {
        return this.pt
    }, function (a) {
        var b = this.pt;
        b !== a && (v && D.l(a, ba, F, "selectionAdornmentTemplate"), this instanceof J && (a.type = rj), this.pt = a, this.i("selectionAdornmentTemplate", b, a))
    });
    D.w(F, {to: "selectionObject"}, function () {
        if (null === this.sn) {
            var a = this.Hy;
            null !== a && "" !== a ? (a = this.Hd(a), this.sn = null !== a ? a : this) : this instanceof J ? (a = this.path, this.sn = null !== a ? a : this) : this.sn = this
        }
        return this.sn
    });
    D.defineProperty(F, {nK: "selectionChanged"}, function () {
        return this.qt
    }, function (a) {
        var b = this.qt;
        b !== a && (null !== a && D.h(a, "function", F, "selectionChanged"), this.qt = a, this.i("selectionChanged", b, a))
    });
    D.defineProperty(F, {IG: "resizeAdornmentTemplate"}, function () {
        return this.dt
    }, function (a) {
        var b = this.dt;
        b !== a && (v && D.l(a, ba, F, "resizeAdornmentTemplate"), this.dt = a, this.i("resizeAdornmentTemplate", b, a))
    });
    D.defineProperty(F, {KG: "resizeObjectName"}, function () {
        return this.ft
    }, function (a) {
        var b = this.ft;
        b !== a && (v && D.h(a, "string", F, "resizeObjectName"), this.ft = a, this.Gp = null, this.i("resizeObjectName", b, a))
    });
    D.w(F, {JG: "resizeObject"}, function () {
        if (null === this.Gp) {
            var a = this.KG;
            null !== a && "" !== a ? (a = this.Hd(a), this.Gp = null !== a ? a : this) : this.Gp = this
        }
        return this.Gp
    });
    D.defineProperty(F, {eK: "resizeCellSize"}, function () {
        return this.et
    }, function (a) {
        var b = this.et;
        b.O(a) || (v && D.l(a, Ba, F, "resizeCellSize"), this.et = a = a.V(), this.i("resizeCellSize", b, a))
    });
    D.defineProperty(F, {gK: "rotateAdornmentTemplate"}, function () {
        return this.gt
    }, function (a) {
        var b = this.gt;
        b !== a && (v && D.l(a, ba, F, "rotateAdornmentTemplate"), this.gt = a, this.i("rotateAdornmentTemplate", b, a))
    });
    D.defineProperty(F, {hK: "rotateObjectName"}, function () {
        return this.ht
    }, function (a) {
        var b = this.ht;
        b !== a && (v && D.h(a, "string", F, "rotateObjectName"), this.ht = a, this.Hp = null, this.i("rotateObjectName", b, a))
    });
    D.w(F, {NG: "rotateObject"}, function () {
        if (null === this.Hp) {
            var a = this.hK;
            null !== a && "" !== a ? (a = this.Hd(a), this.Hp = null !== a ? a : this) : this.Hp = this
        }
        return this.Hp
    });
    D.defineProperty(F, {text: "text"}, function () {
        return this.Ud
    }, function (a) {
        var b = this.Ud;
        b !== a && (v && D.h(a, "string", F, "text"), this.Ud = a, this.i("text", b, a))
    });
    D.defineProperty(F, {Ka: "containingGroup"}, function () {
        return this.ul
    }, function (a) {
        if (this.pe()) {
            var b = this.ul;
            if (b !== a) {
                v && null !== a && D.l(a, I, F, "containingGroup");
                null === a || this !== a && !a.Gi(this) || (this === a && D.k("Cannot make a Group a member of itself: " + this.toString()), D.k("Cannot make a Group indirectly contain itself: " + this.toString() + " already contains " + a.toString()));
                this.N(cn);
                var c = this.g;
                null !== b ? rr(b, this) : this instanceof I && null !== c && c.Vl.remove(this);
                this.ul = a;
                null !== a ? sr(a, this) : this instanceof I && null !== c && c.Vl.add(this);
                this.N(Um);
                if (null !== c) {
                    var d = this.data, e = c.ga;
                    null !== d && e instanceof X && e.LB(d, e.Ab(null !== a ? a.data : null))
                }
                d = this.YE;
                null !== d && (e = !0, null !== c && (e = c.$a, c.$a = !0), d(this, b, a), null !== c && (c.$a = e));
                if (this instanceof I)for (c = new L(F), Mh(c, this, !0, 0, !0), c = c.j; c.next();)if (d = c.value, d instanceof G)for (d = d.Kd; d.next();)yn(d.value);
                if (this instanceof G) {
                    for (d = this.Kd; d.next();)yn(d.value);
                    c = this.Xb;
                    null !== c && yn(c)
                }
                this.i("containingGroup", b, a);
                null !== a && (b = a.layer, null !== b && xl(b,
                    -1, a))
            }
        } else D.k("cannot set the Part.containingGroup of a Link or Adornment")
    });
    f = F.prototype;
    f.Xk = function () {
        var a = this.Ka;
        null !== a && (a.K(), null !== a.Qb && a.Qb.K(), a.ig())
    };
    f.qa = function () {
        var a = this.g;
        null !== a && !Mm(this) && !Nm(this) && this.isVisible() && this.cc.F() && a.qa(wl(this, this.cc))
    };
    f.K = function () {
        x.prototype.K.call(this);
        var a = this.g;
        null !== a && (a.Hg.add(this), this instanceof G && null !== this.Xb && Zo(this.Xb), a.Te(!0))
    };
    f.vu = function (a) {
        a || (a = this.ul, null !== a && sr(a, this))
    };
    f.wu = function (a) {
        a || (a = this.ul, null !== a && rr(a, this))
    };
    f.Pn = function () {
        var a = this.data;
        if (null !== a) {
            var b = this.g;
            null !== b && (b = b.ga, null !== b && b.Cy(a))
        }
    };
    D.defineProperty(F, {YE: "containingGroupChanged"}, function () {
        return this.rr
    }, function (a) {
        var b = this.rr;
        b !== a && (null !== a && D.h(a, "function", F, "containingGroupChanged"), this.rr = a, this.i("containingGroupChanged", b, a))
    });
    F.prototype.findSubGraphLevel = function () {
        return tr(this, this)
    };
    function tr(a, b) {
        var c = b.Ka;
        return null !== c ? 1 + tr(a, c) : b instanceof G && (c = b.Xb, null !== c) ? tr(a, c) : 0
    }

    F.prototype.findTopLevelPart = function () {
        return ur(this, this)
    };
    function ur(a, b) {
        var c = b.Ka;
        return null !== c ? ur(a, c) : b instanceof G && (c = b.Xb, null !== c) ? ur(a, c) : b
    }

    D.w(F, {wq: "isTopLevel"}, function () {
        return null !== this.Ka || this instanceof G && null !== this.Xb ? !1 : !0
    });
    F.prototype.isMemberOf = F.prototype.Gi = function (a) {
        return a instanceof I ? vr(this, this, a) : !1
    };
    function vr(a, b, c) {
        if (b === c || null === c)return !1;
        var d = b.Ka;
        return null === d || d !== c && !vr(a, d, c) ? b instanceof G && (b = b.Xb, null !== b) ? vr(a, b, c) : !1 : !0
    }

    F.prototype.findCommonContainingGroup = F.prototype.II = function (a) {
        if (null === a)return null;
        v && D.l(a, F, F, "findCommonContainingGroup:other");
        if (this === a)return this.Ka;
        for (var b = this; null !== b;) {
            b instanceof I && qr(b, !0);
            if (b instanceof G) {
                var c = b.Xb;
                null !== c && (b = c)
            }
            b = b.Ka
        }
        for (var d = null, b = a; null !== b;) {
            if (0 !== (b.S & 1048576)) {
                d = b;
                break
            }
            b instanceof G && (c = b.Xb, null !== c && (b = c));
            b = b.Ka
        }
        for (b = this; null !== b;)b instanceof I && qr(b, !1), b instanceof G && (c = b.Xb, null !== c && (b = c)), b = b.Ka;
        return d
    };
    D.defineProperty(F, {yJ: "layoutConditions"}, function () {
        return this.rs
    }, function (a) {
        var b = this.rs;
        b !== a && (v && D.h(a, "number", F, "layoutConditions"), this.rs = a, this.i("layoutConditions", b, a))
    });
    F.prototype.canLayout = function () {
        if (!this.fB || !this.isVisible())return !1;
        var a = this.layer;
        return null !== a && a.Wc || this instanceof G && this.Jf ? !1 : !0
    };
    F.prototype.invalidateLayout = F.prototype.N = function (a) {
        void 0 === a && (a = 16777215);
        var b;
        this.fB && 0 !== (a & this.yJ) ? (b = this.layer, null !== b && b.Wc || this instanceof G && this.Jf ? b = !1 : (b = this.g, b = null !== b && b.ra.jb ? !1 : !0)) : b = !1;
        if (b)if (b = this.ul, null !== b) {
            var c = b.Yb;
            null !== c ? c.N() : b.N(a)
        } else a = this.g, null !== a && (c = a.Yb, null !== c && c.N())
    };
    function Zm(a) {
        if (!a.isVisible())return !1;
        a = a.layer;
        return null !== a && a.Wc ? !1 : !0
    }

    D.defineProperty(F, {jF: "dragComputation"}, function () {
        return this.Lr
    }, function (a) {
        var b = this.Lr;
        b !== a && (null !== a && D.h(a, "function", F, "dragComputation"), this.Lr = a, this.i("dragComputation", b, a))
    });
    D.defineProperty(F, {qK: "shadowOffset"}, function () {
        return this.un
    }, function (a) {
        var b = this.un;
        b.O(a) || (v && D.l(a, N, F, "shadowOffset"), this.un = a = a.V(), this.qa(), this.i("shadowOffset", b, a))
    });
    D.defineProperty(F, {shadowColor: "shadowColor"}, function () {
        return this.tn
    }, function (a) {
        var b = this.tn;
        b !== a && (v && D.h(a, "string", F, "shadowColor"), this.tn = a, this.qa(), this.i("shadowColor", b, a))
    });
    D.defineProperty(F, {shadowBlur: "shadowBlur"}, function () {
        return this.Qg
    }, function (a) {
        var b = this.Qg;
        b !== a && (v && D.h(a, "number", F, "shadowBlur"), this.Qg = a, this.qa(), this.i("shadowBlur", b, a))
    });
    function ba(a) {
        0 === arguments.length ? F.call(this, dk) : F.call(this, a);
        this.S &= -257;
        this.Il = "Adornment";
        this.Rc = null;
        this.MD = 0;
        this.CE = !1;
        this.Qb = this.rh = null
    }

    D.Ra(ba, F);
    D.ka("Adornment", ba);
    ba.prototype.toString = function () {
        var a = this.Df;
        return "Adornment(" + this.Fd + ")" + (null !== a ? a.toString() : "")
    };
    ba.prototype.updateRelationshipsFromData = function () {
    };
    ba.prototype.Ku = function (a) {
        var b = this.zb.Z, c = this.zb;
        if (b instanceof J && c instanceof y) {
            var d = b.path, c = d.sf;
            b.Ku(a);
            c = d.sf;
            a = this.ya.o;
            b = a.length;
            for (d = 0; d < b; d++) {
                var e = a[d];
                e.Lf && e instanceof y && (e.ab = c)
            }
        }
    };
    D.w(ba, {placeholder: "placeholder"}, function () {
        return this.Qb
    });
    D.defineProperty(ba, {zb: "adornedObject"}, function () {
        return this.Rc
    }, function (a) {
        v && null !== a && D.l(a, P, F, "adornedObject:value");
        var b = this.Df, c = null;
        null !== a && (c = a.Z);
        null === b || null !== a && b === c || b.Uj(this.Fd);
        this.Rc = a;
        null !== c && c.Yl(this.Fd, this)
    });
    D.w(ba, {Df: "adornedPart"}, function () {
        var a = this.Rc;
        return null !== a ? a.Z : null
    });
    ba.prototype.wm = function () {
        var a = this.Rc;
        if (null === a)return !0;
        a = a.Z;
        return null === a || !Mm(a)
    };
    ba.prototype.pe = function () {
        return !1
    };
    D.w(ba, {Ka: "containingGroup"}, function () {
        return null
    });
    ba.prototype.ro = function (a, b, c, d, e, g, h) {
        if (a === pg && "elements" === b)if (e instanceof Xj) {
            var k = e;
            null === this.Qb ? this.Qb = k : this.Qb !== k && D.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")
        } else e instanceof x && (k = e.hu(function (a) {
            return a instanceof Xj
        }), k instanceof Xj && (null === this.Qb ? this.Qb = k : this.Qb !== k && D.k("Cannot insert a second Placeholder into the visual tree of an Adornment."))); else a === qg && "elements" === b && null !== this.Qb && (d === this.Qb ? this.Qb = null : d instanceof x &&
        this.Qb.vm(d) && (this.Qb = null));
        F.prototype.ro.call(this, a, b, c, d, e, g, h)
    };
    ba.prototype.updateAdornments = function () {
    };
    ba.prototype.Pn = function () {
    };
    function G(a) {
        F.call(this, a);
        this.Ca = 13;
        this.wc = new K(J);
        this.Lt = this.rp = this.Kl = this.ts = this.ss = null;
        this.kr = Ud;
        this.ze = this.ai = null;
        this.$s = wr;
        this.Ik = !1
    }

    D.Ra(G, F);
    D.ka("Node", G);
    G.prototype.cloneProtected = function (a) {
        F.prototype.cloneProtected.call(this, a);
        a.Ca = this.Ca;
        a.Ca = this.Ca & -17;
        a.ss = this.ss;
        a.ts = this.ts;
        a.Kl = this.Kl;
        a.Lt = this.Lt;
        a.kr = this.kr.V();
        a.$s = this.$s
    };
    G.prototype.Ei = function (a) {
        F.prototype.Ei.call(this, a);
        a.ig();
        a.ai = this.ai;
        a.ze = null
    };
    var xr;
    G.DirectionDefault = xr = D.s(G, "DirectionDefault", 0);
    G.DirectionAbsolute = D.s(G, "DirectionAbsolute", 1);
    var yr;
    G.DirectionRotatedNode = yr = D.s(G, "DirectionRotatedNode", 2);
    var Fo;
    G.DirectionRotatedNodeOrthogonal = Fo = D.s(G, "DirectionRotatedNodeOrthogonal", 3);
    G.SpreadingNone = D.s(G, "SpreadingNone", 10);
    var wr;
    G.SpreadingEvenly = wr = D.s(G, "SpreadingEvenly", 11);
    var zr;
    G.SpreadingPacked = zr = D.s(G, "SpreadingPacked", 12);
    function Ar(a, b) {
        null !== b && (null === a.ai && (a.ai = new L(Hl)), a.ai.add(b))
    }

    function Br(a, b, c, d) {
        if (null === b || null === a.ai)return null;
        for (var e = a.ai.j; e.next();) {
            var g = e.value;
            if (g.Cq === a && g.Pu === b && g.uy === c && g.vy === d || g.Cq === b && g.Pu === a && g.uy === d && g.vy === c)return g
        }
        return null
    }

    G.prototype.invalidateLinkBundle = function (a, b, c) {
        if (void 0 === b || null === b)b = "";
        if (void 0 === c || null === c)c = "";
        a = Br(this, a, b, c);
        null !== a && a.tq()
    };
    G.prototype.ro = function (a, b, c, d, e, g, h) {
        a === pg && "elements" === b ? this.ze = null : a === qg && "elements" === b && (null === this.g ? this.ze = null : d instanceof P && gp(this, d, function (a, b) {
            dp(a, b, !0)
        }));
        F.prototype.ro.call(this, a, b, c, d, e, g, h)
    };
    G.prototype.invalidateConnectedLinks = G.prototype.ig = function (a) {
        void 0 === a && (a = null);
        for (var b = this.Kd; b.next();) {
            var c = b.value;
            null !== a && a.contains(c) || (Cr(this, c.Mc), Cr(this, c.ld), c.hc())
        }
    };
    function Qo(a, b) {
        for (var c = a.Kd; c.next();) {
            var d = c.value;
            if (d.Mc === b || d.ld === b)Cr(a, d.Mc), Cr(a, d.ld), d.hc()
        }
    }

    function Cr(a, b) {
        if (null !== b) {
            var c = b.Zs;
            null !== c && c.tq();
            c = a.Ka;
            null === c || c.ud || Cr(c, c.nm(""))
        }
    }

    G.prototype.wm = function () {
        return !0
    };
    D.defineProperty(G, {YJ: "portSpreading"}, function () {
        return this.$s
    }, function (a) {
        var b = this.$s;
        b !== a && (v && D.Da(a, G, G, "portSpreading"), this.$s = a, this.i("portSpreading", b, a), a = this.g, null !== a && a.ra.jb || this.ig())
    });
    D.defineProperty(G, {wA: "avoidable"}, function () {
        return 0 !== (this.Ca & 8)
    }, function (a) {
        var b = 0 !== (this.Ca & 8);
        if (b !== a) {
            v && D.h(a, "boolean", G, "avoidable");
            this.Ca ^= 8;
            var c = this.g;
            null !== c && c.cB(this);
            this.i("avoidable", b, a)
        }
    });
    D.defineProperty(G, {$H: "avoidableMargin"}, function () {
        return this.kr
    }, function (a) {
        "number" === typeof a ? a = new Kb(a) : D.l(a, Kb, G, "avoidableMargin");
        var b = this.kr;
        if (!b.O(a)) {
            this.kr = a = a.V();
            var c = this.g;
            null !== c && c.cB(this);
            this.i("avoidableMargin", b, a)
        }
    });
    G.prototype.getAvoidableRect = function (a) {
        a.set(this.$);
        a.nx(this.$H);
        return a
    };
    G.prototype.findVisibleNode = function () {
        for (var a = this; null !== a && !a.isVisible();)a = a.Ka;
        return a
    };
    G.prototype.isVisible = function () {
        if (!F.prototype.isVisible.call(this))return !1;
        var a = !0, b = Dl, c = this.g;
        if (null !== c) {
            a = c.Wa;
            if (a.vf && (a = a.hn.na(this), null !== a && a.zy))return !0;
            a = c.ce;
            b = c.cC
        }
        if (b === Dl) {
            if (c = this.Sk(), null !== c && !c.Bc)return !1
        } else if (b === gn) {
            if (c = a ? this.uF() : this.vF(), 0 < c.count && c.all(function (a) {
                    return !a.Bc
                }))return !1
        } else if (b === hn && (c = a ? this.uF() : this.vF(), 0 < c.count && c.any(function (a) {
                return !a.Bc
            })))return !1;
        c = this.Xb;
        return null !== c ? c.isVisible() : !0
    };
    G.prototype.Ld = function (a) {
        F.prototype.Ld.call(this, a);
        for (var b = this.Kd; b.next();)b.value.Ld(a)
    };
    D.w(G, {Kd: "linksConnected"}, function () {
        return this.wc.j
    });
    G.prototype.findLinksConnected = G.prototype.sF = function (a) {
        void 0 === a && (a = null);
        if (null === a)return this.wc.j;
        v && D.h(a, "string", G, "findLinksConnected:pid");
        var b = new Ma(this.wc), c = this;
        b.Eq = function (b) {
            return b.Y === c && b.gg === a || b.ba === c && b.mh === a
        };
        return b
    };
    G.prototype.findLinksOutOf = G.prototype.Mx = function (a) {
        void 0 === a && (a = null);
        v && null !== a && D.h(a, "string", G, "findLinksOutOf:pid");
        var b = new Ma(this.wc), c = this;
        b.Eq = function (b) {
            return b.Y !== c ? !1 : null === a ? !0 : b.gg === a
        };
        return b
    };
    G.prototype.findLinksInto = G.prototype.$g = function (a) {
        void 0 === a && (a = null);
        v && null !== a && D.h(a, "string", G, "findLinksInto:pid");
        var b = new Ma(this.wc), c = this;
        b.Eq = function (b) {
            return b.ba !== c ? !1 : null === a ? !0 : b.mh === a
        };
        return b
    };
    G.prototype.findNodesConnected = G.prototype.tF = function (a) {
        void 0 === a && (a = null);
        v && null !== a && D.h(a, "string", G, "findNodesConnected:pid");
        for (var b = null, c = null, d = this.wc.j; d.next();) {
            var e = d.value;
            if (e.Y === this) {
                if (null === a || e.gg === a)e = e.ba, null !== b ? b.add(e) : null !== c && c !== e ? (b = new L(G), b.add(c), b.add(e)) : c = e
            } else e.ba !== this || null !== a && e.mh !== a || (e = e.Y, null !== b ? b.add(e) : null !== c && c !== e ? (b = new L(G), b.add(c), b.add(e)) : c = e)
        }
        return null !== b ? b.j : null !== c ? new Ka(c) : Ja
    };
    G.prototype.findNodesOutOf = G.prototype.vF = function (a) {
        void 0 === a && (a = null);
        v && null !== a && D.h(a, "string", G, "findNodesOutOf:pid");
        for (var b = null, c = null, d = this.wc.j; d.next();) {
            var e = d.value;
            e.Y !== this || null !== a && e.gg !== a || (e = e.ba, null !== b ? b.add(e) : null !== c && c !== e ? (b = new L(G), b.add(c), b.add(e)) : c = e)
        }
        return null !== b ? b.j : null !== c ? new Ka(c) : Ja
    };
    G.prototype.findNodesInto = G.prototype.uF = function (a) {
        void 0 === a && (a = null);
        v && null !== a && D.h(a, "string", G, "findNodesInto:pid");
        for (var b = null, c = null, d = this.wc.j; d.next();) {
            var e = d.value;
            e.ba !== this || null !== a && e.mh !== a || (e = e.Y, null !== b ? b.add(e) : null !== c && c !== e ? (b = new L(G), b.add(c), b.add(e)) : c = e)
        }
        return null !== b ? b.j : null !== c ? new Ka(c) : Ja
    };
    G.prototype.findLinksBetween = function (a, b, c) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        v && (D.l(a, G, G, "findLinksBetween:othernode"), null !== b && D.h(b, "string", G, "findLinksBetween:pid"), null !== c && D.h(c, "string", G, "findLinksBetween:otherpid"));
        var d = new Ma(this.wc), e = this;
        d.Eq = function (d) {
            return (d.Y !== e || d.ba !== a || null !== b && d.gg !== b || null !== c && d.mh !== c) && (d.Y !== a || d.ba !== e || null !== c && d.gg !== c || null !== b && d.mh !== b) ? !1 : !0
        };
        return d
    };
    G.prototype.findLinksTo = function (a, b, c) {
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        v && (D.l(a, G, G, "findLinksTo:othernode"), null !== b && D.h(b, "string", G, "findLinksTo:pid"), null !== c && D.h(c, "string", G, "findLinksTo:otherpid"));
        var d = new Ma(this.wc), e = this;
        d.Eq = function (d) {
            return d.Y !== e || d.ba !== a || null !== b && d.gg !== b || null !== c && d.mh === c ? !1 : !0
        };
        return d
    };
    D.defineProperty(G, {AJ: "linkConnected"}, function () {
        return this.ss
    }, function (a) {
        var b = this.ss;
        b !== a && (null !== a && D.h(a, "function", G, "linkConnected"), this.ss = a, this.i("linkConnected", b, a))
    });
    D.defineProperty(G, {BJ: "linkDisconnected"}, function () {
        return this.ts
    }, function (a) {
        var b = this.ts;
        b !== a && (null !== a && D.h(a, "function", G, "linkDisconnected"), this.ts = a, this.i("linkDisconnected", b, a))
    });
    D.defineProperty(G, {ky: "linkValidation"}, function () {
        return this.Kl
    }, function (a) {
        var b = this.Kl;
        b !== a && (null !== a && D.h(a, "function", G, "linkValidation"), this.Kl = a, this.i("linkValidation", b, a))
    });
    function Dr(a, b, c) {
        Cr(a, c);
        var d = a.wc.contains(b);
        d || a.wc.add(b);
        if (!d || b.Y === b.ba) {
            var e = a.AJ;
            if (null !== e) {
                var g = !0, h = a.g;
                null !== h && (g = h.$a, h.$a = !0);
                e(a, b, c);
                null !== h && (h.$a = g)
            }
        }
        !d && b.Xc && (c = b.Y, b = b.ba, null !== c && null !== b && c !== b && (d = !0, h = a.g, null !== h && (d = h.ce), a = d ? b : c, e = d ? c : b, a.Ik || (a.Ik = e), !e.Oj || null !== h && h.ra.jb || (d ? c === e && (e.Oj = !1) : b === e && (e.Oj = !1))))
    }

    function Er(a, b, c) {
        Cr(a, c);
        var d = a.wc.remove(b);
        if (d || b.ba === b.Y) {
            var e = a.BJ, g = a.g;
            if (null !== e) {
                var h = !0;
                null !== g && (h = g.$a, g.$a = !0);
                e(a, b, c);
                null !== g && (g.$a = h)
            }
        }
        d && b.Xc && (c = !0, null !== g && (c = g.ce), a = c ? b.ba : b.Y, b = c ? b.Y : b.ba, null !== a && (a.Ik = !1), null === b || b.Oj || (0 === b.wc.count ? (b.Ik = null, null !== g && g.ra.jb || (b.Oj = !0)) : Kn(b)))
    }

    function Kn(a) {
        a.Ik = !1;
        if (0 !== a.wc.count) {
            var b = !0, c = a.g;
            if (null === c || !c.ra.jb) {
                null !== c && (b = c.ce);
                for (c = a.wc.j; c.next();) {
                    var d = c.value;
                    if (d.Xc)if (b) {
                        if (d.Y === a) {
                            a.Oj = !1;
                            return
                        }
                    } else if (d.ba === a) {
                        a.Oj = !1;
                        return
                    }
                }
                a.Oj = !0
            }
        }
    }

    G.prototype.updateRelationshipsFromData = function () {
        F.prototype.updateRelationshipsFromData.call(this);
        var a = this.data;
        if (null !== a) {
            var b = this.g;
            if (null !== b) {
                var c = b.ga;
                c instanceof zg && (a = c.Wn(a), a = b.Re(a), c = this.Sk(), a !== c && (c = this.Sn(), null !== a ? null !== c ? b.ce ? c.Y = a : c.ba = a : nn(b, a, this) : null !== c && bn(b, c, !1)))
            }
        }
    };
    G.prototype.vu = function (a) {
        F.prototype.vu.call(this, a);
        a || (Kn(this), a = this.rp, null !== a && Fr(a, this))
    };
    G.prototype.wu = function (a) {
        F.prototype.wu.call(this, a);
        a || (a = this.rp, null !== a && null !== a.Bf && (a.Bf.remove(this), a.K()))
    };
    G.prototype.Pn = function () {
        if (0 < this.wc.count) {
            var a = this.g;
            if (null !== a)for (var b = a.xb.iF, c = this.wc.copy().j; c.next();) {
                var d = c.value;
                b ? a.remove(d) : (d.Y === this && (d.Y = null), d.ba === this && (d.ba = null))
            }
        }
        this.Xb = null;
        F.prototype.Pn.call(this)
    };
    D.w(G, {Jf: "isLinkLabel"}, function () {
        return null !== this.rp
    });
    D.defineProperty(G, {Xb: "labeledLink"}, function () {
        return this.rp
    }, function (a) {
        var b = this.rp;
        if (b !== a) {
            v && null !== a && D.l(a, J, G, "labeledLink");
            var c = this.g, d = this.data;
            if (null !== b) {
                null !== b.Bf && (b.Bf.remove(this), b.K());
                if (null !== c && null !== d && !c.ra.jb) {
                    var e = b.data, g = c.ga;
                    if (null !== e && g instanceof X) {
                        var h = g.Ab(d);
                        void 0 !== h && g.cK(e, h)
                    }
                }
                this.Ka = null
            }
            this.rp = a;
            null !== a && (Fr(a, this), null === c || null === d || c.ra.jb || (e = a.data, g = c.ga, null !== e && g instanceof X && (h = g.Ab(d), void 0 !== h && g.JE(e, h))), this.Ka = a.Ka);
            Zo(this);
            this.i("labeledLink", b, a)
        }
    });
    G.prototype.findPort = G.prototype.nm = function (a) {
        v && D.h(a, "string", G, "findPort:pid");
        if (null === this.ze) {
            if ("" === a && !1 === this.Wk)return this;
            ep(this)
        }
        var b = this.ze.na(a);
        return null !== b || "" !== a && (b = this.ze.na(""), null !== b) ? b : this
    };
    D.w(G, {port: "port"}, function () {
        return this.nm("")
    });
    D.w(G, {ports: "ports"}, function () {
        null === this.ze && ep(this);
        return this.ze.fG
    });
    function ep(a) {
        null === a.ze ? a.ze = new ma("string", P) : a.ze.clear();
        gp(a, a, function (a, c) {
            var d = c.vd;
            null !== d && a.ze.add(d, c)
        });
        0 === a.ze.count && a.ze.add("", a)
    }

    function dp(a, b, c) {
        var d = b.vd;
        if (null !== d && (null !== a.ze && a.ze.remove(d), b = a.g, null !== b && c)) {
            c = null;
            for (d = a.sF(d); d.next();)a = d.value, null === c && (c = D.mb()), c.push(a);
            if (null !== c) {
                for (d = 0; d < c.length; d++)a = c[d], b.remove(a);
                D.za(c)
            }
        }
    }

    G.prototype.isInTreeOf = function (a) {
        if (null === a || a === this)return !1;
        var b = !0, c = this.g;
        null !== c && (b = c.ce);
        c = this;
        if (b)for (; c !== a;) {
            for (var b = null, d = c.wc.j; d.next();) {
                var e = d.value;
                if (e.Xc && (b = e.Y, b !== c && b !== this))break
            }
            if (b === this || null === b || b === c)return !1;
            c = b
        } else for (; c !== a;) {
            b = null;
            for (d = c.wc.j; d.next() && (e = d.value, !e.Xc || (b = e.ba, b === c || b === this)););
            if (b === this || null === b || b === c)return !1;
            c = b
        }
        return !0
    };
    G.prototype.findTreeRoot = function () {
        var a = !0, b = this.g;
        null !== b && (a = b.ce);
        b = this;
        if (a)for (; ;) {
            for (var a = null, c = b.wc.j; c.next();) {
                var d = c.value;
                if (d.Xc && (a = d.Y, a !== b && a !== this))break
            }
            if (a === this)return this;
            if (null === a || a === b)return b;
            b = a
        } else for (; ;) {
            a = null;
            for (c = b.wc.j; c.next() && (d = c.value, !d.Xc || (a = d.ba, a === b || a === this)););
            if (a === this)return this;
            if (null === a || a === b)return b;
            b = a
        }
    };
    G.prototype.findCommonTreeParent = function (a) {
        if (null === a)return null;
        v && D.l(a, G, G, "findCommonTreeParent:other");
        if (this === a)return this;
        for (var b = this; null !== b;)qr(b, !0), b = b.Sk();
        for (var c = null, b = a; null !== b;) {
            if (0 !== (b.S & 1048576)) {
                c = b;
                break
            }
            b = b.Sk()
        }
        for (b = this; null !== b;)qr(b, !1), b = b.Sk();
        return c
    };
    G.prototype.findTreeParentLink = G.prototype.Sn = function () {
        var a = !0, b = this.g;
        null !== b && (a = b.ce);
        b = this.wc.j;
        if (a)for (; b.next();) {
            if (a = b.value, a.Xc && a.Y !== this)return a
        } else for (; b.next();)if (a = b.value, a.Xc && a.ba !== this)return a;
        return null
    };
    G.prototype.findTreeParentNode = G.prototype.Sk = function () {
        var a = this.Ik;
        if (null === a)return null;
        if (a instanceof G)return a;
        var b = !0, a = this.g;
        null !== a && (b = a.ce);
        a = this.wc.j;
        if (b)for (; a.next();) {
            if (b = a.value, b.Xc && (b = b.Y, b !== this))return this.Ik = b
        } else for (; a.next();)if (b = a.value, b.Xc && (b = b.ba, b !== this))return this.Ik = b;
        return this.Ik = null
    };
    G.prototype.findTreeParentChain = function () {
        function a(b, d) {
            if (null !== b) {
                d.add(b);
                var e = b.Sn();
                null !== e && (d.add(e), a(b.Sk(), d))
            }
        }

        var b = new L(F);
        a(this, b);
        return b
    };
    G.prototype.findTreeLevel = function () {
        return Gr(this, this)
    };
    function Gr(a, b) {
        var c = b.Sk();
        return null === c ? 0 : 1 + Gr(a, c)
    }

    G.prototype.findTreeChildrenLinks = G.prototype.Ox = function () {
        var a = !0, b = this.g;
        null !== b && (a = b.ce);
        var b = new Ma(this.wc), c = this;
        b.Eq = a ? function (a) {
            return a.Xc && a.Y === c ? !0 : !1
        } : function (a) {
            return a.Xc && a.ba === c ? !0 : !1
        };
        return b
    };
    G.prototype.findTreeChildrenNodes = G.prototype.xF = function () {
        var a = !0, b = this.g;
        null !== b && (a = b.ce);
        var c = b = null, d = this.wc.j;
        if (a)for (; d.next();)a = d.value, a.Xc && a.Y === this && (a = a.ba, null !== b ? b.add(a) : null !== c && c !== a ? (b = new K(G), b.add(c), b.add(a)) : c = a); else for (; d.next();)a = d.value, a.Xc && a.ba === this && (a = a.Y, null !== b ? b.add(a) : null !== c && c !== a ? (b = new K(G), b.add(c), b.add(a)) : c = a);
        return null !== b ? b.j : null !== c ? new Ka(c) : Ja
    };
    G.prototype.findTreeParts = function (a) {
        void 0 === a && (a = Infinity);
        D.h(a, "number", G, "findTreeParts:level");
        var b = new L(F);
        Mh(b, this, !1, a, !0);
        return b
    };
    G.prototype.collapseTree = G.prototype.collapseTree = function (a) {
        void 0 === a && (a = 1);
        D.p(a, G, "collapseTree:level");
        1 > a && (a = 1);
        var b = this.g;
        if (null !== b && !b.Qh) {
            b.Qh = !0;
            var c = new L(G);
            c.add(this);
            Hr(this, c, b.ce, a, b.Wa, this, b.cC === Dl);
            b.Qh = !1
        }
    };
    function Hr(a, b, c, d, e, g, h) {
        if (1 < d)for (var k = c ? a.Mx() : a.$g(); k.next();) {
            var l = k.value;
            l.Xc && (l = l.UA(a), null === l || l === a || b.contains(l) || (b.add(l), Hr(l, b, c, d - 1, e, g, h)))
        } else Ir(a, b, c, e, g, h)
    }

    function Ir(a, b, c, d, e, g) {
        for (var h = e === a ? !0 : a.Bc, k = c ? a.Mx() : a.$g(); k.next();) {
            var l = k.value;
            l.Xc && (l = l.UA(a), null === l || l === a || b.contains(l) || (b.add(l), h && (g && pl(d, l, e), l.Xk(), l.Ld(!1)), l.Bc && (l.Wq = l.Bc, Ir(l, b, c, d, e, g))))
        }
        a.Bc = !1
    }

    G.prototype.expandTree = G.prototype.expandTree = function (a) {
        void 0 === a && (a = 2);
        D.p(a, G, "expandTree:level");
        2 > a && (a = 2);
        var b = this.g;
        if (null !== b && !b.Qh) {
            b.Qh = !0;
            var c = new L(G);
            c.add(this);
            Jr(this, c, b.ce, a, b.Wa, this, b.cC === Dl);
            b.Qh = !1
        }
    };
    function Jr(a, b, c, d, e, g, h) {
        for (var k = g === a ? !1 : a.Bc, l = c ? a.Mx() : a.$g(); l.next();) {
            var m = l.value;
            m.Xc && (k || m.vg || m.hc(), m = m.UA(a), null !== m && m !== a && !b.contains(m) && (b.add(m), k || (m.Ld(!0), m.Xk(), h && ol(e, m, g)), 2 < d || m.Wq)) && (m.Wq = !1, Jr(m, b, c, d - 1, e, g, h))
        }
        a.Bc = !0
    }

    D.defineProperty(G, {Bc: "isTreeExpanded"}, function () {
        return 0 !== (this.Ca & 1)
    }, function (a) {
        var b = 0 !== (this.Ca & 1);
        if (b !== a) {
            v && D.h(a, "boolean", G, "isTreeExpanded");
            this.Ca ^= 1;
            var c = this.g;
            this.i("isTreeExpanded", b, a);
            b = this.DK;
            if (null !== b) {
                var d = !0;
                null !== c && (d = c.$a, c.$a = !0);
                b(this);
                null !== c && (c.$a = d)
            }
            null !== c && c.ra.jb ? this.Ld(a) : a ? this.expandTree() : this.collapseTree()
        }
    });
    D.defineProperty(G, {Wq: "wasTreeExpanded"}, function () {
        return 0 !== (this.Ca & 2)
    }, function (a) {
        var b = 0 !== (this.Ca & 2);
        b !== a && (v && D.h(a, "boolean", G, "wasTreeExpanded"), this.Ca ^= 2, this.i("wasTreeExpanded", b, a))
    });
    D.defineProperty(G, {DK: "treeExpandedChanged"}, function () {
        return this.Lt
    }, function (a) {
        var b = this.Lt;
        b !== a && (null !== a && D.h(a, "function", G, "treeExpandedChanged"), this.Lt = a, this.i("treeExpandedChanged", b, a))
    });
    D.defineProperty(G, {Oj: "isTreeLeaf"}, function () {
        return 0 !== (this.Ca & 4)
    }, function (a) {
        var b = 0 !== (this.Ca & 4);
        b !== a && (v && D.h(a, "boolean", G, "isTreeLeaf"), this.Ca ^= 4, this.i("isTreeLeaf", b, a))
    });
    function J() {
        F.call(this, rj);
        this.fc = 8;
        this.Dg = null;
        this.gi = "";
        this.Ug = this.Wr = null;
        this.Ai = "";
        this.Kt = null;
        this.cr = Mj;
        this.xr = 0;
        this.Ar = Mj;
        this.Br = NaN;
        this.nn = Kr;
        this.yt = .5;
        this.Bf = null;
        this.dd = (new K(N)).freeze();
        this.rh = this.UC = this.OC = this.Ni = this.Zi = this.ab = this.Mw = this.Ip = this.ef = null;
        this.kA = new N;
        this.aa = this.nE = this.mE = null
    }

    D.Ra(J, F);
    D.ka("Link", J);
    J.prototype.cloneProtected = function (a) {
        F.prototype.cloneProtected.call(this, a);
        a.fc = this.fc & -113;
        a.gi = this.gi;
        a.Wr = this.Wr;
        a.Ai = this.Ai;
        a.Kt = this.Kt;
        a.cr = this.cr;
        a.xr = this.xr;
        a.Ar = this.Ar;
        a.Br = this.Br;
        a.nn = this.nn;
        a.yt = this.yt;
        null !== this.aa && (a.aa = this.aa.copy())
    };
    J.prototype.Ei = function (a) {
        F.prototype.Ei.call(this, a);
        this.gi = a.gi;
        this.Ai = a.Ai;
        a.ef = null;
        a.hc();
        a.Ni = this.Ni
    };
    J.prototype.qc = function (a) {
        a.Oe === J ? 2 === (a.value & 2) ? this.Ey = a : a === Tj || a === tj || a === sj ? this.jf = a : a === Lr || a === Mr || a === Nr ? this.Tt = a : a !== Kr && a !== Mj && D.k("Unknown Link enum value for a Link property: " + a) : F.prototype.qc.call(this, a)
    };
    var Kr;
    J.Normal = Kr = D.s(J, "Normal", 1);
    J.Orthogonal = D.s(J, "Orthogonal", 2);
    J.AvoidsNodes = D.s(J, "AvoidsNodes", 6);
    var Or;
    J.AvoidsNodesStraight = Or = D.s(J, "AvoidsNodesStraight", 7);
    var Mj;
    J.None = Mj = D.s(J, "None", 0);
    var Tj;
    J.Bezier = Tj = D.s(J, "Bezier", 9);
    var tj;
    J.JumpGap = tj = D.s(J, "JumpGap", 10);
    var sj;
    J.JumpOver = sj = D.s(J, "JumpOver", 11);
    var Lr;
    J.End = Lr = D.s(J, "End", 17);
    var Mr;
    J.Scale = Mr = D.s(J, "Scale", 18);
    var Nr;
    J.Stretch = Nr = D.s(J, "Stretch", 19);
    var wq;
    J.OrientAlong = wq = D.s(J, "OrientAlong", 21);
    var Xp;
    J.OrientPlus90 = Xp = D.s(J, "OrientPlus90", 22);
    var Zp;
    J.OrientMinus90 = Zp = D.s(J, "OrientMinus90", 23);
    var Pr;
    J.OrientOpposite = Pr = D.s(J, "OrientOpposite", 24);
    var Qr;
    J.OrientUpright = Qr = D.s(J, "OrientUpright", 25);
    var Yp;
    J.OrientPlus90Upright = Yp = D.s(J, "OrientPlus90Upright", 26);
    var $p;
    J.OrientMinus90Upright = $p = D.s(J, "OrientMinus90Upright", 27);
    var aq;
    J.OrientUpright45 = aq = D.s(J, "OrientUpright45", 28);
    f = J.prototype;
    f.Zd = function () {
        null === this.aa && (this.aa = new Eo)
    };
    f.wm = function () {
        var a = this.Y;
        if (null !== a) {
            var b = a.findVisibleNode();
            null !== b && (a = b);
            if (Mm(a) || Nm(a))return !1
        }
        a = this.ba;
        return null !== a && (b = a.findVisibleNode(), null !== b && (a = b), Mm(a) || Nm(a)) ? !1 : !0
    };
    f.NB = function () {
        return !1
    };
    f.OB = function () {
    };
    f.pe = function () {
        return !1
    };
    J.prototype.computeAngle = function (a, b, c) {
        return J.computeAngle(b, c)
    };
    J.computeAngle = function (a, b) {
        var c = 0;
        switch (a) {
            default:
            case Mj:
                c = 0;
                break;
            case wq:
                c = b;
                break;
            case Xp:
                c = b + 90;
                break;
            case Zp:
                c = b - 90;
                break;
            case Pr:
                c = b + 180;
                break;
            case Qr:
                c = Ve(b);
                90 < c && 270 > c && (c -= 180);
                break;
            case Yp:
                c = Ve(b + 90);
                90 < c && 270 > c && (c -= 180);
                break;
            case $p:
                c = Ve(b - 90);
                90 < c && 270 > c && (c -= 180);
                break;
            case aq:
                c = Ve(b);
                if (45 < c && 135 > c || 225 < c && 315 > c)return 0;
                90 < c && 270 > c && (c -= 180)
        }
        return Ve(c)
    };
    D.defineProperty(J, {Y: "fromNode"}, function () {
        return this.Dg
    }, function (a) {
        var b = this.Dg;
        if (b !== a) {
            v && null !== a && D.l(a, G, J, "fromNode");
            var c = this.Mc;
            null !== b && (this.Ug !== b && Er(b, this, c), Rr(this), this.N(cn));
            this.Dg = a;
            null !== a && this.Ld(a.isVisible());
            this.Zi = null;
            this.hc();
            var d = this.g;
            if (null !== d) {
                var e = this.data, g = d.ga;
                if (null !== e)if (g instanceof X) {
                    var h = null !== a ? a.data : null;
                    g.JB(e, g.Ab(h))
                } else g instanceof zg && (h = null !== a ? a.data : null, d.ce ? g.Ji(e, g.Ab(h)) : (null !== b && g.Ji(b.data, void 0), g.Ji(h, g.Ab(null !==
                this.Ug ? this.Ug.data : null))))
            }
            e = this.Mc;
            g = this.AF;
            null !== g && (h = !0, null !== d && (h = d.$a, d.$a = !0), g(this, c, e), null !== d && (d.$a = h));
            null !== a && (this.Ug !== a && Dr(a, this, e), Sr(this), this.N(Um));
            this.i("fromNode", b, a);
            yn(this)
        }
    });
    D.defineProperty(J, {gg: "fromPortId"}, function () {
        return this.gi
    }, function (a) {
        var b = this.gi;
        if (b !== a) {
            v && D.h(a, "string", J, "fromPortId");
            var c = this.Mc;
            null !== c && Cr(this.Y, c);
            Rr(this);
            this.gi = a;
            var d = this.Mc;
            null !== d && Cr(this.Y, d);
            var e = this.g;
            if (null !== e) {
                var g = this.data, h = e.ga;
                null !== g && h instanceof X && h.KB(g, a)
            }
            c !== d && (this.Zi = null, this.hc(), g = this.AF, null !== g && (h = !0, null !== e && (h = e.$a, e.$a = !0), g(this, c, d), null !== e && (e.$a = h)));
            Sr(this);
            this.i("fromPortId", b, a)
        }
    });
    D.w(J, {Mc: "fromPort"}, function () {
        var a = this.Dg;
        return null === a ? null : a.nm(this.gi)
    });
    D.defineProperty(J, {AF: "fromPortChanged"}, function () {
        return this.Wr
    }, function (a) {
        var b = this.Wr;
        b !== a && (null !== a && D.h(a, "function", J, "fromPortChanged"), this.Wr = a, this.i("fromPortChanged", b, a))
    });
    D.defineProperty(J, {ba: "toNode"}, function () {
        return this.Ug
    }, function (a) {
        var b = this.Ug;
        if (b !== a) {
            v && null !== a && D.l(a, G, J, "toNode");
            var c = this.ld;
            null !== b && (this.Dg !== b && Er(b, this, c), Rr(this), this.N(cn));
            this.Ug = a;
            null !== a && this.Ld(a.isVisible());
            this.Zi = null;
            this.hc();
            var d = this.g;
            if (null !== d) {
                var e = this.data, g = d.ga;
                if (null !== e)if (g instanceof X) {
                    var h = null !== a ? a.data : null;
                    g.PB(e, g.Ab(h))
                } else g instanceof zg && (h = null !== a ? a.data : null, d.ce ? (null !== b && g.Ji(b.data, void 0), g.Ji(h, g.Ab(null !== this.Dg ? this.Dg.data :
                    null))) : g.Ji(e, g.Ab(h)))
            }
            e = this.ld;
            g = this.hH;
            null !== g && (h = !0, null !== d && (h = d.$a, d.$a = !0), g(this, c, e), null !== d && (d.$a = h));
            null !== a && (this.Dg !== a && Dr(a, this, e), Sr(this), this.N(Um));
            this.i("toNode", b, a);
            yn(this)
        }
    });
    D.defineProperty(J, {mh: "toPortId"}, function () {
        return this.Ai
    }, function (a) {
        var b = this.Ai;
        if (b !== a) {
            v && D.h(a, "string", J, "toPortId");
            var c = this.ld;
            null !== c && Cr(this.ba, c);
            Rr(this);
            this.Ai = a;
            var d = this.ld;
            null !== d && Cr(this.ba, d);
            var e = this.g;
            if (null !== e) {
                var g = this.data, h = e.ga;
                null !== g && h instanceof X && h.QB(g, a)
            }
            c !== d && (this.Zi = null, this.hc(), g = this.hH, null !== g && (h = !0, null !== e && (h = e.$a, e.$a = !0), g(this, c, d), null !== e && (e.$a = h)));
            Sr(this);
            this.i("toPortId", b, a)
        }
    });
    D.w(J, {ld: "toPort"}, function () {
        var a = this.Ug;
        return null === a ? null : a.nm(this.Ai)
    });
    D.defineProperty(J, {hH: "toPortChanged"}, function () {
        return this.Kt
    }, function (a) {
        var b = this.Kt;
        b !== a && (null !== a && D.h(a, "function", J, "toPortChanged"), this.Kt = a, this.i("toPortChanged", b, a))
    });
    D.defineProperty(J, {Gb: "fromSpot"}, function () {
        return null !== this.aa ? this.aa.kk : Wc
    }, function (a) {
        this.Zd();
        var b = this.aa.kk;
        b.O(a) || (v && D.l(a, Q, J, "fromSpot"), a = a.V(), this.aa.kk = a, this.i("fromSpot", b, a), this.hc())
    });
    D.defineProperty(J, {pm: "fromEndSegmentLength"}, function () {
        return null !== this.aa ? this.aa.ik : NaN
    }, function (a) {
        this.Zd();
        var b = this.aa.ik;
        b !== a && (v && D.h(a, "number", J, "fromEndSegmentLength"), 0 > a && D.ua(a, ">= 0", J, "fromEndSegmentLength"), this.aa.ik = a, this.i("fromEndSegmentLength", b, a), this.hc())
    });
    D.defineProperty(J, {qu: "fromEndSegmentDirection"}, function () {
        return null !== this.aa ? this.aa.hk : xr
    }, function (a) {
        this.Zd();
        var b = this.aa.hk;
        b !== a && (D.Qn("Link.fromEndSegmentDirection", "2.0"), v && D.Da(a, G, J, "fromEndSegmentDirection"), this.aa.hk = a, this.i("fromEndSegmentDirection", b, a), this.hc())
    });
    D.defineProperty(J, {ru: "fromShortLength"}, function () {
        return null !== this.aa ? this.aa.jk : NaN
    }, function (a) {
        this.Zd();
        var b = this.aa.jk;
        b !== a && (v && D.h(a, "number", J, "fromShortLength"), this.aa.jk = a, this.i("fromShortLength", b, a), this.hc())
    });
    D.defineProperty(J, {Hb: "toSpot"}, function () {
        return null !== this.aa ? this.aa.Hk : Wc
    }, function (a) {
        this.Zd();
        var b = this.aa.Hk;
        b.O(a) || (v && D.l(a, Q, J, "toSpot"), a = a.V(), this.aa.Hk = a, this.i("toSpot", b, a), this.hc())
    });
    D.defineProperty(J, {Em: "toEndSegmentLength"}, function () {
        return null !== this.aa ? this.aa.Fk : NaN
    }, function (a) {
        this.Zd();
        var b = this.aa.Fk;
        b !== a && (v && D.h(a, "number", J, "toEndSegmentLength"), 0 > a && D.ua(a, ">= 0", J, "toEndSegmentLength"), this.aa.Fk = a, this.i("toEndSegmentLength", b, a), this.hc())
    });
    D.defineProperty(J, {iv: "toEndSegmentDirection"}, function () {
        return null !== this.aa ? this.aa.Ek : xr
    }, function (a) {
        this.Zd();
        var b = this.aa.Ek;
        b !== a && (D.Qn("Link.toEndSegmentDirection", "2.0"), v && D.Da(a, G, J, "toEndSegmentDirection"), this.aa.Ek = a, this.i("toEndSegmentDirection", b, a), this.hc())
    });
    D.defineProperty(J, {jv: "toShortLength"}, function () {
        return null !== this.aa ? this.aa.Gk : NaN
    }, function (a) {
        this.Zd();
        var b = this.aa.Gk;
        b !== a && (v && D.h(a, "number", J, "toShortLength"), this.aa.Gk = a, this.i("toShortLength", b, a), this.hc())
    });
    function yn(a) {
        var b = a.Y, c = a.ba, d = null, b = d = null !== b ? null !== c ? b.II(c) : b.Ka : null !== c ? c.Ka : null, c = a.ul;
        if (c !== b) {
            null !== c && rr(c, a);
            a.ul = b;
            null !== b && sr(b, a);
            var e = a.YE;
            if (null !== e) {
                var g = !0, h = a.g;
                null !== h && (g = h.$a, h.$a = !0);
                e(a, c, b);
                null !== h && (h.$a = g)
            }
            !a.vg || a.mE !== c && a.nE !== c || a.hc()
        }
        if (a.nJ)for (a = a.wf; a.next();)a.value.Ka = d
    }

    J.prototype.Xk = function () {
        var a = this.Ka;
        null !== a && this.Y !== a && this.ba !== a && a.zx && F.prototype.Xk.call(this)
    };
    J.prototype.getOtherNode = J.prototype.UA = function (a) {
        v && D.l(a, G, J, "getOtherNode:node");
        var b = this.Y;
        return a === b ? this.ba : b
    };
    J.prototype.getOtherPort = function (a) {
        v && D.l(a, P, J, "getOtherPort:port");
        var b = this.Mc;
        return a === b ? this.ld : b
    };
    D.w(J, {nJ: "isLabeledLink"}, function () {
        return null === this.Bf ? !1 : 0 < this.Bf.count
    });
    D.w(J, {wf: "labelNodes"}, function () {
        return null === this.Bf ? Ja : this.Bf.j
    });
    function Fr(a, b) {
        null === a.Bf && (a.Bf = new L(G));
        a.Bf.add(b);
        a.K()
    }

    J.prototype.vu = function (a) {
        F.prototype.vu.call(this, a);
        Tr(this) && Nj(this, this.$);
        if (!a) {
            a = this.Dg;
            var b = null;
            null !== a && (b = this.Mc, Dr(a, this, b));
            var c = this.Ug, d = null;
            null !== c && (d = this.ld, c === a && d === b || Dr(c, this, d));
            Sr(this)
        }
    };
    J.prototype.wu = function (a) {
        F.prototype.wu.call(this, a);
        Tr(this) && Nj(this, this.$);
        if (!a) {
            a = this.Dg;
            var b = null;
            null !== a && (b = this.Mc, Er(a, this, b));
            var c = this.Ug, d = null;
            null !== c && (d = this.ld, c === a && d === b || Er(c, this, d));
            Rr(this)
        }
    };
    J.prototype.Pn = function () {
        this.vg = !0;
        if (null !== this.Bf) {
            var a = this.g;
            if (null !== a)for (var b = this.Bf.copy().j; b.next();)a.remove(b.value)
        }
        b = this.data;
        null !== b && (a = this.g, null !== a && (a = a.ga, a instanceof X ? a.By(b) : a instanceof zg && a.Ji(b, void 0)))
    };
    J.prototype.updateRelationshipsFromData = function () {
        var a = this.data;
        if (null !== a) {
            var b = this.g;
            if (null !== b) {
                var c = b.ga;
                if (c instanceof X) {
                    var d = c.rm(a);
                    this.Y = d = b.Re(d);
                    d = c.sm(a);
                    this.ba = d = b.Re(d);
                    a = c.Uk(a);
                    if (0 < a.length || 0 < this.wf.count) {
                        if (1 === a.length && 1 === this.wf.count) {
                            var d = a[0], e = this.wf.first();
                            if (c.Ab(e.data) === d)return
                        }
                        var d = (new L).Tc(a), g = new L;
                        this.wf.each(function (a) {
                            null !== a.data && (a = c.Ab(a.data), void 0 !== a && g.add(a))
                        });
                        a = g.copy();
                        a.Ay(d);
                        d = d.copy();
                        d.Ay(g);
                        if (0 < a.count || 0 < d.count) {
                            var h =
                                this;
                            a.each(function (a) {
                                a = b.Re(a);
                                null !== a && a.Xb === h && (a.Xb = null)
                            });
                            d.each(function (a) {
                                a = b.Re(a);
                                null !== a && a.Xb !== h && (a.Xb = h)
                            })
                        }
                    }
                }
            }
        }
    };
    J.prototype.move = function (a) {
        var b = this.position, c = b.x;
        isNaN(c) && (c = 0);
        b = b.y;
        isNaN(b) && (b = 0);
        c = a.x - c;
        b = a.y - b;
        F.prototype.move.call(this, a);
        this.bl(c, b);
        for (a = this.wf; a.next();) {
            var d = a.value, e = d.position;
            d.moveTo(e.x + c, e.y + b)
        }
    };
    D.defineProperty(J, {aK: "relinkableFrom"}, function () {
        return 0 !== (this.fc & 1)
    }, function (a) {
        var b = 0 !== (this.fc & 1);
        b !== a && (v && D.h(a, "boolean", J, "relinkableFrom"), this.fc ^= 1, this.i("relinkableFrom", b, a), this.oe())
    });
    D.defineProperty(J, {bK: "relinkableTo"}, function () {
        return 0 !== (this.fc & 2)
    }, function (a) {
        var b = 0 !== (this.fc & 2);
        b !== a && (v && D.h(a, "boolean", J, "relinkableTo"), this.fc ^= 2, this.i("relinkableTo", b, a), this.oe())
    });
    J.prototype.canRelinkFrom = function () {
        if (!this.aK)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.Dn)return !1;
        a = a.g;
        return null === a || a.Dn ? !0 : !1
    };
    J.prototype.canRelinkTo = function () {
        if (!this.bK)return !1;
        var a = this.layer;
        if (null === a)return !0;
        if (!a.Dn)return !1;
        a = a.g;
        return null === a || a.Dn ? !0 : !1
    };
    D.defineProperty(J, {Yu: "resegmentable"}, function () {
        return 0 !== (this.fc & 4)
    }, function (a) {
        var b = 0 !== (this.fc & 4);
        b !== a && (v && D.h(a, "boolean", J, "resegmentable"), this.fc ^= 4, this.i("resegmentable", b, a), this.oe())
    });
    D.defineProperty(J, {Xc: "isTreeLink"}, function () {
        return 0 !== (this.fc & 8)
    }, function (a) {
        var b = 0 !== (this.fc & 8);
        b !== a && (v && D.h(a, "boolean", J, "isTreeLink"), this.fc ^= 8, this.i("isTreeLink", b, a), null !== this.Y && Kn(this.Y), null !== this.ba && Kn(this.ba))
    });
    D.w(J, {path: "path"}, function () {
        var a = this.Wd();
        return a instanceof y ? a : null
    });
    D.w(J, {so: "routeBounds"}, function () {
        this.Ao();
        var a = new C;
        var b = Infinity, c = Infinity, d = this.ta;
        if (0 === d)a.n(NaN, NaN, 0, 0); else {
            if (1 === d)d = this.m(0), b = Math.min(d.x, b), c = Math.min(d.y, c), a.n(d.x, d.y, 0, 0); else if (2 === d) {
                var e = this.m(0), g = this.m(1), b = Math.min(e.x, g.x), c = Math.min(e.y, g.y);
                a.n(e.x, e.y, 0, 0);
                a.Li(g)
            } else if (this.computeCurve() === Tj && 3 <= d && !this.ic)if (e = this.m(0), b = e.x, c = e.y, a.n(b, c, 0, 0), 3 === d)d = this.m(1), b = Math.min(d.x, b), c = Math.min(d.y, c), g = this.m(2), b = Math.min(g.x, b), c = Math.min(g.y, c), Be(e.x,
                e.y, d.x, d.y, d.x, d.y, g.x, g.y, .5, a); else for (var h = 3; h < d; h += 3) {
                var k = this.m(h - 2);
                h + 3 >= d && (h = d - 1);
                var l = this.m(h - 1), g = this.m(h);
                Be(e.x, e.y, k.x, k.y, l.x, l.y, g.x, g.y, .5, a);
                b = Math.min(g.x, b);
                c = Math.min(g.y, c);
                e = g
            } else for (e = this.m(0), g = this.m(1), b = Math.min(e.x, g.x), c = Math.min(e.y, g.y), a.n(e.x, e.y, 0, 0), a.Li(g), h = 2; h < d; h++)e = this.m(h), b = Math.min(e.x, b), c = Math.min(e.y, c), a.Li(e);
            this.kA.n(b - a.x, c - a.y)
        }
        return this.Mw = a
    });
    D.w(J, {mG: "midPoint"}, function () {
        this.Ao();
        return this.computeMidPoint(new N)
    });
    J.prototype.computeMidPoint = function (a) {
        var b = this.ta;
        if (0 === b)return a.assign(je), a;
        if (1 === b)return a.assign(this.m(0)), a;
        if (2 === b) {
            var c = this.m(0), d = this.m(1);
            a.n((c.x + d.x) / 2, (c.y + d.y) / 2);
            return a
        }
        if (this.computeCurve() === Tj && 3 <= b && !this.ic) {
            if (3 === b)return this.m(1);
            var c = (b - 1) / 3 | 0, e = 3 * (c / 2 | 0);
            if (1 === c % 2) {
                var c = this.m(e), d = this.m(e + 1), g = this.m(e + 2), e = this.m(e + 3), b = d.x, h = d.y, d = g.x, k = g.y, g = (b + d) / 2, l = (h + k) / 2, h = ((c.y + h) / 2 + l) / 2, k = (l + (k + e.y) / 2) / 2;
                a.x = (((c.x + b) / 2 + g) / 2 + (g + (d + e.x) / 2) / 2) / 2;
                a.y = (h + k) / 2
            } else a.assign(this.m(e));
            return a
        }
        e = 0;
        g = D.mb();
        for (h = 0; h < b - 1; h++)c = 0, c = this.m(h), d = this.m(h + 1), zb(c.x, d.x) ? (c = d.y - c.y, 0 > c && (c = -c)) : zb(c.y, d.y) ? (c = d.x - c.x, 0 > c && (c = -c)) : c = Math.sqrt(c.Ff(d)), g.push(c), e += c;
        for (d = h = c = 0; c < e / 2 && h < b;) {
            d = g[h];
            if (c + d > e / 2)break;
            c += d;
            h++
        }
        D.za(g);
        b = this.m(h);
        g = this.m(h + 1);
        b.x === g.x ? b.y > g.y ? a.n(b.x, b.y - (e / 2 - c)) : a.n(b.x, b.y + (e / 2 - c)) : b.y === g.y ? b.x > g.x ? a.n(b.x - (e / 2 - c), b.y) : a.n(b.x + (e / 2 - c), b.y) : (c = (e / 2 - c) / d, a.n(b.x + c * (g.x - b.x), b.y + c * (g.y - b.y)));
        return a
    };
    D.w(J, {lG: "midAngle"}, function () {
        this.Ao();
        return this.computeMidAngle()
    });
    J.prototype.computeMidAngle = function () {
        var a = this.ta;
        if (2 > a)return NaN;
        if (this.computeCurve() === Tj && 4 <= a && !this.ic) {
            var b = (a - 1) / 3 | 0, c = 3 * (b / 2 | 0);
            if (1 === b % 2) {
                var c = Math.floor(c), b = this.m(c), d = this.m(c + 1), a = this.m(c + 2), c = this.m(c + 3), e = d.x, d = d.y, g = a.x, a = a.y, h = (e + g) / 2, k = (d + a) / 2;
                return tb(((b.x + e) / 2 + h) / 2, ((b.y + d) / 2 + k) / 2, (h + (g + c.x) / 2) / 2, (k + (a + c.y) / 2) / 2)
            }
            if (0 < c && c + 1 < a)return b = this.m(c - 1), d = this.m(c + 1), b.Wb(d)
        }
        c = a / 2 | 0;
        if (0 === a % 2)return b = this.m(c - 1), d = this.m(c), 4 <= a && b.Uc(d) ? (b = this.m(c - 2), a = this.m(c + 1),
            c = b.Ff(d), e = d.Ff(a), c > e + 10 ? b.Wb(d) : e > c + 10 ? d.Wb(a) : b.Wb(a)) : null === this.ab || this.ic ? b.Wb(d) : this.ab.BF(.5);
        if (null !== this.ab && !this.ic)return this.ab.BF(.5);
        b = this.m(c - 1);
        d = this.m(c);
        a = this.m(c + 1);
        c = b.Ff(d);
        e = d.Ff(a);
        return c > e + 10 ? b.Wb(d) : e > c + 10 ? d.Wb(a) : b.Wb(a)
    };
    D.defineProperty(J, {points: "points"}, function () {
        return this.dd
    }, function (a) {
        var b = this.dd;
        if (b !== a) {
            var c = null;
            if (Array.isArray(a)) {
                var d = 0 === a.length % 2;
                if (d)for (var e = 0; e < a.length; e++)if ("number" !== typeof a[e] || isNaN(a[e])) {
                    d = !1;
                    break
                }
                if (d)for (c = new K(N), d = 0; d < a.length / 2; d++)e = (new N(a[2 * d], a[2 * d + 1])).freeze(), c.add(e); else {
                    e = !0;
                    for (d = 0; d < a.length; d++) {
                        var g = a[d];
                        if (!D.Sa(g) || "number" !== typeof g.x || isNaN(g.x) || "number" !== typeof g.y || isNaN(g.y)) {
                            e = !1;
                            break
                        }
                    }
                    if (e)for (c = new K(N), d = 0; d < a.length; d++)e =
                        a[d], c.add((new N(e.x, e.y)).freeze()); else D.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: " + a)
                }
            } else if (a instanceof K)for (c = a.copy(), a = c.j; a.next();)a.value.freeze(); else D.k("Link.points value is not an instance of List or Array: " + a);
            c.freeze();
            this.dd = c;
            this.Se();
            this.K();
            Ur(this);
            a = this.g;
            null !== a && (a.ao || a.ra.jb || a.ly.add(this), a.Wa.xc && (this.Ip = c));
            this.i("points", b, c)
        }
    });
    D.w(J, {ta: "pointsCount"}, function () {
        return this.dd.count
    });
    J.prototype.getPoint = J.prototype.m = function (a) {
        return this.dd.o[a]
    };
    J.prototype.setPoint = J.prototype.ih = function (a, b) {
        v && (D.l(b, N, J, "setPoint"), b.F() || D.k("Link.setPoint called with a Point that does not have real numbers: " + b.toString()));
        null === this.ef && D.k("Call Link.startRoute before modifying the points of the route.");
        this.dd.tg(a, b)
    };
    J.prototype.setPointAt = J.prototype.ia = function (a, b, c) {
        v && (D.p(b, J, "setPointAt:x"), D.p(c, J, "setPointAt:y"));
        null === this.ef && D.k("Call Link.startRoute before modifying the points of the route.");
        this.dd.tg(a, new N(b, c))
    };
    J.prototype.insertPoint = function (a, b) {
        v && (D.l(b, N, J, "insertPoint"), b.F() || D.k("Link.insertPoint called with a Point that does not have real numbers: " + b.toString()));
        null === this.ef && D.k("Call Link.startRoute before modifying the points of the route.");
        this.dd.$d(a, b)
    };
    J.prototype.insertPointAt = J.prototype.B = function (a, b, c) {
        v && (D.p(b, J, "insertPointAt:x"), D.p(c, J, "insertPointAt:y"));
        null === this.ef && D.k("Call Link.startRoute before modifying the points of the route.");
        this.dd.$d(a, new N(b, c))
    };
    J.prototype.addPoint = J.prototype.Ci = function (a) {
        v && (D.l(a, N, J, "addPoint"), a.F() || D.k("Link.addPoint called with a Point that does not have real numbers: " + a.toString()));
        null === this.ef && D.k("Call Link.startRoute before modifying the points of the route.");
        this.dd.add(a)
    };
    J.prototype.addPointAt = J.prototype.yj = function (a, b) {
        v && (D.p(a, J, "insertPointAt:x"), D.p(b, J, "insertPointAt:y"));
        null === this.ef && D.k("Call Link.startRoute before modifying the points of the route.");
        this.dd.add(new N(a, b))
    };
    J.prototype.removePoint = J.prototype.CG = function (a) {
        null === this.ef && D.k("Call Link.startRoute before modifying the points of the route.");
        this.dd.kd(a)
    };
    J.prototype.clearPoints = J.prototype.aq = function () {
        null === this.ef && D.k("Call Link.startRoute before modifying the points of the route.");
        this.dd.clear()
    };
    J.prototype.movePoints = J.prototype.bl = function (a, b) {
        for (var c = new K(N), d = this.dd.j; d.next();) {
            var e = d.value;
            c.add((new N(e.x + a, e.y + b)).freeze())
        }
        c.freeze();
        d = this.dd;
        this.dd = c;
        this.K();
        Ur(this);
        e = this.g;
        null !== e && e.Wa.xc && (this.Ip = c);
        this.i("points", d, c)
    };
    J.prototype.startRoute = J.prototype.zm = function () {
        null === this.ef && (this.ef = this.dd, this.dd = this.dd.copy())
    };
    J.prototype.commitRoute = J.prototype.Bj = function () {
        if (null !== this.ef) {
            for (var a = this.ef, b = this.dd, c = Infinity, d = Infinity, e = a.o, g = e.length, h = 0; h < g; h++)var k = e[h], c = Math.min(k.x, c), d = Math.min(k.y, d);
            for (var l = Infinity, m = Infinity, n = b.o, p = n.length, h = 0; h < p; h++)k = n[h], l = Math.min(k.x, l), m = Math.min(k.y, m), k.freeze();
            b.freeze();
            if (p === g)for (h = 0; h < p; h++) {
                if (g = e[h], k = n[h], g.x - c !== k.x - l || g.y - d !== k.y - m) {
                    this.K();
                    this.Se();
                    break
                }
            } else this.K(), this.Se();
            this.ef = null;
            c = this.g;
            null !== c && c.Wa.xc && (this.Ip = b);
            Ur(this);
            this.i("points", a, b)
        }
    };
    J.prototype.rollbackRoute = J.prototype.fK = function () {
        null !== this.ef && (this.dd = this.ef, this.ef = null)
    };
    function Ur(a) {
        0 === a.dd.count ? a.vg = !1 : (a.vg = !0, a.fq = a.m(0), a.gq = a.m(a.ta - 1), Vr(a, !1))
    }

    J.prototype.invalidateRoute = J.prototype.hc = function () {
        if (!this.Am) {
            var a = this.g;
            a && (a.ly.contains(this) || a.ra.jb || a.Wa.tJ && !a.Wa.vf) || (a = this.path, null !== a && (this.vg = !1, this.K(), a.K()))
        }
    };
    D.defineProperty(J, {vg: null}, function () {
        return 0 !== (this.fc & 16)
    }, function (a) {
        0 !== (this.fc & 16) !== a && (this.fc ^= 16)
    });
    D.defineProperty(J, {Am: "suspendsRouting"}, function () {
        return 0 !== (this.fc & 32)
    }, function (a) {
        0 !== (this.fc & 32) !== a && (this.fc ^= 32)
    });
    D.defineProperty(J, {zA: null}, function () {
        return 0 !== (this.fc & 64)
    }, function (a) {
        0 !== (this.fc & 64) !== a && (this.fc ^= 64)
    });
    D.defineProperty(J, {fq: "defaultFromPoint"}, function () {
        return this.OC
    }, function (a) {
        this.OC = a.copy()
    });
    D.defineProperty(J, {gq: "defaultToPoint"}, function () {
        return this.UC
    }, function (a) {
        this.UC = a.copy()
    });
    J.prototype.updateRoute = J.prototype.Ao = function () {
        if (!this.vg && !this.zA) {
            var a = !0;
            try {
                this.zA = !0, this.zm(), a = this.computePoints()
            } finally {
                this.zA = !1, a ? this.Bj() : this.fK()
            }
        }
    };
    J.prototype.computePoints = function () {
        var a = this.g;
        if (null === a)return !1;
        var b = this.Y, c = null;
        null === b ? (a.Rl || (a.it = new y, a.it.Ea = Yd, a.it.lb = 0, a.Rl = new G, a.Rl.add(a.it), a.Rl.kf()), this.fq && (a.Rl.position = a.Rl.location = this.fq, a.Rl.kf(), b = a.Rl, c = a.it)) : c = this.Mc;
        if (null !== c && !b.isVisible()) {
            var d = b.findVisibleNode();
            null !== d && d !== b ? (b = d, c = d.nm("")) : b = d
        }
        this.mE = b;
        if (null === b || !b.location.F())return !1;
        for (; !(null === c || c.$.F() && c.Pj());)c = c.Q;
        if (null === c)return !1;
        var e = this.ba, g = null;
        null === e ? (a.Sl || (a.jt =
            new y, a.jt.Ea = Yd, a.jt.lb = 0, a.Sl = new G, a.Sl.add(a.jt), a.Sl.kf()), this.gq && (a.Sl.position = a.Sl.location = this.gq, a.Sl.kf(), e = a.Sl, g = a.jt)) : g = this.ld;
        null === g || e.isVisible() || (a = e.findVisibleNode(), null !== a && a !== e ? (e = a, g = a.nm("")) : e = a);
        this.nE = e;
        if (null === e || !e.location.F())return !1;
        for (; !(null === g || g.$.F() && g.Pj());)g = g.Q;
        if (null === g)return !1;
        var h = this.ta, d = Wr(this, c), a = Xr(this, g), k = d === cc, l = a === cc, m = c === g && null !== c, n = this.ic, p = this.jf === Tj;
        this.Zi = m && !n ? p = !0 : !1;
        var q = this.Tt === Mj || m;
        if (!n && !m && k &&
            l) {
            if (k = !1, !q && 3 <= h && (q = this.getLinkPoint(b, c, d, !0, !1, e, g), l = this.getLinkPoint(e, g, a, !1, !1, b, c), k = this.adjustPoints(0, q, h - 1, l)) && (q = this.getLinkPoint(b, c, d, !0, !1, e, g), l = this.getLinkPoint(e, g, a, !1, !1, b, c), this.adjustPoints(0, q, h - 1, l)), !k)if (this.aq(), p) {
                var h = this.getLinkPoint(b, c, d, !0, !1, e, g), q = this.getLinkPoint(e, g, a, !1, !1, b, c), k = q.x - h.x, l = q.y - h.y, m = this.computeCurviness(), p = n = 0, r = h.x + k / 3, s = h.y + l / 3, u = r, t = s;
                ab(l, 0) ? t = 0 < k ? t - m : t + m : (n = -k / l, p = Math.sqrt(m * m / (n * n + 1)), 0 > m && (p = -p), u = (0 > l ? -1 : 1) * p + r, t = n * (u -
                    r) + s);
                var r = h.x + 2 * k / 3, s = h.y + 2 * l / 3, z = r, w = s;
                ab(l, 0) ? w = 0 < k ? w - m : w + m : (z = (0 > l ? -1 : 1) * p + r, w = n * (z - r) + s);
                this.aq();
                this.Ci(h);
                this.yj(u, t);
                this.yj(z, w);
                this.Ci(q);
                this.ih(0, this.getLinkPoint(b, c, d, !0, !1, e, g));
                this.ih(3, this.getLinkPoint(e, g, a, !1, !1, b, c))
            } else d = this.getLinkPoint(b, c, d, !0, !1, e, g), a = this.getLinkPoint(e, g, a, !1, !1, b, c), this.hasCurviness() ? (q = a.x - d.x, e = a.y - d.y, g = this.computeCurviness(), b = d.x + q / 2, c = d.y + e / 2, h = b, k = c, ab(e, 0) ? k = 0 < q ? k - g : k + g : (q = -q / e, h = Math.sqrt(g * g / (q * q + 1)), 0 > g && (h = -h), h = (0 > e ? -1 : 1) * h +
                b, k = q * (h - b) + c), this.Ci(d), this.yj(h, k)) : this.Ci(d), this.Ci(a)
        } else {
            p = this.Kj;
            q && (n && p || m) && this.aq();
            var B = m ? this.computeCurviness() : 0, p = this.getLinkPoint(b, c, d, !0, n, e, g), r = u = s = 0;
            if (n || !k || m)if (t = this.computeEndSegmentLength(b, c, d, !0), r = this.getLinkDirection(b, c, p, d, !0, n, e, g), m && (k || d.O(a) || !n && 1 === d.x + a.x && 1 === d.y + a.y) && (r -= n ? 90 : 30, 0 > B && (r -= 180)), 0 > r ? r += 360 : 360 <= r && (r -= 360), m && (t += Math.abs(B) * (n ? 1 : 2)), 0 === r ? s = t : 90 === r ? u = t : 180 === r ? s = -t : 270 === r ? u = -t : (s = t * Math.cos(r * Math.PI / 180), u = t * Math.sin(r * Math.PI /
                        180)), d.be() && m) {
                var A = c.eb(kc, D.P()), O = D.Fb(A.x + 1E3 * s, A.y + 1E3 * u);
                this.getLinkPointFromPoint(b, c, A, O, !0, p);
                D.A(A);
                D.A(O)
            }
            var t = this.getLinkPoint(e, g, a, !1, n, b, c), H = w = z = 0;
            if (n || !l || m)A = this.computeEndSegmentLength(e, g, a, !1), H = this.getLinkDirection(e, g, t, a, !1, n, b, c), m && (l || d.O(a) || !n && 1 === d.x + a.x && 1 === d.y + a.y) && (H += n ? 0 : 30, 0 > B && (H += 180)), 0 > H ? H += 360 : 360 <= H && (H -= 360), m && (A += Math.abs(B) * (n ? 1 : 2)), 0 === H ? z = A : 90 === H ? w = A : 180 === H ? z = -A : 270 === H ? w = -A : (z = A * Math.cos(H * Math.PI / 180), w = A * Math.sin(H * Math.PI / 180)), a.be() &&
            m && (A = g.eb(kc, D.P()), O = D.Fb(A.x + 1E3 * z, A.y + 1E3 * w), this.getLinkPointFromPoint(e, g, A, O, !1, t), D.A(A), D.A(O));
            a = p;
            if (n || !k || m)a = new N(p.x + s, p.y + u);
            d = t;
            if (n || !l || m)d = new N(t.x + z, t.y + w);
            !q && !n && k && 3 < h && this.adjustPoints(0, p, h - 2, d) ? this.ih(h - 1, t) : !q && !n && l && 3 < h && this.adjustPoints(1, a, h - 1, t) ? this.ih(0, p) : !q && (n ? 6 <= h : 4 < h) && this.adjustPoints(1, a, h - 2, d) ? (this.ih(0, p), this.ih(h - 1, t)) : (this.aq(), this.Ci(p), (n || !k || m) && this.Ci(a), n && this.addOrthoPoints(a, r, d, H, b, e), (n || !l || m) && this.Ci(d), this.Ci(t))
        }
        return !0
    };
    function Yr(a, b) {
        Math.abs(b.x - a.x) > Math.abs(b.y - a.y) ? (b.x = b.x >= a.x ? a.x + 9E9 : a.x - 9E9, b.y = a.y) : (b.y = b.y >= a.y ? a.y + 9E9 : a.y - 9E9, b.x = a.x);
        return b
    }

    J.prototype.getLinkPointFromPoint = function (a, b, c, d, e, g) {
        void 0 === g && (g = new N);
        if (null === a || null === b)return g.assign(c), g;
        a.isVisible() || (e = a.findVisibleNode(), null !== e && e !== a && (b = e.port));
        var h = e = 0, k = 0, l = 0;
        a = null;
        e = b.Q;
        null === e || e.nh() || (e = e.Q);
        if (null === e)e = d.x, h = d.y, k = c.x, l = c.y; else {
            a = e.Jh;
            e = 1 / (a.m11 * a.m22 - a.m12 * a.m21);
            var k = a.m22 * e, l = -a.m12 * e, m = -a.m21 * e, n = a.m11 * e, p = e * (a.m21 * a.dy - a.m22 * a.dx), q = e * (a.m12 * a.dx - a.m11 * a.dy);
            e = d.x * k + d.y * m + p;
            h = d.x * l + d.y * n + q;
            k = c.x * k + c.y * m + p;
            l = c.x * l + c.y * n + q
        }
        b.Vn(e, h, k, l,
            g);
        null !== a && g.transform(a);
        return g
    };
    function Zr(a, b) {
        var c = b.Zs;
        null === c && (c = new $r, c.port = b, c.Yc = b.Z, b.Zs = c);
        return as(c, a)
    }

    J.prototype.getLinkPoint = function (a, b, c, d, e, g, h, k) {
        void 0 === k && (k = new N);
        if (c.Vc())return b.eb(c, k), k;
        if (c.Mj()) {
            var l = Zr(this, b);
            if (null !== l) {
                k.assign(l.zq);
                if (e && this.Ey === Or) {
                    var m = Zr(this, h);
                    if (null !== m && l.Nn < m.Nn) {
                        var l = D.P(), m = D.P(), n = new C(b.eb(dc, l), b.eb(uc, m)), p = this.computeSpot(!d);
                        a = this.getLinkPoint(g, h, p, !d, e, a, b, m);
                        (c.Jj(wc) || c.Jj(xc)) && a.y >= n.y && a.y <= n.y + n.height ? k.y = a.y : (c.Jj(vc) || c.Jj(Bc)) && a.x >= n.x && a.x <= n.x + n.width && (k.x = a.x);
                        D.A(l);
                        D.A(m)
                    }
                }
                return k
            }
        }
        c = b.eb(kc, D.P());
        l = g = null;
        this.ta >
        (e ? 6 : 2) ? (l = d ? this.m(1) : this.m(this.ta - 2), e && (l = Yr(c, l.copy()))) : (g = D.P(), l = h.eb(kc, g), e && (l = Yr(c, l)), D.A(g));
        this.getLinkPointFromPoint(a, b, c, l, d, k);
        D.A(c);
        return k
    };
    J.prototype.getLinkDirection = function (a, b, c, d, e, g, h, k) {
        a:if (d.Vc())c = d.x > d.y ? d.x > 1 - d.y ? 0 : d.x < 1 - d.y ? 270 : 315 : d.x < d.y ? d.x > 1 - d.y ? 90 : d.x < 1 - d.y ? 180 : 135 : .5 > d.x ? 225 : .5 < d.x ? 45 : 0; else {
            if (d.Mj()) {
                var l = Zr(this, b);
                if (null !== l)switch (l.Le) {
                    case D.xd:
                        c = 270;
                        break a;
                    case D.ad:
                        c = 180;
                        break a;
                    default:
                    case D.nd:
                        c = 0;
                        break a;
                    case D.md:
                        c = 90;
                        break a
                }
            }
            var l = b.eb(kc, D.P()), m = null, n = null;
            this.ta > (g ? 6 : 2) ? (n = e ? this.m(1) : this.m(this.ta - 2), n = g ? Yr(l, n.copy()) : c) : (m = D.P(), n = k.eb(kc, m), D.A(m));
            c = 0;
            c = Math.abs(n.x - l.x) > Math.abs(n.y -
                l.y) ? n.x >= l.x ? 0 : 180 : n.y >= l.y ? 90 : 270;
            D.A(l)
        }
        d.be() && h.Gi(a) && (c += 180, 360 <= c && (c -= 360));
        a = xr;
        a = e ? this.qu : this.iv;
        a === xr && (a = e ? b.qu : b.iv);
        switch (a) {
            case yr:
                b = b.qm();
                c += b;
                360 <= c && (c -= 360);
                break;
            case xr:
            case Fo:
                if (d.qJ())break;
                b = b.qm();
                if (0 === b)break;
                45 <= b && 135 > b ? c += 90 : 135 <= b && 225 > b ? c += 180 : 225 <= b && 315 > b && (c += 270);
                360 <= c && (c -= 360)
        }
        return c
    };
    J.prototype.computeEndSegmentLength = function (a, b, c, d) {
        if (null !== b && c.Mj() && (a = Zr(this, b), null !== a))return a.Ix;
        a = NaN;
        a = d ? this.pm : this.Em;
        null !== b && isNaN(a) && (a = d ? b.pm : b.Em);
        isNaN(a) && (a = 10);
        return a
    };
    J.prototype.computeSpot = function (a) {
        return a ? Wr(this, this.Mc) : Xr(this, this.ld)
    };
    function Wr(a, b) {
        if (null === b)return kc;
        var c = a.Gb;
        c.gd() && null !== b && (c = b.Gb);
        return c === Wc ? cc : c
    }

    function Xr(a, b) {
        if (null === b)return kc;
        var c = a.Hb;
        c.gd() && null !== b && (c = b.Hb);
        return c === Wc ? cc : c
    }

    J.prototype.computeOtherPoint = function (a, b) {
        var c = b.eb(kc), d;
        d = b.Zs;
        d = null !== d ? as(d, this) : null;
        null !== d && (c = d.zq);
        return c
    };
    J.prototype.computeShortLength = function (a) {
        if (a) {
            if (a = this.ru, isNaN(a)) {
                var b = this.Mc;
                null !== b && (a = b.ru)
            }
        } else a = this.jv, isNaN(a) && (b = this.ld, null !== b && (a = b.jv));
        return isNaN(a) ? 0 : a
    };
    J.prototype.Rk = function (a, b, c, d, e, g) {
        if (!1 === this.sg)return !1;
        void 0 === b && (b = null);
        void 0 === c && (c = null);
        var h = g;
        void 0 === g && (h = D.Sf(), h.reset());
        h.multiply(this.transform);
        if (this.Kn(a, h))return gq(this, b, c, e), void 0 === g && D.Je(h), !0;
        if (this.hg(a, h)) {
            var k = !1;
            if (!this.$n)for (var l = this.ya.o, m = l.length; m--;) {
                var n = l[m];
                if (n.visible || n === this.xf) {
                    var p = n.$, q = this.Ga;
                    if (!(p.x > q.width || p.y > q.height || 0 > p.x + p.width || 0 > p.y + p.height)) {
                        p = D.Sf();
                        p.set(h);
                        if (n instanceof x)k = n.Rk(a, b, c, d, e, p); else if (this.path ===
                            n) {
                            if (n instanceof y) {
                                var k = n, r = a, s = d, q = p;
                                if (!1 === k.sg)k = !1; else if (q.multiply(k.transform), s)b:{
                                    var u = r, t = q;
                                    if (k.Kn(u, t))k = !0; else {
                                        if (void 0 === t && (t = k.transform, u.Ok(k.$))) {
                                            k = !0;
                                            break b
                                        }
                                        var q = u.left, r = u.right, s = u.top, u = u.bottom, z = D.P(), w = D.P(), B = D.P(), A = D.Sf();
                                        A.set(t);
                                        A.sB(k.transform);
                                        A.Ux();
                                        w.x = r;
                                        w.y = s;
                                        w.transform(A);
                                        z.x = q;
                                        z.y = s;
                                        z.transform(A);
                                        t = !1;
                                        tq(k, z, w, B) ? t = !0 : (z.x = r, z.y = u, z.transform(A), tq(k, z, w, B) ? t = !0 : (w.x = q, w.y = u, w.transform(A), tq(k, z, w, B) ? t = !0 : (z.x = q, z.y = s, z.transform(A), tq(k, z, w, B) &&
                                        (t = !0))));
                                        D.Je(A);
                                        D.A(z);
                                        D.A(w);
                                        D.A(B);
                                        k = t
                                    }
                                } else k = k.Kn(r, q)
                            }
                        } else k = Lo(n, a, d, p);
                        k && (null !== b && (n = b(n)), n && (null === c || c(n)) && (e instanceof L && e.add(n), e instanceof K && e.add(n)));
                        D.Je(p)
                    }
                }
            }
            void 0 === g && D.Je(h);
            return k || null !== this.background || null !== this.bm
        }
        void 0 === g && D.Je(h);
        return !1
    };
    D.w(J, {ic: "isOrthogonal"}, function () {
        return 2 === (this.nn.value & 2)
    });
    D.w(J, {Kj: "isAvoiding"}, function () {
        return 4 === (this.nn.value & 4)
    });
    J.prototype.computeCurve = function () {
        if (null === this.Zi) {
            var a = this.Mc, b = this.ic;
            this.Zi = null !== a && a === this.ld && !b
        }
        return this.Zi ? Tj : this.jf
    };
    J.prototype.computeCorner = function () {
        if (this.jf === Tj)return 0;
        var a = this.FA;
        if (isNaN(a) || 0 > a)a = 10;
        return a
    };
    J.prototype.findMidLabel = function () {
        for (var a = this.path, b = this.ya.o, c = b.length, d = 0; d < c; d++) {
            var e = b[d];
            if (e !== a && !e.Lf && (-Infinity === e.Ue || isNaN(e.Ue)))return e
        }
        for (a = this.wf; a.next();)if (b = a.value, -Infinity === b.Ue || isNaN(b.Ue))return b;
        return null
    };
    J.prototype.computeSpacing = function () {
        if (!this.isVisible())return 0;
        var a;
        a = Math.max(14, this.computeThickness());
        var b = this.Mc, c = this.ld;
        if (null !== b && null !== c) {
            var d = this.findMidLabel();
            if (null !== d) {
                var e = d.Ga, g = d.margin, h = isNaN(e.width) ? 30 : e.width * d.scale + g.left + g.right, e = isNaN(e.height) ? 14 : e.height * d.scale + g.top + g.bottom, d = d.Nq;
                d === wq || d === Qr || d === Pr ? a = Math.max(a, e) : d === Zp || d === $p || d === Xp || d === Yp ? a = Math.max(a, h) : (b = b.eb(kc).Wb(c.eb(kc)) / 180 * Math.PI, a = Math.max(a, Math.abs(Math.sin(b) * h) + Math.abs(Math.cos(b) *
                        e) + 1));
                this.jf === Tj && (a *= 1.333)
            }
        }
        return a
    };
    J.prototype.arrangeBundledLinks = function (a, b) {
        if (b)for (var c = 0; c < a.length; c++)a[c].hc()
    };
    J.prototype.computeCurviness = function () {
        var a = this.Dx;
        if (isNaN(a)) {
            var a = 16, b = this.Ni;
            if (null !== b) {
                for (var c = D.mb(), d = 0, e = b.links, g = 0; g < e.length; g++) {
                    var h = e[g], h = h.computeSpacing();
                    c.push(h);
                    d += h
                }
                d = -d / 2;
                for (g = 0; g < e.length; g++) {
                    h = e[g];
                    if (h === this) {
                        a = d + c[g] / 2;
                        break
                    }
                    d += c[g]
                }
                b.Cq === this.Y && (a = -a);
                D.za(c)
            }
        }
        return a
    };
    J.prototype.computeThickness = function () {
        if (!this.isVisible())return 0;
        var a = this.path;
        return null !== a ? Math.max(a.lb, 1) : 1
    };
    J.prototype.hasCurviness = function () {
        return !isNaN(this.Dx) || null !== this.Ni
    };
    J.prototype.adjustPoints = function (a, b, c, d) {
        var e = this.Tt;
        if (this.ic) {
            if (e === Mr)return !1;
            e === Nr && (e = Lr)
        }
        switch (e) {
            case Mr:
                var g = this.m(a), h = this.m(c);
                if (!g.Uc(b) || !h.Uc(d)) {
                    var e = g.x, g = g.y, k = h.x - e, l = h.y - g, m = Math.sqrt(k * k + l * l);
                    if (!zb(m, 0)) {
                        var n = 0;
                        zb(k, 0) ? n = 0 > l ? -Math.PI / 2 : Math.PI / 2 : (n = Math.atan(l / Math.abs(k)), 0 > k && (n = Math.PI - n));
                        var h = b.x, p = b.y, l = d.x - h, q = d.y - p, r = Math.sqrt(l * l + q * q), k = 0;
                        zb(l, 0) ? k = 0 > q ? -Math.PI / 2 : Math.PI / 2 : (k = Math.atan(q / Math.abs(l)), 0 > l && (k = Math.PI - k));
                        m = r / m;
                        n = k - n;
                        this.ih(a, b);
                        for (a +=
                                 1; a < c; a++)b = this.m(a), k = b.x - e, l = b.y - g, b = Math.sqrt(k * k + l * l), zb(b, 0) || (q = 0, zb(k, 0) ? q = 0 > l ? -Math.PI / 2 : Math.PI / 2 : (q = Math.atan(l / Math.abs(k)), 0 > k && (q = Math.PI - q)), k = q + n, b *= m, this.ia(a, h + b * Math.cos(k), p + b * Math.sin(k)));
                        this.ih(c, d)
                    }
                }
                return !0;
            case Nr:
                g = this.m(a);
                p = this.m(c);
                if (!g.Uc(b) || !p.Uc(d)) {
                    var e = g.x, g = g.y, h = p.x, p = p.y, m = (h - e) * (h - e) + (p - g) * (p - g), k = b.x, n = b.y, l = d.x, q = d.y, r = 0, s = 1;
                    0 !== l - k ? (r = (q - n) / (l - k), s = Math.sqrt(1 + 1 / (r * r))) : r = 9E9;
                    this.ih(a, b);
                    for (a += 1; a < c; a++) {
                        b = this.m(a);
                        var u = b.x, t = b.y, z = .5;
                        0 !== m && (z =
                            ((e - u) * (e - h) + (g - t) * (g - p)) / m);
                        var w = e + z * (h - e), B = g + z * (p - g);
                        b = Math.sqrt((u - w) * (u - w) + (t - B) * (t - B));
                        t < r * (u - w) + B && (b = -b);
                        0 < r && (b = -b);
                        u = k + z * (l - k);
                        z = n + z * (q - n);
                        0 !== r ? (b = u + b / s, this.ia(a, b, z - (b - u) / r)) : this.ia(a, u, z + b)
                    }
                    this.ih(c, d)
                }
                return !0;
            case Lr:
                a:{
                    if (this.ic && (e = this.m(a), g = this.m(a + 1), h = this.m(a + 2), k = g.x, n = g.y, p = k, m = n, ab(e.y, g.y) ? ab(g.x, h.x) ? n = b.y : ab(g.y, h.y) && (k = b.x) : ab(e.x, g.x) && (ab(g.y, h.y) ? k = b.x : ab(g.x, h.x) && (n = b.y)), this.ia(a + 1, k, n), e = this.m(c), g = this.m(c - 1), h = this.m(c - 2), k = g.x, n = g.y, l = k, q = n, ab(e.y,
                            g.y) ? ab(g.x, h.x) ? n = d.y : ab(g.y, h.y) && (k = d.x) : ab(e.x, g.x) && (ab(g.y, h.y) ? k = d.x : ab(g.x, h.x) && (n = d.y)), this.ia(c - 1, k, n), Mi(this))) {
                        this.ia(a + 1, p, m);
                        this.ia(c - 1, l, q);
                        c = !1;
                        break a
                    }
                    this.ih(a, b);
                    this.ih(c, d);
                    c = !0
                }
                return c;
            default:
                return !1
        }
    };
    J.prototype.addOrthoPoints = function (a, b, c, d, e, g) {
        b = -45 <= b && 45 > b ? 0 : 45 <= b && 135 > b ? 90 : 135 <= b && 225 > b ? 180 : 270;
        d = -45 <= d && 45 > d ? 0 : 45 <= d && 135 > d ? 90 : 135 <= d && 225 > d ? 180 : 270;
        var h = e.$.copy(), k = g.$.copy();
        if (h.F() && k.F()) {
            h.If(8, 8);
            k.If(8, 8);
            h.Li(a);
            k.Li(c);
            var l, m;
            if (0 === b)if (c.x > a.x || 270 === d && c.y < a.y && k.right > a.x || 90 === d && c.y > a.y && k.right > a.x)l = new N(c.x, a.y), m = new N(c.x, (a.y + c.y) / 2), 180 === d ? (l.x = this.computeMidOrthoPosition(a.x, c.x, !1), m.x = l.x, m.y = c.y) : 270 === d && c.y < a.y || 90 === d && c.y > a.y ? (l.x = a.x < k.left ? this.computeMidOrthoPosition(a.x,
                k.left, !1) : a.x < k.right && (270 === d && a.y < k.top || 90 === d && a.y > k.bottom) ? this.computeMidOrthoPosition(a.x, c.x, !1) : k.right, m.x = l.x, m.y = c.y) : 0 === d && a.x < k.left && a.y > k.top && a.y < k.bottom && (l.x = a.x, l.y = a.y < c.y ? Math.min(c.y, k.top) : Math.max(c.y, k.bottom), m.y = l.y); else {
                l = new N(a.x, c.y);
                m = new N((a.x + c.x) / 2, c.y);
                if (180 === d || 90 === d && c.y < h.top || 270 === d && c.y > h.bottom)180 === d && (k.Pa(a) || h.Pa(c)) ? l.y = this.computeMidOrthoPosition(a.y, c.y, !0) : c.y < a.y && (180 === d || 90 === d) ? l.y = this.computeMidOrthoPosition(h.top, Math.max(c.y,
                    k.bottom), !0) : c.y > a.y && (180 === d || 270 === d) && (l.y = this.computeMidOrthoPosition(h.bottom, Math.min(c.y, k.top), !0)), m.x = c.x, m.y = l.y;
                if (l.y > h.top && l.y < h.bottom)if (c.x >= h.left && c.x <= a.x || a.x <= k.right && a.x >= c.x) {
                    if (90 === d || 270 === d)l = new N(Math.max((a.x + c.x) / 2, a.x), a.y), m = new N(l.x, c.y)
                } else l.y = 270 === d || (0 === d || 180 === d) && c.y < a.y ? Math.min(c.y, 0 === d ? h.top : Math.min(h.top, k.top)) : Math.max(c.y, 0 === d ? h.bottom : Math.max(h.bottom, k.bottom)), m.x = c.x, m.y = l.y
            } else if (180 === b)if (c.x < a.x || 270 === d && c.y < a.y && k.left < a.x ||
                90 === d && c.y > a.y && k.left < a.x)l = new N(c.x, a.y), m = new N(c.x, (a.y + c.y) / 2), 0 === d ? (l.x = this.computeMidOrthoPosition(a.x, c.x, !1), m.x = l.x, m.y = c.y) : 270 === d && c.y < a.y || 90 === d && c.y > a.y ? (l.x = a.x > k.right ? this.computeMidOrthoPosition(a.x, k.right, !1) : a.x > k.left && (270 === d && a.y < k.top || 90 === d && a.y > k.bottom) ? this.computeMidOrthoPosition(a.x, c.x, !1) : k.left, m.x = l.x, m.y = c.y) : 180 === d && a.x > k.right && a.y > k.top && a.y < k.bottom && (l.x = a.x, l.y = a.y < c.y ? Math.min(c.y, k.top) : Math.max(c.y, k.bottom), m.y = l.y); else {
                l = new N(a.x, c.y);
                m = new N((a.x +
                    c.x) / 2, c.y);
                if (0 === d || 90 === d && c.y < h.top || 270 === d && c.y > h.bottom)0 === d && (k.Pa(a) || h.Pa(c)) ? l.y = this.computeMidOrthoPosition(a.y, c.y, !0) : c.y < a.y && (0 === d || 90 === d) ? l.y = this.computeMidOrthoPosition(h.top, Math.max(c.y, k.bottom), !0) : c.y > a.y && (0 === d || 270 === d) && (l.y = this.computeMidOrthoPosition(h.bottom, Math.min(c.y, k.top), !0)), m.x = c.x, m.y = l.y;
                if (l.y > h.top && l.y < h.bottom)if (c.x <= h.right && c.x >= a.x || a.x >= k.left && a.x <= c.x) {
                    if (90 === d || 270 === d)l = new N(Math.min((a.x + c.x) / 2, a.x), a.y), m = new N(l.x, c.y)
                } else l.y = 270 ===
                d || (0 === d || 180 === d) && c.y < a.y ? Math.min(c.y, 180 === d ? h.top : Math.min(h.top, k.top)) : Math.max(c.y, 180 === d ? h.bottom : Math.max(h.bottom, k.bottom)), m.x = c.x, m.y = l.y
            } else if (90 === b)if (c.y > a.y || 180 === d && c.x < a.x && k.bottom > a.y || 0 === d && c.x > a.x && k.bottom > a.y)l = new N(a.x, c.y), m = new N((a.x + c.x) / 2, c.y), 270 === d ? (l.y = this.computeMidOrthoPosition(a.y, c.y, !0), m.x = c.x, m.y = l.y) : 180 === d && c.x < a.x || 0 === d && c.x > a.x ? (l.y = a.y < k.top ? this.computeMidOrthoPosition(a.y, k.top, !0) : a.y < k.bottom && (180 === d && a.x < k.left || 0 === d && a.x > k.right) ?
                this.computeMidOrthoPosition(a.y, c.y, !0) : k.bottom, m.x = c.x, m.y = l.y) : 90 === d && a.y < k.top && a.x > k.left && a.x < k.right && (l.x = a.x < c.x ? Math.min(c.x, k.left) : Math.max(c.x, k.right), l.y = a.y, m.x = l.x); else {
                l = new N(c.x, a.y);
                m = new N(c.x, (a.y + c.y) / 2);
                if (270 === d || 0 === d && c.x < h.left || 180 === d && c.x > h.right)270 === d && (k.Pa(a) || h.Pa(c)) ? l.x = this.computeMidOrthoPosition(a.x, c.x, !1) : c.x < a.x && (270 === d || 0 === d) ? l.x = this.computeMidOrthoPosition(h.left, Math.max(c.x, k.right), !1) : c.x > a.x && (270 === d || 180 === d) && (l.x = this.computeMidOrthoPosition(h.right,
                    Math.min(c.x, k.left), !1)), m.x = l.x, m.y = c.y;
                if (l.x > h.left && l.x < h.right)if (c.y >= h.top && c.y <= a.y || a.y <= k.bottom && a.y >= c.y) {
                    if (0 === d || 180 === d)l = new N(a.x, Math.max((a.y + c.y) / 2, a.y)), m = new N(c.x, l.y)
                } else l.x = 180 === d || (90 === d || 270 === d) && c.x < a.x ? Math.min(c.x, 90 === d ? h.left : Math.min(h.left, k.left)) : Math.max(c.x, 90 === d ? h.right : Math.max(h.right, k.right)), m.x = l.x, m.y = c.y
            } else if (c.y < a.y || 180 === d && c.x < a.x && k.top < a.y || 0 === d && c.x > a.x && k.top < a.y)l = new N(a.x, c.y), m = new N((a.x + c.x) / 2, c.y), 90 === d ? (l.y = this.computeMidOrthoPosition(a.y,
                c.y, !0), m.x = c.x, m.y = l.y) : 180 === d && c.x < a.x || 0 === d && c.x >= a.x ? (l.y = a.y > k.bottom ? this.computeMidOrthoPosition(a.y, k.bottom, !0) : a.y > k.top && (180 === d && a.x < k.left || 0 === d && a.x > k.right) ? this.computeMidOrthoPosition(a.y, c.y, !0) : k.top, m.x = c.x, m.y = l.y) : 270 === d && a.y > k.bottom && a.x > k.left && a.x < k.right && (l.x = a.x < c.x ? Math.min(c.x, k.left) : Math.max(c.x, k.right), l.y = a.y, m.x = l.x); else {
                l = new N(c.x, a.y);
                m = new N(c.x, (a.y + c.y) / 2);
                if (90 === d || 0 === d && c.x < h.left || 180 === d && c.x > h.right)90 === d && (k.Pa(a) || h.Pa(c)) ? l.x = this.computeMidOrthoPosition(a.x,
                    c.x, !1) : c.x < a.x && (90 === d || 0 === d) ? l.x = this.computeMidOrthoPosition(h.left, Math.max(c.x, k.right), !1) : c.x > a.x && (90 === d || 180 === d) && (l.x = this.computeMidOrthoPosition(h.right, Math.min(c.x, k.left), !1)), m.x = l.x, m.y = c.y;
                if (l.x > h.left && l.x < h.right)if (c.y <= h.bottom && c.y >= a.y || a.y >= k.top && a.y <= c.y) {
                    if (0 === d || 180 === d)l = new N(a.x, Math.min((a.y + c.y) / 2, a.y)), m = new N(c.x, l.y)
                } else l.x = 180 === d || (90 === d || 270 === d) && c.x < a.x ? Math.min(c.x, 270 === d ? h.left : Math.min(h.left, k.left)) : Math.max(c.x, 270 === d ? h.right : Math.max(h.right,
                    k.right)), m.x = l.x, m.y = c.y
            }
            var n = l, p = m;
            if (this.Kj) {
                var q = this.g, r;
                (r = null === q) || (q.Wa.vf ? r = !1 : (r = q.hb, r = r instanceof Qh ? !r.ax || r.jJ : !0), r = !r);
                if (r || h.Pa(c) && !g.Gi(e) || k.Pa(a) && !e.Gi(g) || e === g || this.layer.Wc)b = !1; else {
                    var s = ga(q, !0, this.Ka, null);
                    if (s.yq(Math.min(a.x, n.x), Math.min(a.y, n.y), Math.abs(a.x - n.x), Math.abs(a.y - n.y)) && s.yq(Math.min(n.x, p.x), Math.min(n.y, p.y), Math.abs(n.x - p.x), Math.abs(n.y - p.y)) && s.yq(Math.min(p.x, c.x), Math.min(p.y, c.y), Math.abs(p.x - c.x), Math.abs(p.y - c.y)))b = !1; else {
                        e = a;
                        g = c;
                        var u = r = null;
                        if (q.gB) {
                            q = s.pb.copy();
                            q.If(-s.Gn, -s.Fn);
                            var t = D.P();
                            bs(s, a.x, a.y) || (Ke(q.x, q.y, q.x + q.width, q.y + q.height, a.x, a.y, n.x, n.y, t) ? (r = a = t.copy(), b = t.Wb(n)) : Ke(q.x, q.y, q.x + q.width, q.y + q.height, n.x, n.y, p.x, p.y, t) ? (r = a = t.copy(), b = t.Wb(p)) : Ke(q.x, q.y, q.x + q.width, q.y + q.height, p.x, p.y, c.x, c.y, t) && (r = a = t.copy(), b = t.Wb(c)));
                            bs(s, c.x, c.y) || (Ke(q.x, q.y, q.x + q.width, q.y + q.height, c.x, c.y, p.x, p.y, t) ? (u = c = t.copy(), d = p.Wb(t)) : Ke(q.x, q.y, q.x + q.width, q.y + q.height, p.x, p.y, n.x, n.y, t) ? (u = c = t.copy(), d = n.Wb(t)) : Ke(q.x,
                                q.y, q.x + q.width, q.y + q.height, n.x, n.y, a.x, a.y, t) && (u = c = t.copy(), d = a.Wb(t)));
                            D.A(t)
                        }
                        h = h.copy().$h(k);
                        h.If(2 * s.Gn, 2 * s.Fn);
                        cs(s, a, b, c, d, h);
                        k = ds(s, c.x, c.y);
                        !s.abort && 999999 <= k && (On(s), k = s.ZG, h.If(s.Gn * k, s.Fn * k), cs(s, a, b, c, d, h), k = ds(s, c.x, c.y));
                        !s.abort && 999999 <= k && (On(s), k = s.gG, h.If(s.Gn * k, s.Fn * k), cs(s, a, b, c, d, h), k = ds(s, c.x, c.y));
                        !s.abort && 999999 <= k && s.qH && (On(s), cs(s, a, b, c, d, s.pb), k = ds(s, c.x, c.y));
                        if (!s.abort && 999999 > k && 0 !== ds(s, c.x, c.y)) {
                            es(this, s, c.x, c.y, d, !0);
                            h = this.m(2);
                            if (4 > this.ta)0 === b || 180 ===
                            b ? (h.x = a.x, h.y = c.y) : (h.x = c.x, h.y = a.y), this.ia(2, h.x, h.y), this.B(3, h.x, h.y); else if (c = this.m(3), 0 === b || 180 === b)ab(h.x, c.x) ? (h = 0 === b ? Math.max(h.x, a.x) : Math.min(h.x, a.x), this.ia(2, h, a.y), this.ia(3, h, c.y)) : ab(h.y, c.y) ? (Math.abs(a.y - h.y) <= s.Fn / 2 && (this.ia(2, h.x, a.y), this.ia(3, c.x, a.y)), this.B(2, h.x, a.y)) : this.ia(2, a.x, h.y); else if (90 === b || 270 === b)ab(h.y, c.y) ? (h = 90 === b ? Math.max(h.y, a.y) : Math.min(h.y, a.y), this.ia(2, a.x, h), this.ia(3, c.x, h)) : ab(h.x, c.x) ? (Math.abs(a.x - h.x) <= s.Gn / 2 && (this.ia(2, a.x, h.y), this.ia(3,
                                a.x, c.y)), this.B(2, a.x, h.y)) : this.ia(2, h.x, a.y);
                            null !== r && (a = this.m(1), c = this.m(2), a.x !== c.x && a.y !== c.y ? 0 === b || 180 === b ? this.B(2, a.x, c.y) : this.B(2, c.x, a.y) : 0 === b || 180 === b ? this.B(2, e.x, r.y) : this.B(2, r.x, e.y));
                            null !== u && (0 === d || 180 === d ? this.yj(g.x, u.y) : this.yj(u.x, g.y));
                            b = !0
                        } else b = !1
                    }
                }
            } else b = !1;
            b || (this.Ci(l), this.Ci(m))
        }
    };
    J.prototype.computeMidOrthoPosition = function (a, b) {
        if (this.hasCurviness()) {
            var c = this.computeCurviness();
            return (a + b) / 2 + c
        }
        return (a + b) / 2
    };
    function Mi(a) {
        if (null === a.g || !a.Kj)return !1;
        var b = a.points.o, c = b.length;
        if (4 > c)return !1;
        a = ga(a.g, !0, a.Ka, null);
        for (var d = 1; d < c - 2; d++) {
            var e = b[d], g = b[d + 1];
            if (!a.yq(Math.min(e.x, g.x), Math.min(e.y, g.y), Math.abs(e.x - g.x), Math.abs(e.y - g.y)))return !0
        }
        return !1
    }

    function es(a, b, c, d, e, g) {
        var h = b.Gn, k = b.Fn, l = ds(b, c, d), m = c, n = d;
        for (0 === e ? m += h : 90 === e ? n += k : 180 === e ? m -= h : n -= k; 1 < l && ds(b, m, n) === l - 1;)c = m, d = n, 0 === e ? m += h : 90 === e ? n += k : 180 === e ? m -= h : n -= k, l -= 1;
        if (g) {
            if (1 < l)if (180 === e || 0 === e)c = Math.floor(c / h) * h + h / 2; else if (90 === e || 270 === e)d = Math.floor(d / k) * k + k / 2
        } else c = Math.floor(c / h) * h + h / 2, d = Math.floor(d / k) * k + k / 2;
        1 < l && (g = e, m = c, n = d, 0 === e ? (g = 90, n += k) : 90 === e ? (g = 180, m -= h) : 180 === e ? (g = 270, n -= k) : 270 === e && (g = 0, m += h), ds(b, m, n) === l - 1 ? es(a, b, m, n, g, !1) : (m = c, n = d, 0 === e ? (g = 270, n -= k) : 90 ===
        e ? (g = 0, m += h) : 180 === e ? (g = 90, n += k) : 270 === e && (g = 180, m -= h), ds(b, m, n) === l - 1 && es(a, b, m, n, g, !1)));
        a.yj(c, d)
    }

    J.prototype.findClosestSegment = function (a) {
        v && D.l(a, N, J, "findClosestSegment:p");
        var b = a.x;
        a = a.y;
        for (var c = this.m(0), d = this.m(1), e = hb(b, a, c.x, c.y, d.x, d.y), g = 0, h = 1; h < this.ta - 1; h++) {
            var c = this.m(h + 1), k = hb(b, a, d.x, d.y, c.x, c.y), d = c;
            k < e && (g = h, e = k)
        }
        return g
    };
    J.prototype.Se = function () {
        this.ab = null
    };
    D.w(J, {sf: "geometry"}, function () {
        null === this.ab && (this.Ao(), this.ab = this.makeGeometry());
        return this.ab
    });
    J.prototype.Ku = function (a) {
        if (!a) {
            if (!1 === this.vg)return;
            a = this.Wd();
            if (null !== this.ab && (null === a || null !== a.sf))return
        }
        this.ab = this.makeGeometry();
        a = this.path;
        if (null !== a) {
            a.ab = this.ab;
            for (var b = this.ya.o, c = b.length, d = 0; d < c; d++) {
                var e = b[d];
                e !== a && e.Lf && e instanceof y && (e.ab = this.ab)
            }
        }
    };
    J.prototype.makeGeometry = function () {
        var a = this.ta;
        if (2 > a)return new Ze(tf);
        var b = !1, c = this.g;
        null !== c && Tr(this) && c.wl.contains(this) && null !== this.Mw && (b = !0);
        var d = c = 0, e = this.m(0).copy(), g = e.copy(), c = this.dd.o, h = this.computeCurve();
        if (h === Tj && 3 <= a && !zb(this.Sq, 0))if (3 === a)var k = this.m(1), c = Math.min(e.x, k.x), d = Math.min(e.y, k.y), k = this.m(2), c = Math.min(c, k.x), d = Math.min(d, k.y); else {
            if (this.ic)for (k = 0; k < a; k++)d = c[k], g.x = Math.min(d.x, g.x), g.y = Math.min(d.y, g.y); else for (k = 3; k < a; k += 3)k + 3 >= a && (k = a - 1), c = this.m(k),
                g.x = Math.min(c.x, g.x), g.y = Math.min(c.y, g.y);
            c = g.x;
            d = g.y
        } else {
            for (k = 0; k < a; k++)d = c[k], g.x = Math.min(d.x, g.x), g.y = Math.min(d.y, g.y);
            c = g.x;
            d = g.y
        }
        c -= this.kA.x;
        d -= this.kA.y;
        e.x -= c;
        e.y -= d;
        if (2 !== a || Tr(this)) {
            var l = D.v();
            0 !== this.computeShortLength(!0) && (e = fs(this, e, !0, g));
            T(l, e.x, e.y, !1, !1);
            if (h === Tj && 3 <= a && !zb(this.Sq, 0))if (3 === a)k = this.m(1), a = k.x - c, b = k.y - d, k = this.m(2).copy(), k.x -= c, k.y -= d, 0 !== this.computeShortLength(!1) && (k = fs(this, k, !1, g)), U(l, a, b, a, b, k.x, k.y); else if (this.ic) {
                for (var g = new N(c, d), e = this.m(1).copy(),
                         h = new N(c, d), a = new N(c, d), b = this.m(0), m = null, n = this.Sq / 3, k = 1; k < this.ta - 1; k++) {
                    var m = this.m(k), p = b, q = m, r = this.m(gs(this, m, k, !1));
                    if (!zb(p.x, q.x) || !zb(q.x, r.x))if (!zb(p.y, q.y) || !zb(q.y, r.y)) {
                        var s = n, u = h, t = a;
                        isNaN(s) && (s = this.Sq / 3);
                        var z = p.x, p = p.y, w = q.x, q = q.y, B = r.x, r = r.y, A = s * hs(z, p, w, q), s = s * hs(w, q, B, r);
                        zb(p, q) && zb(w, B) && (w > z ? r > q ? (u.x = w - A, u.y = q - A, t.x = w + s, t.y = q + s) : (u.x = w - A, u.y = q + A, t.x = w + s, t.y = q - s) : r > q ? (u.x = w + A, u.y = q - A, t.x = w - s, t.y = q + s) : (u.x = w + A, u.y = q + A, t.x = w - s, t.y = q - s));
                        zb(z, w) && zb(q, r) && (q > p ? (B > w ? (u.x =
                            w - A, u.y = q - A, t.x = w + s) : (u.x = w + A, u.y = q - A, t.x = w - s), t.y = q + s) : (B > w ? (u.x = w - A, u.y = q + A, t.x = w + s) : (u.x = w + A, u.y = q + A, t.x = w - s), t.y = q - s));
                        if (zb(z, w) && zb(w, B) || zb(p, q) && zb(q, r))z = .5 * (z + B), p = .5 * (p + r), u.x = z, u.y = p, t.x = z, t.y = p;
                        1 === k ? (e.x = .5 * (b.x + m.x), e.y = .5 * (b.y + m.y)) : 2 === k && zb(b.x, this.m(0).x) && zb(b.y, this.m(0).y) && (e.x = .5 * (b.x + m.x), e.y = .5 * (b.y + m.y));
                        U(l, e.x - c, e.y - d, h.x - c, h.y - d, m.x - c, m.y - d);
                        g.set(h);
                        e.set(a);
                        b = m
                    }
                }
                k = b.x;
                b = b.y;
                g = this.m(this.ta - 1);
                0 !== this.computeShortLength(!1) && (g = fs(this, g.copy(), !1, Jd));
                k = .5 * (k + g.x);
                b = .5 * (b + g.y);
                U(l, a.x - c, a.y - d, k - c, b - d, g.x - c, g.y - d)
            } else for (k = 3; k < a; k += 3)b = this.m(k - 2), k + 3 >= a && (k = a - 1), g = this.m(k - 1), e = this.m(k), k === a - 1 && 0 !== this.computeShortLength(!1) && (e = fs(this, e.copy(), !1, Jd)), U(l, b.x - c, b.y - d, g.x - c, g.y - d, e.x - c, e.y - d); else {
                g = D.P();
                g.assign(this.m(0));
                k = 1;
                for (e = 0; k < a;) {
                    k = gs(this, g, k, 1 < k);
                    u = this.m(k);
                    if (k >= a - 1) {
                        if (!g.O(u))0 !== this.computeShortLength(!1) && (u = fs(this, u.copy(), !1, Jd)), is(this, l, -c, -d, g, u, b); else if (0 === e)for (k = 1; k < a;)u = this.m(k++), is(this, l, -c, -d, g, u, b), g.assign(u);
                        break
                    }
                    e = gs(this, u, k + 1, k < a - 3);
                    k = l;
                    h = -c;
                    m = -d;
                    n = g;
                    t = this.m(e);
                    z = g;
                    p = b;
                    ab(n.y, u.y) && ab(u.x, t.x) ? (s = this.computeCorner(), s = Math.min(s, Math.abs(u.x - n.x) / 2), s = w = Math.min(s, Math.abs(t.y - u.y) / 2), ab(s, 0) ? (is(this, k, h, m, n, u, p), z.assign(u)) : (q = u.x, B = u.y, r = q, A = B, q = u.x > n.x ? u.x - s : u.x + s, A = t.y > u.y ? u.y + w : u.y - w, is(this, k, h, m, n, new N(q, B), p), Af(k, u.x + h, u.y + m, r + h, A + m), z.n(r, A))) : ab(n.x, u.x) && ab(u.y, t.y) ? (s = this.computeCorner(), w = Math.min(s, Math.abs(u.y - n.y) / 2), w = s = Math.min(w, Math.abs(t.x - u.x) / 2), ab(s, 0) ? (is(this, k, h,
                        m, n, u, p), z.assign(u)) : (q = u.x, A = B = u.y, B = u.y > n.y ? u.y - w : u.y + w, r = t.x > u.x ? u.x + s : u.x - s, is(this, k, h, m, n, new N(q, B), p), Af(k, u.x + h, u.y + m, r + h, A + m), z.n(r, A))) : (is(this, k, h, m, n, u, p), z.assign(u));
                    k = e
                }
                D.A(g)
            }
            c = l.q;
            D.u(l)
        } else l = this.m(1).copy(), l.x -= c, l.y -= d, 0 !== this.computeShortLength(!0) && (e = fs(this, e, !0, g)), 0 !== this.computeShortLength(!1) && (l = fs(this, l, !1, g)), c = new Ze(tf), c.la = e.x, c.ja = e.y, c.G = l.x, c.H = l.y;
        return c
    };
    function hs(a, b, c, d) {
        a = c - a;
        if (isNaN(a) || Infinity === a || -Infinity === a)return NaN;
        0 > a && (a = -a);
        b = d - b;
        if (isNaN(b) || Infinity === b || -Infinity === b)return NaN;
        0 > b && (b = -b);
        return zb(a, 0) ? b : zb(b, 0) ? a : Math.sqrt(a * a + b * b)
    }

    function fs(a, b, c, d) {
        var e = a.ta;
        if (2 > e)return b;
        if (c) {
            var g = a.m(1);
            c = g.x - d.x;
            d = g.y - d.y;
            g = hs(b.x, b.y, c, d);
            if (0 === g)return b;
            e = 2 === e ? .5 * g : g;
            a = a.computeShortLength(!0);
            a > e && (a = e);
            c = a * (c - b.x) / g;
            a = a * (d - b.y) / g;
            b.x += c;
            b.y += a
        } else {
            g = a.m(e - 2);
            c = g.x - d.x;
            d = g.y - d.y;
            g = hs(b.x, b.y, c, d);
            if (0 === g)return b;
            e = 2 === e ? .5 * g : g;
            a = a.computeShortLength(!1);
            a > e && (a = e);
            c = a * (b.x - c) / g;
            a = a * (b.y - d) / g;
            b.x -= c;
            b.y -= a
        }
        return b
    }

    function gs(a, b, c, d) {
        for (var e = a.ta, g = b; zb(b.x, g.x) && zb(b.y, g.y);) {
            if (c >= e)return e - 1;
            g = a.m(c++)
        }
        if (!zb(b.x, g.x) && !zb(b.y, g.y))return c - 1;
        for (var h = g; zb(b.x, g.x) && zb(g.x, h.x) && (!d || (b.y >= g.y ? g.y >= h.y : g.y <= h.y)) || zb(b.y, g.y) && zb(g.y, h.y) && (!d || (b.x >= g.x ? g.x >= h.x : g.x <= h.x));) {
            if (c >= e)return e - 1;
            h = a.m(c++)
        }
        return c - 2
    }

    function is(a, b, c, d, e, g, h) {
        if (!h && Tr(a)) {
            h = [];
            var k = 0;
            a.isVisible() && (k = js(a, e, g, h));
            var l = e.x, l = e.y;
            if (0 < k)if (ab(e.y, g.y))if (e.x < g.x)for (var m = 0; m < k;) {
                var n = Math.max(e.x, Math.min(h[m++] - 5, g.x - 10));
                b.lineTo(n + c, g.y + d);
                for (var l = n + c, p = Math.min(n + 10, g.x); m < k;) {
                    var q = h[m];
                    if (q < p + 10)m++, p = Math.min(q + 5, g.x); else break
                }
                q = (n + p) / 2 + c;
                q = g.y - 10 + d;
                n = p + c;
                p = g.y + d;
                a.jf === tj ? T(b, n, p, !1, !1) : U(b, l, q, n, q, n, p)
            } else for (m = k - 1; 0 <= m;) {
                n = Math.min(e.x, Math.max(h[m--] + 5, g.x + 10));
                b.lineTo(n + c, g.y + d);
                l = n + c;
                for (p = Math.max(n -
                    10, g.x); 0 <= m;)if (q = h[m], q > p - 10)m--, p = Math.max(q - 5, g.x); else break;
                q = g.y - 10 + d;
                n = p + c;
                p = g.y + d;
                a.jf === tj ? T(b, n, p, !1, !1) : U(b, l, q, n, q, n, p)
            } else if (ab(e.x, g.x))if (e.y < g.y)for (m = 0; m < k;) {
                n = Math.max(e.y, Math.min(h[m++] - 5, g.y - 10));
                b.lineTo(g.x + c, n + d);
                l = n + d;
                for (p = Math.min(n + 10, g.y); m < k;)if (q = h[m], q < p + 10)m++, p = Math.min(q + 5, g.y); else break;
                q = g.x - 10 + c;
                n = g.x + c;
                p += d;
                a.jf === tj ? T(b, n, p, !1, !1) : U(b, q, l, q, p, n, p)
            } else for (m = k - 1; 0 <= m;) {
                n = Math.min(e.y, Math.max(h[m--] + 5, g.y + 10));
                b.lineTo(g.x + c, n + d);
                l = n + d;
                for (p = Math.max(n -
                    10, g.y); 0 <= m;)if (q = h[m], q > p - 10)m--, p = Math.max(q - 5, g.y); else break;
                q = g.x - 10 + c;
                n = g.x + c;
                p += d;
                a.jf === tj ? T(b, n, p, !1, !1) : U(b, q, l, q, p, n, p)
            }
        }
        b.lineTo(g.x + c, g.y + d)
    }

    function js(a, b, c, d) {
        var e = a.g;
        if (null === e || b.O(c))return 0;
        for (e = e.co; e.next();) {
            var g = e.value;
            if (null !== g && g.visible)for (var g = g.rb.o, h = g.length, k = 0; k < h; k++) {
                var l = g[k];
                if (l instanceof J) {
                    if (l === a)return 0 < d.length && d.sort(function (a, b) {
                        return a - b
                    }), d.length;
                    if (l.isVisible() && Tr(l)) {
                        var m = l.so;
                        m.F() && a.so.hg(m) && !a.usesSamePort(l) && (m = l.path, null !== m && m.Pj() && ks(b, c, d, l))
                    }
                }
            }
        }
        0 < d.length && d.sort(function (a, b) {
            return a - b
        });
        return d.length
    }

    function ks(a, b, c, d) {
        for (var e = ab(a.y, b.y), g = d.ta, h = d.m(0), k = D.P(), l = 1; l < g; l++) {
            var m = d.m(l);
            if (l < g - 1) {
                var n = d.m(l + 1);
                if (h.y === m.y && m.y === n.y) {
                    if (m.x > h.x && n.x > m.x || m.x < h.x && n.x < m.x)m = n, l++
                } else h.x === m.x && m.x === n.x && (m.y > h.y && n.y > m.y || m.y < h.y && n.y < m.y) && (m = n, l++)
            }
            a:{
                var n = k, p = a.x, q = a.y, r = b.x, s = b.y, u = h.x, h = h.y, t = m.x, z = m.y;
                if (!ab(p, r)) {
                    if (ab(q, s) && ab(u, t) && Math.min(p, r) < u && Math.max(p, r) > u && Math.min(h, z) < q && Math.max(h, z) > q && !ab(h, z)) {
                        n.x = u;
                        n.y = q;
                        n = !0;
                        break a
                    }
                } else if (!ab(q, s) && ab(h, z) && Math.min(q, s) <
                    h && Math.max(q, s) > h && Math.min(u, t) < p && Math.max(u, t) > p && !ab(u, t)) {
                    n.x = p;
                    n.y = h;
                    n = !0;
                    break a
                }
                n.x = 0;
                n.y = 0;
                n = !1
            }
            n && (e ? c.push(k.x) : c.push(k.y));
            h = m
        }
        D.A(k)
    }

    D.w(J, {ku: "firstPickIndex"}, function () {
        var a;
        2 >= this.ta ? a = 0 : ((a = this.ic) || (a = this.computeSpot(!0) !== cc), a = a ? 1 : 0);
        return a
    });
    D.w(J, {hy: "lastPickIndex"}, function () {
        var a = this.ta;
        if (0 === a)a = 0; else if (2 >= a)a -= 1; else {
            var b;
            (b = this.ic) || (b = this.computeSpot(!1) !== cc);
            a = b ? a - 2 : a - 1
        }
        return a
    });
    function Tr(a) {
        a = a.jf;
        return a === sj || a === tj
    }

    function Vr(a, b) {
        if (b || Tr(a)) {
            var c = a.g;
            null === c || c.wl.contains(a) || null === a.Mw || c.wl.add(a, a.Mw)
        }
    }

    function Nj(a, b) {
        var c = a.layer;
        if (null !== c && c.visible && !c.Wc) {
            var d = c.g;
            if (null !== d)for (var e = !1, d = d.co; d.next();) {
                var g = d.value;
                if (g.visible)if (g === c)for (var e = !0, h = !1, g = g.rb.o, k = g.length, l = 0; l < k; l++) {
                    var m = g[l];
                    m instanceof J && (m === a ? h = !0 : h && ls(a, m, b))
                } else if (e)for (g = g.rb.o, k = g.length, l = 0; l < k; l++)m = g[l], m instanceof J && ls(a, m, b)
            }
        }
    }

    function ls(a, b, c) {
        if (null !== b && null !== b.ab && Tr(b)) {
            var d = b.so;
            d.F() && (a.so.hg(d) || c.hg(d)) && (a.usesSamePort(b) || b.Se())
        }
    }

    J.prototype.usesSamePort = function (a) {
        var b = this.ta, c = a.ta;
        if (0 < b && 0 < c) {
            var d = this.m(0), e = a.m(0);
            if (d.Uc(e))return !0;
            b = this.m(b - 1);
            a = a.m(c - 1);
            if (b.Uc(a) || d.Uc(a) || b.Uc(e))return !0
        } else if (this.Y === a.Y || this.ba === a.ba || this.Y === a.ba || this.ba === a.Y)return !0;
        return !1
    };
    J.prototype.isVisible = function () {
        if (!F.prototype.isVisible.call(this))return !1;
        var a = this.Ka, b = !0, c = this.g;
        null !== c && (b = c.ce);
        var d = this.Y;
        if (null !== d) {
            if (this.Xc && b && !d.Bc)return !1;
            if (d === a)return !0;
            for (c = d; null !== c;) {
                if (c.Xb === this)return !0;
                c = c.Ka
            }
            c = d.findVisibleNode();
            if (null === c || c === a)return !1
        }
        d = this.ba;
        if (null !== d) {
            if (this.Xc && !b && !d.Bc)return !1;
            if (d === a)return !0;
            for (c = d; null !== c;) {
                if (c.Xb === this)return !0;
                c = c.Ka
            }
            b = d.findVisibleNode();
            if (null === b || b === a)return !1
        }
        return !0
    };
    J.prototype.Ld = function (a) {
        F.prototype.Ld.call(this, a);
        null !== this.Ni && this.Ni.tq();
        if (null !== this.Bf)for (var b = this.Bf.j; b.next();)b.value.Ld(a)
    };
    D.defineProperty(J, {Tt: "adjusting"}, function () {
        return this.cr
    }, function (a) {
        var b = this.cr;
        b !== a && (v && D.Da(a, J, J, "adjusting"), this.cr = a, this.i("adjusting", b, a))
    });
    D.defineProperty(J, {FA: "corner"}, function () {
        return this.xr
    }, function (a) {
        var b = this.xr;
        b !== a && (v && D.h(a, "number", J, "corner"), this.xr = a, this.Se(), this.i("corner", b, a))
    });
    D.defineProperty(J, {jf: "curve"}, function () {
        return this.Ar
    }, function (a) {
        var b = this.Ar;
        b !== a && (v && D.Da(a, J, J, "curve"), this.Ar = a, this.hc(), this.Se(), Vr(this, b === tj || b === sj || a === tj || a === sj), this.i("curve", b, a))
    });
    D.defineProperty(J, {Dx: "curviness"}, function () {
        return this.Br
    }, function (a) {
        var b = this.Br;
        b !== a && (v && D.h(a, "number", J, "curviness"), this.Br = a, this.hc(), this.Se(), this.i("curviness", b, a))
    });
    D.defineProperty(J, {Ey: "routing"}, function () {
        return this.nn
    }, function (a) {
        var b = this.nn;
        b !== a && (v && D.Da(a, J, J, "routing"), this.nn = a, this.Zi = null, this.hc(), Vr(this, 2 === (b.value & 2) || 2 === (a.value & 2)), this.i("routing", b, a))
    });
    D.defineProperty(J, {Sq: "smoothness"}, function () {
        return this.yt
    }, function (a) {
        var b = this.yt;
        b !== a && (v && D.h(a, "number", J, "smoothness"), this.yt = a, this.Se(), this.i("smoothness", b, a))
    });
    function Sr(a) {
        var b = a.Dg;
        if (null !== b) {
            var c = a.Ug;
            if (null !== c) {
                var d = a.gi;
                a = a.Ai;
                for (var e = null, g = null, h = b.wc.o, k = h.length, l = 0; l < k; l++) {
                    var m = h[l];
                    if (m.Dg === b && m.gi === d && m.Ug === c && m.Ai === a || m.Dg === c && m.gi === a && m.Ug === b && m.Ai === d)null === g ? g = m : (null === e && (e = [], e.push(g)), e.push(m))
                }
                if (null !== e) {
                    g = Br(b, c, d, a);
                    null === g && (g = new Hl, g.Cq = b, g.uy = d, g.Pu = c, g.vy = a, Ar(b, g), Ar(c, g));
                    g.links = e;
                    for (l = 0; l < e.length; l++)m = e[l], m.Ni = g;
                    g.tq()
                }
            }
        }
    }

    function Rr(a) {
        var b = a.Ni;
        null !== b && (a.Ni = null, a = b.links.indexOf(a), 0 <= a && (D.Xg(b.links, a), b.tq()))
    }

    function Hl() {
        D.vc(this);
        this.Wf = this.fw = !1;
        this.vy = this.Pu = this.uy = this.Cq = null;
        this.links = []
    }

    Hl.prototype.tq = function () {
        if (!this.fw) {
            var a = this.links;
            0 < a.length && (a = a[0].g, null !== a && (a.kD.add(this), this.Wf = a.ra.jb))
        }
        this.fw = !0
    };
    Hl.prototype.eC = function () {
        if (this.fw) {
            this.fw = !1;
            var a = this.links;
            if (0 < a.length) {
                var b = a[0], c = b.g, c = null === c || c.ao && !this.Wf;
                this.Wf = !1;
                b.arrangeBundledLinks(a, c);
                1 === a.length && (b.Ni = null, a.length = 0)
            }
            0 === a.length && (a = this.Cq, null !== this && null !== a.ai && a.ai.remove(this), a = this.Pu, null !== this && null !== a.ai && a.ai.remove(this))
        }
    };
    D.ne(Hl, {Cq: !0, uy: !0, Pu: !0, vy: !0, links: !0, spacing: !0});
    function Mn() {
        D.vc(this);
        this.SB = this.group = null;
        this.sq = !0;
        this.abort = !1;
        this.ag = this.$f = 1;
        this.zs = this.ys = -1;
        this.Od = this.fe = 8;
        this.od = null;
        this.qH = !1;
        this.ZG = 22;
        this.gG = 111
    }

    D.ne(Mn, {group: !0, SB: !0, sq: !0, abort: !0, qH: !0, ZG: !0, gG: !0});
    Mn.prototype.initialize = function (a) {
        if (!(0 >= a.width || 0 >= a.height)) {
            var b = a.y, c = a.x + a.width, d = a.y + a.height;
            this.$f = Math.floor((a.x - this.fe) / this.fe) * this.fe;
            this.ag = Math.floor((b - this.Od) / this.Od) * this.Od;
            this.ys = Math.ceil((c + 2 * this.fe) / this.fe) * this.fe;
            this.zs = Math.ceil((d + 2 * this.Od) / this.Od) * this.Od;
            a = 1 + (Math.ceil((this.ys - this.$f) / this.fe) | 0);
            b = 1 + (Math.ceil((this.zs - this.ag) / this.Od) | 0);
            if (null === this.od || this.zn < a - 1 || this.An < b - 1) {
                c = [];
                for (d = 0; d <= a; d++)c[d] = [];
                this.od = c;
                this.zn = a - 1;
                this.An = b - 1
            }
            if (null !==
                this.od)for (a = 0; a <= this.zn; a++)for (b = 0; b <= this.An; b++)this.od[a][b] = 1E6
        }
    };
    D.w(Mn, {pb: null}, function () {
        return new C(this.$f, this.ag, this.ys - this.$f, this.zs - this.ag)
    });
    D.defineProperty(Mn, {Gn: null}, function () {
        return this.fe
    }, function (a) {
        0 < a && a !== this.fe && (this.fe = a, this.initialize(this.pb))
    });
    D.defineProperty(Mn, {Fn: null}, function () {
        return this.Od
    }, function (a) {
        0 < a && a !== this.Od && (this.Od = a, this.initialize(this.pb))
    });
    function bs(a, b, c) {
        return a.$f <= b && b <= a.ys && a.ag <= c && c <= a.zs
    }

    function ds(a, b, c) {
        if (!bs(a, b, c))return 1E6;
        b -= a.$f;
        b /= a.fe;
        c -= a.ag;
        c /= a.Od;
        return a.od[b | 0][c | 0]
    }

    function Pn(a, b, c) {
        bs(a, b, c) && (b -= a.$f, b /= a.fe, c -= a.ag, c /= a.Od, a.od[b | 0][c | 0] = 0)
    }

    function On(a) {
        if (null !== a.od)for (var b = 0; b <= a.zn; b++)for (var c = 0; c <= a.An; c++)1 <= a.od[b][c] && (a.od[b][c] = 1E6)
    }

    Mn.prototype.yq = function (a, b, c, d) {
        if (a > this.ys || a + c < this.$f || b > this.zs || b + d < this.ag)return !0;
        a = (a - this.$f) / this.fe | 0;
        b = (b - this.ag) / this.Od | 0;
        c = Math.max(0, c) / this.fe + 1 | 0;
        var e = Math.max(0, d) / this.Od + 1 | 0;
        0 > a && (c += a, a = 0);
        0 > b && (e += b, b = 0);
        if (0 > c || 0 > e)return !0;
        d = Math.min(a + c - 1, this.zn) | 0;
        for (c = Math.min(b + e - 1, this.An) | 0; a <= d; a++)for (e = b; e <= c; e++)if (0 === this.od[a][e])return !1;
        return !0
    };
    function ms(a, b, c, d, e, g, h, k, l) {
        if (!(b < g || b > h || c < k || c > l)) {
            var m, n;
            m = b | 0;
            n = c | 0;
            var p = a.od[m][n];
            if (1 <= p && 999999 > p)for (e ? n += d : m += d, p += 1; g <= m && m <= h && k <= n && n <= l && !(p >= a.od[m][n]);)a.od[m][n] = p, p += 1, e ? n += d : m += d;
            m = e ? n : m;
            if (e)if (0 < d)for (c += d; c < m; c += d)ms(a, b, c, 1, !e, g, h, k, l), ms(a, b, c, -1, !e, g, h, k, l); else for (c += d; c > m; c += d)ms(a, b, c, 1, !e, g, h, k, l), ms(a, b, c, -1, !e, g, h, k, l); else if (0 < d)for (b += d; b < m; b += d)ms(a, b, c, 1, !e, g, h, k, l), ms(a, b, c, -1, !e, g, h, k, l); else for (b += d; b > m; b += d)ms(a, b, c, 1, !e, g, h, k, l), ms(a, b, c, -1, !e, g, h,
                k, l)
        }
    }

    function ns(a, b, c, d, e, g, h, k, l) {
        b |= 0;
        c |= 0;
        var m = 0, n = 1;
        for (a.od[b][c] = n; 0 === m && b > g && b < h && c > k && c < l;)n += 1, a.od[b][c] = n, e ? c += d : b += d, m = a.od[b][c]
    }

    function os(a, b, c, d, e, g, h, k, l) {
        b |= 0;
        c |= 0;
        var m = 0;
        for (a.od[b][c] = 999999; 0 === m && b > g && b < h && c > k && c < l;)a.od[b][c] = 999999, e ? c += d : b += d, m = a.od[b][c]
    }

    function cs(a, b, c, d, e, g) {
        if (null !== a.od) {
            a.abort = !1;
            var h = b.x, k = b.y;
            if (bs(a, h, k) && (h -= a.$f, h /= a.fe, k -= a.ag, k /= a.Od, b = d.x, d = d.y, bs(a, b, d)))if (b -= a.$f, b /= a.fe, d -= a.ag, d /= a.Od, 1 >= Math.abs(h - b) && 1 >= Math.abs(k - d))a.abort = !0; else {
                var l = g.x, m = g.y, n = g.x + g.width, p = g.y + g.height, l = l - a.$f, l = l / a.fe, m = m - a.ag, m = m / a.Od, n = n - a.$f, n = n / a.fe, p = p - a.ag, p = p / a.Od;
                g = Math.max(0, Math.min(a.zn, l | 0));
                n = Math.min(a.zn, Math.max(0, n | 0));
                m = Math.max(0, Math.min(a.An, m | 0));
                p = Math.min(a.An, Math.max(0, p | 0));
                h |= 0;
                k |= 0;
                b |= 0;
                d |= 0;
                l = 0 === c ||
                90 === c ? 1 : -1;
                c = 90 === c || 270 === c;
                0 === a.od[h][k] ? (ns(a, h, k, l, c, g, n, m, p), ns(a, h, k, 1, !c, g, n, m, p), ns(a, h, k, -1, !c, g, n, m, p)) : ns(a, h, k, l, c, h, k, h, k);
                0 === a.od[b][d] ? (os(a, b, d, 0 === e || 90 === e ? 1 : -1, 90 === e || 270 === e, g, n, m, p), os(a, b, d, 1, !(90 === e || 270 === e), g, n, m, p), os(a, b, d, -1, !(90 === e || 270 === e), g, n, m, p)) : os(a, b, d, l, c, b, d, b, d);
                a.abort || (ms(a, h, k, 1, !1, g, n, m, p), ms(a, h, k, -1, !1, g, n, m, p), ms(a, h, k, 1, !0, g, n, m, p), ms(a, h, k, -1, !0, g, n, m, p))
            }
        }
    }

    function $r() {
        D.vc(this);
        this.port = this.Yc = null;
        this.ng = [];
        this.Bq = !1
    }

    D.ne($r, {Yc: !0, port: !0, ng: !0, Bq: !0});
    $r.prototype.toString = function () {
        for (var a = this.ng, b = this.Yc.toString() + " " + a.length.toString() + ":", c = 0; c < a.length; c++) {
            var d = a[c];
            null !== d && (b += "\n  " + d.toString())
        }
        return b
    };
    function ps(a, b, c, d) {
        b = b.offsetY;
        switch (b) {
            case D.md:
                return 90;
            case D.ad:
                return 180;
            case D.xd:
                return 270;
            case D.nd:
                return 0
        }
        switch (b) {
            case D.md | D.xd:
                return 180 < c ? 270 : 90;
            case D.ad | D.nd:
                return 90 < c && 270 >= c ? 180 : 0
        }
        a = 180 * Math.atan2(a.height, a.width) / Math.PI;
        switch (b) {
            case D.ad | D.xd:
                return c > a && c <= 180 + a ? 180 : 270;
            case D.xd | D.nd:
                return c > 180 - a && c <= 360 - a ? 270 : 0;
            case D.nd | D.md:
                return c > a && c <= 180 + a ? 90 : 0;
            case D.md | D.ad:
                return c > 180 - a && c <= 360 - a ? 180 : 90;
            case D.ad | D.xd | D.nd:
                return 90 < c && c <= 180 + a ? 180 : c > 180 + a && c <= 360 -
                a ? 270 : 0;
            case D.xd | D.nd | D.md:
                return 180 < c && c <= 360 - a ? 270 : c > a && 180 >= c ? 90 : 0;
            case D.nd | D.md | D.ad:
                return c > a && c <= 180 - a ? 90 : c > 180 - a && 270 >= c ? 180 : 0;
            case D.md | D.ad | D.xd:
                return c > 180 - a && c <= 180 + a ? 180 : c > 180 + a ? 270 : 90
        }
        d && b !== (D.ad | D.xd | D.nd | D.md) && (c -= 15, 0 > c && (c += 360));
        return c > a && c < 180 - a ? 90 : c >= 180 - a && c <= 180 + a ? 180 : c > 180 + a && c < 360 - a ? 270 : 0
    }

    $r.prototype.tq = function () {
        this.ng.length = 0
    };
    function as(a, b) {
        var c = a.ng;
        if (0 === c.length) {
            a:if (!a.Bq) {
                c = a.Bq;
                a.Bq = !0;
                var d, e = null, g = a.Yc, g = g instanceof I ? g : null;
                if (null === g || g.ud)d = a.Yc.sF(a.port.vd); else {
                    if (!g.$.F()) {
                        a.Bq = c;
                        break a
                    }
                    e = g;
                    d = e.rF()
                }
                var h = a.ng.length = 0, k = a.port.eb(dc, D.P()), l = a.port.eb(uc, D.P()), g = D.ug(k.x, k.y, 0, 0);
                g.Li(l);
                D.A(k);
                D.A(l);
                k = D.Fb(g.x + g.width / 2, g.y + g.height / 2);
                l = a.port.qm();
                for (d = d.j; d.next();) {
                    var m = d.value;
                    if (m.isVisible()) {
                        var n = m.Mc === a.port || m.Y.Gi(e), p = m.computeSpot(n);
                        if (p.Mj() && (n = n ? m.ld : m.Mc, null !== n)) {
                            var q =
                                n.Z;
                            if (null !== q) {
                                n = m.computeOtherPoint(q, n);
                                q = k.Wb(n);
                                q -= l;
                                0 > q && (q += 360);
                                var p = ps(g, p, q, m.ic), r = 0;
                                0 === p ? (r = D.nd, 180 < q && (q -= 360)) : r = 90 === p ? D.md : 180 === p ? D.ad : D.xd;
                                p = a.ng[h];
                                void 0 === p ? (p = new qs(m, q, r), a.ng[h] = p) : (p.link = m, p.angle = q, p.Le = r);
                                p.sy.set(n);
                                h++
                            }
                        }
                    }
                }
                D.A(k);
                a.ng.sort($r.prototype.TJ);
                e = a.ng.length;
                k = -1;
                for (h = l = 0; h < e; h++)p = a.ng[h], void 0 !== p && (p.Le !== k && (k = p.Le, l = 0), p.qq = l, l++);
                k = -1;
                l = 0;
                for (h = e - 1; 0 <= h; h--)p = a.ng[h], void 0 !== p && (p.Le !== k && (k = p.Le, l = p.qq + 1), p.Nn = l);
                h = a.ng;
                p = a.port;
                e = a.Yc.YJ;
                k =
                    D.P();
                l = D.P();
                d = D.P();
                m = D.P();
                p.eb(dc, k);
                p.eb(ic, l);
                p.eb(uc, d);
                p.eb(sc, m);
                r = q = n = p = 0;
                if (e === zr)for (var s = 0; s < h.length; s++) {
                    var u = h[s];
                    if (null !== u) {
                        var t = u.link.computeThickness();
                        switch (u.Le) {
                            case D.md:
                                q += t;
                                break;
                            case D.ad:
                                r += t;
                                break;
                            case D.xd:
                                p += t;
                                break;
                            default:
                            case D.nd:
                                n += t
                        }
                    }
                }
                for (var z = 0, w = 0, B = 1, s = 0; s < h.length; s++)if (u = h[s], null !== u) {
                    var A, O;
                    if (z !== u.Le) {
                        z = u.Le;
                        switch (z) {
                            case D.md:
                                A = d;
                                O = m;
                                break;
                            case D.ad:
                                A = m;
                                O = k;
                                break;
                            case D.xd:
                                A = k;
                                O = l;
                                break;
                            default:
                            case D.nd:
                                A = l, O = d
                        }
                        var H = O.x - A.x;
                        O = O.y - A.y;
                        switch (z) {
                            case D.md:
                                q >
                                Math.abs(H) ? (B = Math.abs(H) / q, q = Math.abs(H)) : B = 1;
                                break;
                            case D.ad:
                                r > Math.abs(O) ? (B = Math.abs(O) / r, r = Math.abs(O)) : B = 1;
                                break;
                            case D.xd:
                                p > Math.abs(H) ? (B = Math.abs(H) / p, p = Math.abs(H)) : B = 1;
                                break;
                            default:
                            case D.nd:
                                n > Math.abs(O) ? (B = Math.abs(O) / n, n = Math.abs(O)) : B = 1
                        }
                        w = 0
                    }
                    var S = u.zq;
                    if (e === zr) {
                        t = u.link.computeThickness();
                        t *= B;
                        S.set(A);
                        switch (z) {
                            case D.md:
                                S.x = A.x + H / 2 + q / 2 - w - t / 2;
                                break;
                            case D.ad:
                                S.y = A.y + O / 2 + r / 2 - w - t / 2;
                                break;
                            case D.xd:
                                S.x = A.x + H / 2 - p / 2 + w + t / 2;
                                break;
                            default:
                            case D.nd:
                                S.y = A.y + O / 2 - n / 2 + w + t / 2
                        }
                        w += t
                    } else t = .5,
                    e === wr && (t = (u.qq + 1) / (u.Nn + 1)), S.x = A.x + H * t, S.y = A.y + O * t
                }
                D.A(k);
                D.A(l);
                D.A(d);
                D.A(m);
                A = a.ng;
                for (H = 0; H < A.length; H++)O = A[H], null !== O && (O.Ix = a.computeEndSegmentLength(O));
                a.Bq = c;
                D.Kb(g)
            }
            c = a.ng
        }
        for (g = 0; g < c.length; g++)if (A = c[g], null !== A && A.link === b)return A;
        return null
    }

    $r.prototype.TJ = function (a, b) {
        return a === b ? 0 : null === a ? -1 : null === b ? 1 : a.Le < b.Le ? -1 : a.Le > b.Le ? 1 : a.angle < b.angle ? -1 : a.angle > b.angle ? 1 : 0
    };
    $r.prototype.computeEndSegmentLength = function (a) {
        var b = a.link, c = b.computeEndSegmentLength(this.Yc, this.port, cc, b.Mc === this.port), d = a.qq;
        if (0 > d)return c;
        var e = a.Nn;
        if (1 >= e || !b.ic)return c;
        var b = a.sy, g = a.zq;
        if (a.Le === D.ad || a.Le === D.md)d = e - 1 - d;
        return ((a = a.Le === D.ad || a.Le === D.nd) ? b.y < g.y : b.x < g.x) ? c + 8 * d : (a ? b.y === g.y : b.x === g.x) ? c : c + 8 * (e - 1 - d)
    };
    function qs(a, b, c) {
        this.link = a;
        this.angle = b;
        this.Le = c;
        this.sy = new N;
        this.Nn = this.qq = 0;
        this.zq = new N;
        this.Ix = 0
    }

    D.ne(qs, {link: !0, angle: !0, Le: !0, sy: !0, qq: !0, Nn: !0, zq: !0, Ix: !0});
    qs.prototype.toString = function () {
        return this.link.toString() + " " + this.angle.toString() + " " + this.Le.toString() + ":" + this.qq.toString() + "/" + this.Nn.toString() + " " + this.zq.toString() + " " + this.Ix.toString() + " " + this.sy.toString()
    };
    function Eo() {
        this.Hk = this.kk = Wc;
        this.Fk = this.ik = NaN;
        this.Ek = this.hk = xr;
        this.Gk = this.jk = NaN;
        this.It = this.Ur = null;
        this.Jt = this.Vr = Infinity
    }

    Eo.prototype.copy = function () {
        var a = new Eo;
        a.kk = this.kk.V();
        a.Hk = this.Hk.V();
        a.ik = this.ik;
        a.Fk = this.Fk;
        a.hk = this.hk;
        a.Ek = this.Ek;
        a.jk = this.jk;
        a.Gk = this.Gk;
        a.Ur = this.Ur;
        a.It = this.It;
        a.Vr = this.Vr;
        a.Jt = this.Jt;
        return a
    };
    function I(a) {
        G.call(this, a);
        this.Ca |= 4608;
        this.Bs = new L(F);
        this.fn = new L(I);
        this.Qb = this.Ct = this.Ml = this.Cs = this.As = null;
        this.ve = new Zg;
        this.ve.group = this
    }

    D.Ra(I, G);
    D.ka("Group", I);
    I.prototype.cloneProtected = function (a) {
        G.prototype.cloneProtected.call(this, a);
        this.Ca &= -32769;
        a.As = this.As;
        a.Cs = this.Cs;
        a.Ml = this.Ml;
        a.Ct = this.Ct;
        var b = a.hu(function (a) {
            return a instanceof Xj
        });
        a.Qb = b instanceof Xj ? b : null;
        null !== this.ve ? (a.ve = this.ve.copy(), a.ve.group = a) : (null !== a.ve && (a.ve.group = null), a.ve = null)
    };
    I.prototype.Ei = function (a) {
        G.prototype.Ei.call(this, a);
        var b = a.mq();
        for (a = a.Oc; a.next();) {
            var c = a.value;
            c.K();
            c.N(8);
            c.$t();
            if (c instanceof G)c.ig(b); else if (c instanceof J)for (c = c.wf; c.next();)c.value.ig(b)
        }
    };
    I.prototype.ro = function (a, b, c, d, e, g, h) {
        if (a === pg && "elements" === b)if (e instanceof Xj) {
            var k = e;
            null === this.Qb ? this.Qb = k : this.Qb !== k && D.k("Cannot insert a second Placeholder into the visual tree of a Group.")
        } else e instanceof x && (k = e.hu(function (a) {
            return a instanceof Xj
        }), k instanceof Xj && (null === this.Qb ? this.Qb = k : this.Qb !== k && D.k("Cannot insert a second Placeholder into the visual tree of a Group."))); else a === qg && "elements" === b && null !== this.Qb && (d === this.Qb ? this.Qb = null : d instanceof x && this.Qb.vm(d) &&
        (this.Qb = null));
        G.prototype.ro.call(this, a, b, c, d, e, g, h)
    };
    I.prototype.zj = function (a, b, c, d) {
        this.Ll = this.Qb;
        x.prototype.zj.call(this, a, b, c, d)
    };
    I.prototype.wm = function () {
        if (!G.prototype.wm.call(this))return !1;
        for (var a = this.Oc; a.next();) {
            var b = a.value;
            if (b instanceof G) {
                if (b.isVisible() && Mm(b))return !1
            } else if (b instanceof J && b.isVisible() && Mm(b) && b.Y !== this && b.ba !== this)return !1
        }
        return !0
    };
    D.w(I, {placeholder: "placeholder"}, function () {
        return this.Qb
    });
    D.defineProperty(I, {kI: "computesBoundsAfterDrag"}, function () {
        return 0 !== (this.Ca & 2048)
    }, function (a) {
        var b = 0 !== (this.Ca & 2048);
        b !== a && (D.h(a, "boolean", I, "computesBoundsAfterDrag"), this.Ca ^= 2048, this.i("computesBoundsAfterDrag", b, a))
    });
    D.defineProperty(I, {zx: "computesBoundsIncludingLinks"}, function () {
        return 0 !== (this.Ca & 4096)
    }, function (a) {
        D.h(a, "boolean", I, "computesBoundsIncludingLinks");
        var b = 0 !== (this.Ca & 4096);
        b !== a && (this.Ca ^= 4096, this.i("computesBoundsIncludingLinks", b, a))
    });
    D.defineProperty(I, {lI: "computesBoundsIncludingLocation"}, function () {
        return 0 !== (this.Ca & 8192)
    }, function (a) {
        D.h(a, "boolean", I, "computesBoundsIncludingLocation");
        var b = 0 !== (this.Ca & 8192);
        b !== a && (this.Ca ^= 8192, this.i("computesBoundsIncludingLocation", b, a))
    });
    D.defineProperty(I, {$I: "handlesDragDropForMembers"}, function () {
        return 0 !== (this.Ca & 16384)
    }, function (a) {
        D.h(a, "boolean", I, "handlesDragDropForMembers");
        var b = 0 !== (this.Ca & 16384);
        b !== a && (this.Ca ^= 16384, this.i("handlesDragDropForMembers", b, a))
    });
    D.w(I, {Oc: "memberParts"}, function () {
        return this.Bs.j
    });
    function sr(a, b) {
        if (a.Bs.add(b)) {
            b instanceof I && a.fn.add(b);
            var c = a.LJ;
            if (null !== c) {
                var d = !0, e = a.g;
                null !== e && (d = e.$a, e.$a = !0);
                c(a, b);
                null !== e && (e.$a = d)
            }
            a.isVisible() && a.ud || b.Ld(!1)
        }
        b instanceof J && !a.zx || (c = a.Qb, null === c && (c = a), c.K())
    }

    function rr(a, b) {
        if (a.Bs.remove(b)) {
            b instanceof I && a.fn.remove(b);
            var c = a.MJ;
            if (null !== c) {
                var d = !0, e = a.g;
                null !== e && (d = e.$a, e.$a = !0);
                c(a, b);
                null !== e && (e.$a = d)
            }
            a.isVisible() && a.ud || b.Ld(!0)
        }
        b instanceof J && !a.zx || (c = a.Qb, null === c && (c = a), c.K())
    }

    I.prototype.Pn = function () {
        if (0 < this.Bs.count) {
            var a = this.g;
            if (null !== a)for (var b = this.Bs.copy().j; b.next();)a.remove(b.value)
        }
        G.prototype.Pn.call(this)
    };
    D.defineProperty(I, {Yb: "layout"}, function () {
        return this.ve
    }, function (a) {
        var b = this.ve;
        b !== a && (null !== a && D.l(a, Zg, I, "layout"), null !== b && (b.g = null, b.group = null), this.ve = a, null !== a && (a.g = this.g, a.group = this), this.i("layout", b, a))
    });
    D.defineProperty(I, {LJ: "memberAdded"}, function () {
        return this.As
    }, function (a) {
        var b = this.As;
        b !== a && (null !== a && D.h(a, "function", I, "memberAdded"), this.As = a, this.i("memberAdded", b, a))
    });
    D.defineProperty(I, {MJ: "memberRemoved"}, function () {
        return this.Cs
    }, function (a) {
        var b = this.Cs;
        b !== a && (null !== a && D.h(a, "function", I, "memberRemoved"), this.Cs = a, this.i("memberRemoved", b, a))
    });
    D.defineProperty(I, {nB: "memberValidation"}, function () {
        return this.Ml
    }, function (a) {
        var b = this.Ml;
        b !== a && (null !== a && D.h(a, "function", I, "memberValidation"), this.Ml = a, this.i("memberValidation", b, a))
    });
    I.prototype.canAddMembers = function (a) {
        var b = this.g;
        if (null === b)return !1;
        b = b.xb;
        for (a = Th(a).j; a.next();)if (!b.isValidMember(this, a.value))return !1;
        return !0
    };
    I.prototype.addMembers = function (a, b) {
        var c = this.g;
        if (null === c)return !1;
        for (var c = c.xb, d = !0, e = Th(a).j; e.next();) {
            var g = e.value;
            !b || c.isValidMember(this, g) ? g.Ka = this : d = !1
        }
        return d
    };
    D.defineProperty(I, {FK: "ungroupable"}, function () {
        return 0 !== (this.Ca & 256)
    }, function (a) {
        var b = 0 !== (this.Ca & 256);
        b !== a && (D.h(a, "boolean", I, "ungroupable"), this.Ca ^= 256, this.i("ungroupable", b, a))
    });
    I.prototype.canUngroup = function () {
        if (!this.FK)return !1;
        var a = this.layer;
        if (null !== a && !a.ux)return !1;
        a = a.g;
        return null === a || a.ux ? !0 : !1
    };
    I.prototype.ig = function (a) {
        void 0 === a && (a = null);
        var b = 0 !== (this.Ca & 65536);
        G.prototype.ig.call(this, a);
        if (!b)for (0 !== (this.Ca & 65536) !== !0 && (this.Ca ^= 65536), b = this.rF(); b.next();) {
            var c = b.value;
            if (null === a || !a.contains(c)) {
                var d = c.Y;
                null !== d && d !== this && d.Gi(this) && !d.isVisible() ? c.hc() : (d = c.ba, null !== d && d !== this && d.Gi(this) && !d.isVisible() && c.hc())
            }
        }
    };
    I.prototype.findExternalLinksConnected = I.prototype.rF = function () {
        var a = this.mq();
        a.add(this);
        for (var b = new L(J), c = a.j; c.next();) {
            var d = c.value;
            if (d instanceof G)for (d = d.Kd; d.next();) {
                var e = d.value;
                a.contains(e) || b.add(e)
            }
        }
        return b.j
    };
    I.prototype.findExternalNodesConnected = function () {
        var a = this.mq();
        a.add(this);
        for (var b = new L(G), c = a.j; c.next();) {
            var d = c.value;
            if (d instanceof G)for (d = d.Kd; d.next();) {
                var e = d.value, g = e.Y;
                a.contains(g) && g !== this || b.add(g);
                e = e.ba;
                a.contains(e) && e !== this || b.add(e)
            }
        }
        return b.j
    };
    I.prototype.findContainingGroupChain = function () {
        function a(b, d) {
            null !== b && (d.add(b), a(b.Ka, d))
        }

        var b = new L(I);
        a(this, b);
        return b
    };
    I.prototype.findSubGraphParts = I.prototype.mq = function () {
        var a = new L(F);
        Mh(a, this, !0, 0, !0);
        a.remove(this);
        return a
    };
    I.prototype.Ld = function (a) {
        G.prototype.Ld.call(this, a);
        for (var b = this.Oc; b.next();)b.value.Ld(a)
    };
    I.prototype.collapseSubGraph = I.prototype.collapseSubGraph = function () {
        var a = this.g;
        if (null !== a && !a.Qh) {
            a.Qh = !0;
            var b = this.mq();
            rs(this, b, a.Wa, this);
            a.Qh = !1
        }
    };
    function rs(a, b, c, d) {
        for (var e = a.Oc; e.next();) {
            var g = e.value;
            g.Ld(!1);
            if (g instanceof I) {
                var h = g;
                h.ud && (h.Ry = h.ud, rs(h, b, c, d))
            }
            if (g instanceof G)g.ig(b), pl(c, g, d); else if (g instanceof J)for (g = g.wf; g.next();)g.value.ig(b)
        }
        a.ud = !1
    }

    I.prototype.expandSubGraph = I.prototype.expandSubGraph = function () {
        var a = this.g;
        if (null !== a && !a.Qh) {
            a.Qh = !0;
            var b = this.mq();
            ss(this, b, a.Wa, this);
            a.Qh = !1
        }
    };
    function ss(a, b, c, d) {
        for (var e = a.Oc; e.next();) {
            var g = e.value;
            g.Ld(!0);
            if (g instanceof I) {
                var h = g;
                h.Ry && (h.Ry = !1, ss(h, b, c, d))
            }
            if (g instanceof G)g.ig(b), ol(c, g, d); else if (g instanceof J)for (g = g.wf; g.next();)g.value.ig(b)
        }
        a.ud = !0
    }

    D.defineProperty(I, {ud: "isSubGraphExpanded"}, function () {
        return 0 !== (this.Ca & 512)
    }, function (a) {
        var b = 0 !== (this.Ca & 512);
        if (b !== a) {
            D.h(a, "boolean", I, "isSubGraphExpanded");
            this.Ca ^= 512;
            var c = this.g;
            this.i("isSubGraphExpanded", b, a);
            b = this.vK;
            if (null !== b) {
                var d = !0;
                null !== c && (d = c.$a, c.$a = !0);
                b(this);
                null !== c && (c.$a = d)
            }
            null !== c && c.ra.jb ? null !== this.Qb && this.Qb.K() : a ? this.expandSubGraph() : this.collapseSubGraph()
        }
    });
    D.defineProperty(I, {Ry: "wasSubGraphExpanded"}, function () {
        return 0 !== (this.Ca & 1024)
    }, function (a) {
        var b = 0 !== (this.Ca & 1024);
        b !== a && (D.h(a, "boolean", I, "wasSubGraphExpanded"), this.Ca ^= 1024, this.i("wasSubGraphExpanded", b, a))
    });
    D.defineProperty(I, {vK: "subGraphExpandedChanged"}, function () {
        return this.Ct
    }, function (a) {
        var b = this.Ct;
        b !== a && (null !== a && D.h(a, "function", I, "subGraphExpandedChanged"), this.Ct = a, this.i("subGraphExpandedChanged", b, a))
    });
    I.prototype.move = function (a) {
        var b = this.position, c = b.x;
        isNaN(c) && (c = 0);
        b = b.y;
        isNaN(b) && (b = 0);
        var c = a.x - c, b = a.y - b, d = D.Fb(c, b);
        G.prototype.move.call(this, a);
        for (a = this.mq().j; a.next();) {
            var e = a.value;
            if (!(e instanceof J || e instanceof G && e.Jf)) {
                var g = e.position, h = e.location;
                g.F() ? (d.x = g.x + c, d.y = g.y + b, e.position = d) : h.F() && (d.x = h.x + c, d.y = h.y + b, e.location = d)
            }
        }
        for (a.reset(); a.next();)e = a.value, e instanceof J && (e.vg || e.Y !== this && e.ba !== this) && (g = e.position, d.x = g.x + c, d.y = g.y + b, e.move(d));
        D.A(d)
    };
    D.defineProperty(I, {oo: null}, function () {
        return 0 !== (this.Ca & 32768)
    }, function (a) {
        0 !== (this.Ca & 32768) !== a && (this.Ca ^= 32768)
    });
    function Xj() {
        P.call(this);
        this.qf = Td;
        this.mt = new C(NaN, NaN, NaN, NaN)
    }

    D.Ra(Xj, P);
    D.ka("Placeholder", Xj);
    Xj.prototype.cloneProtected = function (a) {
        P.prototype.cloneProtected.call(this, a);
        a.qf = this.qf.V();
        a.mt = this.mt.copy()
    };
    Xj.prototype.Nk = function (a) {
        if (null === this.background && null === this.bm)return !1;
        var b = this.Ga;
        return Sb(0, 0, b.width, b.height, a.x, a.y)
    };
    Xj.prototype.jo = function () {
        var a = this.Z;
        null !== a && (a instanceof I || a instanceof ba) || D.k("Placeholder is not inside a Group or Adornment.");
        if (a instanceof I) {
            var b = this.computeBorder(this.mt), c = this.cd;
            xb(c, b.width || 0, b.height || 0);
            Jo(this, 0, 0, c.width, c.height);
            for (var c = a.Oc, d = !1; c.next();)if (c.value.isVisible()) {
                d = !0;
                break
            }
            !d || isNaN(b.x) || isNaN(b.y) || (c = new N, c.uo(b, a.Of), a.location = new N(c.x, c.y))
        } else {
            var b = this.Ea, c = this.cd, d = this.padding, e = d.left + d.right, g = d.top + d.bottom;
            if (b.F())xb(c, b.width +
                e || 0, b.height + g || 0), Jo(this, -d.left, -d.top, c.width, c.height); else {
                var h = a.zb, k = h.eb(dc, D.P()), b = D.ug(k.x, k.y, 0, 0);
                b.Li(h.eb(uc, k));
                b.Li(h.eb(ic, k));
                b.Li(h.eb(sc, k));
                a.hj.n(b.x, b.y);
                xb(c, b.width + e || 0, b.height + g || 0);
                Jo(this, -d.left, -d.top, c.width, c.height);
                D.A(k);
                D.Kb(b)
            }
        }
    };
    Xj.prototype.zj = function (a, b, c, d) {
        var e = this.$;
        e.x = a;
        e.y = b;
        e.width = c;
        e.height = d
    };
    Xj.prototype.computeBorder = function (a) {
        var b = this.Z;
        if (b instanceof I) {
            var c = b;
            if (c.kI && this.mt.F()) {
                var d = c.g;
                if (null !== d && (d = d.hb, d instanceof Qh && !d.Nr && null !== d.gc && !d.gc.contains(c)))return a.assign(this.mt), a
            }
        }
        var c = D.Rf(), d = this.computeMemberBounds(c), e = this.padding;
        a.n(d.x - e.left, d.y - e.top, Math.max(d.width + e.left + e.right, 0), Math.max(d.height + e.top + e.bottom, 0));
        D.Kb(c);
        b instanceof I && (c = b, c.lI && c.location.F() && a.Li(c.location));
        return a
    };
    Xj.prototype.computeMemberBounds = function (a) {
        if (!(this.Z instanceof I))return a.n(0, 0, 0, 0), a;
        for (var b = this.Z, c = Infinity, d = Infinity, e = -Infinity, g = -Infinity, h = b.Oc; h.next();) {
            var k = h.value;
            if (k.isVisible()) {
                if (k instanceof J) {
                    var l = k;
                    if (!b.zx)continue;
                    if (Lm(l))continue;
                    if (l.Y === b || l.ba === b)continue
                }
                k = k.$;
                k.left < c && (c = k.left);
                k.top < d && (d = k.top);
                k.right > e && (e = k.right);
                k.bottom > g && (g = k.bottom)
            }
        }
        isFinite(c) && isFinite(d) ? a.n(c, d, e - c, g - d) : (b = b.location, c = this.padding, a.n(b.x + c.left, b.y + c.top, 0, 0));
        return a
    };
    D.defineProperty(Xj, {padding: "padding"}, function () {
        return this.qf
    }, function (a) {
        "number" === typeof a ? a = new Kb(a) : D.l(a, Kb, Xj, "padding");
        var b = this.qf;
        b.O(a) || (this.qf = a = a.V(), this.i("padding", b, a))
    });
    function Zg() {
        0 < arguments.length && D.wd(Zg);
        D.vc(this);
        this.Lz = this.ca = null;
        this.pk = this.hs = !0;
        this.ns = !1;
        this.gr = (new N(0, 0)).freeze();
        this.ks = this.ls = !0;
        this.XC = "";
        this.pp = !1;
        this.Yz = null
    }

    D.ka("Layout", Zg);
    Zg.prototype.cloneProtected = function (a) {
        a.hs = this.hs;
        a.pk = this.pk;
        a.ns = this.ns;
        a.gr.assign(this.gr);
        a.ls = this.ls;
        a.ks = this.ks;
        a.XC = this.XC;
        this.pk || (a.pp = !0)
    };
    Zg.prototype.copy = function () {
        var a = new this.constructor;
        this.cloneProtected(a);
        return a
    };
    Zg.prototype.qc = function (a) {
        D.Xj(this, a)
    };
    Zg.prototype.toString = function () {
        var a = D.tf(Object.getPrototypeOf(this)), a = a + "(";
        null !== this.group && (a += " in " + this.group);
        null !== this.g && (a += " for " + this.g);
        return a + ")"
    };
    D.defineProperty(Zg, {g: "diagram"}, function () {
        return this.ca
    }, function (a) {
        null !== a && D.l(a, E, Zg, "diagram");
        this.ca = a
    });
    D.defineProperty(Zg, {group: "group"}, function () {
        return this.Lz
    }, function (a) {
        this.Lz !== a && (null !== a && D.l(a, I, Zg, "group"), this.Lz = a, null !== a && (this.ca = a.g))
    });
    D.defineProperty(Zg, {rJ: "isOngoing"}, function () {
        return this.hs
    }, function (a) {
        this.hs !== a && (D.h(a, "boolean", Zg, "isOngoing"), this.hs = a)
    });
    D.defineProperty(Zg, {$F: "isInitial"}, function () {
        return this.pk
    }, function (a) {
        D.h(a, "boolean", Zg, "isInitial");
        this.pk = a;
        a || (this.pp = !0)
    });
    D.defineProperty(Zg, {ey: "isViewportSized"}, function () {
        return this.ns
    }, function (a) {
        this.ns !== a && (D.h(a, "boolean", Zg, "isViewportSized"), (this.ns = a) && this.N())
    });
    D.defineProperty(Zg, {Du: "isRouting"}, function () {
        return this.ls
    }, function (a) {
        this.ls !== a && (D.h(a, "boolean", Zg, "isRouting"), this.ls = a)
    });
    D.defineProperty(Zg, {bG: "isRealtime"}, function () {
        return this.ks
    }, function (a) {
        this.ks !== a && (D.h(a, "boolean", Zg, "isRealtime"), this.ks = a)
    });
    D.defineProperty(Zg, {Mf: "isValidLayout"}, function () {
        return this.pp
    }, function (a) {
        this.pp !== a && (D.h(a, "boolean", Zg, "isValidLayout"), this.pp = a, a || (a = this.g, null !== a && (a.yv = !0)))
    });
    Zg.prototype.invalidateLayout = Zg.prototype.N = function () {
        if (this.pp) {
            var a = this.g;
            if (null !== a && !a.ra.jb) {
                var b = a.Wa;
                !b.op && (b.vf && b.Yh(), this.rJ && a.ao || this.$F && !a.ao) && (this.Mf = !1, a.Te())
            }
        }
    };
    D.defineProperty(Zg, {network: "network"}, function () {
        return this.Yz
    }, function (a) {
        var b = this.Yz;
        b !== a && (null !== a && D.l(a, ta, Zg, "network"), null !== b && (b.Yb = null), this.Yz = a, null !== a && (a.Yb = this))
    });
    Zg.prototype.createNetwork = function () {
        return new ta
    };
    Zg.prototype.makeNetwork = function (a) {
        var b = this.createNetwork();
        b.Yb = this;
        a instanceof E ? (b.Kk(a.qg, !0), b.Kk(a.links, !0)) : a instanceof I ? b.Kk(a.Oc) : b.Kk(a.j);
        return b
    };
    Zg.prototype.updateParts = function () {
        var a = this.g;
        if (null === a && null !== this.network)for (var b = this.network.vertexes.j; b.next();) {
            var c = b.value.Yc;
            if (null !== c && (a = c.g, null !== a))break
        }
        this.Mf = !0;
        try {
            null !== a && a.Zb("Layout"), this.commitLayout()
        } finally {
            null !== a && a.Gd("Layout")
        }
    };
    Zg.prototype.commitLayout = function () {
        for (var a = this.network.vertexes.j; a.next();)a.value.commit();
        if (this.Du)for (a = this.network.edges.j; a.next();)a.value.commit()
    };
    Zg.prototype.doLayout = function (a) {
        null === a && D.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        var b = new L(F);
        a instanceof E ? (ts(this, b, a.qg, !0, this.oo, !0, !1, !0), ts(this, b, a.Ii, !0, this.oo, !0, !1, !0)) : a instanceof I ? ts(this, b, a.Oc, !1, this.oo, !0, !1, !0) : b.Tc(a.j);
        var c = b.count;
        if (0 < c) {
            a = this.g;
            null !== a && a.Zb("Layout");
            for (var c = Math.ceil(Math.sqrt(c)), d = this.Ce.x, e = d, g = this.Ce.y, h = 0, k = 0, b = b.j; b.next();) {
                var l = b.value;
                l.kf();
                var m = l.Fa, n = m.width,
                    m = m.height;
                l.moveTo(e, g);
                l instanceof I && (l.oo = !1);
                e += Math.max(n, 50) + 20;
                k = Math.max(k, Math.max(m, 50));
                h >= c - 1 ? (h = 0, e = d, g += k + 20, k = 0) : h++
            }
            null !== a && a.Gd("Layout")
        }
        this.Mf = !0
    };
    Zg.prototype.oo = function (a) {
        return !a.location.F() || a instanceof I && a.oo ? !0 : !1
    };
    function ts(a, b, c, d, e, g, h, k) {
        for (c = c.j; c.next();) {
            var l = c.value;
            d && !l.wq || null !== e && !e(l) || !l.canLayout() || (g && l instanceof G ? l.Jf || (l instanceof I ? null === l.Yb ? ts(a, b, l.Oc, !1, e, g, h, k) : (us(l), b.add(l)) : (us(l), b.add(l))) : h && l instanceof J ? b.add(l) : !k || !l.pe() || l instanceof G || (us(l), b.add(l)))
        }
    }

    function us(a) {
        var b = a.$;
        (0 === b.width || 0 === b.height || isNaN(b.width) || isNaN(b.height)) && a.kf()
    }

    Zg.prototype.collectParts = Zg.prototype.eI = function (a) {
        var b = new L(F);
        a instanceof E ? (ts(this, b, a.qg, !0, null, !0, !0, !0), ts(this, b, a.links, !0, null, !0, !0, !0), ts(this, b, a.Ii, !0, null, !0, !0, !0)) : a instanceof I ? ts(this, b, a.Oc, !1, null, !0, !0, !0) : ts(this, b, a.j, !1, null, !0, !0, !0);
        return b
    };
    D.defineProperty(Zg, {Ce: "arrangementOrigin"}, function () {
        return this.gr
    }, function (a) {
        D.l(a, N, Zg, "arrangementOrigin");
        this.gr.O(a) || (this.gr.assign(a), this.N())
    });
    Zg.prototype.initialOrigin = function (a) {
        var b = this.group;
        if (null !== b) {
            var c = b.position.copy();
            (isNaN(c.x) || isNaN(c.y)) && c.set(a);
            b = b.placeholder;
            null !== b && (c = b.eb(dc), (isNaN(c.x) || isNaN(c.y)) && c.set(a), c.x += b.padding.left, c.y += b.padding.top);
            return c
        }
        return a
    };
    function ta() {
        D.vc(this);
        this.ve = null;
        if (this.vertexes)for (var a = this.vertexes.j; a.next();) {
            var b = a.value;
            b.clear();
            b.network = null
        }
        if (this.edges)for (a = this.edges.j; a.next();)b = a.value, b.clear(), b.network = null;
        this.vertexes = new L(va);
        this.edges = new L(wa);
        this.oy = new ma(G, va);
        this.jy = new ma(J, wa)
    }

    D.ka("LayoutNetwork", ta);
    ta.prototype.clear = function () {
        if (this.vertexes)for (var a = this.vertexes.j; a.next();) {
            var b = a.value;
            b.clear();
            b.network = null
        }
        if (this.edges)for (a = this.edges.j; a.next();)b = a.value, b.clear(), b.network = null;
        this.vertexes = new L(va);
        this.edges = new L(wa);
        this.oy = new ma(G, va);
        this.jy = new ma(J, wa)
    };
    ta.prototype.toString = function (a) {
        void 0 === a && (a = 0);
        var b = "LayoutNetwork" + (null !== this.Yb ? "(" + this.Yb.toString() + ")" : "");
        if (0 >= a)return b;
        b += " vertexes: " + this.vertexes.count + " edges: " + this.edges.count;
        if (1 < a) {
            for (var c = this.vertexes.j; c.next();)b += "\n    " + c.value.toString(a - 1);
            for (c = this.edges.j; c.next();)b += "\n    " + c.value.toString(a - 1)
        }
        return b
    };
    D.defineProperty(ta, {Yb: "layout"}, function () {
        return this.ve
    }, function (a) {
        v && null !== a && D.l(a, Zg, ta, "layout");
        this.ve = a
    });
    ta.prototype.createVertex = function () {
        return new va
    };
    ta.prototype.createEdge = function () {
        return new wa
    };
    ta.prototype.addParts = ta.prototype.Kk = function (a, b, c) {
        if (null !== a) {
            void 0 === b && (b = !1);
            D.h(b, "boolean", ta, "addParts:toplevelonly");
            void 0 === c && (c = null);
            null === c && (c = function (a) {
                if (a instanceof G)return !a.Jf;
                if (a instanceof J) {
                    var b = a.Y;
                    if (null === b || b.Jf)return !1;
                    a = a.ba;
                    return null === a || a.Jf ? !1 : !0
                }
                return !1
            });
            for (a = a.j; a.next();) {
                var d = a.value;
                if (d instanceof G && (!b || d.wq) && d.canLayout() && c(d))if (d instanceof I && null === d.Yb)this.Kk(d.Oc, !1); else if (null === this.Tn(d)) {
                    var e = this.createVertex();
                    e.Yc = d;
                    this.$l(e)
                }
            }
            for (a.reset(); a.next();)if (d = a.value, d instanceof J && (!b || d.wq) && d.canLayout() && c(d) && null === this.Kx(d)) {
                var g = d.Y, e = d.ba;
                null !== g && null !== e && g !== e && (g = this.findGroupVertex(g), e = this.findGroupVertex(e), null !== g && null !== e && this.Aq(g, e, d))
            }
        }
    };
    ta.prototype.findGroupVertex = function (a) {
        if (null === a)return null;
        var b = a.findVisibleNode();
        if (null === b)return null;
        a = this.Tn(b);
        if (null !== a)return a;
        for (b = b.Ka; null !== b;) {
            a = this.Tn(b);
            if (null !== a)return a;
            b = b.Ka
        }
        return null
    };
    ta.prototype.addVertex = ta.prototype.$l = function (a) {
        if (null !== a) {
            v && D.l(a, va, ta, "addVertex:vertex");
            this.vertexes.add(a);
            var b = a.Yc;
            null !== b && this.oy.add(b, a);
            a.network = this
        }
    };
    ta.prototype.addNode = ta.prototype.St = function (a) {
        if (null === a)return null;
        v && D.l(a, G, ta, "addNode:node");
        var b = this.Tn(a);
        null === b && (b = this.createVertex(), b.Yc = a, this.$l(b));
        return b
    };
    ta.prototype.deleteVertex = ta.prototype.hF = function (a) {
        if (null !== a && (v && D.l(a, va, ta, "deleteVertex:vertex"), vs(this, a))) {
            for (var b = a.We, c = b.count - 1; 0 <= c; c--) {
                var d = b.ea(c);
                this.hq(d)
            }
            b = a.Qe;
            for (c = b.count - 1; 0 <= c; c--)d = b.ea(c), this.hq(d)
        }
    };
    function vs(a, b) {
        if (null === b)return !1;
        var c = a.vertexes.remove(b);
        c && (a.oy.remove(b.Yc), b.network = null);
        return c
    }

    ta.prototype.deleteNode = function (a) {
        null !== a && (v && D.l(a, G, ta, "deleteNode:node"), a = this.Tn(a), null !== a && this.hF(a))
    };
    ta.prototype.findVertex = ta.prototype.Tn = function (a) {
        if (null === a)return null;
        v && D.l(a, G, ta, "findVertex:node");
        return this.oy.na(a)
    };
    ta.prototype.addEdge = ta.prototype.Xp = function (a) {
        if (null !== a) {
            v && D.l(a, wa, ta, "addEdge:edge");
            this.edges.add(a);
            var b = a.link;
            null !== b && null === this.Kx(b) && this.jy.add(b, a);
            b = a.toVertex;
            null !== b && b.KE(a);
            b = a.fromVertex;
            null !== b && b.IE(a);
            a.network = this
        }
    };
    ta.prototype.addLink = function (a) {
        if (null === a)return null;
        v && D.l(a, J, ta, "addLink:link");
        var b = a.Y, c = a.ba, d = this.Kx(a);
        null === d ? (d = this.createEdge(), d.link = a, null !== b && (d.fromVertex = this.St(b)), null !== c && (d.toVertex = this.St(c)), this.Xp(d)) : (d.fromVertex = null !== b ? this.St(b) : null, d.toVertex = null !== c ? this.St(c) : null);
        return d
    };
    ta.prototype.deleteEdge = ta.prototype.hq = function (a) {
        if (null !== a) {
            v && D.l(a, wa, ta, "deleteEdge:edge");
            var b = a.toVertex;
            null !== b && b.gF(a);
            b = a.fromVertex;
            null !== b && b.fF(a);
            ws(this, a)
        }
    };
    function ws(a, b) {
        null !== b && a.edges.remove(b) && (a.jy.remove(b.link), b.network = null)
    }

    ta.prototype.deleteLink = function (a) {
        null !== a && (v && D.l(a, J, ta, "deleteLink:link"), a = this.Kx(a), null !== a && this.hq(a))
    };
    ta.prototype.findEdge = ta.prototype.Kx = function (a) {
        if (null === a)return null;
        v && D.l(a, J, ta, "findEdge:link");
        return this.jy.na(a)
    };
    ta.prototype.linkVertexes = ta.prototype.Aq = function (a, b, c) {
        if (null === a || null === b)return null;
        v && (D.l(a, va, ta, "linkVertexes:fromVertex"), D.l(b, va, ta, "linkVertexes:toVertex"), null !== c && D.l(c, J, ta, "linkVertexes:link"));
        if (a.network === this && b.network === this) {
            var d = this.createEdge();
            d.link = c;
            d.fromVertex = a;
            d.toVertex = b;
            this.Xp(d);
            return d
        }
        return null
    };
    ta.prototype.reverseEdge = ta.prototype.Dy = function (a) {
        if (null !== a) {
            v && D.l(a, wa, ta, "reverseEdge:edge");
            var b = a.fromVertex, c = a.toVertex;
            null !== b && null !== c && (b.fF(a), c.gF(a), a.Dy(), b.KE(a), c.IE(a))
        }
    };
    ta.prototype.deleteSelfEdges = ta.prototype.Fx = function () {
        for (var a = D.mb(), b = this.edges.j; b.next();) {
            var c = b.value;
            c.fromVertex === c.toVertex && a.push(c)
        }
        b = a.length;
        for (c = 0; c < b; c++)this.hq(a[c]);
        D.za(a)
    };
    ta.prototype.deleteArtificialVertexes = function () {
        for (var a = D.mb(), b = this.vertexes.j; b.next();) {
            var c = b.value;
            null === c.Yc && a.push(c)
        }
        for (var c = a.length, d = 0; d < c; d++)this.hF(a[d]);
        b = D.mb();
        for (c = this.edges.j; c.next();)d = c.value, null === d.link && b.push(d);
        c = b.length;
        for (d = 0; d < c; d++)this.hq(b[d]);
        D.za(a);
        D.za(b)
    };
    function xs(a) {
        for (var b = D.mb(), c = a.edges.j; c.next();) {
            var d = c.value;
            null !== d.fromVertex && null !== d.toVertex || b.push(d)
        }
        c = b.length;
        for (d = 0; d < c; d++)a.hq(b[d]);
        D.za(b)
    }

    ta.prototype.splitIntoSubNetworks = ta.prototype.uK = function () {
        this.deleteArtificialVertexes();
        xs(this);
        this.Fx();
        for (var a = new K(ta), b = !0; b;)for (var b = !1, c = this.vertexes.j; c.next();) {
            var d = c.value;
            if (0 < d.We.count || 0 < d.Qe.count) {
                b = this.Yb.createNetwork();
                a.add(b);
                ys(this, b, d);
                b = !0;
                break
            }
        }
        a.sort(function (a, b) {
            return null === a || null === b || a === b ? 0 : b.vertexes.count - a.vertexes.count
        });
        return a
    };
    function ys(a, b, c) {
        if (null !== c && c.network !== b) {
            vs(a, c);
            b.$l(c);
            for (var d = c.uc; d.next();) {
                var e = d.value;
                e.network !== b && (ws(a, e), b.Xp(e), ys(a, b, e.fromVertex))
            }
            for (d = c.sc; d.next();)c = d.value, c.network !== b && (ws(a, c), b.Xp(c), ys(a, b, c.toVertex))
        }
    }

    ta.prototype.findAllParts = function () {
        for (var a = new L(F), b = this.vertexes.j; b.next();)a.add(b.value.Yc);
        for (b = this.edges.j; b.next();)a.add(b.value.link);
        return a
    };
    function va() {
        D.vc(this);
        this.network = null;
        this.R = (new C(0, 0, 10, 10)).freeze();
        this.W = (new N(5, 5)).freeze();
        this.Dd = this.Pd = null;
        this.We = new K(wa);
        this.Qe = new K(wa)
    }

    D.ka("LayoutVertex", va);
    va.prototype.clear = function () {
        this.Dd = this.Pd = null;
        this.We = new K(wa);
        this.Qe = new K(wa)
    };
    va.prototype.toString = function (a) {
        void 0 === a && (a = 0);
        var b = "LayoutVertex#" + D.Jd(this);
        if (0 < a && (b += null !== this.Yc ? "(" + this.Yc.toString() + ")" : "", 1 < a)) {
            a = "";
            for (var c = !0, d = this.We.j; d.next();) {
                var e = d.value;
                c ? c = !1 : a += ",";
                a += e.toString(0)
            }
            e = "";
            c = !0;
            for (d = this.Qe.j; d.next();) {
                var g = d.value;
                c ? c = !1 : e += ",";
                e += g.toString(0)
            }
            b += " sources: " + a + " destinations: " + e
        }
        return b
    };
    D.defineProperty(va, {data: "data"}, function () {
        return this.Pd
    }, function (a) {
        this.Pd = a;
        if (null !== a) {
            var b = a.bounds;
            a = b.x;
            var c = b.y, d = b.width, b = b.height;
            this.W.n(d / 2, b / 2);
            this.R.n(a, c, d, b)
        }
    });
    D.defineProperty(va, {Yc: "node"}, function () {
        return this.Dd
    }, function (a) {
        if (this.Dd !== a) {
            v && null !== a && D.l(a, G, va, "node");
            this.Dd = a;
            a.kf();
            var b = a.$, c = b.x, d = b.y, e = b.width, b = b.height;
            isNaN(c) && (c = 0);
            isNaN(d) && (d = 0);
            this.R.n(c, d, e, b);
            if (!(a instanceof I) && (a = a.xf.eb(kc), a.F())) {
                this.W.n(a.x - c, a.y - d);
                return
            }
            this.W.n(e / 2, b / 2)
        }
    });
    D.defineProperty(va, {pb: "bounds"}, function () {
        return this.R
    }, function (a) {
        this.R.O(a) || (v && D.l(a, C, va, "bounds"), this.R.assign(a))
    });
    D.defineProperty(va, {focus: "focus"}, function () {
        return this.W
    }, function (a) {
        this.W.O(a) || (v && D.l(a, N, va, "focus"), this.W.assign(a))
    });
    D.defineProperty(va, {oa: "centerX"}, function () {
        return this.R.x + this.W.x
    }, function (a) {
        var b = this.R;
        b.x + this.W.x !== a && (v && D.p(a, va, "centerX"), b.Xa(), b.x = a - this.W.x, b.freeze())
    });
    D.defineProperty(va, {va: "centerY"}, function () {
        return this.R.y + this.W.y
    }, function (a) {
        var b = this.R;
        b.y + this.W.y !== a && (v && D.p(a, va, "centerY"), b.Xa(), b.y = a - this.W.y, b.freeze())
    });
    D.defineProperty(va, {ou: "focusX"}, function () {
        return this.W.x
    }, function (a) {
        var b = this.W;
        b.x !== a && (b.Xa(), b.x = a, b.freeze())
    });
    D.defineProperty(va, {pu: "focusY"}, function () {
        return this.W.y
    }, function (a) {
        var b = this.W;
        b.y !== a && (b.Xa(), b.y = a, b.freeze())
    });
    D.defineProperty(va, {x: "x"}, function () {
        return this.R.x
    }, function (a) {
        var b = this.R;
        b.x !== a && (b.Xa(), b.x = a, b.freeze())
    });
    D.defineProperty(va, {y: "y"}, function () {
        return this.R.y
    }, function (a) {
        var b = this.R;
        b.y !== a && (b.Xa(), b.y = a, b.freeze())
    });
    D.defineProperty(va, {width: "width"}, function () {
        return this.R.width
    }, function (a) {
        var b = this.R;
        b.width !== a && (b.Xa(), b.width = a, b.freeze())
    });
    D.defineProperty(va, {height: "height"}, function () {
        return this.R.height
    }, function (a) {
        var b = this.R;
        b.height !== a && (b.Xa(), b.height = a, b.freeze())
    });
    va.prototype.commit = function () {
        var a = this.Pd;
        if (null !== a) {
            var b = this.pb, c = a.bounds;
            D.Sa(c) ? (c.x = b.x, c.y = b.y, c.width = b.width, c.height = b.height) : a.bounds = b.copy()
        } else if (a = this.Yc, null !== a) {
            b = this.pb;
            if (!(a instanceof I)) {
                var c = a.$, d = a.xf.eb(kc);
                if (c.F() && d.F()) {
                    a.moveTo(b.x + this.ou - (d.x - c.x), b.y + this.pu - (d.y - c.y));
                    return
                }
            }
            a.moveTo(b.x, b.y)
        }
    };
    va.prototype.addSourceEdge = va.prototype.KE = function (a) {
        null !== a && (v && D.l(a, wa, va, "addSourceEdge:edge"), this.We.contains(a) || this.We.add(a))
    };
    va.prototype.deleteSourceEdge = va.prototype.gF = function (a) {
        null !== a && (v && D.l(a, wa, va, "deleteSourceEdge:edge"), this.We.remove(a))
    };
    va.prototype.addDestinationEdge = va.prototype.IE = function (a) {
        null !== a && (v && D.l(a, wa, va, "addDestinationEdge:edge"), this.Qe.contains(a) || this.Qe.add(a))
    };
    va.prototype.deleteDestinationEdge = va.prototype.fF = function (a) {
        null !== a && (v && D.l(a, wa, va, "deleteDestinationEdge:edge"), this.Qe.remove(a))
    };
    D.w(va, {tK: "sourceVertexes"}, function () {
        for (var a = new L(va), b = this.uc; b.next();)a.add(b.value.fromVertex);
        return a.j
    });
    D.w(va, {wI: "destinationVertexes"}, function () {
        for (var a = new L(va), b = this.sc; b.next();)a.add(b.value.toVertex);
        return a.j
    });
    D.w(va, {vertexes: "vertexes"}, function () {
        for (var a = new L(va), b = this.uc; b.next();)a.add(b.value.fromVertex);
        for (b = this.sc; b.next();)a.add(b.value.toVertex);
        return a.j
    });
    D.w(va, {uc: "sourceEdges"}, function () {
        return this.We.j
    });
    D.w(va, {sc: "destinationEdges"}, function () {
        return this.Qe.j
    });
    D.w(va, {edges: "edges"}, function () {
        for (var a = new K(wa), b = this.uc; b.next();)a.add(b.value);
        for (b = this.sc; b.next();)a.add(b.value);
        return a.j
    });
    D.w(va, {HI: "edgesCount"}, function () {
        return this.We.count + this.Qe.count
    });
    var zs;
    va.standardComparer = zs = function (a, b) {
        v && D.l(a, va, va, "standardComparer:m");
        v && D.l(b, va, va, "standardComparer:n");
        var c = a.Dd, d = b.Dd;
        return c ? d ? (c = c.text, d = d.text, c < d ? -1 : c > d ? 1 : 0) : 1 : null !== d ? -1 : 0
    };
    va.smartComparer = function (a, b) {
        v && D.l(a, va, va, "smartComparer:m");
        v && D.l(b, va, va, "smartComparer:n");
        if (null !== a) {
            if (null !== b) {
                var c = a.Dd, d = b.Dd;
                if (null !== c) {
                    if (null !== d) {
                        for (var c = c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), d = d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), e = 0; e < c.length; e++)if ("" !== d[e] && void 0 !== d[e]) {
                            var g = parseFloat(c[e]), h = parseFloat(d[e]);
                            if (isNaN(g)) {
                                if (!isNaN(h))return 1;
                                if (0 !== c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])
                            } else {
                                if (isNaN(h))return -1;
                                if (0 !== g - h)return g - h
                            }
                        } else if ("" !== c[e])return 1;
                        return "" !== d[e] && void 0 !== d[e] ? -1 : 0
                    }
                    return 1
                }
                return null !== d ? -1 : 0
            }
            return 1
        }
        return null !== b ? -1 : 0
    };
    function wa() {
        D.vc(this);
        this.toVertex = this.fromVertex = this.link = this.data = this.network = null
    }

    D.ka("LayoutEdge", wa);
    wa.prototype.clear = function () {
        this.toVertex = this.fromVertex = this.link = this.data = null
    };
    wa.prototype.toString = function (a) {
        void 0 === a && (a = 0);
        var b = "LayoutEdge#" + D.Jd(this);
        0 < a && (b += null !== this.link ? "(" + this.link.toString() + ")" : "", 1 < a && (b += " " + (this.fromVertex ? this.fromVertex.toString() : "null") + " --\x3e " + (this.toVertex ? this.toVertex.toString() : "null")));
        return b
    };
    wa.prototype.Dy = function () {
        var a = this.fromVertex;
        this.fromVertex = this.toVertex;
        this.toVertex = a
    };
    wa.prototype.commit = function () {
    };
    wa.prototype.getOtherVertex = wa.prototype.SI = function (a) {
        v && D.l(a, va, wa, "getOtherVertex:v");
        return this.toVertex === a ? this.fromVertex : this.fromVertex === a ? this.toVertex : null
    };
    function Wn() {
        0 < arguments.length && D.wd(Wn);
        Zg.call(this);
        this.ey = !0;
        this.Nt = this.Ot = NaN;
        this.bk = (new Ba(NaN, NaN)).freeze();
        this.ui = (new Ba(10, 10)).freeze();
        this.te = As;
        this.yd = Bs;
        this.ti = Cs;
        this.ci = Ds
    }

    D.Ra(Wn, Zg);
    D.ka("GridLayout", Wn);
    Wn.prototype.cloneProtected = function (a) {
        Zg.prototype.cloneProtected.call(this, a);
        a.Ot = this.Ot;
        a.Nt = this.Nt;
        a.bk.assign(this.bk);
        a.ui.assign(this.ui);
        a.te = this.te;
        a.yd = this.yd;
        a.ti = this.ti;
        a.ci = this.ci
    };
    Wn.prototype.qc = function (a) {
        a.Oe === Wn ? a === Cs || a === Es || a === Fs || a === Gs ? this.sorting = a : a === Bs || a === Hs ? this.dg = a : a === As || a === Is ? this.alignment = a : D.k("Unknown enum value: " + a) : Zg.prototype.qc.call(this, a)
    };
    Wn.prototype.doLayout = function (a) {
        null === a && D.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        this.Ce = this.initialOrigin(this.Ce);
        var b = this.g;
        a = this.eI(a);
        for (var c = a.copy().j; c.next();) {
            var d = c.value;
            if (d instanceof J) {
                var e = d;
                if (null !== e.Y || null !== e.ba) {
                    a.remove(e);
                    continue
                }
            }
            d.kf();
            if (d instanceof I)for (d = d.Oc; d.next();)a.remove(d.value)
        }
        e = a.oc();
        if (0 !== e.length) {
            switch (this.sorting) {
                case Gs:
                    e.reverse();
                    break;
                case Cs:
                    e.sort(this.comparer);
                    break;
                case Es:
                    e.sort(this.comparer), e.reverse()
            }
            var g = this.JK;
            isNaN(g) && (g = 0);
            var h = this.sH, h = isNaN(h) && null !== b ? Math.max(b.ub.width - b.padding.left - b.padding.right, 0) : Math.max(this.sH, 0);
            0 >= g && 0 >= h && (g = 1);
            a = this.spacing.width;
            isFinite(a) || (a = 0);
            c = this.spacing.height;
            isFinite(c) || (c = 0);
            null !== b && b.Zb("Layout");
            d = [];
            switch (this.alignment) {
                case Is:
                    var k = a, l = c, m = Math.max(this.$p.width, 1);
                    if (!isFinite(m))for (var n = m = 0; n < e.length; n++)var p = e[n], q = p.Fa, m = Math.max(m, q.width);
                    var m = Math.max(m + k, 1), r = Math.max(this.$p.height,
                        1);
                    if (!isFinite(r))for (n = r = 0; n < e.length; n++)p = e[n], q = p.Fa, r = Math.max(r, q.height);
                    for (var r = Math.max(r + l, 1), s = this.dg, u = this.Ce.x, t = u, z = this.Ce.y, w = 0, B = 0, n = 0; n < e.length; n++) {
                        var p = e[n], q = p.Fa, A = Math.ceil((q.width + k) / m) * m, O = Math.ceil((q.height + l) / r) * r, H = 0;
                        switch (s) {
                            case Hs:
                                H = Math.abs(t - q.width);
                                break;
                            default:
                                H = t + q.width
                        }
                        if (0 < g && w > g - 1 || 0 < h && 0 < w && H > h)d.push(new C(0, z, h + k, B)), w = 0, t = u, z += B, B = 0;
                        B = Math.max(B, O);
                        O = 0;
                        switch (s) {
                            case Hs:
                                O = -q.width;
                                break;
                            default:
                                O = 0
                        }
                        p.moveTo(t + O, z);
                        switch (s) {
                            case Hs:
                                t -= A;
                                break;
                            default:
                                t += A
                        }
                        w++
                    }
                    d.push(new C(0, z, h + k, B));
                    break;
                case As:
                    k = g;
                    l = a;
                    m = c;
                    n = Math.max(this.$p.width, 1);
                    p = z = A = 0;
                    q = D.P();
                    for (g = 0; g < e.length; g++)r = e[g], s = r.Fa, u = kr(r, r.xf, r.Of, q), A = Math.max(A, u.x), z = Math.max(z, s.width - u.x), p = Math.max(p, u.y);
                    t = this.dg;
                    switch (t) {
                        case Hs:
                            A += l;
                            break;
                        default:
                            z += l
                    }
                    var n = isFinite(n) ? Math.max(n + l, 1) : Math.max(A + z, 1), S = z = this.Ce.x, w = this.Ce.y, B = 0;
                    h >= A && (h -= A);
                    for (var A = O = 0, H = Math.max(this.$p.height, 1), Y = p = 0, R = !0, da = D.P(), g = 0; g < e.length; g++) {
                        r = e[g];
                        s = r.Fa;
                        u = kr(r, r.xf, r.Of, q);
                        if (0 < B)switch (t) {
                            case Hs:
                                S =
                                    (S - z - (s.width - u.x)) / n;
                                S = zb(Math.round(S), S) ? Math.round(S) : Math.floor(S);
                                S = S * n + z;
                                break;
                            default:
                                S = (S - z + u.x) / n, S = zb(Math.round(S), S) ? Math.round(S) : Math.ceil(S), S = S * n + z
                        } else switch (t) {
                            case Hs:
                                O = S + u.x + s.width;
                                break;
                            default:
                                O = S - u.x
                        }
                        var ia = 0;
                        switch (t) {
                            case Hs:
                                ia = -(S + u.x) + O;
                                break;
                            default:
                                ia = S + s.width - u.x - O
                        }
                        if (0 < k && B > k - 1 || 0 < h && 0 < B && ia > h) {
                            d.push(new C(0, R ? w - p : w, h + l, Y + p + m));
                            for (S = 0; S < B && g !== B; S++) {
                                var ia = e[g - B + S], V = kr(ia, ia.xf, ia.Of, da);
                                ia.moveTo(ia.position.x, ia.position.y + p - V.y)
                            }
                            Y += m;
                            w = R ? w + Y : w + (Y + p);
                            B = Y = p =
                                0;
                            S = z;
                            R = !1
                        }
                        S === z && (A = t === Hs ? Math.max(A, s.width - u.x) : Math.min(A, -u.x));
                        p = Math.max(p, u.y);
                        Y = Math.max(Y, s.height - u.y);
                        isFinite(H) && (Y = Math.max(Y, Math.max(s.height, H) - u.y));
                        R ? r.moveTo(S - u.x, w - u.y) : r.moveTo(S - u.x, w);
                        switch (t) {
                            case Hs:
                                S -= u.x + l;
                                break;
                            default:
                                S += s.width - u.x + l
                        }
                        B++
                    }
                    d.push(new C(0, w, h + l, (R ? Y : Y + p) + m));
                    for (S = 0; S < B && g !== B; S++)ia = e[g - B + S], V = kr(ia, ia.xf, ia.Of, q), ia.moveTo(ia.position.x, ia.position.y + p - V.y);
                    D.A(q);
                    D.A(da);
                    if (t === Hs)for (g = 0; g < d.length; g++)e = d[g], e.width += A, e.x -= A; else for (g = 0; g < d.length; g++)e =
                        d[g], e.x > A && (e.width += e.x - A, e.x = A)
            }
            for (k = g = h = e = 0; k < d.length; k++)l = d[k], e = Math.min(e, l.x), h = Math.min(h, l.y), g = Math.max(g, l.x + l.width);
            this.dg === Hs ? this.commitLayers(d, new N(e + a / 2 - (g + e), h - c / 2)) : this.commitLayers(d, new N(e - a / 2, h - c / 2));
            null !== b && b.Gd("Layout");
            this.Mf = !0
        }
    };
    Wn.prototype.commitLayers = function () {
    };
    D.defineProperty(Wn, {sH: "wrappingWidth"}, function () {
        return this.Ot
    }, function (a) {
        this.Ot !== a && (D.h(a, "number", Wn, "wrappingWidth"), 0 < a || isNaN(a)) && (this.Ot = a, this.ey = isNaN(a), this.N())
    });
    D.defineProperty(Wn, {JK: "wrappingColumn"}, function () {
        return this.Nt
    }, function (a) {
        this.Nt !== a && (D.h(a, "number", Wn, "wrappingColumn"), 0 < a || isNaN(a)) && (this.Nt = a, this.N())
    });
    D.defineProperty(Wn, {$p: "cellSize"}, function () {
        return this.bk
    }, function (a) {
        D.l(a, Ba, Wn, "cellSize");
        this.bk.O(a) || (this.bk.assign(a), this.N())
    });
    D.defineProperty(Wn, {spacing: "spacing"}, function () {
        return this.ui
    }, function (a) {
        D.l(a, Ba, Wn, "spacing");
        this.ui.O(a) || (this.ui.assign(a), this.N())
    });
    D.defineProperty(Wn, {alignment: "alignment"}, function () {
        return this.te
    }, function (a) {
        this.te !== a && (D.Da(a, Wn, Wn, "alignment"), a === As || a === Is) && (this.te = a, this.N())
    });
    D.defineProperty(Wn, {dg: "arrangement"}, function () {
        return this.yd
    }, function (a) {
        this.yd !== a && (D.Da(a, Wn, Wn, "arrangement"), a === Bs || a === Hs) && (this.yd = a, this.N())
    });
    D.defineProperty(Wn, {sorting: "sorting"}, function () {
        return this.ti
    }, function (a) {
        this.ti !== a && (D.Da(a, Wn, Wn, "sorting"), a === Fs || a === Gs || a === Cs || a === Es) && (this.ti = a, this.N())
    });
    D.defineProperty(Wn, {comparer: "comparer"}, function () {
        return this.ci
    }, function (a) {
        this.ci !== a && (D.h(a, "function", Wn, "comparer"), this.ci = a, this.N())
    });
    var Ds;
    Wn.standardComparer = Ds = function (a, b) {
        v && D.l(a, F, Wn, "standardComparer:a");
        v && D.l(b, F, Wn, "standardComparer:b");
        var c = a.text, d = b.text;
        return c < d ? -1 : c > d ? 1 : 0
    };
    Wn.smartComparer = function (a, b) {
        v && D.l(a, F, Wn, "standardComparer:a");
        v && D.l(b, F, Wn, "standardComparer:b");
        if (null !== a) {
            if (null !== b) {
                for (var c = a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), d = b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/), e = 0; e < c.length; e++)if ("" !== d[e] && void 0 !== d[e]) {
                    var g = parseFloat(c[e]), h = parseFloat(d[e]);
                    if (isNaN(g)) {
                        if (!isNaN(h))return 1;
                        if (0 !== c[e].localeCompare(d[e]))return c[e].localeCompare(d[e])
                    } else {
                        if (isNaN(h))return -1;
                        if (0 !== g - h)return g - h
                    }
                } else if ("" !== c[e])return 1;
                return "" !== d[e] && void 0 !== d[e] ? -1 : 0
            }
            return 1
        }
        return null !== b ? -1 : 0
    };
    var Is;
    Wn.Position = Is = D.s(Wn, "Position", 0);
    var As;
    Wn.Location = As = D.s(Wn, "Location", 1);
    var Bs;
    Wn.LeftToRight = Bs = D.s(Wn, "LeftToRight", 2);
    var Hs;
    Wn.RightToLeft = Hs = D.s(Wn, "RightToLeft", 3);
    var Fs;
    Wn.Forward = Fs = D.s(Wn, "Forward", 4);
    var Gs;
    Wn.Reverse = Gs = D.s(Wn, "Reverse", 5);
    var Cs;
    Wn.Ascending = Cs = D.s(Wn, "Ascending", 6);
    var Es;
    Wn.Descending = Es = D.s(Wn, "Descending", 7);
    function Js() {
        0 < arguments.length && D.wd(Js);
        Zg.call(this);
        this.Cz = this.Zo = this.ie = 0;
        this.Pr = 360;
        this.Bz = Ks;
        this.xl = 0;
        this.dD = Ks;
        this.Fv = this.Wg = this.vE = 0;
        this.jx = new Ls;
        this.Gv = this.jn = 0;
        this.FH = 600;
        this.at = NaN;
        this.ir = 1;
        this.Bt = 0;
        this.Dt = 360;
        this.yd = Ks;
        this.fa = Ms;
        this.ti = Ns;
        this.ci = zs;
        this.ui = 6;
        this.Ps = Os
    }

    D.Ra(Js, Zg);
    D.ka("CircularLayout", Js);
    Js.prototype.cloneProtected = function (a) {
        Zg.prototype.cloneProtected.call(this, a);
        a.at = this.at;
        a.ir = this.ir;
        a.Bt = this.Bt;
        a.Dt = this.Dt;
        a.yd = this.yd;
        a.fa = this.fa;
        a.ti = this.ti;
        a.ci = this.ci;
        a.ui = this.ui;
        a.Ps = this.Ps
    };
    Js.prototype.qc = function (a) {
        if (a.Oe === Js)if (a === Ps || a === Qs || a === Rs || a === Ss || a === Ns)this.sorting = a; else if (a === Ts || a === Us || a === Ms || a === Vs)this.direction = a; else if (a === Ws || a === Xs || a === Ks || a === Ys)this.dg = a; else {
            if (a === Zs || a === Os)this.ny = a
        } else Zg.prototype.qc.call(this, a)
    };
    Js.prototype.createNetwork = function () {
        return new $s
    };
    Js.prototype.doLayout = function (a) {
        null === a && D.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        a = this.network.vertexes;
        if (1 >= a.count)1 === a.count && (a = a.first(), a.oa = 0, a.va = 0); else {
            var b = new K(at);
            b.Tc(a.j);
            a = new K(at);
            var c = new K(at), d;
            d = this.sort(b);
            var e = this.Bz, g = this.dD, h = this.ie, k = this.Zo, l = this.Cz, m = this.Pr, b = this.xl, n = this.vE, p = this.Wg, q = this.Fv, e = this.dg, g = this.ny, h = this.ZJ;
            if (!isFinite(h) ||
                0 >= h)h = NaN;
            k = this.ZH;
            if (!isFinite(k) || 0 >= k)k = 1;
            l = this.Me;
            isFinite(l) || (l = 0);
            m = this.zf;
            if (!isFinite(m) || 360 < m || 1 > m)m = 360;
            b = this.spacing;
            isFinite(b) || (b = NaN);
            e === Ys && g === Zs ? e = Ks : e === Ys && g !== Zs && (g = Zs, e = this.dg);
            if ((this.direction === Ts || this.direction === Us) && this.sorting !== Ns) {
                for (var r = 0; !(r >= d.length); r += 2) {
                    a.add(d.ea(r));
                    if (r + 1 >= d.length)break;
                    c.add(d.ea(r + 1))
                }
                this.direction === Ts ? (this.dg === Ys && a.reverse(), d = new K(at), d.Tc(a), d.Tc(c)) : (this.dg === Ys && c.reverse(), d = new K(at), d.Tc(c), d.Tc(a))
            }
            for (var s =
                d.length, u = n = 0, r = 0; r < d.length; r++) {
                var p = l + m * u * (this.direction === Ms ? 1 : -1) / s, t = d.ea(r).diameter;
                isNaN(t) && (t = bt(d.ea(r), p));
                360 > m && (0 === r || r === d.length - 1) && (t /= 2);
                n += t;
                u++
            }
            if (isNaN(h) || e === Ys) {
                isNaN(b) && (b = 6);
                if (e !== Ks && e !== Ys) {
                    t = -Infinity;
                    for (r = 0; r < s; r++) {
                        var q = d.ea(r), z = d.ea(r === s - 1 ? 0 : r + 1);
                        isNaN(q.diameter) && bt(q, 0);
                        isNaN(z.diameter) && bt(z, 0);
                        t = Math.max(t, (q.diameter + z.diameter) / 2)
                    }
                    q = t + b;
                    e === Ws ? (p = 2 * Math.PI / s, h = (t + b) / p) : h = ct(this, q * (360 <= m ? s : s - 1), k, l * Math.PI / 180, m * Math.PI / 180)
                } else h = ct(this, n + (360 <=
                    m ? s : s - 1) * (e !== Ys ? b : 1.6 * b), k, l * Math.PI / 180, m * Math.PI / 180);
                p = h * k
            } else if (p = h * k, u = dt(this, h, p, l * Math.PI / 180, m * Math.PI / 180), isNaN(b)) {
                if (e === Ks || e === Ys)b = (u - n) / (360 <= m ? s : s - 1)
            } else if (e === Ks || e === Ys)r = (u - n) / (360 <= m ? s : s - 1), r < b ? (h = ct(this, n + b * (360 <= m ? s : s - 1), k, l * Math.PI / 180, m * Math.PI / 180), p = h * k) : b = r; else {
                t = -Infinity;
                for (r = 0; r < s; r++)q = d.ea(r), z = d.ea(r === s - 1 ? 0 : r + 1), isNaN(q.diameter) && bt(q, 0), isNaN(z.diameter) && bt(z, 0), t = Math.max(t, (q.diameter + z.diameter) / 2);
                q = t + b;
                r = ct(this, q * (360 <= m ? s : s - 1), k, l * Math.PI / 180,
                    m * Math.PI / 180);
                r > h ? (h = r, p = h * k) : q = u / (360 <= m ? s : s - 1)
            }
            this.Bz = e;
            this.dD = g;
            this.ie = h;
            this.Zo = k;
            this.Cz = l;
            this.Pr = m;
            this.xl = b;
            this.vE = n;
            this.Wg = p;
            this.Fv = q;
            b = d;
            d = this.Bz;
            e = this.ie;
            g = this.Cz;
            k = this.Pr;
            l = this.xl;
            m = this.Wg;
            n = this.Fv;
            if (this.direction !== Ts && this.direction !== Us || d !== Ys)if (this.direction === Ts || this.direction === Us) {
                h = 0;
                switch (d) {
                    case Xs:
                        h = 180 * et(this, e, m, g, n) / Math.PI;
                        break;
                    case Ks:
                        n = b = 0;
                        h = a.first();
                        null !== h && (b = bt(h, Math.PI / 2));
                        h = c.first();
                        null !== h && (n = bt(h, Math.PI / 2));
                        h = 180 * et(this, e, m, g, l + (b +
                                n) / 2) / Math.PI;
                        break;
                    case Ws:
                        h = k / b.length
                }
                if (this.direction === Ts) {
                    switch (d) {
                        case Xs:
                            ft(this, a, g, Vs);
                            break;
                        case Ks:
                            gt(this, a, g, Vs);
                            break;
                        case Ws:
                            ht(this, a, k / 2, g, Vs)
                    }
                    switch (d) {
                        case Xs:
                            ft(this, c, g + h, Ms);
                            break;
                        case Ks:
                            gt(this, c, g + h, Ms);
                            break;
                        case Ws:
                            ht(this, c, k / 2, g + h, Ms)
                    }
                } else {
                    switch (d) {
                        case Xs:
                            ft(this, c, g, Vs);
                            break;
                        case Ks:
                            gt(this, c, g, Vs);
                            break;
                        case Ws:
                            ht(this, c, k / 2, g, Vs)
                    }
                    switch (d) {
                        case Xs:
                            ft(this, a, g + h, Ms);
                            break;
                        case Ks:
                            gt(this, a, g + h, Ms);
                            break;
                        case Ws:
                            ht(this, a, k / 2, g + h, Ms)
                    }
                }
            } else switch (d) {
                case Xs:
                    ft(this,
                        b, g, this.direction);
                    break;
                case Ks:
                    gt(this, b, g, this.direction);
                    break;
                case Ws:
                    ht(this, b, k, g, this.direction);
                    break;
                case Ys:
                    it(this, b, k, g, this.direction)
            } else it(this, b, k, g - k / 2, Ms)
        }
        this.updateParts();
        this.network = null;
        this.Mf = !0
    };
    function ht(a, b, c, d, e) {
        var g = a.Pr, h = a.ie;
        a = a.Wg;
        d = d * Math.PI / 180;
        c = c * Math.PI / 180;
        for (var k = b.length, l = 0; l < k; l++) {
            var m = d + (e === Ms ? l * c / (360 <= g ? k : k - 1) : -(l * c) / k), n = b.ea(l), p = h * Math.tan(m) / a, p = Math.sqrt((h * h + a * a * p * p) / (1 + p * p));
            n.oa = p * Math.cos(m);
            n.va = p * Math.sin(m);
            n.actualAngle = 180 * m / Math.PI
        }
    }

    function gt(a, b, c, d) {
        var e = a.ie, g = a.Wg, h = a.xl;
        c = c * Math.PI / 180;
        for (var k = b.length, l = 0; l < k; l++) {
            var m = b.ea(l), n = b.ea(l === k - 1 ? 0 : l + 1), p = g * Math.sin(c);
            m.oa = e * Math.cos(c);
            m.va = p;
            m.actualAngle = 180 * c / Math.PI;
            isNaN(m.diameter) && bt(m, 0);
            isNaN(n.diameter) && bt(n, 0);
            m = et(a, e, g, d === Ms ? c : -c, (m.diameter + n.diameter) / 2 + h);
            c += d === Ms ? m : -m
        }
    }

    function ft(a, b, c, d) {
        var e = a.ie, g = a.Wg, h = a.Fv;
        c = c * Math.PI / 180;
        for (var k = b.length, l = 0; l < k; l++) {
            var m = b.ea(l);
            m.oa = e * Math.cos(c);
            m.va = g * Math.sin(c);
            m.actualAngle = 180 * c / Math.PI;
            m = et(a, e, g, d === Ms ? c : -c, h);
            c += d === Ms ? m : -m
        }
    }

    function it(a, b, c, d, e) {
        var g = a.Gv, g = a.Pr;
        a.jn = 0;
        a.jx = new Ls;
        if (360 > c) {
            for (g = d + (e === Ms ? g : -g); 0 > g;)g += 360;
            g %= 360;
            180 < g && (g -= 360);
            g *= Math.PI / 180;
            a.Gv = g;
            jt(a, b, c, d, e)
        } else kt(a, b, c, d, e);
        a.jx.commit(b)
    }

    function kt(a, b, c, d, e) {
        var g = a.ie, h = a.xl, k = a.Zo, l = g * Math.cos(d * Math.PI / 180), m = a.Wg * Math.sin(d * Math.PI / 180), n = b.oc();
        if (3 === n.length)n[0].oa = g, n[0].va = 0, n[1].oa = n[0].oa - n[0].width / 2 - n[1].width / 2 - h, n[1].y = n[0].y, n[2].oa = (n[0].oa + n[1].oa) / 2, n[2].y = n[0].y - n[2].height - h; else if (4 === n.length)n[0].oa = g, n[0].va = 0, n[2].oa = -n[0].oa, n[2].va = n[0].va, n[1].oa = 0, n[1].y = Math.min(n[0].y, n[2].y) - n[1].height - h, n[3].oa = 0, n[3].y = Math.max(n[0].y + n[0].height + h, n[2].y + n[2].height + h); else {
            for (var g = D.P(), p = 0; p < n.length; p++) {
                n[p].oa =
                    l;
                n[p].va = m;
                if (p >= n.length - 1)break;
                lt(a, l, m, n, p, e, g) || mt(a, l, m, n, p, e, g);
                l = g.x;
                m = g.y
            }
            D.A(g);
            a.jn++;
            if (!(23 < a.jn)) {
                var l = n[0].oa, m = n[0].va, g = n[n.length - 1].oa, p = n[n.length - 1].va, q = Math.abs(l - g) - ((n[0].width + n[n.length - 1].width) / 2 + h), r = Math.abs(m - p) - ((n[0].height + n[n.length - 1].height) / 2 + h), h = 0;
                1 > Math.abs(r) ? Math.abs(l - g) < (n[0].width + n[n.length - 1].width) / 2 && (h = 0) : h = 0 < r ? r : 1 > Math.abs(q) ? 0 : q;
                q = !1;
                q = Math.abs(g) > Math.abs(p) ? 0 < g !== m > p : 0 < p !== l < g;
                if (q = e === Ms ? q : !q)h = -Math.abs(h), h = Math.min(h, -n[n.length - 1].width),
                    h = Math.min(h, -n[n.length - 1].height);
                a.jx.compare(h, n);
                1 < Math.abs(h) && (a.ie = 8 > a.jn ? a.ie - h / (2 * Math.PI) : 5 > n.length && 10 < h ? a.ie / 2 : a.ie - (0 < h ? 1.7 : -2.3), a.Wg = a.ie * k, kt(a, b, c, d, e))
            }
        }
    }

    function jt(a, b, c, d, e) {
        for (var g = a.ie, h = a.Wg, k = a.Zo, l = g * Math.cos(d * Math.PI / 180), m = h * Math.sin(d * Math.PI / 180), n = D.P(), p = b.oc(), q = 0; q < p.length; q++) {
            p[q].oa = l;
            p[q].va = m;
            if (q >= p.length - 1)break;
            lt(a, l, m, p, q, e, n) || mt(a, l, m, p, q, e, n);
            l = n.x;
            m = n.y
        }
        D.A(n);
        a.jn++;
        if (!(23 < a.jn)) {
            l = Math.atan2(m, l);
            l = e === Ms ? a.Gv - l : l - a.Gv;
            l = Math.abs(l) < Math.abs(l - 2 * Math.PI) ? l : l - 2 * Math.PI;
            g = l * (g + h) / 2;
            h = a.jx;
            if (Math.abs(g) < Math.abs(h.nq))for (h.nq = g, h.Co = [], h.Xq = [], l = 0; l < p.length; l++)h.Co[l] = p[l].pb.x, h.Xq[l] = p[l].pb.y;
            1 < Math.abs(g) &&
            (a.ie = 8 > a.jn ? a.ie - g / (2 * Math.PI) : a.ie - (0 < g ? 1.7 : -2.3), a.Wg = a.ie * k, jt(a, b, c, d, e))
        }
    }

    function lt(a, b, c, d, e, g, h) {
        var k = a.ie, l = a.Wg, m = 0, n = 0;
        a = (d[e].width + d[e + 1].width) / 2 + a.xl;
        var p = !1;
        if (0 <= c !== (g === Ms)) {
            if (m = b + a, m > k) {
                m = b - a;
                if (m < -k)return h.x = m, h.y = n, !1;
                p = !0
            }
        } else if (m = b - a, m < -k) {
            m = b + a;
            if (m > k)return h.x = m, h.y = n, !1;
            p = !0
        }
        n = Math.sqrt(1 - Math.min(1, m * m / (k * k))) * l;
        0 > c !== p && (n = -n);
        if (Math.abs(c - n) > (d[e].height + d[e + 1].height) / 2)return h.x = m, h.y = n, !1;
        h.x = m;
        h.y = n;
        return !0
    }

    function mt(a, b, c, d, e, g, h) {
        var k = a.ie, l = a.Wg, m = 0, n = 0;
        a = (d[e].height + d[e + 1].height) / 2 + a.xl;
        d = !1;
        if (0 <= b !== (g === Ms)) {
            if (n = c - a, n < -l) {
                n = c + a;
                if (n > l) {
                    h.x = m;
                    h.y = n;
                    return
                }
                d = !0
            }
        } else if (n = c + a, n > l) {
            n = c - a;
            if (n < -l) {
                h.x = m;
                h.y = n;
                return
            }
            d = !0
        }
        m = Math.sqrt(1 - Math.min(1, n * n / (l * l))) * k;
        0 > b !== d && (m = -m);
        h.x = m;
        h.y = n
    }

    Js.prototype.commitLayout = function () {
        this.commitNodes();
        this.Du && this.commitLinks()
    };
    Js.prototype.commitNodes = function () {
        for (var a = this.OH, b = this.network.vertexes.j; b.next();) {
            var c = b.value;
            c.x += a.x;
            c.y += a.y;
            c.commit()
        }
    };
    Js.prototype.commitLinks = function () {
        for (var a = this.network.edges.j; a.next();)a.value.commit()
    };
    function dt(a, b, c, d, e) {
        var g = a.FH;
        if (.001 > Math.abs(a.Zo - 1))return void 0 !== d && void 0 !== e ? e * b : 2 * Math.PI * b;
        a = b > c ? Math.sqrt(b * b - c * c) / b : Math.sqrt(c * c - b * b) / c;
        for (var h = 0, k = 0, k = void 0 !== d && void 0 !== e ? e / (g + 1) : Math.PI / (2 * (g + 1)), l = 0, m = 0; m <= g; m++)l = void 0 !== d && void 0 !== e ? d + m * e / g : m * Math.PI / (2 * g), l = Math.sin(l), h += Math.sqrt(1 - a * a * l * l) * k;
        return void 0 !== d && void 0 !== e ? (b > c ? b : c) * h : 4 * (b > c ? b : c) * h
    }

    function ct(a, b, c, d, e) {
        var g = 0, g = void 0 !== d && void 0 !== e ? dt(a, 1, c, d, e) : dt(a, 1, c);
        return b / g
    }

    function et(a, b, c, d, e) {
        if (.001 > Math.abs(a.Zo - 1))return e / b;
        var g = b > c ? Math.sqrt(b * b - c * c) / b : Math.sqrt(c * c - b * b) / c, h = 0;
        a = 2 * Math.PI / (700 * a.network.vertexes.count);
        b > c && (d += Math.PI / 2);
        for (var k = 0; ; k++) {
            var l = Math.sin(d + k * a), h = h + (b > c ? b : c) * Math.sqrt(1 - g * g * l * l) * a;
            if (h >= e)return k * a
        }
    }

    Js.prototype.sort = function (a) {
        switch (this.sorting) {
            case Rs:
                break;
            case Ss:
                a.reverse();
                break;
            case Ps:
                a.sort(this.comparer);
                break;
            case Qs:
                a.sort(this.comparer);
                a.reverse();
                break;
            case Ns:
                for (var b = [], c = 0; c < a.length; c++)b.push(0);
                for (var d = new K(at), c = 0; c < a.length; c++) {
                    var e = -1, g = -1;
                    if (0 === c)for (var h = 0; h < a.length; h++) {
                        var k = a.ea(h).HI;
                        k > e && (e = k, g = h)
                    } else for (h = 0; h < a.length; h++)k = b[h], k > e && (e = k, g = h);
                    d.add(a.ea(g));
                    b[g] = -1;
                    g = a.ea(g);
                    e = 0;
                    for (h = g.uc; h.next();)e = a.indexOf(h.value.fromVertex), 0 > e || 0 <= b[e] &&
                    b[e]++;
                    for (g = g.sc; g.next();)e = a.indexOf(g.value.toVertex), 0 > e || 0 <= b[e] && b[e]++
                }
                a = [];
                for (g = 0; g < d.length; g++) {
                    b = d.ea(g);
                    a[g] = [];
                    for (var l = 0, c = b.sc; c.next();)l = d.indexOf(c.value.toVertex), l !== g && 0 > a[g].indexOf(l) && a[g].push(l);
                    for (b = b.uc; b.next();)l = d.indexOf(b.value.fromVertex), l !== g && 0 > a[g].indexOf(l) && a[g].push(l)
                }
                h = [];
                for (g = 0; g < a.length; g++)h[g] = 0;
                for (var b = [], k = [], m = [], c = [], e = new K(at), n = 0, g = 0; g < a.length; g++) {
                    var p = a[g].length;
                    if (1 === p)c.push(g); else if (0 === p)e.add(d.ea(g)); else {
                        if (0 === n)b.push(g);
                        else {
                            for (var q = Infinity, r = Infinity, s = -1, u = [], p = 0; p < b.length; p++)0 > a[b[p]].indexOf(b[p === b.length - 1 ? 0 : p + 1]) && u.push(p === b.length - 1 ? 0 : p + 1);
                            if (0 === u.length)for (p = 0; p < b.length; p++)u.push(p);
                            for (p = 0; p < u.length; p++) {
                                var t = u[p], z, l = a[g];
                                z = k;
                                for (var w = m, B = h, A = t, O = b, H = 0, S = 0; S < z.length; S++) {
                                    var Y = B[z[S]], R = B[w[S]], da = 0, ia = 0;
                                    Y < R ? (da = Y, ia = R) : (da = R, ia = Y);
                                    if (da < A && A <= ia)for (Y = 0; Y < l.length; Y++)R = l[Y], 0 > O.indexOf(R) || da < B[R] && B[R] < ia || da === B[R] || ia === B[R] || H++; else for (Y = 0; Y < l.length; Y++)R = l[Y], 0 > O.indexOf(R) || da <
                                    B[R] && B[R] < ia && da !== B[R] && ia !== B[R] && H++
                                }
                                z = H;
                                for (B = w = 0; B < a[g].length; B++)l = b.indexOf(a[g][B]), 0 <= l && (l = Math.abs(t - (l >= t ? l + 1 : l)), w += l < b.length + 1 - l ? l : b.length + 1 - l);
                                for (B = 0; B < k.length; B++)l = h[k[B]], A = h[m[B]], l >= t && l++, A >= t && A++, l > A && (O = A, A = l, l = O), A - l < (b.length + 2) / 2 === (l < t && t <= A) && w++;
                                if (z < q || z === q && w < r)q = z, r = w, s = t
                            }
                            b.splice(s, 0, g);
                            for (p = 0; p < b.length; p++)h[b[p]] = p;
                            for (p = 0; p < a[g].length; p++)q = a[g][p], 0 <= b.indexOf(q) && (k.push(g), m.push(q))
                        }
                        n++
                    }
                }
                g = !1;
                for (h = b.length; ;) {
                    g = !0;
                    for (k = 0; k < c.length; k++)if (m = c[k],
                            n = a[m][0], l = b.indexOf(n), 0 <= l) {
                        for (r = p = 0; r < a[n].length; r++)q = a[n][r], q = b.indexOf(q), 0 > q || q === l || (s = q > l ? q - l : l - q, p += q < l !== s > h - s ? 1 : -1);
                        b.splice(0 > p ? l : l + 1, 0, m);
                        c.splice(k, 1);
                        k--
                    } else g = !1;
                    if (g)break; else b.push(c[0]), c.splice(0, 1)
                }
                for (g = 0; g < b.length; g++)e.add(d.ea(b[g]));
                return e;
            default:
                D.k("Invalid sorting type.")
        }
        return a
    };
    D.defineProperty(Js, {ZJ: "radius"}, function () {
        return this.at
    }, function (a) {
        this.at !== a && (D.h(a, "number", Js, "radius"), 0 < a || isNaN(a)) && (this.at = a, this.N())
    });
    D.defineProperty(Js, {ZH: "aspectRatio"}, function () {
        return this.ir
    }, function (a) {
        this.ir !== a && (D.h(a, "number", Js, "aspectRatio"), 0 < a && (this.ir = a, this.N()))
    });
    D.defineProperty(Js, {Me: "startAngle"}, function () {
        return this.Bt
    }, function (a) {
        this.Bt !== a && (D.h(a, "number", Js, "startAngle"), this.Bt = a, this.N())
    });
    D.defineProperty(Js, {zf: "sweepAngle"}, function () {
        return this.Dt
    }, function (a) {
        this.Dt !== a && (D.h(a, "number", Js, "sweepAngle"), this.Dt = 0 < a && 360 >= a ? a : 360, this.N())
    });
    D.defineProperty(Js, {dg: "arrangement"}, function () {
        return this.yd
    }, function (a) {
        this.yd !== a && (D.Da(a, Js, Js, "arrangement"), a === Ys || a === Ks || a === Xs || a === Ws) && (this.yd = a, this.N())
    });
    D.defineProperty(Js, {direction: "direction"}, function () {
        return this.fa
    }, function (a) {
        this.fa !== a && (D.Da(a, Js, Js, "direction"), a === Ms || a === Vs || a === Ts || a === Us) && (this.fa = a, this.N())
    });
    D.defineProperty(Js, {sorting: "sorting"}, function () {
        return this.ti
    }, function (a) {
        this.ti !== a && (D.Da(a, Js, Js, "sorting"), a === Rs || a === Ss || a === Ps || Qs || a === Ns) && (this.ti = a, this.N())
    });
    D.defineProperty(Js, {comparer: "comparer"}, function () {
        return this.ci
    }, function (a) {
        this.ci !== a && (D.h(a, "function", Js, "comparer"), this.ci = a, this.N())
    });
    D.defineProperty(Js, {spacing: "spacing"}, function () {
        return this.ui
    }, function (a) {
        this.ui !== a && (D.h(a, "number", Js, "spacing"), this.ui = a, this.N())
    });
    D.defineProperty(Js, {ny: "nodeDiameterFormula"}, function () {
        return this.Ps
    }, function (a) {
        this.Ps !== a && (D.Da(a, Js, Js, "nodeDiameterFormula"), a === Os || a === Zs) && (this.Ps = a, this.N())
    });
    D.w(Js, {PH: "actualXRadius"}, function () {
        return this.ie
    });
    D.w(Js, {QH: "actualYRadius"}, function () {
        return this.Wg
    });
    D.w(Js, {LK: "actualSpacing"}, function () {
        return this.xl
    });
    D.w(Js, {OH: "actualCenter"}, function () {
        return isNaN(this.Ce.x) || isNaN(this.Ce.y) ? new N(0, 0) : new N(this.Ce.x + this.PH, this.Ce.y + this.QH)
    });
    var Ks;
    Js.ConstantSpacing = Ks = D.s(Js, "ConstantSpacing", 0);
    var Xs;
    Js.ConstantDistance = Xs = D.s(Js, "ConstantDistance", 1);
    var Ws;
    Js.ConstantAngle = Ws = D.s(Js, "ConstantAngle", 2);
    var Ys;
    Js.Packed = Ys = D.s(Js, "Packed", 3);
    var Ms;
    Js.Clockwise = Ms = D.s(Js, "Clockwise", 4);
    var Vs;
    Js.Counterclockwise = Vs = D.s(Js, "Counterclockwise", 5);
    var Ts;
    Js.BidirectionalLeft = Ts = D.s(Js, "BidirectionalLeft", 6);
    var Us;
    Js.BidirectionalRight = Us = D.s(Js, "BidirectionalRight", 7);
    var Rs;
    Js.Forwards = Rs = D.s(Js, "Forwards", 8);
    var Ss;
    Js.Reverse = Ss = D.s(Js, "Reverse", 9);
    var Ps;
    Js.Ascending = Ps = D.s(Js, "Ascending", 10);
    var Qs;
    Js.Descending = Qs = D.s(Js, "Descending", 11);
    var Ns;
    Js.Optimized = Ns = D.s(Js, "Optimized", 12);
    var Os;
    Js.Pythagorean = Os = D.s(Js, "Pythagorean", 13);
    var Zs;
    Js.Circular = Zs = D.s(Js, "Circular", 14);
    function Ls() {
        this.nq = -Infinity;
        this.Xq = this.Co = null
    }

    Ls.prototype.compare = function (a, b) {
        if (0 < a && 0 > this.nq || Math.abs(a) < Math.abs(this.nq) && !(0 > a && 0 < this.nq)) {
            this.nq = a;
            this.Co = [];
            this.Xq = [];
            for (var c = 0; c < b.length; c++)this.Co[c] = b[c].pb.x, this.Xq[c] = b[c].pb.y
        }
    };
    Ls.prototype.commit = function (a) {
        if (null !== this.Co && null !== this.Xq)for (var b = 0; b < this.Co.length; b++) {
            var c = a.ea(b);
            c.x = this.Co[b];
            c.y = this.Xq[b]
        }
    };
    function $s() {
        ta.call(this)
    }

    D.Ra($s, ta);
    D.ka("CircularNetwork", $s);
    $s.prototype.createVertex = function () {
        return new at
    };
    $s.prototype.createEdge = function () {
        return new nt
    };
    function at() {
        va.call(this);
        this.actualAngle = this.diameter = NaN
    }

    D.Ra(at, va);
    D.ka("CircularVertex", at);
    function bt(a, b) {
        var c = a.network;
        if (null === c)return NaN;
        c = c.Yb;
        if (null === c)return NaN;
        if (c.dg === Ys)if (c.ny === Zs)a.diameter = Math.max(a.width, a.height); else {
            var c = Math.abs(Math.sin(b)), d = Math.abs(Math.cos(b));
            if (0 === c)return a.width;
            if (0 === d)return a.height;
            a.diameter = Math.min(a.height / c, a.width / d)
        } else a.diameter = c.ny === Zs ? Math.max(a.width, a.height) : Math.sqrt(a.width * a.width + a.height * a.height);
        return a.diameter
    }

    function nt() {
        wa.call(this)
    }

    D.Ra(nt, wa);
    D.ka("CircularEdge", nt);
    function ot() {
        0 < arguments.length && D.wd(ot);
        Zg.call(this);
        this.Vg = null;
        this.ps = 0;
        this.xg = (new Ba(100, 100)).freeze();
        this.hr = !1;
        this.si = !0;
        this.bi = !1;
        this.zp = 100;
        this.Sr = 1;
        this.hi = 1E3;
        this.bt = Math;
        this.Wo = .05;
        this.Vo = 50;
        this.To = 150;
        this.Uo = 0;
        this.Fr = 10;
        this.Er = 5
    }

    D.Ra(ot, Zg);
    D.ka("ForceDirectedLayout", ot);
    ot.prototype.cloneProtected = function (a) {
        Zg.prototype.cloneProtected.call(this, a);
        a.xg.assign(this.xg);
        a.hr = this.hr;
        a.si = this.si;
        a.bi = this.bi;
        a.zp = this.zp;
        a.Sr = this.Sr;
        a.hi = this.hi;
        a.bt = this.bt;
        a.Wo = this.Wo;
        a.Vo = this.Vo;
        a.To = this.To;
        a.Uo = this.Uo;
        a.Fr = this.Fr;
        a.Er = this.Er
    };
    ot.prototype.createNetwork = function () {
        return new pt
    };
    ot.prototype.doLayout = function (a) {
        null === a && D.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        a = this.mB;
        if (0 < this.network.vertexes.count) {
            this.network.Fx();
            for (var b = this.network.vertexes.j; b.next();) {
                var c = b.value;
                c.charge = this.electricalCharge(c);
                c.mass = this.gravitationalMass(c)
            }
            for (b = this.network.edges.j; b.next();)c = b.value, c.stiffness = this.springStiffness(c), c.length = this.springLength(c);
            this.uA();
            this.ps = 0;
            if (this.needsClusterLayout()) {
                b = this.network;
                for (c = b.uK().j; c.next();) {
                    this.network = c.value;
                    for (var d = this.network.vertexes.j; d.next();) {
                        var e = d.value;
                        e.rg = e.vertexes.count;
                        e.cl = 1;
                        e.Jn = null;
                        e.Xh = null
                    }
                    zt(this, 0, a)
                }
                this.network = b;
                c.reset();
                v && D.l(b, pt, ot, "arrangeConnectedGraphs:singletons");
                for (var d = this.PE, g = c.count, h = !0, k = e = 0, l = D.mb(), m = 0; m < g + b.vertexes.count + 2; m++)l[m] = null;
                g = 0;
                c.reset();
                for (var n = D.Rf(); c.next();)if (m = c.value, this.Mh(m, n), h)h = !1, e = n.x + n.width / 2, k = n.y + n.height /
                    2, l[0] = new N(n.x + n.width + d.width, n.y), l[1] = new N(n.x, n.y + n.height + d.height), g = 2; else {
                    var p = gu(l, g, e, k, n.width, n.height, d), q = l[p], r = new N(q.x + n.width + d.width, q.y), s = new N(q.x, q.y + n.height + d.height);
                    p + 1 < g && l.splice(p + 1, 0, null);
                    l[p] = r;
                    l[p + 1] = s;
                    g++;
                    p = q.x - n.x;
                    q = q.y - n.y;
                    for (m = m.vertexes.j; m.next();)r = m.value, r.oa += p, r.va += q
                }
                D.Kb(n);
                for (m = b.vertexes.j; m.next();)h = m.value, n = h.pb, 2 > g ? (e = n.x + n.width / 2, k = n.y + n.height / 2, l[0] = new N(n.x + n.width + d.width, n.y), l[1] = new N(n.x, n.y + n.height + d.height), g = 2) : (p = gu(l, g,
                    e, k, n.width, n.height, d), q = l[p], r = new N(q.x + n.width + d.width, q.y), s = new N(q.x, q.y + n.height + d.height), p + 1 < g && l.splice(p + 1, 0, null), l[p] = r, l[p + 1] = s, g++, h.oa = q.x + h.width / 2, h.va = q.y + h.height / 2);
                D.za(l);
                for (c.reset(); c.next();) {
                    d = c.value;
                    for (e = d.vertexes.j; e.next();)b.$l(e.value);
                    for (d = d.edges.j; d.next();)b.Xp(d.value)
                }
            }
            hu(this, a);
            this.updateParts()
        }
        this.zp = a;
        this.network = null;
        this.Mf = !0
    };
    ot.prototype.needsClusterLayout = function () {
        if (3 > this.network.vertexes.count)return !1;
        for (var a = 0, b = 0, c = this.network.vertexes.first().pb, d = this.network.vertexes.j; d.next();) {
            if (d.value.pb.hg(c) && (a++, 2 < a))return !0;
            if (10 < b)break;
            b++
        }
        return !1
    };
    ot.prototype.Mh = function (a, b) {
        for (var c = !0, d = a.vertexes.j; d.next();) {
            var e = d.value;
            c ? (c = !1, b.set(e.pb)) : b.$h(e.pb)
        }
        return b
    };
    function iu(a, b, c) {
        v && (D.p(b, ot, "computeClusterLayoutIterations:level"), D.p(c, ot, "computeClusterLayoutIterations:maxiter"));
        return Math.max(Math.min(a.network.vertexes.count, c * (b + 1) / 11), 10)
    }

    function zt(a, b, c) {
        v && (D.p(b, ot, "layoutClusters:level"), D.p(c, ot, "layoutClusters:maxiter"));
        if (ju(a, b)) {
            var d = a.hi;
            a.hi *= 1 + 1 / (b + 1);
            var e = ku(a, b), g = Math.max(0, iu(a, b, c));
            a.mB += g;
            zt(a, b + 1, c);
            hu(a, g);
            lu(a, e, b);
            c = a.Vg;
            null === c ? c = new K(mu) : c.clear();
            c.Tc(e.vertexes);
            c.sort(function (a, b) {
                return null === a || null === b || a === b ? 0 : b.rg - a.rg
            });
            for (e = c.j; e.next();)nu(a, e.value, b);
            a.hi = d
        }
    }

    function ju(a, b) {
        v && D.p(b, ot, "hasClusters:level");
        if (10 < b || 3 > a.network.vertexes.count)return !1;
        null === a.Vg ? a.Vg = new K(mu) : a.Vg.clear();
        a.Vg.Tc(a.network.vertexes);
        var c = a.Vg;
        c.sort(function (a, b) {
            return null === a || null === b || a === b ? 0 : b.rg - a.rg
        });
        for (var d = c.count - 1; 0 <= d && 1 >= c.ea(d).rg;)d--;
        return 1 < c.count - d
    }

    function ku(a, b) {
        v && D.p(b, ot, "pushSubNetwork:level");
        for (var c = a.network, d = new pt, e = a.Vg.j; e.next();) {
            var g = e.value;
            if (1 < g.rg) {
                d.$l(g);
                var h = new ou;
                h.Vy = g.rg;
                h.Wy = g.width;
                h.Uy = g.height;
                h.kC = g.W.x;
                h.lC = g.W.y;
                null === g.Xh && (g.Xh = new K(ou));
                g.Xh.add(h);
                g.FB = g.Xh.count - 1
            } else break
        }
        for (var k = c.edges.j; k.next();)if (h = k.value, e = h.fromVertex, g = h.toVertex, e.network === d && g.network === d)d.Xp(h); else if (e.network === d) {
            var l = e.Jn;
            null === l && (l = new K(mu), e.Jn = l);
            l.add(g);
            e.rg--;
            e.cl += g.cl
        } else g.network === d && (l =
            g.Jn, null === l && (l = new K(mu), g.Jn = l), l.add(e), g.rg--, g.cl += e.cl);
        for (e = d.edges.j; e.next();)g = e.value, g.length *= Math.max(1, re((g.fromVertex.cl + g.toVertex.cl) / (4 * b + 1)));
        for (e = d.vertexes.j; e.next();)if (g = e.value, l = g.Jn, null !== l && 0 < l.count && (h = g.Xh.ea(g.Xh.count - 1), h = h.Vy - g.rg, !(0 >= h))) {
            for (var m = 0, n = 0, p = l.count - h; p < l.count; p++) {
                for (var q = l.ea(p), r = null, k = q.edges.j; k.next();) {
                    var s = k.value;
                    if (s.SI(q) === g) {
                        r = s;
                        break
                    }
                }
                null !== r && (n += r.length, m += q.width * q.height)
            }
            k = g.oa;
            l = g.va;
            p = g.width;
            q = g.height;
            r = g.W;
            s =
                p * q;
            1 > s && (s = 1);
            m = re((m + s + n * n * 4 / (h * h)) / s);
            h = (m - 1) * p / 2;
            m = (m - 1) * q / 2;
            g.pb = new C(k - r.x - h, l - r.y - m, p + 2 * h, q + 2 * m);
            g.focus = new N(r.x + h, r.y + m)
        }
        a.network = d;
        return c
    }

    function lu(a, b, c) {
        v && (D.l(b, pt, ot, "popNetwork:oldnet"), D.p(c, ot, "popNetwork:level"));
        for (c = a.network.vertexes.j; c.next();) {
            var d = c.value;
            d.network = b;
            if (null !== d.Xh) {
                var e = d.Xh.ea(d.FB);
                d.rg = e.Vy;
                var g = e.kC, h = e.lC;
                d.pb = new C(d.oa - g, d.va - h, e.Wy, e.Uy);
                d.focus = new N(g, h);
                d.FB--
            }
        }
        for (c = a.network.edges.j; c.next();)c.value.network = b;
        a.network = b
    }

    function nu(a, b, c) {
        v && (D.l(b, mu, ot, "surroundNode:oldnet"), D.p(c, ot, "surroundNode:level"));
        var d = b.Jn;
        if (null !== d && 0 !== d.count) {
            c = b.oa;
            var e = b.va, g = b.width, h = b.height;
            null !== b.Xh && 0 < b.Xh.count && (h = b.Xh.ea(0), g = h.Wy, h = h.Uy);
            for (var g = re(g * g + h * h) / 2, k = !1, l = h = 0, m = 0, n = b.vertexes.j; n.next();) {
                var p = n.value;
                1 >= p.rg ? l++ : (k = !0, m++, h += Math.atan2(b.va - p.va, b.oa - p.oa))
            }
            if (0 !== l)for (0 < m && (h /= m), m = b = 0, b = k ? 2 * Math.PI / (l + 1) : 2 * Math.PI / l, 0 === l % 2 && (m = b / 2), 1 < d.count && d.sort(function (a, b) {
                return null === a || null === b || a ===
                b ? 0 : b.width * b.height - a.width * a.height
            }), k = 0 === l % 2 ? 0 : 1, d = d.j; d.next();)if (l = d.value, !(1 < l.rg || a.isFixed(l))) {
                n = null;
                for (p = l.edges.j; p.next();) {
                    n = p.value;
                    break
                }
                var p = l.width, q = l.height, p = re(p * p + q * q) / 2, n = g + n.length + p, p = h + (b * (k / 2 >> 1) + m) * (0 === k % 2 ? 1 : -1);
                l.oa = c + n * Math.cos(p);
                l.va = e + n * Math.sin(p);
                k++
            }
        }
    }

    function gu(a, b, c, d, e, g, h) {
        var k = 9E19, l = -1, m = 0;
        a:for (; m < b; m++) {
            var n = a[m], p = n.x - c, q = n.y - d, p = p * p + q * q;
            if (p < k) {
                for (q = m - 1; 0 <= q; q--)if (a[q].y > n.y && a[q].x - n.x < e + h.width)continue a;
                for (q = m + 1; q < b; q++)if (a[q].x > n.x && a[q].y - n.y < g + h.height)continue a;
                l = m;
                k = p
            }
        }
        return l
    }

    ot.prototype.uA = function () {
        if (this.comments)for (var a = this.network.vertexes.j; a.next();)this.addComments(a.value)
    };
    ot.prototype.addComments = function (a) {
        var b = a.Yc;
        if (null !== b)for (b = b.tF(); b.next();) {
            var c = b.value;
            if ("Comment" === c.Fd && c.isVisible()) {
                var d = this.network.Tn(c);
                null === d && (d = this.network.St(c));
                d.charge = this.sI;
                for (var c = null, e = d.sc; e.next();) {
                    var g = e.value;
                    if (g.toVertex === a) {
                        c = g;
                        break
                    }
                }
                if (null === c)for (e = d.uc; e.next();)if (g = e.value, g.fromVertex === a) {
                    c = g;
                    break
                }
                null === c && (c = this.network.Aq(a, d, null));
                c.length = this.tI
            }
        }
    };
    function pu(a, b) {
        v && (D.l(a, mu, ot, "getNodeDistance:vertexA"), D.l(b, mu, ot, "getNodeDistance:vertexB"));
        var c = a.R, d = c.x, e = c.y, g = c.width, c = c.height, h = b.R, k = h.x, l = h.y, m = h.width, h = h.height;
        return d + g < k ? e > l + h ? (d = d + g - k, e = e - l - h, re(d * d + e * e)) : e + c < l ? (d = d + g - k, e = e + c - l, re(d * d + e * e)) : k - (d + g) : d > k + m ? e > l + h ? (d = d - k - m, e = e - l - h, re(d * d + e * e)) : e + c < l ? (d = d - k - m, e = e + c - l, re(d * d + e * e)) : d - (k + m) : e > l + h ? e - (l + h) : e + c < l ? l - (e + c) : .1
    }

    function hu(a, b) {
        v && D.p(b, ot, "performIterations:num");
        a.Vg = null;
        for (var c = a.ps + b; a.ps < c && (a.ps++, qu(a)););
        a.Vg = null
    }

    function qu(a) {
        null === a.Vg && (a.Vg = new K(mu), a.Vg.Tc(a.network.vertexes));
        var b = a.Vg.o;
        if (0 >= b.length)return !1;
        var c = b[0];
        c.forceX = 0;
        c.forceY = 0;
        for (var d = c.oa, e = d, g = c.va, h = g, c = 1; c < b.length; c++) {
            var k = b[c];
            k.forceX = 0;
            k.forceY = 0;
            var l = k.oa, k = k.va, d = Math.min(d, l), e = Math.max(e, l), g = Math.min(g, k), h = Math.max(h, k)
        }
        (g = e - d > h - g) ? b.sort(function (a, b) {
            return null === a || null === b || a === b ? 0 : a.oa - b.oa
        }) : b.sort(function (a, b) {
            return null === a || null === b || a === b ? 0 : a.va - b.va
        });
        for (var h = a.hi, m = 0, n = 0, p = 0, c = 0; c < b.length; c++) {
            var k =
                b[c], l = k.R, q = k.W, d = l.x + q.x, l = l.y + q.y, n = k.charge * a.electricalFieldX(d, l), p = k.charge * a.electricalFieldY(d, l), n = n + k.mass * a.gravitationalFieldX(d, l), p = p + k.mass * a.gravitationalFieldY(d, l);
            k.forceX += n;
            k.forceY += p;
            for (q = c + 1; q < b.length; q++)if (e = b[q], e !== k) {
                var r = e.R, n = e.W, p = r.x + n.x, r = r.y + n.y;
                if (d - p > h || p - d > h) {
                    if (g)break
                } else if (l - r > h || r - l > h) {
                    if (!g)break
                } else {
                    var s = pu(k, e);
                    1 > s ? (n = a.xy, null === n && (a.xy = n = new Ha(0)), m = n.random(), s = n.random(), d > p ? (n = Math.abs(e.R.right - k.R.x), n = (1 + n) * m) : d < p ? (n = Math.abs(e.R.x - k.R.right),
                        n = -(1 + n) * m) : (n = Math.max(e.width, k.width), n = (1 + n) * m - n / 2), l > r ? (p = Math.abs(e.R.bottom - k.R.y), p = (1 + p) * s) : d < p ? (p = Math.abs(e.R.y - k.R.bottom), p = -(1 + p) * s) : (p = Math.max(e.height, k.height), p = (1 + p) * s - p / 2)) : (m = -(k.charge * e.charge) / (s * s), n = (p - d) / s * m, p = (r - l) / s * m);
                    k.forceX += n;
                    k.forceY += p;
                    e.forceX -= n;
                    e.forceY -= p
                }
            }
        }
        for (c = a.network.edges.j; c.next();)g = c.value, k = g.fromVertex, e = g.toVertex, l = k.R, q = k.W, d = l.x + q.x, l = l.y + q.y, r = e.R, n = e.W, p = r.x + n.x, r = r.y + n.y, s = pu(k, e), 1 > s ? (n = a.xy, null === n && (a.xy = n = new Ha(0)), m = n.random(), s =
            n.random(), n = (d > p ? 1 : -1) * (1 + (e.width > k.width ? e.width : k.width)) * m, p = (l > r ? 1 : -1) * (1 + (e.height > k.height ? e.height : k.height)) * s) : (m = g.stiffness * (s - g.length), n = (p - d) / s * m, p = (r - l) / s * m), k.forceX += n, k.forceY += p, e.forceX -= n, e.forceY -= p;
        c = 0;
        d = Math.max(a.hi / 20, 50);
        for (e = 0; e < b.length; e++)k = b[e], a.isFixed(k) ? a.moveFixedVertex(k) : (g = k.forceX, h = k.forceY, g < -d ? g = -d : g > d && (g = d), h < -d ? h = -d : h > d && (h = d), k.oa += g, k.va += h, c = Math.max(c, g * g + h * h));
        return c > a.qF * a.qF
    }

    ot.prototype.moveFixedVertex = function () {
    };
    ot.prototype.commitLayout = function () {
        this.MB();
        this.commitNodes();
        this.Du && this.commitLinks()
    };
    ot.prototype.MB = function () {
        if (this.Qq)for (var a = this.network.edges.j; a.next();) {
            var b = a.value.link;
            null !== b && (b.Gb = Wc, b.Hb = Wc)
        }
    };
    ot.prototype.commitNodes = function () {
        var a = 0, b = 0;
        if (this.YH) {
            var c = D.Rf();
            this.Mh(this.network, c);
            b = this.Ce;
            a = b.x - c.x;
            b = b.y - c.y;
            D.Kb(c)
        }
        for (var c = D.Rf(), d = this.network.vertexes.j; d.next();) {
            var e = d.value;
            if (0 !== a || 0 !== b)c.assign(e.pb), c.x += a, c.y += b, e.pb = c;
            e.commit()
        }
        D.Kb(c)
    };
    ot.prototype.commitLinks = function () {
        for (var a = this.network.edges.j; a.next();)a.value.commit()
    };
    ot.prototype.springStiffness = function (a) {
        a = a.stiffness;
        return isNaN(a) ? this.Wo : a
    };
    ot.prototype.springLength = function (a) {
        a = a.length;
        return isNaN(a) ? this.Vo : a
    };
    ot.prototype.electricalCharge = function (a) {
        a = a.charge;
        return isNaN(a) ? this.To : a
    };
    ot.prototype.electricalFieldX = function () {
        return 0
    };
    ot.prototype.electricalFieldY = function () {
        return 0
    };
    ot.prototype.gravitationalMass = function (a) {
        a = a.mass;
        return isNaN(a) ? this.Uo : a
    };
    ot.prototype.gravitationalFieldX = function () {
        return 0
    };
    ot.prototype.gravitationalFieldY = function () {
        return 0
    };
    ot.prototype.isFixed = function (a) {
        return a.isFixed
    };
    D.w(ot, {oL: "currentIteration"}, function () {
        return this.ps
    });
    D.defineProperty(ot, {PE: "arrangementSpacing"}, function () {
        return this.xg
    }, function (a) {
        D.l(a, Ba, ot, "arrangementSpacing");
        this.xg.O(a) || (this.xg.assign(a), this.N())
    });
    D.defineProperty(ot, {YH: "arrangesToOrigin"}, function () {
        return this.hr
    }, function (a) {
        this.hr !== a && (D.h(a, "boolean", ot, "arrangesToOrigin"), this.hr = a, this.N())
    });
    D.defineProperty(ot, {Qq: "setsPortSpots"}, function () {
        return this.si
    }, function (a) {
        this.si !== a && (D.h(a, "boolean", ot, "setsPortSpots"), this.si = a, this.N())
    });
    D.defineProperty(ot, {comments: "comments"}, function () {
        return this.bi
    }, function (a) {
        this.bi !== a && (D.h(a, "boolean", ot, "comments"), this.bi = a, this.N())
    });
    D.defineProperty(ot, {mB: "maxIterations"}, function () {
        return this.zp
    }, function (a) {
        this.zp !== a && (D.h(a, "number", ot, "maxIterations"), 0 <= a && (this.zp = a, this.N()))
    });
    D.defineProperty(ot, {qF: "epsilonDistance"}, function () {
        return this.Sr
    }, function (a) {
        this.Sr !== a && (D.h(a, "number", ot, "epsilonDistance"), 0 < a && (this.Sr = a, this.N()))
    });
    D.defineProperty(ot, {NL: "infinityDistance"}, function () {
        return this.hi
    }, function (a) {
        this.hi !== a && (D.h(a, "number", ot, "infinityDistance"), 1 < a && (this.hi = a, this.N()))
    });
    D.defineProperty(ot, {xy: "randomNumberGenerator"}, function () {
        return this.bt
    }, function (a) {
        this.bt !== a && (null !== a && "function" !== typeof a.random && D.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: ' + a), this.bt = a)
    });
    D.defineProperty(ot, {AL: "defaultSpringStiffness"}, function () {
        return this.Wo
    }, function (a) {
        this.Wo !== a && (D.h(a, "number", ot, "defaultSpringStiffness"), this.Wo = a, this.N())
    });
    D.defineProperty(ot, {zL: "defaultSpringLength"}, function () {
        return this.Vo
    }, function (a) {
        this.Vo !== a && (D.h(a, "number", ot, "defaultSpringLength"), this.Vo = a, this.N())
    });
    D.defineProperty(ot, {tL: "defaultElectricalCharge"}, function () {
        return this.To
    }, function (a) {
        this.To !== a && (D.h(a, "number", ot, "defaultElectricalCharge"), this.To = a, this.N())
    });
    D.defineProperty(ot, {uL: "defaultGravitationalMass"}, function () {
        return this.Uo
    }, function (a) {
        this.Uo !== a && (D.h(a, "number", ot, "defaultGravitationalMass"), this.Uo = a, this.N())
    });
    D.defineProperty(ot, {tI: "defaultCommentSpringLength"}, function () {
        return this.Fr
    }, function (a) {
        this.Fr !== a && (D.h(a, "number", ot, "defaultCommentSpringLength"), this.Fr = a, this.N())
    });
    D.defineProperty(ot, {sI: "defaultCommentElectricalCharge"}, function () {
        return this.Er
    }, function (a) {
        this.Er !== a && (D.h(a, "number", ot, "defaultCommentElectricalCharge"), this.Er = a, this.N())
    });
    function ou() {
        this.lC = this.kC = this.Uy = this.Wy = this.Vy = 0
    }

    function pt() {
        ta.call(this)
    }

    D.Ra(pt, ta);
    D.ka("ForceDirectedNetwork", pt);
    pt.prototype.createVertex = function () {
        return new mu
    };
    pt.prototype.createEdge = function () {
        return new ru
    };
    function mu() {
        va.call(this);
        this.isFixed = !1;
        this.mass = this.charge = NaN;
        this.cl = this.rg = this.forceY = this.forceX = 0;
        this.Xh = this.Jn = null;
        this.FB = 0
    }

    D.Ra(mu, va);
    D.ka("ForceDirectedVertex", mu);
    function ru() {
        wa.call(this);
        this.length = this.stiffness = NaN
    }

    D.Ra(ru, wa);
    D.ka("ForceDirectedEdge", ru);
    function su() {
        0 < arguments.length && D.wd(su);
        Zg.call(this);
        this.he = this.$m = 25;
        this.fa = 0;
        this.So = tu;
        this.vp = uu;
        this.jp = vu;
        this.Ym = 4;
        this.Go = wu;
        this.oj = xu;
        this.si = !0;
        this.us = 4;
        this.Pb = this.rw = this.yb = -1;
        this.Zf = this.Ds = 0;
        this.Vb = this.Xf = this.Yf = this.Kg = this.ue = null;
        this.Ls = 0;
        this.Ks = this.en = null;
        this.Mg = 0;
        this.Ms = null;
        this.uC = new N;
        this.zh = [];
        this.zh.length = 100
    }

    D.Ra(su, Zg);
    D.ka("LayeredDigraphLayout", su);
    su.prototype.cloneProtected = function (a) {
        Zg.prototype.cloneProtected.call(this, a);
        a.$m = this.$m;
        a.he = this.he;
        a.fa = this.fa;
        a.So = this.So;
        a.vp = this.vp;
        a.jp = this.jp;
        a.Ym = this.Ym;
        a.Go = this.Go;
        a.oj = this.oj;
        a.si = this.si;
        a.us = this.us
    };
    su.prototype.qc = function (a) {
        a.Oe === su ? 0 === a.name.indexOf("Aggressive") ? this.WH = a : 0 === a.name.indexOf("Cycle") ? this.rI = a : 0 === a.name.indexOf("Init") ? this.iJ = a : 0 === a.name.indexOf("Layer") ? this.xJ = a : D.k("Unknown enum value: " + a) : Zg.prototype.qc.call(this, a)
    };
    su.prototype.createNetwork = function () {
        return new yu
    };
    su.prototype.doLayout = function (a) {
        null === a && D.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        this.Ce = this.initialOrigin(this.Ce);
        this.rw = -1;
        this.Zf = this.Ds = 0;
        this.Ms = this.Ks = this.en = null;
        for (a = 0; a < this.zh.length; a++)this.zh[a] = null;
        if (0 < this.network.vertexes.count) {
            this.network.Fx();
            for (a = this.network.edges.j; a.next();)a.value.rev = !1;
            switch (this.So) {
                default:
                case zu:
                    a = this.network;
                    var b =
                        0, c = a.vertexes.count - 1, d = [];
                    d.length = c + 1;
                    for (var e = a.vertexes.j; e.next();)e.value.valid = !0;
                    for (; null !== Au(a);) {
                        for (e = Bu(a); null !== e;)d[c] = e, c--, e.valid = !1, e = Bu(a);
                        for (e = Cu(a); null !== e;)d[b] = e, b++, e.valid = !1, e = Cu(a);
                        for (var e = null, g = 0, h = this.network.vertexes.j; h.next();) {
                            var k = h.value;
                            if (k.valid) {
                                for (var l = 0, m = k.sc; m.next();)m.value.toVertex.valid && l++;
                                for (var m = 0, n = k.uc; n.next();)n.value.fromVertex.valid && m++;
                                if (null === e || g < l - m)e = k, g = l - m
                            }
                        }
                        null !== e && (d[b] = e, b++, e.valid = !1)
                    }
                    for (b = 0; b < a.vertexes.count; b++)d[b].index =
                        b;
                    for (d = a.edges.j; d.next();)b = d.value, b.fromVertex.index > b.toVertex.index && (a.Dy(b), b.rev = !0);
                    break;
                case tu:
                    for (d = this.network.vertexes.j; d.next();)a = d.value, a.iq = -1, a.finish = -1;
                    for (a = this.network.edges.j; a.next();)a.value.forest = !1;
                    this.Ls = 0;
                    for (d.reset(); d.next();)b = d.value, 0 === b.uc.count && Du(this, b);
                    for (d.reset(); d.next();)b = d.value, -1 === b.iq && Du(this, b);
                    for (a.reset(); a.next();)d = a.value, d.forest || (b = d.fromVertex, c = b.finish, e = d.toVertex, g = e.finish, e.iq < b.iq && c < g && (this.network.Dy(d), d.rev = !0))
            }
            for (a =
                     this.network.vertexes.j; a.next();)a.value.layer = -1;
            this.yb = -1;
            this.assignLayers();
            for (a.reset(); a.next();)this.yb = Math.max(this.yb, a.value.layer);
            a = this.network;
            d = [];
            for (c = a.edges.j; c.next();)b = c.value, b.valid = !1, d.push(b);
            for (c = 0; c < d.length; c++)if (b = d[c], g = b.fromVertex, e = b.toVertex, !b.valid && (null !== g.Dd && null !== e.Dd || g.layer !== e.layer)) {
                m = k = l = h = 0;
                if (null !== b.link) {
                    l = b.link;
                    if (null === l)continue;
                    var p = g.Dd, h = e.Dd;
                    if (null === p || null === h)continue;
                    var q = l.Y, k = l.ba, r = l.Mc, m = l.ld;
                    b.rev && (l = q, n = r, q = k, r =
                        m, k = l, m = n);
                    var s = g.W, l = e.W, u = b.rev ? e.R : g.R, n = D.P();
                    u.F() ? (kr(q, r, kc, n), n.F() || n.assign(s)) : n.assign(s);
                    p !== q && u.F() && q.isVisible() && (p = g.R, p.F() && (n.x += u.x - p.x, n.y += u.y - p.y));
                    q = b.rev ? g.R : e.R;
                    p = D.P();
                    q.F() ? (kr(k, m, kc, p), p.F() || p.assign(l)) : p.assign(l);
                    h !== k && q.F() && k.isVisible() && (h = e.R, h.F() && (p.x += q.x - h.x, p.y += q.y - h.y));
                    90 === this.fa || 270 === this.fa ? (h = Math.round((n.x - s.x) / this.he), k = n.x, l = Math.round((p.x - l.x) / this.he), m = p.x) : (h = Math.round((n.y - s.y) / this.he), k = n.y, l = Math.round((p.y - l.y) / this.he), m =
                        p.y);
                    D.A(n);
                    D.A(p);
                    b.portFromColOffset = h;
                    b.portFromPos = k;
                    b.portToColOffset = l;
                    b.portToPos = m
                } else b.portFromColOffset = 0, b.portFromPos = 0, b.portToColOffset = 0, b.portToPos = 0;
                n = g.layer;
                s = e.layer;
                a:if (p = b, q = 0, u = p.link, null !== u) {
                    var t = u.Mc, z = u.ld;
                    if (null !== t && null !== z) {
                        var w = u.Y, r = u.ba;
                        if (null !== w && null !== r) {
                            var B = t.Gb, A = z.Hb;
                            this.Qq || (u.Gb.gd() || (B = u.Gb), u.Hb.gd() || (A = u.Hb));
                            var O = u.ic, H = Eu(this, !0);
                            if (B.gd() || B === cc)B = H;
                            var S = Eu(this, !1);
                            if (A.gd() || A === cc)A = S;
                            if (B.Mj() && B.Jj(S) && A.Mj() && A.Jj(H)) {
                                q = 0;
                                break a
                            }
                            H =
                                u.getLinkPoint(w, t, B, !0, O, r, z, D.P());
                            B = u.getLinkDirection(w, t, H, B, !0, O, r, z);
                            D.A(H);
                            B === Fu(this, p, !0) ? q += 1 : this.Qq && null !== w && 1 === w.ports.count && p.rev && (q += 1);
                            B = u.getLinkPoint(r, z, A, !1, O, w, t, D.P());
                            u = u.getLinkDirection(r, z, B, A, !1, O, w, t);
                            D.A(B);
                            u === Fu(this, p, !1) ? q += 2 : this.Qq && null !== r && 1 === r.ports.count && p.rev && (q += 2)
                        }
                    }
                }
                p = 1 === q || 3 === q ? !0 : !1;
                if (q = 2 === q || 3 === q ? !0 : !1)r = a.createVertex(), r.Dd = null, r.En = 1, r.layer = n, r.near = g, a.$l(r), g = a.Aq(g, r, b.link), g.valid = !1, g.rev = b.rev, g.portFromColOffset = h, g.portToColOffset =
                    0, g.portFromPos = k, g.portToPos = 0, g = r;
                u = 1;
                p && u--;
                if (n - s > u && 0 < n) {
                    b.valid = !1;
                    r = a.createVertex();
                    r.Dd = null;
                    r.En = 2;
                    r.layer = n - 1;
                    a.$l(r);
                    g = a.Aq(g, r, b.link);
                    g.valid = !0;
                    g.rev = b.rev;
                    g.portFromColOffset = q ? 0 : h;
                    g.portToColOffset = 0;
                    g.portFromPos = q ? 0 : k;
                    g.portToPos = 0;
                    g = r;
                    for (n--; n - s > u && 0 < n;)r = a.createVertex(), r.Dd = null, r.En = 3, r.layer = n - 1, a.$l(r), g = a.Aq(g, r, b.link), g.valid = !0, g.rev = b.rev, g.portFromColOffset = 0, g.portToColOffset = 0, g.portFromPos = 0, g.portToPos = 0, g = r, n--;
                    g = a.Aq(r, e, b.link);
                    g.valid = !p;
                    p && (r.near = e);
                    g.rev =
                        b.rev;
                    g.portFromColOffset = 0;
                    g.portToColOffset = l;
                    g.portFromPos = 0;
                    g.portToPos = m
                } else b.valid = !0
            }
            d = this.ue = [];
            for (b = 0; b <= this.yb; b++)d[b] = 0;
            for (a = this.network.vertexes.j; a.next();)a.value.index = -1;
            this.initializeIndices();
            this.rw = -1;
            for (b = this.Zf = this.Ds = 0; b <= this.yb; b++)d[b] > d[this.Zf] && (this.rw = d[b] - 1, this.Zf = b), d[b] < d[this.Ds] && (this.Ds = b);
            this.Ms = [];
            for (b = 0; b < d.length; b++)this.Ms[b] = [];
            for (a.reset(); a.next();)d = a.value, this.Ms[d.layer][d.index] = d;
            this.Pb = -1;
            for (a = 0; a <= this.yb; a++) {
                d = Gu(this, a);
                b =
                    0;
                c = this.ue[a];
                for (e = 0; e < c; e++)g = d[e], b += this.nodeMinColumnSpace(g, !0), g.column = b, b += 1, b += this.nodeMinColumnSpace(g, !1);
                this.Pb = Math.max(this.Pb, b - 1);
                Hu(this, a, d)
            }
            this.reduceCrossings();
            this.straightenAndPack();
            this.updateParts()
        }
        this.network = null;
        this.Mf = !0
    };
    su.prototype.linkMinLength = function () {
        return 1
    };
    function Iu(a) {
        var b = a.fromVertex.Dd;
        a = a.toVertex.Dd;
        return null === b && null === a ? 8 : null === b || null === a ? 4 : 1
    }

    su.prototype.nodeMinLayerSpace = function (a, b) {
        return null === a.Dd ? 0 : 90 === this.fa || 270 === this.fa ? b ? a.W.y + 10 : a.R.height - a.W.y + 10 : b ? a.W.x + 10 : a.R.width - a.W.x + 10
    };
    su.prototype.nodeMinColumnSpace = function (a, b) {
        if (null === a.Dd)return 0;
        var c = b ? a.uB : a.tB;
        if (null !== c)return c;
        c = this.fa;
        return 90 === c || 270 === c ? b ? a.uB = a.W.x / this.he + 1 | 0 : a.tB = (a.R.width - a.W.x) / this.he + 1 | 0 : b ? a.uB = a.W.y / this.he + 1 | 0 : a.tB = (a.R.height - a.W.y) / this.he + 1 | 0
    };
    function Ju(a) {
        null === a.en && (a.en = []);
        for (var b = 0, c = a.network.vertexes.j; c.next();) {
            var d = c.value;
            a.en[b] = d.layer;
            b++;
            a.en[b] = d.column;
            b++;
            a.en[b] = d.index;
            b++
        }
        return a.en
    }

    function Ku(a, b) {
        for (var c = 0, d = a.network.vertexes.j; d.next();) {
            var e = d.value;
            e.layer = b[c];
            c++;
            e.column = b[c];
            c++;
            e.index = b[c];
            c++
        }
    }

    function Lu(a, b, c) {
        v && (D.p(b, su, "crossingMatrix:unfixedLayer"), D.p(c, su, "crossingMatrix:direction"));
        var d = Gu(a, b), e = a.ue[b];
        if (null === a.Ks || a.Ks.length < e * e)a.Ks = [];
        for (var g = a.Ks, h = 0; h < e; h++) {
            var k = 0, l = d[h], m = l.near, n = 0;
            if (null !== m && m.layer === l.layer)if (n = m.index, n > h)for (var p = h + 1; p < n; p++)l = d[p], l.near === m && l.En === m.En || k++; else for (p = h - 1; p > n; p--)l = d[p], l.near === m && l.En === m.En || k++;
            var m = 0, q, r = q = p = l = 0, s, u = 0, t = 0;
            s = 0;
            var z;
            if (0 <= c)for (n = d[h].We, m = 0; m < n.count; m++)if (q = n.o[m], q.valid && q.fromVertex.layer !==
                b)for (l = q.fromVertex.index, p = q.portToPos, q = q.portFromPos, r = m + 1; r < n.count; r++)s = n.o[r], s.valid && s.fromVertex.layer !== b && (u = s.fromVertex.index, t = s.portToPos, s = s.portFromPos, p < t && (l > u || l === u && q > s) && k++, t < p && (u > l || u === l && s > q) && k++);
            if (0 >= c)for (n = d[h].Qe, m = 0; m < n.count; m++)if (q = n.o[m], q.valid && q.toVertex.layer !== b)for (l = q.toVertex.index, p = q.portToPos, q = q.portFromPos, r = m + 1; r < n.count; r++)s = n.o[r], s.valid && s.toVertex.layer !== b && (u = s.toVertex.index, t = s.portToPos, s = s.portFromPos, q < s && (l > u || l === u && p > t) && k++,
            s < q && (u > l || u === l && t > p) && k++);
            g[h * e + h] = k;
            for (n = h + 1; n < e; n++) {
                var w = 0, B = 0;
                if (0 <= c)for (k = d[h].We, z = d[n].We, m = 0; m < k.count; m++)if (q = k.o[m], q.valid && q.fromVertex.layer !== b)for (l = q.fromVertex.index, q = q.portFromPos, r = 0; r < z.count; r++)s = z.o[r], s.valid && s.fromVertex.layer !== b && (u = s.fromVertex.index, s = s.portFromPos, (l < u || l === u && q < s) && B++, (u < l || u === l && s < q) && w++);
                if (0 >= c)for (k = d[h].Qe, z = d[n].Qe, m = 0; m < k.count; m++)if (q = k.o[m], q.valid && q.toVertex.layer !== b)for (l = q.toVertex.index, p = q.portToPos, r = 0; r < z.count; r++)s = z.o[r],
                s.valid && s.toVertex.layer !== b && (u = s.toVertex.index, t = s.portToPos, (l < u || l === u && p < t) && B++, (u < l || u === l && t < p) && w++);
                g[h * e + n] = w;
                g[n * e + h] = B
            }
        }
        Hu(a, b, d);
        return g
    }

    su.prototype.countCrossings = function () {
        for (var a = 0, b = 0; b <= this.yb; b++)for (var c = Lu(this, b, 1), d = this.ue[b], e = 0; e < d; e++)for (var g = e; g < d; g++)a += c[e * d + g];
        return a
    };
    function Mu(a) {
        for (var b = 0, c = 0; c <= a.yb; c++) {
            for (var d = a, e = c, g = Gu(d, e), h = d.ue[e], k = 0, l = 0; l < h; l++) {
                var m = null, m = g[l].Qe, n, p = 0, q = 0;
                if (null !== m)for (var r = 0; r < m.count; r++)n = m.o[r], n.valid && n.toVertex.layer !== e && (p = n.fromVertex.column + n.portFromColOffset, q = n.toVertex.column + n.portToColOffset, k += (Math.abs(p - q) + 1) * Iu(n))
            }
            Hu(d, e, g);
            b += k
        }
        return b
    }

    su.prototype.normalize = function () {
        var a = Infinity;
        this.Pb = -1;
        for (var b = this.network.vertexes.j; b.next();) {
            var c = b.value, a = Math.min(a, c.column - this.nodeMinColumnSpace(c, !0));
            this.Pb = Math.max(this.Pb, c.column + this.nodeMinColumnSpace(c, !1))
        }
        for (b.reset(); b.next();)b.value.column -= a;
        this.Pb -= a
    };
    function Nu(a, b, c) {
        v && (D.p(b, su, "barycenters:unfixedLayer"), D.p(c, su, "barycenters:direction"));
        for (var d = Gu(a, b), e = a.ue[b], g = [], h = 0; h < e; h++) {
            var k = d[h], l = null;
            0 >= c && (l = k.We);
            var m = null;
            0 <= c && (m = k.Qe);
            var n = 0, p = 0, q = k.near;
            null !== q && q.layer === k.layer && (n += q.column - 1, p++);
            if (null !== l)for (q = 0; q < l.count; q++) {
                var k = l.o[q], r = k.fromVertex;
                k.valid && !k.rev && r.layer !== b && (n += r.column, p++)
            }
            if (null !== m)for (l = 0; l < m.count; l++)k = m.o[l], q = k.toVertex, k.valid && !k.rev && q.layer !== b && (n += q.column, p++);
            g[h] = 0 === p ? -1 : n /
            p
        }
        Hu(a, b, d);
        return g
    }

    function Ou(a, b, c) {
        v && (D.p(b, su, "medians:unfixedLayer"), D.p(c, su, "medians:direction"));
        for (var d = Gu(a, b), e = a.ue[b], g = [], h = 0; h < e; h++) {
            var k = d[h], l = null;
            0 >= c && (l = k.We);
            var m = null;
            0 <= c && (m = k.Qe);
            var n = 0, p = [], q = k.near;
            null !== q && q.layer === k.layer && (p[n] = q.column - 1, n++);
            if (null !== l)for (q = 0; q < l.count; q++) {
                var k = l.o[q], r = k.fromVertex;
                k.valid && !k.rev && r.layer !== b && (p[n] = r.column + k.portFromColOffset, n++)
            }
            if (null !== m)for (l = 0; l < m.count; l++)k = m.o[l], q = k.toVertex, k.valid && !k.rev && q.layer !== b && (p[n] = q.column + k.portToColOffset,
                n++);
            0 === n ? g[h] = -1 : (p.sort(function (a, b) {
                return a - b
            }), m = n >> 1, g[h] = 0 !== (n & 1) ? p[m] : p[m - 1] + p[m] >> 1)
        }
        Hu(a, b, d);
        return g
    }

    function Pu(a, b, c, d, e, g) {
        if (b.component === d) {
            b.component = c;
            var h = 0, k = 0;
            if (e)for (var l = b.sc; l.next();) {
                var k = l.value, m = k.toVertex, h = b.layer - m.layer, k = a.linkMinLength(k);
                h === k && Pu(a, m, c, d, e, g)
            }
            if (g)for (l = b.uc; l.next();)k = l.value, m = k.fromVertex, h = m.layer - b.layer, k = a.linkMinLength(k), h === k && Pu(a, m, c, d, e, g)
        }
    }

    function Qu(a, b, c, d, e, g) {
        if (b.component === d) {
            b.component = c;
            if (e)for (var h = b.sc; h.next();)Qu(a, h.value.toVertex, c, d, e, g);
            if (g)for (b = b.uc; b.next();)Qu(a, b.value.fromVertex, c, d, e, g)
        }
    }

    function Au(a) {
        for (a = a.vertexes.j; a.next();) {
            var b = a.value;
            if (b.valid)return b
        }
        return null
    }

    function Bu(a) {
        for (a = a.vertexes.j; a.next();) {
            var b = a.value;
            if (b.valid) {
                for (var c = !0, d = b.sc; d.next();)if (d.value.toVertex.valid) {
                    c = !1;
                    break
                }
                if (c)return b
            }
        }
        return null
    }

    function Cu(a) {
        for (a = a.vertexes.j; a.next();) {
            var b = a.value;
            if (b.valid) {
                for (var c = !0, d = b.uc; d.next();)if (d.value.fromVertex.valid) {
                    c = !1;
                    break
                }
                if (c)return b
            }
        }
        return null
    }

    function Du(a, b) {
        b.iq = a.Ls;
        a.Ls++;
        for (var c = b.sc; c.next();) {
            var d = c.value, e = d.toVertex;
            -1 === e.iq && (d.forest = !0, Du(a, e))
        }
        b.finish = a.Ls;
        a.Ls++
    }

    su.prototype.assignLayers = function () {
        switch (this.vp) {
            case Ru:
                Su(this);
                break;
            case Tu:
                for (var a = 0, b = this.network.vertexes.j; b.next();)a = Uu(this, b.value), this.yb = Math.max(a, this.yb);
                for (b.reset(); b.next();)a = b.value, a.layer = this.yb - a.layer;
                break;
            default:
            case uu:
                Su(this);
                for (b = this.network.vertexes.j; b.next();)b.value.valid = !1;
                for (b.reset(); b.next();)a = b.value, 0 === a.uc.count && Vu(this, a);
                a = Infinity;
                for (b.reset(); b.next();)a = Math.min(a, b.value.layer);
                this.yb = -1;
                for (b.reset(); b.next();) {
                    var c = b.value;
                    c.layer -=
                        a;
                    this.yb = Math.max(this.yb, c.layer)
                }
        }
    };
    function Su(a) {
        for (var b = a.network.vertexes.j; b.next();) {
            var c = Wu(a, b.value);
            a.yb = Math.max(c, a.yb)
        }
    }

    function Wu(a, b) {
        var c = 0;
        if (-1 === b.layer) {
            for (var d = b.sc; d.next();)var e = d.value, g = e.toVertex, e = a.linkMinLength(e), c = Math.max(c, Wu(a, g) + e);
            b.layer = c
        } else c = b.layer;
        return c
    }

    function Uu(a, b) {
        var c = 0;
        if (-1 === b.layer) {
            for (var d = b.uc; d.next();)var e = d.value, g = e.fromVertex, e = a.linkMinLength(e), c = Math.max(c, Uu(a, g) + e);
            b.layer = c
        } else c = b.layer;
        return c
    }

    function Vu(a, b) {
        if (!b.valid) {
            b.valid = !0;
            for (var c = b.sc; c.next();)Vu(a, c.value.toVertex);
            for (c = a.network.vertexes.j; c.next();)c.value.component = -1;
            for (var d = b.We.o, e = d.length, g = 0; g < e; g++) {
                var h = d[g], k = h.fromVertex, l = h.toVertex, h = a.linkMinLength(h);
                k.layer - l.layer > h && Pu(a, k, 0, -1, !0, !1)
            }
            for (Pu(a, b, 1, -1, !0, !0); 0 !== b.component;) {
                for (var k = 0, d = Infinity, l = 0, m = null, n = a.network.vertexes.j; n.next();) {
                    var p = n.value;
                    if (1 === p.component) {
                        for (var q = 0, r = !1, s = p.We.o, e = s.length, g = 0; g < e; g++) {
                            var h = s[g], u = h.fromVertex,
                                q = q + 1;
                            1 !== u.component && (k += 1, u = u.layer - p.layer, h = a.linkMinLength(h), d = Math.min(d, u - h))
                        }
                        h = p.Qe.o;
                        e = h.length;
                        for (g = 0; g < e; g++)s = h[g].toVertex, q -= 1, 1 !== s.component ? k -= 1 : r = !0;
                        (null === m || q < l) && !r && (m = p, l = q)
                    }
                }
                if (0 < k) {
                    for (c.reset(); c.next();)e = c.value, 1 === e.component && (e.layer += d);
                    b.component = 0
                } else m.component = 0
            }
            for (c = a.network.vertexes.j; c.next();)c.value.component = -1;
            for (Pu(a, b, 1, -1, !0, !1); 0 !== b.component;) {
                g = 0;
                e = Infinity;
                d = 0;
                h = null;
                for (k = a.network.vertexes.j; k.next();)if (l = k.value, 1 === l.component) {
                    m =
                        0;
                    n = !1;
                    r = l.We.o;
                    p = r.length;
                    for (q = 0; q < p; q++)s = r[q].fromVertex, m += 1, 1 !== s.component ? g += 1 : n = !0;
                    r = l.Qe.o;
                    p = r.length;
                    for (q = 0; q < p; q++)s = r[q], u = s.toVertex, m -= 1, 1 !== u.component && (g -= 1, u = l.layer - u.layer, s = a.linkMinLength(s), e = Math.min(e, u - s));
                    (null === h || m > d) && !n && (h = l, d = m)
                }
                if (0 > g) {
                    for (c.reset(); c.next();)g = c.value, 1 === g.component && (g.layer -= e);
                    b.component = 0
                } else h.component = 0
            }
        }
    }

    function Fu(a, b, c) {
        return 90 === a.fa ? c && !b.rev || !c && b.rev ? 270 : 90 : 180 === a.fa ? c && !b.rev || !c && b.rev ? 0 : 180 : 270 === a.fa ? c && !b.rev || !c && b.rev ? 90 : 270 : c && !b.rev || !c && b.rev ? 180 : 0
    }

    su.prototype.initializeIndices = function () {
        switch (this.jp) {
            default:
            case Xu:
                for (var a = this.network.vertexes.j; a.next();) {
                    var b = a.value, c = b.layer;
                    b.index = this.ue[c];
                    this.ue[c]++
                }
                break;
            case vu:
                a = this.network.vertexes.j;
                for (b = this.yb; 0 <= b; b--)for (a.reset(); a.next();)c = a.value, c.layer === b && -1 === c.index && Yu(this, c);
                break;
            case Zu:
                for (a = this.network.vertexes.j, b = 0; b <= this.yb; b++)for (a.reset(); a.next();)c = a.value, c.layer === b && -1 === c.index && $u(this, c)
        }
    };
    function Yu(a, b) {
        var c = b.layer;
        b.index = a.ue[c];
        a.ue[c]++;
        for (var c = b.Qe.oc(), d = !0; d;)for (var d = !1, e = 0; e < c.length - 1; e++) {
            var g = c[e], h = c[e + 1];
            g.portFromColOffset > h.portFromColOffset && (d = !0, c[e] = h, c[e + 1] = g)
        }
        for (e = 0; e < c.length; e++)d = c[e], d.valid && (d = d.toVertex, -1 === d.index && Yu(a, d))
    }

    function $u(a, b) {
        var c = b.layer;
        b.index = a.ue[c];
        a.ue[c]++;
        for (var c = b.We.oc(), d = !0, e = 0; d;)for (d = !1, e = 0; e < c.length - 1; e++) {
            var g = c[e], h = c[e + 1];
            g.portToColOffset > h.portToColOffset && (d = !0, c[e] = h, c[e + 1] = g)
        }
        for (e = 0; e < c.length; e++)d = c[e], d.valid && (d = d.fromVertex, -1 === d.index && $u(a, d))
    }

    su.prototype.reduceCrossings = function () {
        for (var a = this.countCrossings(), b = Ju(this), c = 0, d = 0, e = 0, c = 0; c < this.Ym; c++) {
            for (d = 0; d <= this.yb; d++)av(this, d, 1), bv(this, d, 1);
            e = this.countCrossings();
            e < a && (a = e, b = Ju(this));
            for (d = this.yb; 0 <= d; d--)av(this, d, -1), bv(this, d, -1);
            e = this.countCrossings();
            e < a && (a = e, b = Ju(this))
        }
        Ku(this, b);
        for (c = 0; c < this.Ym; c++) {
            for (d = 0; d <= this.yb; d++)av(this, d, 0), bv(this, d, 0);
            e = this.countCrossings();
            e < a && (a = e, b = Ju(this));
            for (d = this.yb; 0 <= d; d--)av(this, d, 0), bv(this, d, 0);
            e = this.countCrossings();
            e < a && (a = e, b = Ju(this))
        }
        Ku(this, b);
        var g = !1, h = c = 0, k = 0, d = 0;
        switch (this.Go) {
            case cv:
                break;
            case dv:
                for (k = a + 1; (d = this.countCrossings()) < k;)for (k = d, c = this.yb; 0 <= c; c--)for (h = 0; h <= c; h++) {
                    for (g = !0; g;)for (g = !1, d = c; d >= h; d--)g = bv(this, d, -1) || g;
                    e = this.countCrossings();
                    e >= a ? Ku(this, b) : (a = e, b = Ju(this));
                    for (g = !0; g;)for (g = !1, d = c; d >= h; d--)g = bv(this, d, 1) || g;
                    e = this.countCrossings();
                    e >= a ? Ku(this, b) : (a = e, b = Ju(this));
                    for (g = !0; g;)for (g = !1, d = h; d <= c; d++)g = bv(this, d, 1) || g;
                    e >= a ? Ku(this, b) : (a = e, b = Ju(this));
                    for (g = !0; g;)for (g = !1,
                                             d = h; d <= c; d++)g = bv(this, d, -1) || g;
                    e >= a ? Ku(this, b) : (a = e, b = Ju(this));
                    for (g = !0; g;)for (g = !1, d = c; d >= h; d--)g = bv(this, d, 0) || g;
                    e >= a ? Ku(this, b) : (a = e, b = Ju(this));
                    for (g = !0; g;)for (g = !1, d = h; d <= c; d++)g = bv(this, d, 0) || g;
                    e >= a ? Ku(this, b) : (a = e, b = Ju(this))
                }
                break;
            default:
            case wu:
                for (c = this.yb, h = 0, k = a + 1; (d = this.countCrossings()) < k;) {
                    k = d;
                    for (g = !0; g;)for (g = !1, d = c; d >= h; d--)g = bv(this, d, -1) || g;
                    e = this.countCrossings();
                    e >= a ? Ku(this, b) : (a = e, b = Ju(this));
                    for (g = !0; g;)for (g = !1, d = c; d >= h; d--)g = bv(this, d, 1) || g;
                    e = this.countCrossings();
                    e >= a ? Ku(this, b) : (a = e, b = Ju(this));
                    for (g = !0; g;)for (g = !1, d = h; d <= c; d++)g = bv(this, d, 1) || g;
                    e >= a ? Ku(this, b) : (a = e, b = Ju(this));
                    for (g = !0; g;)for (g = !1, d = h; d <= c; d++)g = bv(this, d, -1) || g;
                    e >= a ? Ku(this, b) : (a = e, b = Ju(this));
                    for (g = !0; g;)for (g = !1, d = c; d >= h; d--)g = bv(this, d, 0) || g;
                    e >= a ? Ku(this, b) : (a = e, b = Ju(this));
                    for (g = !0; g;)for (g = !1, d = h; d <= c; d++)g = bv(this, d, 0) || g;
                    e >= a ? Ku(this, b) : (a = e, b = Ju(this))
                }
        }
        Ku(this, b)
    };
    function av(a, b, c) {
        v && (D.p(b, su, "medianBarycenterCrossingReduction:unfixedLayer"), D.p(c, su, "medianBarycenterCrossingReduction:direction"));
        var d = 0, e = Gu(a, b), g = a.ue[b], h = Ou(a, b, c);
        c = Nu(a, b, c);
        for (d = 0; d < g; d++)-1 === c[d] && (c[d] = e[d].column), -1 === h[d] && (h[d] = e[d].column);
        for (var k = !0, l; k;)for (k = !1, d = 0; d < g - 1; d++)if (h[d + 1] < h[d] || h[d + 1] === h[d] && c[d + 1] < c[d])k = !0, l = h[d], h[d] = h[d + 1], h[d + 1] = l, l = c[d], c[d] = c[d + 1], c[d + 1] = l, l = e[d], e[d] = e[d + 1], e[d + 1] = l;
        for (d = h = 0; d < g; d++)l = e[d], l.index = d, h += a.nodeMinColumnSpace(l,
            !0), l.column = h, h += 1, h += a.nodeMinColumnSpace(l, !1);
        Hu(a, b, e)
    }

    function bv(a, b, c) {
        var d = Gu(a, b), e = a.ue[b];
        c = Lu(a, b, c);
        var g = 0, h;
        h = [];
        for (g = 0; g < e; g++)h[g] = -1;
        var k;
        k = [];
        for (g = 0; g < e; g++)k[g] = -1;
        for (var l = !1, m = !0; m;)for (m = !1, g = 0; g < e - 1; g++) {
            var n = c[d[g].index * e + d[g + 1].index], p = c[d[g + 1].index * e + d[g].index], q = 0, r = 0, s = d[g].column, u = d[g + 1].column, t = a.nodeMinColumnSpace(d[g], !0), z = a.nodeMinColumnSpace(d[g], !1), w = a.nodeMinColumnSpace(d[g + 1], !0), B = a.nodeMinColumnSpace(d[g + 1], !1), t = s - t + w, z = u - z + B, w = w = 0, A = d[g].uc.j;
            for (A.reset(); A.next();)if (w = A.value, B = w.fromVertex, w.valid &&
                B.layer === b) {
                for (w = 0; d[w] !== B;)w++;
                w < g && (q += 2 * (g - w), r += 2 * (g + 1 - w));
                w === g + 1 && (q += 1);
                w > g + 1 && (q += 4 * (w - g), r += 4 * (w - (g + 1)))
            }
            A = d[g].sc.j;
            for (A.reset(); A.next();)if (w = A.value, B = w.toVertex, w.valid && B.layer === b) {
                for (w = 0; d[w] !== B;)w++;
                w === g + 1 && (r += 1)
            }
            A = d[g + 1].uc.j;
            for (A.reset(); A.next();)if (w = A.value, B = w.fromVertex, w.valid && B.layer === b) {
                for (w = 0; d[w] !== B;)w++;
                w < g && (q += 2 * (g + 1 - w), r += 2 * (g - w));
                w === g && (r += 1);
                w > g + 1 && (q += 4 * (w - (g + 1)), r += 4 * (w - g))
            }
            A = d[g + 1].sc.j;
            for (A.reset(); A.next();)if (w = A.value, B = w.toVertex, w.valid &&
                B.layer === b) {
                for (w = 0; d[w] !== B;)w++;
                w === g && (q += 1)
            }
            var w = B = 0, A = h[d[g].index], O = k[d[g].index], H = h[d[g + 1].index], S = k[d[g + 1].index];
            -1 !== A && (B += Math.abs(A - s), w += Math.abs(A - z));
            -1 !== O && (B += Math.abs(O - s), w += Math.abs(O - z));
            -1 !== H && (B += Math.abs(H - u), w += Math.abs(H - t));
            -1 !== S && (B += Math.abs(S - u), w += Math.abs(S - t));
            if (r < q - .5 || r === q && p < n - .5 || r === q && p === n && w < B - .5)m = l = !0, d[g].column = z, d[g + 1].column = t, n = d[g], d[g] = d[g + 1], d[g + 1] = n
        }
        for (g = 0; g < e; g++)d[g].index = g;
        Hu(a, b, d);
        return l
    }

    su.prototype.straightenAndPack = function () {
        var a = 0, b = !1, c = 0 !== (this.oj & ev), a = this.oj === xu;
        1E3 < this.network.edges.count && !a && (c = !1);
        if (c) {
            b = [];
            for (a = a = 0; a <= this.yb; a++)b[a] = 0;
            for (var d = 0, e = this.network.vertexes.j; e.next();) {
                var g = e.value, a = g.layer, d = g.column, g = this.nodeMinColumnSpace(g, !1);
                b[a] = Math.max(b[a], d + g)
            }
            for (e.reset(); e.next();)g = e.value, a = g.layer, d = g.column, g.column = (8 * (this.Pb - b[a]) >> 1) + 8 * d;
            this.Pb *= 8
        }
        if (0 !== (this.oj & fv))for (b = !0; b;) {
            b = !1;
            for (a = this.Zf + 1; a <= this.yb; a++)b = gv(this, a, 1) || b;
            for (a = this.Zf - 1; 0 <= a; a--)b = gv(this, a, -1) || b;
            b = gv(this, this.Zf, 0) || b
        }
        if (0 !== (this.oj & hv)) {
            for (a = this.Zf + 1; a <= this.yb; a++)iv(this, a, 1);
            for (a = this.Zf - 1; 0 <= a; a--)iv(this, a, -1);
            iv(this, this.Zf, 0)
        }
        c && (jv(this, -1), jv(this, 1));
        if (0 !== (this.oj & fv))for (b = !0; b;) {
            b = !1;
            b = gv(this, this.Zf, 0) || b;
            for (a = this.Zf + 1; a <= this.yb; a++)b = gv(this, a, 0) || b;
            for (a = this.Zf - 1; 0 <= a; a--)b = gv(this, a, 0) || b
        }
    };
    function gv(a, b, c) {
        v && (D.p(b, su, "bendStraighten:unfixedLayer"), D.p(c, su, "bendStraighten:direction"));
        for (var d = !1; kv(a, b, c);)d = !0;
        return d
    }

    function kv(a, b, c) {
        v && (D.p(b, su, "shiftbendStraighten:unfixedLayer"), D.p(c, su, "shiftbendStraighten:direction"));
        var d = 0, e = Gu(a, b), g = a.ue[b], h = Nu(a, b, -1);
        if (0 < c)for (d = 0; d < g; d++)h[d] = -1;
        var k = Nu(a, b, 1);
        if (0 > c)for (d = 0; d < g; d++)k[d] = -1;
        for (var l = !1, m = !0; m;)for (m = !1, d = 0; d < g; d++) {
            var n = e[d].column, p = a.nodeMinColumnSpace(e[d], !0), q = a.nodeMinColumnSpace(e[d], !1), r = 0, r = 0 > d - 1 || n - e[d - 1].column - 1 > p + a.nodeMinColumnSpace(e[d - 1], !1) ? n - 1 : n, p = 0, p = d + 1 >= g || e[d + 1].column - n - 1 > q + a.nodeMinColumnSpace(e[d + 1], !0) ? n + 1 : n, s = q =
                0, u = 0, t = 0, z = 0, w = 0;
            if (0 >= c)for (var B = e[d].uc.j; B.next();) {
                var w = B.value, A = w.fromVertex;
                w.valid && A.layer !== b && (t = Iu(w), z = w.portFromColOffset, w = w.portToColOffset, A = A.column, q += (Math.abs(n + w - (A + z)) + 1) * t, s += (Math.abs(r + w - (A + z)) + 1) * t, u += (Math.abs(p + w - (A + z)) + 1) * t)
            }
            if (0 <= c)for (B = e[d].sc.j; B.next();)w = B.value, A = w.toVertex, w.valid && A.layer !== b && (t = Iu(w), z = w.portFromColOffset, w = w.portToColOffset, A = A.column, q += (Math.abs(n + z - (A + w)) + 1) * t, s += (Math.abs(r + z - (A + w)) + 1) * t, u += (Math.abs(p + z - (A + w)) + 1) * t);
            w = z = t = 0;
            B = h[e[d].index];
            A = k[e[d].index];
            -1 !== B && (t += Math.abs(B - n), z += Math.abs(B - r), w += Math.abs(B - p));
            -1 !== A && (t += Math.abs(A - n), z += Math.abs(A - r), w += Math.abs(A - p));
            if (s < q || s === q && z < t)m = l = !0, e[d].column = r; else if (u < q || u === q && w < t)m = l = !0, e[d].column = p
        }
        Hu(a, b, e);
        a.normalize();
        return l
    }

    function iv(a, b, c) {
        v && (D.p(b, su, "medianStraighten:unfixedLayer"), D.p(c, su, "medianStraighten:direction"));
        var d = 0, e = Gu(a, b), g = a.ue[b], h = Ou(a, b, c);
        c = [];
        for (d = 0; d < g; d++)c[d] = h[d];
        for (h = !0; h;)for (h = !1, d = 0; d < g; d++) {
            var k = e[d].column, l = a.nodeMinColumnSpace(e[d], !0), m = a.nodeMinColumnSpace(e[d], !1), n = 0, p = 0, q = 0, q = p = 0;
            -1 === c[d] ? 0 === d && d === g - 1 ? n = k : 0 === d ? (p = e[d + 1].column, n = p - k === m + a.nodeMinColumnSpace(e[d + 1], !0) ? k - 1 : k) : d === g - 1 ? (q = e[d - 1].column, n = k - q === l + a.nodeMinColumnSpace(e[d - 1], !1) ? k + 1 : k) : (q = e[d - 1].column,
                q = q + a.nodeMinColumnSpace(e[d - 1], !1) + l + 1, p = e[d + 1].column, p = p - a.nodeMinColumnSpace(e[d + 1], !0) - m - 1, n = (q + p) / 2 | 0) : 0 === d && d === g - 1 ? n = c[d] : 0 === d ? (p = e[d + 1].column, p = p - a.nodeMinColumnSpace(e[d + 1], !0) - m - 1, n = Math.min(c[d], p)) : d === g - 1 ? (q = e[d - 1].column, q = q + a.nodeMinColumnSpace(e[d - 1], !1) + l + 1, n = Math.max(c[d], q)) : (q = e[d - 1].column, q = q + a.nodeMinColumnSpace(e[d - 1], !1) + l + 1, p = e[d + 1].column, p = p - a.nodeMinColumnSpace(e[d + 1], !0) - m - 1, q < c[d] && c[d] < p ? n = c[d] : q >= c[d] ? n = q : p <= c[d] && (n = p));
            n !== k && (h = !0, e[d].column = n)
        }
        Hu(a, b, e);
        a.normalize()
    }

    function lv(a, b) {
        v && (D.p(b, su, "packAux:column"), D.p(1, su, "packAux:direction"));
        for (var c = !0, d = a.network.vertexes.j; d.next();) {
            var e = d.value, g = a.nodeMinColumnSpace(e, !0), h = a.nodeMinColumnSpace(e, !1);
            if (e.column - g <= b && e.column + h >= b) {
                c = !1;
                break
            }
        }
        e = !1;
        if (c)for (d.reset(); d.next();)c = d.value, c.column > b && (c.column -= 1, e = !0);
        return e
    }

    function mv(a, b) {
        v && (D.p(b, su, "tightPackAux:column"), D.p(1, su, "tightPackAux:direction"));
        for (var c = b, c = b + 1, d = 0, e = [], g = [], d = 0; d <= a.yb; d++)e[d] = !1, g[d] = !1;
        for (var h = a.network.vertexes.j; h.next();) {
            var d = h.value, k = d.column - a.nodeMinColumnSpace(d, !0), l = d.column + a.nodeMinColumnSpace(d, !1);
            k <= b && l >= b && (e[d.layer] = !0);
            k <= c && l >= c && (g[d.layer] = !0)
        }
        k = !0;
        c = !1;
        for (d = 0; d <= a.yb; d++)k = k && !(e[d] && g[d]);
        if (k)for (h.reset(); h.next();)e = h.value, e.column > b && (e.column -= 1, c = !0);
        return c
    }

    function jv(a, b) {
        v && D.p(b, su, "componentPack:direction");
        for (var c = 0; c <= a.Pb; c++)for (; lv(a, c););
        a.normalize();
        for (c = 0; c < a.Pb; c++)for (; mv(a, c););
        a.normalize();
        var c = 0, d, e = 0, g = 0, h = 0;
        if (0 < b)for (c = 0; c <= a.Pb; c++)for (d = Ju(a), e = Mu(a), g = e + 1; e < g;)g = e, nv(a, c, 1), h = Mu(a), h > e ? Ku(a, d) : h < e && (e = h, d = Ju(a));
        if (0 > b)for (c = a.Pb; 0 <= c; c--)for (d = Ju(a), e = Mu(a), g = e + 1; e < g;)g = e, nv(a, c, -1), h = Mu(a), h > e ? Ku(a, d) : h < e && (e = h, d = Ju(a));
        a.normalize()
    }

    function nv(a, b, c) {
        a.Mg = 0;
        for (var d = a.network.vertexes.j; d.next();)d.value.component = -1;
        if (0 < c)for (d.reset(); d.next();) {
            var e = d.value;
            e.column - a.nodeMinColumnSpace(e, !0) <= b && (e.component = a.Mg)
        }
        if (0 > c)for (d.reset(); d.next();)e = d.value, e.column + a.nodeMinColumnSpace(e, !1) >= b && (e.component = a.Mg);
        a.Mg++;
        for (d.reset(); d.next();)b = d.value, -1 === b.component && (Qu(a, b, a.Mg, -1, !0, !0), a.Mg++);
        var g = 0;
        b = [];
        for (g = 0; g < a.Mg * a.Mg; g++)b[g] = !1;
        e = [];
        for (g = 0; g < (a.yb + 1) * (a.Pb + 1); g++)e[g] = -1;
        for (d.reset(); d.next();)for (var g =
            d.value, h = g.layer, k = Math.max(0, g.column - a.nodeMinColumnSpace(g, !0)), l = Math.min(a.Pb, g.column + a.nodeMinColumnSpace(g, !1)); k <= l; k++)e[h * (a.Pb + 1) + k] = g.component;
        for (g = 0; g <= a.yb; g++) {
            if (0 < c)for (k = 0; k < a.Pb; k++)-1 !== e[g * (a.Pb + 1) + k] && -1 !== e[g * (a.Pb + 1) + k + 1] && e[g * (a.Pb + 1) + k] !== e[g * (a.Pb + 1) + k + 1] && (b[e[g * (a.Pb + 1) + k] * a.Mg + e[g * (a.Pb + 1) + k + 1]] = !0);
            if (0 > c)for (k = a.Pb; 0 < k; k--)-1 !== e[g * (a.Pb + 1) + k] && -1 !== e[g * (a.Pb + 1) + k - 1] && e[g * (a.Pb + 1) + k] !== e[g * (a.Pb + 1) + k - 1] && (b[e[g * (a.Pb + 1) + k] * a.Mg + e[g * (a.Pb + 1) + k - 1]] = !0)
        }
        e = [];
        for (g =
                 0; g < a.Mg; g++)e[g] = !0;
        h = new K("number");
        h.add(0);
        for (l = 0; 0 !== h.count;)if (l = h.o[h.count - 1], h.kd(h.count - 1), e[l])for (e[l] = !1, g = 0; g < a.Mg; g++)b[l * a.Mg + g] && h.$d(0, g);
        if (0 < c)for (d.reset(); d.next();)a = d.value, e[a.component] && (a.column -= 1);
        if (0 > c)for (d.reset(); d.next();)c = d.value, e[c.component] && (c.column += 1)
    }

    su.prototype.commitLayout = function () {
        if (this.Qq)for (var a = Eu(this, !0), b = Eu(this, !1), c = this.network.edges.j; c.next();) {
            var d = c.value.link;
            null !== d && (d.Gb = a, d.Hb = b)
        }
        this.commitNodes();
        this.yA();
        this.Du && this.commitLinks()
    };
    function Eu(a, b) {
        return 270 === a.fa ? b ? ad : jd : 90 === a.fa ? b ? jd : ad : 180 === a.fa ? b ? hd : id : b ? id : hd
    }

    su.prototype.commitNodes = function () {
        this.Kg = [];
        this.Yf = [];
        this.Xf = [];
        this.Vb = [];
        for (var a = 0; a <= this.yb; a++)this.Kg[a] = 0, this.Yf[a] = 0, this.Xf[a] = 0, this.Vb[a] = 0;
        for (a = this.network.vertexes.j; a.next();) {
            var b = a.value, c = b.layer;
            this.Kg[c] = Math.max(this.Kg[c], this.nodeMinLayerSpace(b, !0));
            this.Yf[c] = Math.max(this.Yf[c], this.nodeMinLayerSpace(b, !1))
        }
        for (var b = 0, d = this.$m, c = 0; c <= this.yb; c++) {
            var e = d;
            0 >= this.Kg[c] + this.Yf[c] && (e = 0);
            0 < c && (b += e / 2);
            90 === this.fa || 0 === this.fa ? (b += this.Yf[c], this.Xf[c] = b, b += this.Kg[c]) :
                (b += this.Kg[c], this.Xf[c] = b, b += this.Yf[c]);
            c < this.yb && (b += e / 2);
            this.Vb[c] = b
        }
        d = b;
        b = this.Ce;
        for (c = 0; c <= this.yb; c++)270 === this.fa ? this.Xf[c] = b.y + this.Xf[c] : 90 === this.fa ? (this.Xf[c] = b.y + d - this.Xf[c], this.Vb[c] = d - this.Vb[c]) : 180 === this.fa ? this.Xf[c] = b.x + this.Xf[c] : (this.Xf[c] = b.x + d - this.Xf[c], this.Vb[c] = d - this.Vb[c]);
        a.reset();
        for (d = e = Infinity; a.next();) {
            var c = a.value, g = c.layer, h = c.column | 0, k = 0, l = 0;
            270 === this.fa || 90 === this.fa ? (k = b.x + this.he * h, l = this.Xf[g]) : (k = this.Xf[g], l = b.y + this.he * h);
            c.oa = k;
            c.va = l;
            e = Math.min(c.x, e);
            d = Math.min(c.y, d)
        }
        e = b.x - e;
        b = b.y - d;
        this.uC = new N(e, b);
        for (a.reset(); a.next();)c = a.value, c.x += e, c.y += b, c.commit()
    };
    su.prototype.yA = function () {
        for (var a = 0, b = this.$m, c = 0; c <= this.yb; c++)a += this.Kg[c], a += this.Yf[c];
        for (var a = a + this.yb * b, b = [], c = this.he * this.Pb, d = this.GJ; 0 <= d; d--)270 === this.fa ? 0 === d ? b.push(new C(0, 0, c, Math.abs(this.Vb[0]))) : b.push(new C(0, this.Vb[d - 1], c, Math.abs(this.Vb[d - 1] - this.Vb[d]))) : 90 === this.fa ? 0 === d ? b.push(new C(0, this.Vb[0], c, Math.abs(this.Vb[0] - a))) : b.push(new C(0, this.Vb[d], c, Math.abs(this.Vb[d - 1] - this.Vb[d]))) : 180 === this.fa ? 0 === d ? b.push(new C(0, 0, Math.abs(this.Vb[0]), c)) : b.push(new C(this.Vb[d -
        1], 0, Math.abs(this.Vb[d - 1] - this.Vb[d]), c)) : 0 === d ? b.push(new C(this.Vb[0], 0, Math.abs(this.Vb[0] - a), c)) : b.push(new C(this.Vb[d], 0, Math.abs(this.Vb[d - 1] - this.Vb[d]), c));
        this.commitLayers(b, this.uC)
    };
    su.prototype.commitLayers = function () {
    };
    su.prototype.commitLinks = function () {
        for (var a = this.network.edges.j, b; a.next();)b = a.value.link, null !== b && (b.zm(), b.aq(), b.Bj());
        for (a.reset(); a.next();)b = a.value.link, null !== b && b.Ao();
        for (a.reset(); a.next();) {
            var c = a.value;
            b = c.link;
            if (null !== b) {
                b.zm();
                var d = b, e = d.Y, g = d.ba, h = d.Mc, k = d.ld, l = c.fromVertex, m = c.toVertex;
                if (c.valid) {
                    if (b.jf === Tj && 4 === b.ta) {
                        if (c.rev)var n = e, e = g, g = n, p = h, h = k, k = p;
                        if (l.column === m.column) {
                            var q = b.getLinkPoint(e, h, b.computeSpot(!0), !0, !1, g, k), r = b.getLinkPoint(g, k, b.computeSpot(!1),
                                !1, !1, e, h);
                            q.F() || q.set(e.$.em);
                            r.F() || r.set(g.$.em);
                            b.aq();
                            b.yj(q.x, q.y);
                            b.yj((2 * q.x + r.x) / 3, (2 * q.y + r.y) / 3);
                            b.yj((q.x + 2 * r.x) / 3, (q.y + 2 * r.y) / 3);
                            b.yj(r.x, r.y)
                        } else {
                            var s = !1, u = !1;
                            null !== h && b.computeSpot(!0) === cc && (s = !0);
                            null !== k && b.computeSpot(!1) === cc && (u = !0);
                            if (s || u) {
                                var t = b.m(0).x, z = b.m(0).y, w = b.m(1).x, B = b.m(1).y, A = b.m(2).x, O = b.m(2).y, H = b.m(3).x, S = b.m(3).y;
                                if (s) {
                                    90 === this.fa || 270 === this.fa ? (w = t, B = (z + S) / 2) : (w = (t + H) / 2, B = z);
                                    b.ia(1, w, B);
                                    var Y = b.getLinkPoint(e, h, b.computeSpot(!0), !0, !1, g, k);
                                    Y.F() || Y.set(e.$.em);
                                    b.ia(0, Y.x, Y.y)
                                }
                                u && (90 === this.fa || 270 === this.fa ? (A = H, O = (z + S) / 2) : (A = (t + H) / 2, O = S), b.ia(2, A, O), Y = b.getLinkPoint(g, k, b.computeSpot(!1), !1, !1, e, h), Y.F() || Y.set(g.$.em), b.ia(3, Y.x, Y.y))
                            }
                        }
                    }
                    b.Bj()
                } else if (l.layer === m.layer)b.Bj(); else {
                    var R = !1, da = !1, ia = 0, V = b.ku + 1;
                    if (b.ic)da = !0, ia = b.ta, 4 < ia && b.points.removeRange(2, ia - 3); else if (b.jf === Tj)R = !0, ia = b.ta, 4 < ia && b.points.removeRange(2, ia - 3), V = 2; else {
                        var ia = b.ta, Ua = b.computeSpot(!0) === cc, kb = b.computeSpot(!1) === cc;
                        2 < ia && Ua && kb ? b.points.removeRange(1, ia - 2) : 3 < ia && Ua && !kb ? b.points.removeRange(1, ia - 3) : 3 < ia && !Ua && kb ? b.points.removeRange(2, ia - 2) : 4 < ia && !Ua && !kb && b.points.removeRange(2, ia - 3)
                    }
                    var ua, Oa;
                    if (c.rev) {
                        for (var Fa = 0; null !== m && l !== m;) {
                            Oa = ua = null;
                            for (var Zb = m.uc.j; Zb.next();) {
                                var Ub = Zb.value;
                                if (Ub.link === c.link && (ua = Ub.fromVertex, Oa = Ub.toVertex, null === ua.Dd))break
                            }
                            if (ua !== l)if (Xa = b.m(V - 1).x, rb = b.m(V - 1).y, sa = ua.oa, qa = ua.va, da)180 === this.fa || 0 === this.fa ? 2 === V ? (b.B(V++, Xa, rb), b.B(V++, Xa, qa)) : (te = null !== Oa ? Oa.va : rb, te !== qa && (lb = this.Vb[ua.layer - 1], b.B(V++, lb, rb),
                                b.B(V++, lb, qa))) : 2 === V ? (b.B(V++, Xa, rb), b.B(V++, sa, rb)) : (Ld = null !== Oa ? Oa.oa : Xa, Ld !== sa && (lb = this.Vb[ua.layer - 1], b.B(V++, Xa, lb), b.B(V++, sa, lb))); else if (2 === V)if (mb = Math.max(10, this.Kg[m.layer]), ib = Math.max(10, this.Yf[m.layer]), R)180 === this.fa ? sa <= m.R.x ? (Fa = m.R.x, b.B(V++, Fa - mb, qa), b.B(V++, Fa, qa), b.B(V++, Fa + ib, qa)) : (b.B(V++, sa - mb, qa), b.B(V++, sa, qa), b.B(V++, sa + ib, qa)) : 90 === this.fa ? qa >= m.R.bottom ? (Fa = m.R.y + m.R.height, b.B(V++, sa, Fa + ib), b.B(V++, sa, Fa), b.B(V++, sa, Fa - mb)) : (b.B(V++, sa, qa + ib), b.B(V++, sa, qa),
                                b.B(V++, sa, qa - mb)) : 270 === this.fa ? qa <= m.R.y ? (Fa = m.R.y, b.B(V++, sa, Fa - mb), b.B(V++, sa, Fa), b.B(V++, sa, Fa + ib)) : (b.B(V++, sa, qa - mb), b.B(V++, sa, qa), b.B(V++, sa, qa + ib)) : 0 === this.fa && (sa >= m.R.right ? (Fa = m.R.x + m.R.width, b.B(V++, Fa + ib, qa), b.B(V++, Fa, qa), b.B(V++, Fa - mb, qa)) : (b.B(V++, sa + ib, qa), b.B(V++, sa, qa), b.B(V++, sa - mb, qa))); else {
                                b.B(V++, Xa, rb);
                                var ce = 0;
                                if (180 === this.fa || 0 === this.fa) {
                                    if (180 === this.fa ? sa >= m.R.right : sa <= m.R.x)ce = (0 === this.fa ? -mb : ib) / 2;
                                    b.B(V++, Xa + ce, qa)
                                } else {
                                    if (270 === this.fa ? qa >= m.R.bottom : qa <= m.R.y)ce =
                                        (90 === this.fa ? -mb : ib) / 2;
                                    b.B(V++, sa, rb + ce)
                                }
                                b.B(V++, sa, qa)
                            } else mb = Math.max(10, this.Kg[ua.layer]), ib = Math.max(10, this.Yf[ua.layer]), 180 === this.fa ? (R && b.B(V++, sa - mb, qa), b.B(V++, sa, qa), R && b.B(V++, sa + ib, qa)) : 90 === this.fa ? (R && b.B(V++, sa, qa + ib), b.B(V++, sa, qa), R && b.B(V++, sa, qa - mb)) : 270 === this.fa ? (R && b.B(V++, sa, qa - mb), b.B(V++, sa, qa), R && b.B(V++, sa, qa + ib)) : (R && b.B(V++, sa + ib, qa), b.B(V++, sa, qa), R && b.B(V++, sa - mb, qa));
                            m = ua
                        }
                        if (null === k || b.computeSpot(!1) !== cc || da)if (Xa = b.m(V - 1).x, rb = b.m(V - 1).y, sa = b.m(V).x, qa = b.m(V).y,
                                da) {
                            var vd = this.Yf[l.layer], yc = 0;
                            180 === this.fa || 0 === this.fa ? (yc = rb, yc >= l.R.y && yc <= l.R.bottom && (180 === this.fa ? sa >= l.R.x : sa <= l.R.right) && (Fa = l.oa + (180 === this.fa ? -vd : vd), yc = yc < l.R.y + l.R.height / 2 ? l.R.y - this.he / 2 : l.R.bottom + this.he / 2, b.B(V++, Fa, rb), b.B(V++, Fa, yc)), b.B(V++, sa, yc)) : (yc = Xa, yc >= l.R.x && yc <= l.R.right && (270 === this.fa ? qa >= l.R.y : qa <= l.R.bottom) && (Fa = l.va + (270 === this.fa ? -vd : vd), yc = yc < l.R.x + l.R.width / 2 ? l.R.x - this.he / 2 : l.R.right + this.he / 2, b.B(V++, Xa, Fa), b.B(V++, yc, Fa)), b.B(V++, yc, qa));
                            b.B(V++, sa,
                                qa)
                        } else if (R)mb = Math.max(10, this.Kg[l.layer]), ib = Math.max(10, this.Yf[l.layer]), 180 === this.fa && sa >= l.R.x ? (Fa = l.R.x + l.R.width, b.ia(V - 2, Fa, rb), b.ia(V - 1, Fa + ib, rb)) : 90 === this.fa && qa <= l.R.bottom ? (Fa = l.R.y, b.ia(V - 2, Xa, Fa), b.ia(V - 1, Xa, Fa - mb)) : 270 === this.fa && qa >= l.R.y ? (Fa = l.R.y + l.R.height, b.ia(V - 2, Xa, Fa), b.ia(V - 1, Xa, Fa + ib)) : 0 === this.fa && sa <= l.R.right && (Fa = l.R.x, b.ia(V - 2, Fa, rb), b.ia(V - 1, Fa - mb, rb)); else {
                            mb = Math.max(10, this.Kg[l.layer]);
                            ib = Math.max(10, this.Yf[l.layer]);
                            ce = 0;
                            if (180 === this.fa || 0 === this.fa) {
                                if (180 ===
                                    this.fa ? sa <= l.R.x : sa >= l.R.right)ce = (0 === this.fa ? ib : -mb) / 2;
                                b.B(V++, sa + ce, rb)
                            } else {
                                if (270 === this.fa ? qa <= l.R.y : qa >= l.R.bottom)ce = (90 === this.fa ? ib : -mb) / 2;
                                b.B(V++, Xa, qa + ce)
                            }
                            b.B(V++, sa, qa)
                        }
                    } else {
                        for (; null !== l && l !== m;) {
                            Oa = ua = null;
                            for (var Eg = l.sc.j; Eg.next();) {
                                var Hf = Eg.value;
                                if (Hf.link === c.link && (ua = Hf.toVertex, Oa = Hf.fromVertex, null !== Oa.Dd && (Oa = null), null === ua.Dd))break
                            }
                            var Xa = 0, rb = 0, sa = 0, qa = 0, lb = 0, mb = 0, ib = 0;
                            if (ua !== m)if (Xa = b.m(V - 1).x, rb = b.m(V - 1).y, sa = ua.oa, qa = ua.va, da)if (180 === this.fa || 0 === this.fa) {
                                var te =
                                    null !== Oa ? Oa.va : rb;
                                te !== qa && (lb = this.Vb[ua.layer], 2 === V && (lb = 0 === this.fa ? Math.max(lb, Xa) : Math.min(lb, Xa)), b.B(V++, lb, rb), b.B(V++, lb, qa))
                            } else {
                                var Ld = null !== Oa ? Oa.oa : Xa;
                                Ld !== sa && (lb = this.Vb[ua.layer], 2 === V && (lb = 90 === this.fa ? Math.max(lb, rb) : Math.min(lb, rb)), b.B(V++, Xa, lb), b.B(V++, sa, lb))
                            } else mb = Math.max(10, this.Kg[ua.layer]), ib = Math.max(10, this.Yf[ua.layer]), 180 === this.fa ? (b.B(V++, sa + ib, qa), R && b.B(V++, sa, qa), b.B(V++, sa - mb, qa)) : 90 === this.fa ? (b.B(V++, sa, qa - mb), R && b.B(V++, sa, qa), b.B(V++, sa, qa + ib)) : 270 ===
                            this.fa ? (b.B(V++, sa, qa + ib), R && b.B(V++, sa, qa), b.B(V++, sa, qa - mb)) : (b.B(V++, sa - mb, qa), R && b.B(V++, sa, qa), b.B(V++, sa + ib, qa));
                            l = ua
                        }
                        da && (Xa = b.m(V - 1).x, rb = b.m(V - 1).y, sa = b.m(V).x, qa = b.m(V).y, 180 === this.fa || 0 === this.fa ? rb !== qa && (lb = 0 === this.fa ? Math.min(Math.max((sa + Xa) / 2, this.Vb[m.layer]), sa) : Math.max(Math.min((sa + Xa) / 2, this.Vb[m.layer]), sa), b.B(V++, lb, rb), b.B(V++, lb, qa)) : Xa !== sa && (lb = 90 === this.fa ? Math.min(Math.max((qa + rb) / 2, this.Vb[m.layer]), qa) : Math.max(Math.min((qa + rb) / 2, this.Vb[m.layer]), qa), b.B(V++, Xa,
                            lb), b.B(V++, sa, lb)))
                    }
                    if (null !== d && R) {
                        if (null !== h) {
                            if (b.computeSpot(!0) === cc) {
                                var Ab = b.m(0), Le = b.m(2);
                                Ab.O(Le) || b.ia(1, (Ab.x + Le.x) / 2, (Ab.y + Le.y) / 2)
                            }
                            Y = b.getLinkPoint(e, h, cc, !0, !1, g, k);
                            Y.F() || Y.set(e.$.em);
                            b.ia(0, Y.x, Y.y)
                        }
                        null !== k && (b.computeSpot(!1) === cc && (Ab = b.m(b.ta - 1), Le = b.m(b.ta - 3), Ab.O(Le) || b.ia(b.ta - 2, (Ab.x + Le.x) / 2, (Ab.y + Le.y) / 2)), Y = b.getLinkPoint(g, k, cc, !1, !1, e, h), Y.F() || Y.set(g.$.em), b.ia(b.ta - 1, Y.x, Y.y))
                    }
                    b.Bj();
                    c.commit()
                }
            }
        }
        for (var md = new K(J), gg = this.network.edges.j; gg.next();) {
            var If = gg.value.link;
            null !== If && If.ic && !md.contains(If) && md.add(If)
        }
        if (0 < md.count)if (90 === this.fa || 270 === this.fa) {
            for (var Fg = 0, nb = new K(ov), mc, bd, hg = md.j; hg.next();) {
                var Eb = hg.value;
                if (null !== Eb && Eb.ic)for (var Vb = 2; Vb < Eb.ta - 3; Vb++)if (mc = Eb.m(Vb), bd = Eb.m(Vb + 1), pv(mc.y, bd.y) && !pv(mc.x, bd.x)) {
                    var ue = new ov;
                    ue.layer = Math.floor(mc.y / 2);
                    var Gg = Eb.m(0), Md = Eb.m(Eb.ta - 1);
                    ue.first = Gg.x * Gg.x + Gg.y;
                    ue.qe = Md.x * Md.x + Md.y;
                    ue.gf = Math.min(mc.x, bd.x);
                    ue.Ee = Math.max(mc.x, bd.x);
                    ue.index = Vb;
                    ue.link = Eb;
                    if (Vb + 2 < Eb.ta) {
                        var sb = Eb.m(Vb - 1), Rc = Eb.m(Vb +
                            2), Jf = 0;
                        sb.y < mc.y ? Jf = Rc.y < mc.y ? 3 : mc.x < bd.x ? 2 : 1 : sb.y > mc.y && (Jf = Rc.y > mc.y ? 0 : bd.x < mc.x ? 2 : 1);
                        ue.Ki = Jf
                    }
                    nb.add(ue)
                }
            }
            if (1 < nb.count) {
                nb.sort(this.RG);
                for (var Me = 0; Me < nb.count;) {
                    for (var di = nb.o[Me].layer, Va = Me + 1; Va < nb.count && nb.o[Va].layer === di;)Va++;
                    if (1 < Va - Me)for (var cb = Me; cb < Va;) {
                        for (var Dc = nb.o[cb].Ee, zc = Me + 1; zc < Va && nb.o[zc].gf < Dc;)Dc = Math.max(Dc, nb.o[zc].Ee), zc++;
                        var cd = zc - cb;
                        if (1 < cd) {
                            nb.Tq(this.Gy, cb, cb + cd);
                            for (var uh = 1, Za = nb.o[cb].qe, Vb = cb; Vb < zc; Vb++) {
                                var Fb = nb.o[Vb];
                                Fb.qe !== Za && (uh++, Za = Fb.qe)
                            }
                            nb.Tq(this.QG,
                                cb, cb + cd);
                            for (var Bb = 1, Za = nb.o[cb].first, Vb = cb; Vb < zc; Vb++)Fb = nb.o[Vb], Fb.first !== Za && (Bb++, Za = Fb.first);
                            var Ec = !0, Gb = Bb;
                            uh < Bb ? (Ec = !1, Gb = uh, Za = nb.o[cb].qe, nb.Tq(this.Gy, cb, cb + cd)) : Za = nb.o[cb].first;
                            for (var ub = 0, Vb = cb; Vb < zc; Vb++) {
                                Fb = nb.o[Vb];
                                (Ec ? Fb.first : Fb.qe) !== Za && (ub++, Za = Ec ? Fb.first : Fb.qe);
                                Eb = Fb.link;
                                mc = Eb.m(Fb.index);
                                bd = Eb.m(Fb.index + 1);
                                var Hb = this.iG * (ub - (Gb - 1) / 2);
                                if (!Eb.Kj || qv(mc.x, mc.y + Hb, bd.x, bd.y + Hb))Fg++, Eb.zm(), Eb.ia(Fb.index, mc.x, mc.y + Hb), Eb.ia(Fb.index + 1, bd.x, bd.y + Hb), Eb.Bj()
                            }
                        }
                        cb = zc
                    }
                    Me =
                        Va
                }
            }
        } else {
            for (var de = 0, Lb = new K(ov), Ob, Sc, ei = md.j; ei.next();) {
                var Pb = ei.value;
                if (null !== Pb && Pb.ic)for (var Wb = 2; Wb < Pb.ta - 3; Wb++)if (Ob = Pb.m(Wb), Sc = Pb.m(Wb + 1), pv(Ob.x, Sc.x) && !pv(Ob.y, Sc.y)) {
                    var Fc = new ov;
                    Fc.layer = Math.floor(Ob.x / 2);
                    var dd = Pb.m(0), wd = Pb.m(Pb.ta - 1);
                    Fc.first = dd.x + dd.y * dd.y;
                    Fc.qe = wd.x + wd.y * wd.y;
                    Fc.gf = Math.min(Ob.y, Sc.y);
                    Fc.Ee = Math.max(Ob.y, Sc.y);
                    Fc.index = Wb;
                    Fc.link = Pb;
                    if (Wb + 2 < Pb.ta) {
                        var Hg = Pb.m(Wb - 1), fi = Pb.m(Wb + 2), vb = 0;
                        Hg.x < Ob.x ? vb = fi.x < Ob.x ? 3 : Ob.y < Sc.y ? 2 : 1 : Hg.x > Ob.x && (vb = fi.x > Ob.x ? 0 : Sc.y <
                        Ob.y ? 2 : 1);
                        Fc.Ki = vb
                    }
                    Lb.add(Fc)
                }
            }
            if (1 < Lb.count) {
                Lb.sort(this.RG);
                for (var ed = 0; ed < Lb.count;) {
                    for (var gi = Lb.o[ed].layer, Ne = ed + 1; Ne < Lb.count && Lb.o[Ne].layer === gi;)Ne++;
                    if (1 < Ne - ed)for (var nc = ed; nc < Ne;) {
                        for (var ve = Lb.o[nc].Ee, ec = ed + 1; ec < Ne && Lb.o[ec].gf < ve;)ve = Math.max(ve, Lb.o[ec].Ee), ec++;
                        var Gc = ec - nc;
                        if (1 < Gc) {
                            Lb.Tq(this.Gy, nc, nc + Gc);
                            for (var xd = 1, oc = Lb.o[nc].qe, Wb = nc; Wb < ec; Wb++) {
                                var Wa = Lb.o[Wb];
                                Wa.qe !== oc && (xd++, oc = Wa.qe)
                            }
                            Lb.Tq(this.QG, nc, nc + Gc);
                            for (var pc = 1, oc = Lb.o[nc].first, Wb = nc; Wb < ec; Wb++)Wa = Lb.o[Wb],
                            Wa.first !== oc && (pc++, oc = Wa.first);
                            var hi = !0, bf = pc;
                            xd < pc ? (hi = !1, bf = xd, oc = Lb.o[nc].qe, Lb.Tq(this.Gy, nc, nc + Gc)) : oc = Lb.o[nc].first;
                            for (var Nd = 0, Wb = nc; Wb < ec; Wb++) {
                                Wa = Lb.o[Wb];
                                (hi ? Wa.first : Wa.qe) !== oc && (Nd++, oc = hi ? Wa.first : Wa.qe);
                                Pb = Wa.link;
                                Ob = Pb.m(Wa.index);
                                Sc = Pb.m(Wa.index + 1);
                                var ee = this.iG * (Nd - (bf - 1) / 2);
                                if (!Pb.Kj || qv(Ob.x + ee, Ob.y, Sc.x + ee, Sc.y))de++, Pb.zm(), Pb.ia(Wa.index, Ob.x + ee, Ob.y), Pb.ia(Wa.index + 1, Sc.x + ee, Sc.y), Pb.Bj()
                            }
                        }
                        nc = ec
                    }
                    ed = Ne
                }
            }
        }
    };
    su.prototype.RG = function (a, b) {
        return a instanceof ov && b instanceof ov && a !== b ? a.layer < b.layer ? -1 : a.layer > b.layer ? 1 : a.gf < b.gf ? -1 : a.gf > b.gf ? 1 : a.Ee < b.Ee ? -1 : a.Ee > b.Ee ? 1 : 0 : 0
    };
    su.prototype.QG = function (a, b) {
        return a instanceof ov && b instanceof ov && a !== b ? a.first < b.first ? -1 : a.first > b.first || a.Ki < b.Ki ? 1 : a.Ki > b.Ki || a.gf < b.gf ? -1 : a.gf > b.gf ? 1 : a.Ee < b.Ee ? -1 : a.Ee > b.Ee ? 1 : 0 : 0
    };
    su.prototype.Gy = function (a, b) {
        return a instanceof ov && b instanceof ov && a !== b ? a.qe < b.qe ? -1 : a.qe > b.qe || a.Ki < b.Ki ? 1 : a.Ki > b.Ki || a.gf < b.gf ? -1 : a.gf > b.gf ? 1 : a.Ee < b.Ee ? -1 : a.Ee > b.Ee ? 1 : 0 : 0
    };
    function pv(a, b) {
        v && (D.p(a, su, "isApprox:a"), D.p(b, su, "isApprox:b"));
        var c = a - b;
        return -1 < c && 1 > c
    }

    function qv(a, b, c, d) {
        v && (D.p(a, su, "isUnoccupied2:px"), D.p(b, su, "isUnoccupied2:py"), D.p(c, su, "isUnoccupied2:qx"), D.p(d, su, "isUnoccupied2:qy"));
        return !0
    }

    function Gu(a, b) {
        var c, d = a.ue[b];
        if (d >= a.zh.length) {
            c = [];
            for (var e = 0; e < a.zh.length; e++)c[e] = a.zh[e];
            a.zh = c
        }
        void 0 === a.zh[d] || null === a.zh[d] ? c = [] : (c = a.zh[d], a.zh[d] = null);
        d = a.Ms[b];
        for (e = 0; e < d.length; e++) {
            var g = d[e];
            c[g.index] = g
        }
        return c
    }

    function Hu(a, b, c) {
        a.zh[a.ue[b]] = c
    }

    D.defineProperty(su, {layerSpacing: "layerSpacing"}, function () {
        return this.$m
    }, function (a) {
        this.$m !== a && (D.h(a, "number", su, "layerSpacing"), 0 <= a && (this.$m = a, this.N()))
    });
    D.defineProperty(su, {lL: "columnSpacing"}, function () {
        return this.he
    }, function (a) {
        this.he !== a && (D.h(a, "number", su, "columnSpacing"), 0 < a && (this.he = a, this.N()))
    });
    D.defineProperty(su, {direction: "direction"}, function () {
        return this.fa
    }, function (a) {
        this.fa !== a && (D.h(a, "number", su, "direction"), 0 === a || 90 === a || 180 === a || 270 === a ? (this.fa = a, this.N()) : D.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))
    });
    D.defineProperty(su, {angle: "angle"}, function () {
        return this.direction
    }, function (a) {
        this.direction = a
    });
    D.defineProperty(su, {rI: "cycleRemoveOption"}, function () {
        return this.So
    }, function (a) {
        this.So !== a && (D.Da(a, su, su, "cycleRemoveOption"), a === zu || a === tu) && (this.So = a, this.N())
    });
    D.defineProperty(su, {xJ: "layeringOption"}, function () {
        return this.vp
    }, function (a) {
        this.vp !== a && (D.Da(a, su, su, "layeringOption"), a === uu || a === Ru || a === Tu) && (this.vp = a, this.N())
    });
    D.defineProperty(su, {iJ: "initializeOption"}, function () {
        return this.jp
    }, function (a) {
        this.jp !== a && (D.Da(a, su, su, "initializeOption"), a === vu || a === Zu || a === Xu) && (this.jp = a, this.N())
    });
    D.defineProperty(su, {UL: "iterations"}, function () {
        return this.Ym
    }, function (a) {
        this.Ym !== a && (D.p(a, yu, "iterations"), 0 <= a && (this.Ym = a, this.N()))
    });
    D.defineProperty(su, {WH: "aggressiveOption"}, function () {
        return this.Go
    }, function (a) {
        this.Go !== a && (D.Da(a, su, su, "aggressiveOption"), a === cv || a === wu || a === dv) && (this.Go = a, this.N())
    });
    D.defineProperty(su, {oM: "packOption"}, function () {
        return this.oj
    }, function (a) {
        this.oj !== a && (D.h(a, "number", su, "packOption"), 0 <= a && 8 > a && (this.oj = a, this.N()))
    });
    D.defineProperty(su, {Qq: "setsPortSpots"}, function () {
        return this.si
    }, function (a) {
        this.si !== a && (D.h(a, "boolean", su, "setsPortSpots"), this.si = a, this.N())
    });
    D.defineProperty(su, {iG: "linkSpacing"}, function () {
        return this.us
    }, function (a) {
        this.us !== a && (D.h(a, "number", su, "linkSpacing"), 0 <= a && (this.us = a, this.N()))
    });
    D.w(su, {GJ: "maxLayer"}, function () {
        return this.yb
    });
    D.w(su, {ZL: "maxIndex"}, function () {
        return this.rw
    });
    D.w(su, {YL: "maxColumn"}, function () {
        return this.Pb
    });
    D.w(su, {dM: "minIndexLayer"}, function () {
        return this.Ds
    });
    D.w(su, {$L: "maxIndexLayer"}, function () {
        return this.Zf
    });
    var tu;
    su.CycleDepthFirst = tu = D.s(su, "CycleDepthFirst", 0);
    var zu;
    su.CycleGreedy = zu = D.s(su, "CycleGreedy", 1);
    var uu;
    su.LayerOptimalLinkLength = uu = D.s(su, "LayerOptimalLinkLength", 0);
    var Ru;
    su.LayerLongestPathSink = Ru = D.s(su, "LayerLongestPathSink", 1);
    var Tu;
    su.LayerLongestPathSource = Tu = D.s(su, "LayerLongestPathSource", 2);
    var vu;
    su.InitDepthFirstOut = vu = D.s(su, "InitDepthFirstOut", 0);
    var Zu;
    su.InitDepthFirstIn = Zu = D.s(su, "InitDepthFirstIn", 1);
    var Xu;
    su.InitNaive = Xu = D.s(su, "InitNaive", 2);
    var cv;
    su.AggressiveNone = cv = D.s(su, "AggressiveNone", 0);
    var wu;
    su.AggressiveLess = wu = D.s(su, "AggressiveLess", 1);
    var dv;
    su.AggressiveMore = dv = D.s(su, "AggressiveMore", 2);
    su.PackNone = 0;
    var ev;
    su.PackExpand = ev = 1;
    var fv;
    su.PackStraighten = fv = 2;
    var hv;
    su.PackMedian = hv = 4;
    var xu;
    su.PackAll = xu = 7;
    function ov() {
        this.index = this.Ee = this.gf = this.qe = this.first = this.layer = 0;
        this.link = null;
        this.Ki = 0
    }

    D.ne(ov, {layer: !0, first: !0, qe: !0, gf: !0, Ee: !0, index: !0, link: !0, Ki: !0});
    function yu() {
        ta.call(this)
    }

    D.Ra(yu, ta);
    D.ka("LayeredDigraphNetwork", yu);
    yu.prototype.createVertex = function () {
        return new rv
    };
    yu.prototype.createEdge = function () {
        return new sv
    };
    function rv() {
        va.call(this);
        this.index = this.column = this.layer = -1;
        this.component = NaN;
        this.near = null;
        this.valid = !1;
        this.finish = this.iq = NaN;
        this.En = 0;
        this.tB = this.uB = null
    }

    D.Ra(rv, va);
    D.ka("LayeredDigraphVertex", rv);
    function sv() {
        wa.call(this);
        this.forest = this.rev = this.valid = !1;
        this.portToPos = this.portFromPos = NaN;
        this.portToColOffset = this.portFromColOffset = 0
    }

    D.Ra(sv, wa);
    D.ka("LayeredDigraphEdge", sv);
    function Z() {
        0 < arguments.length && D.wd(Z);
        Zg.call(this);
        this.Ed = new L(Object);
        this.Ws = tv;
        this.Vf = uv;
        this.Mt = vv;
        this.ow = wv;
        this.sC = null;
        this.bi = !0;
        this.yd = xv;
        this.xg = (new Ba(10, 10)).freeze();
        this.Aa = new yv;
        this.Ba = new yv;
        this.iA = []
    }

    D.Ra(Z, Zg);
    D.ka("TreeLayout", Z);
    Z.prototype.cloneProtected = function (a) {
        Zg.prototype.cloneProtected.call(this, a);
        a.Ws = this.Ws;
        a.Mt = this.Mt;
        a.ow = this.ow;
        a.bi = this.bi;
        a.yd = this.yd;
        a.xg.assign(this.xg);
        a.Aa.copyInheritedPropertiesFrom(this.Aa);
        a.Ba.copyInheritedPropertiesFrom(this.Ba)
    };
    Z.prototype.qc = function (a) {
        a.Oe === Z ? 0 === a.name.indexOf("Alignment") ? this.alignment = a : 0 === a.name.indexOf("Arrangement") ? this.dg = a : 0 === a.name.indexOf("Compaction") ? this.compaction = a : 0 === a.name.indexOf("Path") ? this.path = a : 0 === a.name.indexOf("Sorting") ? this.sorting = a : 0 === a.name.indexOf("Style") ? this.EK = a : D.k("Unknown enum value: " + a) : Zg.prototype.qc.call(this, a)
    };
    Z.prototype.createNetwork = function () {
        return new zv
    };
    Z.prototype.makeNetwork = function (a) {
        function b(a) {
            if (a instanceof G)return !a.Jf && "Comment" !== a.Fd;
            if (a instanceof J) {
                var b = a.Y;
                if (null === b || b.Jf || "Comment" === b.Fd)return !1;
                a = a.ba;
                return null === a || a.Jf || "Comment" === a.Fd ? !1 : !0
            }
            return !1
        }

        var c = this.createNetwork();
        c.Yb = this;
        a instanceof E ? (c.Kk(a.qg, !0, b), c.Kk(a.links, !0, b)) : a instanceof I ? c.Kk(a.Oc, !1, b) : c.Kk(a.j, !1, b);
        return c
    };
    Z.prototype.doLayout = function (a) {
        null === a && D.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");
        null === this.network && (this.network = this.makeNetwork(a));
        this.dg !== Av && (this.Ce = this.initialOrigin(this.Ce));
        var b = this.g;
        null === b && a instanceof E && (b = a);
        this.Vf = this.path === tv && null !== b ? b.ce ? uv : Bv : this.path === tv ? uv : this.path;
        if (0 < this.network.vertexes.count) {
            this.network.Fx();
            for (a = this.network.vertexes.j; a.next();)b = a.value, b.initialized = !1, b.level =
                0, b.parent = null, b.children = [];
            if (0 < this.Ed.count) {
                a = new L(yv);
                for (b = this.Ed.j; b.next();) {
                    var c = b.value;
                    c instanceof G ? (c = this.network.Tn(c), null !== c && a.add(c)) : c instanceof yv && a.add(c)
                }
                this.Ed = a
            }
            0 === this.Ed.count && this.findRoots();
            for (a = this.Ed.copy().j; a.next();)b = a.value, b.initialized || (b.initialized = !0, Cv(this, b));
            b = this.network.vertexes;
            for (a = null; a = Dv(b), 0 < a.count;)b = Ev(this, a), null !== b && this.Ed.add(b), b.initialized = !0, Cv(this, b), b = a;
            for (a = this.Ed.j; a.next();)b = a.value, b instanceof yv && Fv(this,
                b);
            for (a = this.Ed.j; a.next();)b = a.value, b instanceof yv && Gv(this, b);
            for (a = this.Ed.j; a.next();)b = a.value, b instanceof yv && Hv(this, b);
            this.uA();
            if (this.hB === Iv) {
                c = [];
                for (a = this.network.vertexes.j; a.next();) {
                    var d = a.value, b = d.parent;
                    null === b && (b = d);
                    var b = 0 === b.angle || 180 === b.angle, e = c[d.level];
                    void 0 === e && (e = 0);
                    c[d.level] = Math.max(e, b ? d.width : d.height)
                }
                for (d = 0; d < c.length; d++)void 0 === c[d] && (c[d] = 0);
                this.sC = c;
                for (a = this.network.vertexes.j; a.next();)d = a.value, b = d.parent, null === b && (b = d), 0 === b.angle || 180 ===
                b.angle ? (180 === b.angle && (d.ou += c[d.level] - d.width), d.width = c[d.level]) : (270 === b.angle && (d.pu += c[d.level] - d.height), d.height = c[d.level])
            } else if (this.hB === Jv)for (a = this.network.vertexes.j; a.next();) {
                c = a.value;
                b = 0 === c.angle || 180 === c.angle;
                e = -1;
                for (d = 0; d < c.children.length; d++)var g = c.children[d], e = Math.max(e, b ? g.width : g.height);
                if (0 <= e)for (d = 0; d < c.children.length; d++)g = c.children[d], b ? (180 === c.angle && (g.ou += e - g.width), g.width = e) : (270 === c.angle && (g.pu += e - g.height), g.height = e)
            }
            for (a = this.Ed.j; a.next();)b =
                a.value, b instanceof yv && this.layoutTree(b);
            this.arrangeTrees();
            this.updateParts()
        }
        this.network = null;
        this.Ed = new L(Object);
        this.Mf = !0
    };
    function Dv(a) {
        var b = new L(yv);
        for (a = a.j; a.next();) {
            var c = a.value;
            c.initialized || b.add(c)
        }
        return b
    }

    Z.prototype.findRoots = function () {
        for (var a = this.network.vertexes, b = a.j; b.next();) {
            var c = b.value;
            switch (this.Vf) {
                case uv:
                    0 === c.uc.count && this.Ed.add(c);
                    break;
                case Bv:
                    0 === c.sc.count && this.Ed.add(c);
                    break;
                default:
                    D.k("Unhandled path value " + this.Vf.toString())
            }
        }
        0 === this.Ed.count && (a = Ev(this, a), null !== a && this.Ed.add(a))
    };
    function Ev(a, b) {
        for (var c = 999999, d = null, e = b.j; e.next();) {
            var g = e.value;
            switch (a.Vf) {
                case uv:
                    g.uc.count < c && (c = g.uc.count, d = g);
                    break;
                case Bv:
                    g.sc.count < c && (c = g.sc.count, d = g);
                    break;
                default:
                    D.k("Unhandled path value " + a.Vf.toString())
            }
        }
        return d
    }

    function Cv(a, b) {
        if (null !== b) {
            v && D.l(b, yv, Z, "walkTree:v");
            switch (a.Vf) {
                case uv:
                    if (0 < b.sc.count) {
                        for (var c = new K(yv), d = b.wI; d.next();) {
                            var e = d.value;
                            Kv(a, b, e) && c.add(e)
                        }
                        0 < c.count && (b.children = c.oc())
                    }
                    break;
                case Bv:
                    if (0 < b.uc.count) {
                        c = new K(yv);
                        for (d = b.tK; d.next();)e = d.value, Kv(a, b, e) && c.add(e);
                        0 < c.count && (b.children = c.oc())
                    }
                    break;
                default:
                    D.k("Unhandled path value" + a.Vf.toString())
            }
            c = b.children;
            d = c.length;
            for (e = 0; e < d; e++) {
                var g = c[e];
                g.initialized = !0;
                g.level = b.level + 1;
                g.parent = b;
                a.Ed.remove(g)
            }
            for (e =
                     0; e < d; e++)g = c[e], Cv(a, g)
        }
    }

    function Kv(a, b, c) {
        v && D.l(b, yv, Z, "walkOK:v");
        v && D.l(c, yv, Z, "walkOK:c");
        if (c.initialized) {
            var d;
            if (null === b)d = !1; else {
                v && D.l(c, yv, Z, "isAncestor:a");
                v && D.l(b, yv, Z, "isAncestor:b");
                for (d = b.parent; null !== d && d !== c;)d = d.parent;
                d = d === c
            }
            if (d || c.level > b.level)return !1;
            a.removeChild(c.parent, c)
        }
        return !0
    }

    Z.prototype.removeChild = function (a, b) {
        if (null !== a && null !== b) {
            v && D.l(a, yv, Z, "removeChild:p");
            v && D.l(b, yv, Z, "removeChild:c");
            for (var c = a.children, d = 0, e = 0; e < c.length; e++)c[e] === b && d++;
            if (0 < d) {
                for (var d = Array(c.length - d), g = 0, e = 0; e < c.length; e++)c[e] !== b && (d[g++] = c[e]);
                a.children = d
            }
        }
    };
    function Fv(a, b) {
        if (null !== b) {
            v && D.l(b, yv, Z, "initializeTree:v");
            a.initializeTreeVertexValues(b);
            b.alignment === Lv && a.sortTreeVertexChildren(b);
            for (var c = 0, d = b.In, e = 0, g = b.children, h = g.length, k = 0; k < h; k++) {
                var l = g[k];
                Fv(a, l);
                c += l.descendantCount + 1;
                d = Math.max(d, l.maxChildrenCount);
                e = Math.max(e, l.maxGenerationCount)
            }
            b.descendantCount = c;
            b.maxChildrenCount = d;
            b.maxGenerationCount = 0 < d ? e + 1 : 0
        }
    }

    function Mv(a, b) {
        v && D.l(b, yv, Z, "mom:v");
        switch (a.Mt) {
            default:
            case vv:
                return null !== b.parent ? b.parent : a.Aa;
            case Nv:
                return null === b.parent ? a.Aa : null === b.parent.parent ? a.Ba : b.parent;
            case Ov:
                return null !== b.parent ? null !== b.parent.parent ? b.parent.parent : a.Ba : a.Aa;
            case Pv:
                var c = !0;
                if (0 === b.In)c = !1; else for (var d = b.children, e = d.length, g = 0; g < e; g++)if (0 < d[g].In) {
                    c = !1;
                    break
                }
                return c && null !== b.parent ? a.Ba : null !== b.parent ? b.parent : a.Aa
        }
    }

    Z.prototype.initializeTreeVertexValues = function (a) {
        v && D.l(a, yv, Z, "initializeTreeVertexValues:v");
        var b = Mv(this, a);
        a.copyInheritedPropertiesFrom(b);
        if (null !== a.parent && a.parent.alignment === Lv) {
            for (var b = a.angle, c = a.parent.children, d = 0; d < c.length && a !== c[d];)d++;
            0 === d % 2 ? d !== c.length - 1 && (b = 90 === b ? 180 : 180 === b ? 270 : 270 === b ? 180 : 270) : b = 90 === b ? 0 : 180 === b ? 90 : 270 === b ? 0 : 90;
            a.angle = b
        }
        a.initialized = !0
    };
    function Gv(a, b) {
        if (null !== b) {
            v && D.l(b, yv, Z, "assignTree:v");
            a.assignTreeVertexValues(b);
            for (var c = b.children, d = c.length, e = 0; e < d; e++)Gv(a, c[e])
        }
    }

    Z.prototype.assignTreeVertexValues = function () {
    };
    function Hv(a, b) {
        if (null !== b) {
            v && D.l(b, yv, Z, "sortTree:v");
            b.alignment !== Lv && a.sortTreeVertexChildren(b);
            for (var c = b.children, d = c.length, e = 0; e < d; e++)Hv(a, c[e])
        }
    }

    Z.prototype.sortTreeVertexChildren = function (a) {
        v && D.l(a, yv, Z, "sortTreeVertexChildren:v");
        switch (a.sorting) {
            case Qv:
                break;
            case Rv:
                a.children.reverse();
                break;
            case Sv:
                a.children.sort(a.comparer);
                break;
            case Tv:
                a.children.sort(a.comparer);
                a.children.reverse();
                break;
            default:
                D.k("Unhandled sorting value " + a.sorting.toString())
        }
    };
    Z.prototype.uA = function () {
        if (this.comments)for (var a = this.network.vertexes.j; a.next();)this.addComments(a.value)
    };
    Z.prototype.addComments = function (a) {
        v && D.l(a, yv, Z, "addComments:v");
        var b = a.angle, c = a.parent, d = 0, e = Uv, e = !1;
        null !== c && (d = c.angle, e = c.alignment, e = Vv(e));
        var b = 90 === b || 270 === b, d = 90 === d || 270 === d, c = 0 === a.In, g = 0, h = 0, k = 0, l = a.commentSpacing;
        if (null !== a.Yc)for (var m = a.Yc.tF(); m.next();) {
            var n = m.value;
            "Comment" === n.Fd && n.canLayout() && (null === a.comments && (a.comments = []), a.comments.push(n), n.kf(), n = n.Fa, b && !c || !e && !d && c || e && d && c ? (g = Math.max(g, n.width), h += n.height + Math.abs(k)) : (g += n.width + Math.abs(k), h = Math.max(h,
                n.height)), k = l)
        }
        null !== a.comments && (b && !c || !e && !d && c || e && d && c ? (g += Math.abs(a.commentMargin), h = Math.max(0, h - a.height)) : (h += Math.abs(a.commentMargin), g = Math.max(0, g - a.width)), e = D.ug(0, 0, a.R.width + g, a.R.height + h), a.pb = e, D.Kb(e))
    };
    function Vv(a) {
        return a === Wv || a === Lv || a === Xv || a === Yv
    }

    function Zv(a) {
        return a === Wv || a === Lv
    }

    function $v(a) {
        v && D.l(a, yv, Z, "isLeftSideBus:v");
        var b = a.parent;
        if (null !== b) {
            var c = b.alignment;
            if (Vv(c)) {
                if (Zv(c)) {
                    b = b.children;
                    for (c = 0; c < b.length && a !== b[c];)c++;
                    return 0 === c % 2
                }
                if (c === Xv)return !0
            }
        }
        return !1
    }

    Z.prototype.layoutComments = function (a) {
        v && D.l(a, yv, Z, "layoutComments:v");
        if (null !== a.comments) {
            var b = a.Yc.Fa, c = a.parent, d = a.angle, e = 0, g = Uv, g = !1;
            null !== c && (e = c.angle, g = c.alignment, g = Vv(g));
            for (var c = 90 === d || 270 === d, d = 90 === e || 270 === e, h = 0 === a.In, k = $v(a), l = 0, m = a.comments, n = m.length, p = D.P(), q = 0; q < n; q++) {
                var r = m[q], s = r.Fa;
                if (c && !h || !g && !d && h || g && d && h) {
                    if (135 < e && !g || d && k)if (0 <= a.commentMargin)for (p.n(a.R.x - a.commentMargin - s.width, a.R.y + l), r.move(p), r = r.$g(); r.next();) {
                        var u = r.value;
                        u.Gb = hd;
                        u.Hb = id
                    } else for (p.n(a.R.x +
                        2 * a.W.x - a.commentMargin, a.R.y + l), r.move(p), r = r.$g(); r.next();)u = r.value, u.Gb = id, u.Hb = hd; else if (0 <= a.commentMargin)for (p.n(a.R.x + 2 * a.W.x + a.commentMargin, a.R.y + l), r.move(p), r = r.$g(); r.next();)u = r.value, u.Gb = id, u.Hb = hd; else for (p.n(a.R.x + a.commentMargin - s.width, a.R.y + l), r.move(p), r = r.$g(); r.next();)u = r.value, u.Gb = hd, u.Hb = id;
                    l = 0 <= a.commentSpacing ? l + (s.height + a.commentSpacing) : l + (a.commentSpacing - s.height)
                } else {
                    if (135 < e && !g || !d && k)if (0 <= a.commentMargin)for (p.n(a.R.x + l, a.R.y - a.commentMargin - s.height),
                                                                                   r.move(p), r = r.$g(); r.next();)u = r.value, u.Gb = ad, u.Hb = jd; else for (p.n(a.R.x + l, a.R.y + 2 * a.W.y - a.commentMargin), r.move(p), r = r.$g(); r.next();)u = r.value, u.Gb = jd, u.Hb = ad; else if (0 <= a.commentMargin)for (p.n(a.R.x + l, a.R.y + 2 * a.W.y + a.commentMargin), r.move(p), r = r.$g(); r.next();)u = r.value, u.Gb = jd, u.Hb = ad; else for (p.n(a.R.x + l, a.R.y + a.commentMargin - s.height), r.move(p), r = r.$g(); r.next();)u = r.value, u.Gb = ad, u.Hb = jd;
                    l = 0 <= a.commentSpacing ? l + (s.width + a.commentSpacing) : l + (a.commentSpacing - s.width)
                }
            }
            D.A(p);
            b = l - a.commentSpacing -
                (c ? b.height : b.width);
            if (this.Vf === uv)for (e = a.sc; e.next();)a = e.value.link, null === a || a.Kj || (a.pm = 0 < b ? b : NaN); else for (e = a.uc; e.next();)a = e.value.link, null === a || a.Kj || (a.Em = 0 < b ? b : NaN)
        }
    };
    Z.prototype.layoutTree = function (a) {
        if (null !== a) {
            v && D.l(a, yv, Z, "layoutTree:v");
            for (var b = a.children, c = b.length, d = 0; d < c; d++)this.layoutTree(b[d]);
            switch (a.compaction) {
                case aw:
                    bw(this, a);
                    break;
                case cw:
                    if (a.alignment === Lv)bw(this, a); else if (v && D.l(a, yv, Z, "layoutTreeBlock:v"), 0 === a.In) {
                        var d = a.parent, b = !1, c = 0, e = Uv;
                        null !== d && (c = d.angle, e = d.alignment, b = Vv(e));
                        d = $v(a);
                        a.sa.n(0, 0);
                        a.tb.n(a.width, a.height);
                        null === a.parent || null === a.comments || (180 !== c && 270 !== c || b) && !d ? a.Va.n(0, 0) : 180 === c && !b || (90 === c || 270 ===
                        c) && d ? a.Va.n(a.width - 2 * a.W.x, 0) : a.Va.n(0, a.height - 2 * a.W.y);
                        a.Fu = null;
                        a.Zu = null
                    } else {
                        for (var g = dw(a), b = 90 === g || 270 === g, h = 0, k = a.children, l = k.length, m = 0; m < l; m++)var n = k[m], h = Math.max(h, b ? n.tb.width : n.tb.height);
                        var p = a.alignment, d = p === ew, q = p === fw, r = Vv(p), s = Math.max(0, a.breadthLimit), c = gw(a), u = a.nodeSpacing, t = hw(a), z = a.rowSpacing, w = 0;
                        if (d || q || a.Kq || a.Lq && 1 === a.maxGenerationCount)w = Math.max(0, a.rowIndent);
                        var d = a.width, e = a.height, B = 0, A = 0, O = 0, H = null, S = null, Y = 0, R = 0, da = 0, ia = 0, V = 0, Ua = 0, kb = 0, ua = 0, n = 0;
                        r && !Zv(p) &&
                        135 < g && k.reverse();
                        if (Zv(p))if (1 < l)for (m = 0; m < l; m++)0 === m % 2 && m !== l - 1 ? ua = Math.max(ua, b ? k[m].tb.width : k[m].tb.height) : 0 !== m % 2 && (n = Math.max(n, b ? k[m].tb.width : k[m].tb.height)); else 1 === l && (ua = b ? k[0].tb.width : k[0].tb.height);
                        if (r) {
                            switch (p) {
                                case Wv:
                                    A = 135 > g ? iw(a, k, ua, B, A) : jw(a, k, ua, B, A);
                                    ua = A.x;
                                    B = A.width;
                                    A = A.height;
                                    break;
                                case Xv:
                                    for (m = 0; m < l; m++) {
                                        var n = k[m], Oa = n.tb, H = 0 === Ua ? 0 : z;
                                        b ? (n.sa.n(h - Oa.width, ia + H), B = Math.max(B, Oa.width), A = Math.max(A, ia + H + Oa.height), ia += H + Oa.height) : (n.sa.n(da + H, h - Oa.height), B = Math.max(B,
                                            da + H + Oa.width), A = Math.max(A, Oa.height), da += H + Oa.width);
                                        Ua++
                                    }
                                    break;
                                case Yv:
                                    for (m = 0; m < l; m++)n = k[m], Oa = n.tb, H = 0 === Ua ? 0 : z, b ? (n.sa.n(u / 2 + a.W.x, ia + H), B = Math.max(B, Oa.width), A = Math.max(A, ia + H + Oa.height), ia += H + Oa.height) : (n.sa.n(da + H, u / 2 + a.W.y), B = Math.max(B, da + H + Oa.width), A = Math.max(A, Oa.height), da += H + Oa.width), Ua++
                            }
                            H = Pw(this, 2);
                            S = Pw(this, 2);
                            b ? (H[0].n(0, 0), H[1].n(0, A), S[0].n(B, 0)) : (H[0].n(0, 0), H[1].n(B, 0), S[0].n(0, A));
                            S[1].n(B, A)
                        } else for (m = 0; m < l; m++) {
                            n = k[m];
                            Oa = n.tb;
                            if (b) {
                                0 < s && 0 < Ua && da + u + Oa.width > s && (da <
                                h && Qw(a, p, h - da, 0, kb, m - 1), V++, Ua = 0, kb = m, O = A, da = 0, ia = 135 < g ? -A - z : A + z);
                                Rw(this, n, 0, ia);
                                var Fa = 0;
                                if (0 === Ua) {
                                    if (H = n.Fu, S = n.Zu, Y = Oa.width, R = Oa.height, null === H || null === S || g !== dw(n))H = Pw(this, 2), S = Pw(this, 2), H[0].n(0, 0), H[1].n(0, R), S[0].n(Y, 0), S[1].n(Y, R)
                                } else {
                                    var Zb = D.mb(), R = Sw(this, a, n, H, S, Y, R, Zb), Fa = R.x, H = Zb[0], S = Zb[1], Y = R.width, R = R.height;
                                    D.za(Zb);
                                    da < Oa.width && 0 > Fa && (Tw(a, -Fa, 0, kb, m - 1), Uw(H, -Fa, 0), Uw(S, -Fa, 0), Fa = 0)
                                }
                                n.sa.n(Fa, ia);
                                B = Math.max(B, Y);
                                A = Math.max(A, O + (0 === V ? 0 : z) + Oa.height);
                                da = Y
                            } else {
                                0 < s && 0 < Ua &&
                                ia + u + Oa.height > s && (ia < h && Qw(a, p, 0, h - ia, kb, m - 1), V++, Ua = 0, kb = m, O = B, ia = 0, da = 135 < g ? -B - z : B + z);
                                Rw(this, n, da, 0);
                                Fa = 0;
                                if (0 === Ua) {
                                    if (H = n.Fu, S = n.Zu, Y = Oa.width, R = Oa.height, null === H || null === S || g !== dw(n))H = Pw(this, 2), S = Pw(this, 2), H[0].n(0, 0), H[1].n(Y, 0), S[0].n(0, R), S[1].n(Y, R)
                                } else Zb = D.mb(), R = Sw(this, a, n, H, S, Y, R, Zb), Fa = R.x, H = Zb[0], S = Zb[1], Y = R.width, R = R.height, D.za(Zb), ia < Oa.height && 0 > Fa && (Tw(a, 0, -Fa, kb, m - 1), Uw(H, 0, -Fa), Uw(S, 0, -Fa), Fa = 0);
                                n.sa.n(da, Fa);
                                A = Math.max(A, R);
                                B = Math.max(B, O + (0 === V ? 0 : z) + Oa.width);
                                ia = R
                            }
                            Ua++
                        }
                        0 <
                        V && (b ? (A += Math.max(0, c), da < B && Qw(a, p, B - da, 0, kb, l - 1), 0 < w && (q || Tw(a, w, 0, 0, l - 1), B += w)) : (B += Math.max(0, c), ia < A && Qw(a, p, 0, A - ia, kb, l - 1), 0 < w && (q || Tw(a, 0, w, 0, l - 1), A += w)));
                        w = q = 0;
                        switch (p) {
                            case Vw:
                                b ? q += B / 2 - a.W.x - t / 2 : w += A / 2 - a.W.y - t / 2;
                                break;
                            case Uv:
                                0 < V ? b ? q += B / 2 - a.W.x - t / 2 : w += A / 2 - a.W.y - t / 2 : b ? (ua = k[0].sa.x + k[0].Va.x, m = k[l - 1].sa.x + k[l - 1].Va.x + 2 * k[l - 1].W.x, q += ua + (m - ua) / 2 - a.W.x - t / 2) : (ua = k[0].sa.y + k[0].Va.y, m = k[l - 1].sa.y + k[l - 1].Va.y + 2 * k[l - 1].W.y, w += ua + (m - ua) / 2 - a.W.y - t / 2);
                                break;
                            case ew:
                                b ? (q -= t, B += t) : (w -= t, A += t);
                                break;
                            case fw:
                                b ? (q += B - a.width + t, B += t) : (w += A - a.height + t, A += t);
                                break;
                            case Wv:
                                b ? q = 1 < l ? q + (ua + u / 2 - a.W.x) : q + (k[0].W.x - a.W.x + k[0].Va.x) : w = 1 < l ? w + (ua + u / 2 - a.W.y) : w + (k[0].W.y - a.W.y + k[0].Va.y);
                                break;
                            case Xv:
                                b ? q += B + u / 2 - a.W.x : w += A + u / 2 - a.W.y;
                                break;
                            case Yv:
                                break;
                            default:
                                D.k("Unhandled alignment value " + p.toString())
                        }
                        for (m = 0; m < l; m++)n = k[m], b ? n.sa.n(n.sa.x + n.Va.x - q, n.sa.y + (135 < g ? (r ? -A : -n.tb.height) + n.Va.y - c : e + c + n.Va.y)) : n.sa.n(n.sa.x + (135 < g ? (r ? -B : -n.tb.width) + n.Va.x - c : d + c + n.Va.x), n.sa.y + n.Va.y - w);
                        l = k = 0;
                        r ? b ? (B = Ww(a, B, q),
                        0 > q && (q = 0), 135 < g && (w += A + c), A += e + c, p === Yv && (k += u / 2 + a.W.x), l += e + c) : (135 < g && (q += B + c), B += d + c, A = Xw(a, A, w), 0 > w && (w = 0), p === Yv && (l += u / 2 + a.W.y), k += d + c) : b ? (null === a.comments ? d > B && (p = Yw(p, d - B, 0), k = p.x, l = p.y, B = d, q = 0) : B = Ww(a, B, q), 0 > q && (k -= q, q = 0), 135 < g && (w += A + c), A = Math.max(Math.max(A, e), A + e + c), l += e + c) : (135 < g && (q += B + c), B = Math.max(Math.max(B, d), B + d + c), null === a.comments ? e > A && (p = Yw(p, 0, e - A), k = p.x, l = p.y, A = e, w = 0) : A = Xw(a, A, w), 0 > w && (l -= w, w = 0), k += d + c);
                        if (0 < V)g = Pw(this, 4), p = Pw(this, 4), b ? (g[2].n(0, e + c), g[3].n(g[2].x, A), p[2].n(B,
                            g[2].y), p[3].n(p[2].x, g[3].y)) : (g[2].n(d + c, 0), g[3].n(B, g[2].y), p[2].n(g[2].x, A), p[3].n(g[3].x, p[2].y)); else {
                            g = Pw(this, H.length + 2);
                            p = Pw(this, S.length + 2);
                            for (m = 0; m < H.length; m++)r = H[m], g[m + 2].n(r.x + k, r.y + l);
                            for (m = 0; m < S.length; m++)r = S[m], p[m + 2].n(r.x + k, r.y + l)
                        }
                        b ? (g[0].n(q, 0), g[1].n(g[0].x, e), g[2].y < g[1].y && (g[2].x > g[0].x ? g[2].assign(g[1]) : g[1].assign(g[2])), g[3].y < g[2].y && (g[3].x > g[0].x ? g[3].assign(g[2]) : g[2].assign(g[3])), p[0].n(q + d, 0), p[1].n(p[0].x, e), p[2].y < p[1].y && (p[2].x < p[0].x ? p[2].assign(p[1]) :
                            p[1].assign(p[2])), p[3].y < p[2].y && (p[3].x < p[0].x ? p[3].assign(p[2]) : p[2].assign(p[3])), g[2].y -= c / 2, p[2].y -= c / 2) : (g[0].n(0, w), g[1].n(d, g[0].y), g[2].x < g[1].x && (g[2].y > g[0].y ? g[2].assign(g[1]) : g[1].assign(g[2])), g[3].x < g[2].x && (g[3].y > g[0].y ? g[3].assign(g[2]) : g[2].assign(g[3])), p[0].n(0, w + e), p[1].n(d, p[0].y), p[2].x < p[1].x && (p[2].y < p[0].y ? p[2].assign(p[1]) : p[1].assign(p[2])), p[3].x < p[2].x && (p[3].y < p[0].y ? p[3].assign(p[2]) : p[2].assign(p[3])), g[2].x -= c / 2, p[2].x -= c / 2);
                        Zw(this, H);
                        Zw(this, S);
                        a.Fu = g;
                        a.Zu = p;
                        a.Va.n(q, w);
                        a.tb.n(B, A)
                    }
                    break;
                default:
                    D.k("Unhandled compaction value " + a.compaction.toString())
            }
        }
    };
    function bw(a, b) {
        v && D.l(b, yv, Z, "layoutTreeNone:v");
        if (0 === b.In) {
            var c = !1, d = 0, e = Uv;
            null !== b.parent && (d = b.parent.angle, e = b.parent.alignment, c = Vv(e));
            e = $v(b);
            b.sa.n(0, 0);
            b.tb.n(b.width, b.height);
            null === b.parent || null === b.comments || (180 !== d && 270 !== d || c) && !e ? b.Va.n(0, 0) : 180 === d && !c || (90 === d || 270 === d) && e ? b.Va.n(b.width - 2 * b.W.x, 0) : b.Va.n(0, b.height - 2 * b.W.y)
        } else {
            for (var c = dw(b), d = 90 === c || 270 === c, g = 0, e = b.children, h = e.length, k = 0; k < h; k++)var l = e[k], g = Math.max(g, d ? l.tb.width : l.tb.height);
            var m = b.alignment, n =
                m === ew, p = m === fw, q = Vv(m), r = Math.max(0, b.breadthLimit), s = gw(b), u = b.nodeSpacing, t = hw(b), z = n || p ? 0 : t / 2, w = b.rowSpacing, B = 0;
            if (n || p || b.Kq || b.Lq && 1 === b.maxGenerationCount)B = Math.max(0, b.rowIndent);
            var n = b.width, A = b.height, O = 0, H = 0, S = 0, Y = 0, R = 0, da = 0, ia = 0, V = 0, Ua = 0, kb = 0;
            q && !Zv(m) && 135 < c && e.reverse();
            if (Zv(m))if (1 < h)for (k = 0; k < h; k++) {
                var l = e[k], ua = l.tb;
                0 === k % 2 && k !== h - 1 ? Ua = Math.max(Ua, (d ? ua.width : ua.height) + $w(l) - u) : 0 !== k % 2 && (kb = Math.max(kb, (d ? ua.width : ua.height) + $w(l) - u))
            } else 1 === h && (Ua = d ? e[0].tb.width : e[0].tb.height);
            if (q)switch (m) {
                case Wv:
                case Lv:
                    H = 135 > c ? iw(b, e, Ua, O, H) : jw(b, e, Ua, O, H);
                    Ua = H.x;
                    O = H.width;
                    H = H.height;
                    break;
                case Xv:
                    for (k = 0; k < h; k++)l = e[k], ua = l.tb, r = 0 === ia ? 0 : w, d ? (l.sa.n(g - ua.width, R + r), O = Math.max(O, ua.width), H = Math.max(H, R + r + ua.height), R += r + ua.height) : (l.sa.n(Y + r, g - ua.height), O = Math.max(O, Y + r + ua.width), H = Math.max(H, ua.height), Y += r + ua.width), ia++;
                    break;
                case Yv:
                    for (g = 0; g < h; g++)l = e[g], ua = l.tb, r = 0 === ia ? 0 : w, d ? (l.sa.n(u / 2 + b.W.x, R + r), O = Math.max(O, ua.width), H = Math.max(H, R + r + ua.height), R += r + ua.height) : (l.sa.n(Y +
                        r, u / 2 + b.W.y), O = Math.max(O, Y + r + ua.width), H = Math.max(H, ua.height), Y += r + ua.width), ia++
            } else for (k = 0; k < h; k++)l = e[k], ua = l.tb, d ? (0 < r && 0 < ia && Y + u + ua.width > r && (Y < g && Qw(b, m, g - Y, 0, V, k - 1), da++, ia = 0, V = k, S = H, Y = 0, R = 135 < c ? -H - w : H + w), kb = 0 === ia ? z : u, Rw(a, l, 0, R), l.sa.n(Y + kb, R), O = Math.max(O, Y + kb + ua.width), H = Math.max(H, S + (0 === da ? 0 : w) + ua.height), Y += kb + ua.width) : (0 < r && 0 < ia && R + u + ua.height > r && (R < g && Qw(b, m, 0, g - R, V, k - 1), da++, ia = 0, V = k, S = O, R = 0, Y = 135 < c ? -O - w : O + w), kb = 0 === ia ? z : u, Rw(a, l, Y, 0), l.sa.n(Y, R + kb), H = Math.max(H, R + kb + ua.height),
                O = Math.max(O, S + (0 === da ? 0 : w) + ua.width), R += kb + ua.height), ia++;
            0 < da && (d ? (H += Math.max(0, s), Y < O && Qw(b, m, O - Y, 0, V, h - 1), 0 < B && (p || Tw(b, B, 0, 0, h - 1), O += B)) : (O += Math.max(0, s), R < H && Qw(b, m, 0, H - R, V, h - 1), 0 < B && (p || Tw(b, 0, B, 0, h - 1), H += B)));
            B = p = 0;
            switch (m) {
                case Vw:
                    d ? p += O / 2 - b.W.x - t / 2 : B += H / 2 - b.W.y - t / 2;
                    break;
                case Uv:
                    0 < da ? d ? p += O / 2 - b.W.x - t / 2 : B += H / 2 - b.W.y - t / 2 : d ? (m = e[0].sa.x + e[0].Va.x, u = e[h - 1].sa.x + e[h - 1].Va.x + 2 * e[h - 1].W.x, p += m + (u - m) / 2 - b.W.x - t / 2) : (m = e[0].sa.y + e[0].Va.y, u = e[h - 1].sa.y + e[h - 1].Va.y + 2 * e[h - 1].W.y, B += m + (u - m) / 2 - b.W.y -
                        t / 2);
                    break;
                case ew:
                    d ? (p -= t, O += t) : (B -= t, H += t);
                    break;
                case fw:
                    d ? (p += O - b.width + t, O += t) : (B += H - b.height + t, H += t);
                    break;
                case Wv:
                case Lv:
                    d ? p = 1 < h ? p + (Ua + u / 2 - b.W.x) : p + (e[0].W.x - b.W.x + e[0].Va.x) : B = 1 < h ? B + (Ua + u / 2 - b.W.y) : B + (e[0].W.y - b.W.y + e[0].Va.y);
                    break;
                case Xv:
                    d ? p += O + u / 2 - b.W.x : B += H + u / 2 - b.W.y;
                    break;
                case Yv:
                    break;
                default:
                    D.k("Unhandled alignment value " + m.toString())
            }
            for (k = 0; k < h; k++)l = e[k], d ? l.sa.n(l.sa.x + l.Va.x - p, l.sa.y + (135 < c ? (q ? -H : -l.tb.height) + l.Va.y - s : A + s + l.Va.y)) : l.sa.n(l.sa.x + (135 < c ? (q ? -O : -l.tb.width) + l.Va.x -
                s : n + s + l.Va.x), l.sa.y + l.Va.y - B);
            d ? (O = Ww(b, O, p), 0 > p && (p = 0), 135 < c && (B += H + s), H += A + s) : (135 < c && (p += O + s), O += n + s, H = Xw(b, H, B), 0 > B && (B = 0));
            b.Va.n(p, B);
            b.tb.n(O, H)
        }
    }

    function iw(a, b, c, d, e) {
        v && D.l(a, yv, Z, "layoutBusChildrenPosDir:v");
        var g = b.length;
        if (0 === g)return new C(c, 0, d, e);
        if (1 === g) {
            var h = b[0];
            d = h.tb.width;
            e = h.tb.height;
            return new C(c, 0, d, e)
        }
        for (var k = a.nodeSpacing, l = a.rowSpacing, m = 90 === dw(a), n = 0, p = 0, q = 0, r = 0; r < g; r++)if (!(0 !== r % 2 || 1 < g && r === g - 1)) {
            var h = b[r], s = h.tb, u = 0 === n ? 0 : l;
            if (m) {
                var t = $w(h) - k;
                h.sa.n(c - (s.width + t), q + u);
                d = Math.max(d, s.width + t);
                e = Math.max(e, q + u + s.height);
                q += u + s.height
            } else t = $w(h) - k, h.sa.n(p + u, c - (s.height + t)), e = Math.max(e, s.height + t), d = Math.max(d,
                p + u + s.width), p += u + s.width;
            n++
        }
        var n = 0, z = p, w = q;
        m ? (p = c + k, q = 0) : (p = 0, q = c + k);
        for (r = 0; r < g; r++)0 !== r % 2 && (h = b[r], s = h.tb, u = 0 === n ? 0 : l, m ? (t = $w(h) - k, h.sa.n(p + t, q + u), d = Math.max(d, p + s.width + t), e = Math.max(e, q + u + s.height), q += u + s.height) : (t = $w(h) - k, h.sa.n(p + u, q + t), d = Math.max(d, p + u + s.width), e = Math.max(e, q + s.height + t), p += u + s.width), n++);
        1 < g && 1 === g % 2 && (h = b[g - 1], s = h.tb, b = ax(h, m ? Math.max(Math.abs(w), Math.abs(q)) : Math.max(Math.abs(z), Math.abs(p))), m ? (h.sa.n(c + k / 2 - h.W.x - h.Va.x, e + b), m = c + k / 2 - h.W.x - h.Va.x, d = Math.max(d, m + s.width),
        0 > m && (d -= m), e = Math.max(e, Math.max(w, q) + b + s.height), 0 > h.sa.x && (c = bx(a, h.sa.x, !1, c, k))) : (h.sa.n(d + b, c + k / 2 - h.W.y - h.Va.y), d = Math.max(d, Math.max(z, p) + b + s.width), m = c + k / 2 - h.W.y - h.Va.y, e = Math.max(e, m + s.height), 0 > m && (e -= m), 0 > h.sa.y && (c = bx(a, h.sa.y, !0, c, k))));
        return new C(c, 0, d, e)
    }

    function jw(a, b, c, d, e) {
        v && D.l(a, yv, Z, "layoutBusChildrenNegDir:v");
        var g = b.length;
        if (0 === g)return new C(c, 0, d, e);
        if (1 === g) {
            var h = b[0];
            d = h.tb.width;
            e = h.tb.height;
            return new C(c, 0, d, e)
        }
        for (var k = a.nodeSpacing, l = a.rowSpacing, m = 270 === dw(a), n = 0, p = 0, q = 0, r = 0; r < g; r++)if (!(0 !== r % 2 || 1 < g && r === g - 1)) {
            var h = b[r], s = h.tb, u = 0 === n ? 0 : l;
            if (m) {
                var t = $w(h) - k, q = q - (u + s.height);
                h.sa.n(c - (s.width + t), q);
                d = Math.max(d, s.width + t);
                e = Math.max(e, Math.abs(q))
            } else t = $w(h) - k, p -= u + s.width, h.sa.n(p, c - (s.height + t)), e = Math.max(e, s.height +
                t), d = Math.max(d, Math.abs(p));
            n++
        }
        var n = 0, z = p, w = q;
        m ? (p = c + k, q = 0) : (p = 0, q = c + k);
        for (r = 0; r < g; r++)0 !== r % 2 && (h = b[r], s = h.tb, u = 0 === n ? 0 : l, m ? (t = $w(h) - k, q -= u + s.height, h.sa.n(p + t, q), d = Math.max(d, p + s.width + t), e = Math.max(e, Math.abs(q))) : (t = $w(h) - k, p -= u + s.width, h.sa.n(p, q + t), e = Math.max(e, q + s.height + t), d = Math.max(d, Math.abs(p))), n++);
        1 < g && 1 === g % 2 && (h = b[g - 1], s = h.tb, l = ax(h, m ? Math.max(Math.abs(w), Math.abs(q)) : Math.max(Math.abs(z), Math.abs(p))), m ? (h.sa.n(c + k / 2 - h.W.x - h.Va.x, -e - s.height - l), p = c + k / 2 - h.W.x - h.Va.x, d = Math.max(d,
            p + s.width), 0 > p && (d -= p), e = Math.max(e, Math.abs(Math.min(w, q)) + l + s.height), 0 > h.sa.x && (c = bx(a, h.sa.x, !1, c, k))) : (h.sa.n(-d - s.width - l, c + k / 2 - h.W.y - h.Va.y), d = Math.max(d, Math.abs(Math.min(z, p)) + l + s.width), p = c + k / 2 - h.W.y - h.Va.y, e = Math.max(e, p + s.height), 0 > p && (e -= p), 0 > h.sa.y && (c = bx(a, h.sa.y, !0, c, k))));
        for (r = 0; r < g; r++)h = b[r], m ? h.sa.n(h.sa.x, h.sa.y + e) : h.sa.n(h.sa.x + d, h.sa.y);
        return new C(c, 0, d, e)
    }

    function $w(a) {
        v && D.l(a, yv, Z, "fixRelativePostions:child");
        return null === a.parent ? 0 : a.parent.nodeSpacing
    }

    function ax(a) {
        v && D.l(a, yv, Z, "fixRelativePostions:lastchild");
        return null === a.parent ? 0 : a.parent.rowSpacing
    }

    function bx(a, b, c, d, e) {
        v && D.l(a, yv, Z, "fixRelativePostions:v");
        a = a.children;
        for (var g = a.length, h = 0; h < g; h++)c ? a[h].sa.n(a[h].sa.x, a[h].sa.y - b) : a[h].sa.n(a[h].sa.x - b, a[h].sa.y);
        b = a[g - 1];
        return Math.max(d, c ? b.Va.y + b.W.y - e / 2 : b.Va.x + b.W.x - e / 2)
    }

    function Ww(a, b, c) {
        v && D.l(a, yv, Z, "calculateSubwidth:v");
        switch (a.alignment) {
            case Uv:
            case Vw:
                var d = b;
                c + a.width > d && (d = c + a.width);
                0 > c && (d -= c);
                return d;
            case ew:
                return a.width > b ? a.width : b;
            case fw:
                return 2 * a.W.x > b ? a.width : b + a.width - 2 * a.W.x;
            case Wv:
            case Lv:
                return d = Math.min(0, c), c = Math.max(b, c + a.width), Math.max(a.width, c - d);
            case Xv:
                return a.width - a.W.x + a.nodeSpacing / 2 + b;
            case Yv:
                return Math.max(a.width, a.W.x + a.nodeSpacing / 2 + b);
            default:
                return b
        }
    }

    function Xw(a, b, c) {
        v && D.l(a, yv, Z, "calculateSubheight:v");
        switch (a.alignment) {
            case Uv:
            case Vw:
                var d = b;
                c + a.height > d && (d = c + a.height);
                0 > c && (d -= c);
                return d;
            case ew:
                return a.height > b ? a.height : b;
            case fw:
                return 2 * a.W.y > b ? a.height : b + a.height - 2 * a.W.y;
            case Wv:
            case Lv:
                return d = Math.min(0, c), c = Math.max(b, c + a.height), Math.max(a.height, c - d);
            case Xv:
                return a.height - a.W.y + a.nodeSpacing / 2 + b;
            case Yv:
                return Math.max(a.height, a.W.y + a.nodeSpacing / 2 + b);
            default:
                return b
        }
    }

    function Yw(a, b, c) {
        v && D.l(a, ya, Z, "alignOffset:align");
        switch (a) {
            case Vw:
                b /= 2;
                c /= 2;
                break;
            case Uv:
                b /= 2;
                c /= 2;
                break;
            case ew:
                c = b = 0;
                break;
            case fw:
                break;
            default:
                D.k("Unhandled alignment value " + a.toString())
        }
        return new N(b, c)
    }

    function Qw(a, b, c, d, e, g) {
        v && D.l(a, yv, Z, "shiftRelPosAlign:v");
        v && D.l(b, ya, Z, "shiftRelPosAlign:align");
        b = Yw(b, c, d);
        Tw(a, b.x, b.y, e, g)
    }

    function Tw(a, b, c, d, e) {
        v && D.l(a, yv, Z, "shiftRelPos:v");
        if (0 !== b || 0 !== c)for (a = a.children; d <= e; d++) {
            var g = a[d].sa;
            g.x += b;
            g.y += c
        }
    }

    function Rw(a, b, c, d) {
        v && (D.l(b, yv, Z, "recordMidPoints:v"), D.h(c, "number", Z, "recordMidPoints:x"), D.h(d, "number", Z, "recordMidPoints:y"));
        var e = b.parent;
        switch (a.Vf) {
            case uv:
                for (a = b.uc; a.next();)b = a.value, b.fromVertex === e && b.ct.n(c, d);
                break;
            case Bv:
                for (a = b.sc; a.next();)b = a.value, b.toVertex === e && b.ct.n(c, d);
                break;
            default:
                D.k("Unhandled path value " + a.Vf.toString())
        }
    }

    function Uw(a, b, c) {
        for (var d = 0; d < a.length; d++) {
            var e = a[d];
            e.x += b;
            e.y += c
        }
    }

    function Sw(a, b, c, d, e, g, h, k) {
        v && D.l(b, yv, Z, "mergeFringes:parent");
        v && D.l(c, yv, Z, "mergeFringes:child");
        var l = dw(b), m = 90 === l || 270 === l, n = b.nodeSpacing;
        b = d;
        var p = e;
        d = g;
        e = h;
        var q = c.Fu, r = c.Zu;
        h = c.tb;
        var s = m ? Math.max(e, h.height) : Math.max(d, h.width);
        if (null === q || l !== dw(c))q = Pw(a, 2), r = Pw(a, 2), m ? (q[0].n(0, 0), q[1].n(0, h.height), r[0].n(h.width, 0), r[1].n(r[0].x, q[1].y)) : (q[0].n(0, 0), q[1].n(h.width, 0), r[0].n(0, h.height), r[1].n(q[1].x, r[0].y));
        if (m) {
            c = d;
            d = 9999999;
            if (!(null === p || 2 > p.length || null === q || 2 > q.length))for (m =
                                                                                     l = 0; l < p.length && m < q.length;) {
                e = p[l];
                var u = q[m];
                g = u.x;
                var t = u.y;
                g += c;
                var z = e;
                l + 1 < p.length && (z = p[l + 1]);
                var w = u, u = w.x, w = w.y;
                m + 1 < q.length && (w = q[m + 1], u = w.x, w = w.y, u += c);
                var B = d;
                e.y === t ? B = g - e.x : e.y > t && e.y < w ? B = g + (e.y - t) / (w - t) * (u - g) - e.x : t > e.y && t < z.y && (B = g - (e.x + (t - e.y) / (z.y - e.y) * (z.x - e.x)));
                B < d && (d = B);
                z.y <= e.y ? l++ : w <= t ? m++ : (z.y <= w && l++, w <= z.y && m++)
            }
            c -= d;
            c += n;
            l = q;
            m = c;
            if (null === b || 2 > b.length || null === l || 2 > l.length)d = null; else {
                n = Pw(a, b.length + l.length);
                for (d = g = e = 0; g < l.length && l[g].y < b[0].y;)t = l[g++], n[d++].n(t.x +
                    m, t.y);
                for (; e < b.length;)t = b[e++], n[d++].n(t.x, t.y);
                for (e = b[b.length - 1].y; g < l.length && l[g].y <= e;)g++;
                for (; g < l.length && l[g].y > e;)t = l[g++], n[d++].n(t.x + m, t.y);
                l = Pw(a, d);
                for (e = 0; e < d; e++)l[e].assign(n[e]);
                Zw(a, n);
                d = l
            }
            g = r;
            t = c;
            if (null === p || 2 > p.length || null === g || 2 > g.length)e = null; else {
                n = Pw(a, p.length + g.length);
                for (m = z = l = 0; l < p.length && p[l].y < g[0].y;)e = p[l++], n[m++].n(e.x, e.y);
                for (; z < g.length;)e = g[z++], n[m++].n(e.x + t, e.y);
                for (g = g[g.length - 1].y; l < p.length && p[l].y <= g;)l++;
                for (; l < p.length && p[l].y > g;)e = p[l++],
                    n[m++].n(e.x, e.y);
                e = Pw(a, m);
                for (l = 0; l < m; l++)e[l].assign(n[l]);
                Zw(a, n)
            }
            g = Math.max(0, c) + h.width;
            h = s
        } else {
            c = e;
            d = 9999999;
            if (!(null === p || 2 > p.length || null === q || 2 > q.length))for (m = l = 0; l < p.length && m < q.length;)e = p[l], u = q[m], g = u.x, t = u.y, t += c, z = e, l + 1 < p.length && (z = p[l + 1]), w = u, u = w.x, w = w.y, m + 1 < q.length && (w = q[m + 1], u = w.x, w = w.y, w += c), B = d, e.x === g ? B = t - e.y : e.x > g && e.x < u ? B = t + (e.x - g) / (u - g) * (w - t) - e.y : g > e.x && g < z.x && (B = t - (e.y + (g - e.x) / (z.x - e.x) * (z.y - e.y))), B < d && (d = B), z.x <= e.x ? l++ : u <= g ? m++ : (z.x <= u && l++, u <= z.x && m++);
            c -= d;
            c += n;
            l = q;
            m = c;
            if (null === b || 2 > b.length || null === l || 2 > l.length)d = null; else {
                n = Pw(a, b.length + l.length);
                for (d = g = e = 0; g < l.length && l[g].x < b[0].x;)t = l[g++], n[d++].n(t.x, t.y + m);
                for (; e < b.length;)t = b[e++], n[d++].n(t.x, t.y);
                for (e = b[b.length - 1].x; g < l.length && l[g].x <= e;)g++;
                for (; g < l.length && l[g].x > e;)t = l[g++], n[d++].n(t.x, t.y + m);
                l = Pw(a, d);
                for (e = 0; e < d; e++)l[e].assign(n[e]);
                Zw(a, n);
                d = l
            }
            g = r;
            t = c;
            if (null === p || 2 > p.length || null === g || 2 > g.length)e = null; else {
                n = Pw(a, p.length + g.length);
                for (m = z = l = 0; l < p.length && p[l].x < g[0].x;)e = p[l++],
                    n[m++].n(e.x, e.y);
                for (; z < g.length;)e = g[z++], n[m++].n(e.x, e.y + t);
                for (g = g[g.length - 1].x; l < p.length && p[l].x <= g;)l++;
                for (; l < p.length && p[l].x > g;)e = p[l++], n[m++].n(e.x, e.y);
                e = Pw(a, m);
                for (l = 0; l < m; l++)e[l].assign(n[l]);
                Zw(a, n)
            }
            g = s;
            h = Math.max(0, c) + h.height
        }
        Zw(a, b);
        Zw(a, q);
        Zw(a, p);
        Zw(a, r);
        k[0] = d;
        k[1] = e;
        return new C(c, 0, g, h)
    }

    function Pw(a, b) {
        var c = a.iA[b];
        if (void 0 !== c && (c = c.pop(), void 0 !== c))return c;
        for (var c = [], d = 0; d < b; d++)c[d] = new N;
        return c
    }

    function Zw(a, b) {
        var c = b.length, d = a.iA[c];
        void 0 === d && (d = [], a.iA[c] = d);
        d.push(b)
    }

    Z.prototype.arrangeTrees = function () {
        if (this.yd === Av)for (var a = this.Ed.j; a.next();) {
            var b = a.value;
            if (b instanceof yv) {
                var c = b.Yc;
                if (null !== c) {
                    var d = c.position, c = d.x, d = d.y;
                    isFinite(c) || (c = 0);
                    isFinite(d) || (d = 0);
                    cx(this, b, c, d)
                }
            }
        } else {
            c = [];
            for (a = this.Ed.j; a.next();)b = a.value, b instanceof yv && c.push(b);
            switch (this.sorting) {
                case Qv:
                    break;
                case Rv:
                    c.reverse();
                    break;
                case Sv:
                    c.sort(this.comparer);
                    break;
                case Tv:
                    c.sort(this.comparer);
                    c.reverse();
                    break;
                default:
                    D.k("Unhandled sorting value " + this.sorting.toString())
            }
            b =
                this.Ce;
            a = b.x;
            b = b.y;
            for (d = 0; d < c.length; d++) {
                var e = c[d];
                cx(this, e, a + e.Va.x, b + e.Va.y);
                switch (this.yd) {
                    case xv:
                        b += e.tb.height + this.xg.height;
                        break;
                    case dx:
                        a += e.tb.width + this.xg.width;
                        break;
                    default:
                        D.k("Unhandled arrangement value " + this.yd.toString())
                }
            }
        }
    };
    function cx(a, b, c, d) {
        if (null !== b) {
            v && D.l(b, yv, Z, "assignAbsolutePositions:v");
            b.x = c;
            b.y = d;
            b = b.children;
            for (var e = b.length, g = 0; g < e; g++) {
                var h = b[g];
                cx(a, h, c + h.sa.x, d + h.sa.y)
            }
        }
    }

    Z.prototype.commitLayout = function () {
        this.MB();
        this.commitNodes();
        this.yA();
        this.Du && this.commitLinks()
    };
    Z.prototype.commitNodes = function () {
        for (var a = this.network.vertexes.j; a.next();)a.value.commit();
        for (a.reset(); a.next();)this.layoutComments(a.value)
    };
    Z.prototype.yA = function () {
        if (this.hB === Iv) {
            for (var a = this.sC, b = [], c = null, d = this.network.vertexes.j; d.next();) {
                var e = d.value;
                null === c ? c = e.pb.copy() : c.$h(e.pb);
                var g = b[e.level], g = void 0 === g ? gw(e) : Math.max(g, gw(e));
                b[e.level] = g
            }
            for (d = 0; d < b.length; d++)void 0 === b[d] && (b[d] = 0);
            90 === this.angle || 270 === this.angle ? (c.If(this.nodeSpacing / 2, this.layerSpacing), e = new N(-this.nodeSpacing / 2, -this.layerSpacing / 2)) : (c.If(this.layerSpacing, this.nodeSpacing / 2), e = new N(-this.layerSpacing / 2, -this.nodeSpacing / 2));
            var g =
                [], c = 90 === this.angle || 270 === this.angle ? c.width : c.height, h = 0;
            if (180 === this.angle || 270 === this.angle)for (d = 0; d < a.length; d++)h += a[d] + b[d];
            for (d = 0; d < a.length; d++) {
                var k = a[d] + b[d];
                270 === this.angle ? (h -= k, g.push(new C(0, h, c, k))) : 90 === this.angle ? (g.push(new C(0, h, c, k)), h += k) : 180 === this.angle ? (h -= k, g.push(new C(h, 0, k, c))) : (g.push(new C(h, 0, k, c)), h += k)
            }
            this.commitLayers(g, e)
        }
    };
    Z.prototype.commitLayers = function () {
    };
    Z.prototype.commitLinks = function () {
        for (var a = this.network.edges.j; a.next();)a.value.commit()
    };
    Z.prototype.MB = function () {
        for (var a = this.Ed.j; a.next();) {
            var b = a.value;
            b instanceof yv && ex(this, b)
        }
    };
    function ex(a, b) {
        if (null !== b) {
            v && D.l(b, yv, Z, "setPortSpotsTree:v");
            a.setPortSpots(b);
            for (var c = b.children, d = c.length, e = 0; e < d; e++)ex(a, c[e])
        }
    }

    Z.prototype.setPortSpots = function (a) {
        v && D.l(a, yv, Z, "setPortSpots:v");
        var b = a.alignment;
        if (Vv(b)) {
            v && D.l(a, yv, Z, "setPortSpotsBus:v");
            v && D.l(b, ya, Z, "setPortSpots:align");
            var c = this.Vf === uv, d = dw(a), e;
            switch (d) {
                case 0:
                    e = id;
                    break;
                case 90:
                    e = jd;
                    break;
                case 180:
                    e = hd;
                    break;
                default:
                    e = ad
            }
            var g = a.children, h = g.length;
            switch (b) {
                case Wv:
                case Lv:
                    for (b = 0; b < h; b++) {
                        var k = g[b], k = (c ? k.uc : k.sc).first();
                        if (null !== k && (k = k.link, null !== k)) {
                            var l = 90 === d || 270 === d ? hd : ad;
                            if (1 === h || b === h - 1 && 1 === h % 2)switch (d) {
                                case 0:
                                    l = hd;
                                    break;
                                case 90:
                                    l =
                                        ad;
                                    break;
                                case 180:
                                    l = id;
                                    break;
                                default:
                                    l = jd
                            } else 0 === b % 2 && (l = 90 === d || 270 === d ? id : jd);
                            c ? (a.setsPortSpot && (k.Gb = e), a.setsChildPortSpot && (k.Hb = l)) : (a.setsPortSpot && (k.Gb = l), a.setsChildPortSpot && (k.Hb = e))
                        }
                    }
                    break;
                case Xv:
                    l = 90 === d || 270 === d ? id : jd;
                    for (d = c ? a.sc : a.uc; d.next();)k = d.value.link, null !== k && (c ? (a.setsPortSpot && (k.Gb = e), a.setsChildPortSpot && (k.Hb = l)) : (a.setsPortSpot && (k.Gb = l), a.setsChildPortSpot && (k.Hb = e)));
                    break;
                case Yv:
                    for (l = 90 === d || 270 === d ? hd : ad, d = c ? a.sc : a.uc; d.next();)k = d.value.link, null !== k && (c ?
                        (a.setsPortSpot && (k.Gb = e), a.setsChildPortSpot && (k.Hb = l)) : (a.setsPortSpot && (k.Gb = l), a.setsChildPortSpot && (k.Hb = e)))
            }
        } else if (c = dw(a), this.Vf === uv)for (e = a.sc; e.next();) {
            if (d = e.value.link, null !== d) {
                if (a.setsPortSpot)if (a.portSpot.gd())switch (c) {
                    case 0:
                        d.Gb = id;
                        break;
                    case 90:
                        d.Gb = jd;
                        break;
                    case 180:
                        d.Gb = hd;
                        break;
                    default:
                        d.Gb = ad
                } else d.Gb = a.portSpot;
                if (a.setsChildPortSpot)if (a.childPortSpot.gd())switch (c) {
                    case 0:
                        d.Hb = hd;
                        break;
                    case 90:
                        d.Hb = ad;
                        break;
                    case 180:
                        d.Hb = id;
                        break;
                    default:
                        d.Hb = jd
                } else d.Hb = a.childPortSpot
            }
        } else for (e =
                        a.uc; e.next();)if (d = e.value.link, null !== d) {
            if (a.setsPortSpot)if (a.portSpot.gd())switch (c) {
                case 0:
                    d.Hb = id;
                    break;
                case 90:
                    d.Hb = jd;
                    break;
                case 180:
                    d.Hb = hd;
                    break;
                default:
                    d.Hb = ad
            } else d.Hb = a.portSpot;
            if (a.setsChildPortSpot)if (a.childPortSpot.gd())switch (c) {
                case 0:
                    d.Gb = hd;
                    break;
                case 90:
                    d.Gb = ad;
                    break;
                case 180:
                    d.Gb = id;
                    break;
                default:
                    d.Gb = jd
            } else d.Gb = a.childPortSpot
        }
    };
    function dw(a) {
        a = a.angle;
        return 45 >= a ? 0 : 135 >= a ? 90 : 225 >= a ? 180 : 315 >= a ? 270 : 0
    }

    function gw(a) {
        v && D.l(a, yv, Z, "computeLayerSpacing:v");
        var b = dw(a), b = 90 === b || 270 === b, c = a.layerSpacing;
        if (0 < a.layerSpacingParentOverlap)var d = Math.min(1, a.layerSpacingParentOverlap), c = c - (b ? a.height * d : a.width * d);
        c < (b ? -a.height : -a.width) && (c = b ? -a.height : -a.width);
        return c
    }

    function hw(a) {
        v && D.l(a, yv, Z, "computeNodeIndent:v");
        var b = dw(a), b = 90 === b || 270 === b, c = a.nodeIndent;
        if (0 < a.nodeIndentPastParent)var d = Math.min(1, a.nodeIndentPastParent), c = c + (b ? a.width * d : a.height * d);
        return c = Math.max(0, c)
    }

    D.defineProperty(Z, {yM: "roots"}, function () {
        return this.Ed
    }, function (a) {
        this.Ed !== a && (D.l(a, L, Z, "roots"), this.Ed = a, this.N())
    });
    D.defineProperty(Z, {path: "path"}, function () {
        return this.Ws
    }, function (a) {
        this.Ws !== a && (D.Da(a, Z, Z, "path"), this.Ws = a, this.N())
    });
    D.defineProperty(Z, {EK: "treeStyle"}, function () {
        return this.Mt
    }, function (a) {
        this.yd !== a && (D.Da(a, Z, Z, "treeStyle"), a === vv || a === Ov || a === Pv || a === Nv) && (this.Mt = a, this.N())
    });
    D.defineProperty(Z, {hB: "layerStyle"}, function () {
        return this.ow
    }, function (a) {
        this.yd !== a && (D.Da(a, Z, Z, "layerStyle"), a === wv || a === Jv || a === Iv) && (this.ow = a, this.N())
    });
    D.defineProperty(Z, {comments: "comments"}, function () {
        return this.bi
    }, function (a) {
        this.bi !== a && (D.h(a, "boolean", Z, "comments"), this.bi = a, this.N())
    });
    D.defineProperty(Z, {dg: "arrangement"}, function () {
        return this.yd
    }, function (a) {
        this.yd !== a && (D.Da(a, Z, Z, "arrangement"), a === xv || a === dx || a === Av) && (this.yd = a, this.N())
    });
    D.defineProperty(Z, {PE: "arrangementSpacing"}, function () {
        return this.xg
    }, function (a) {
        D.l(a, Ba, Z, "arrangementSpacing");
        this.xg.O(a) || (this.xg.assign(a), this.N())
    });
    D.defineProperty(Z, {xM: "rootDefaults"}, function () {
        return this.Aa
    }, function (a) {
        this.Aa !== a && (D.l(a, yv, Z, "rootDefaults"), this.Aa = a, this.N())
    });
    D.defineProperty(Z, {VK: "alternateDefaults"}, function () {
        return this.Ba
    }, function (a) {
        this.Ba !== a && (D.l(a, yv, Z, "alternateDefaults"), this.Ba = a, this.N())
    });
    D.defineProperty(Z, {sorting: "sorting"}, function () {
        return this.Aa.sorting
    }, function (a) {
        this.Aa.sorting !== a && (D.Da(a, Z, Z, "sorting"), a === Qv || a === Rv || a === Sv || Tv) && (this.Aa.sorting = a, this.N())
    });
    D.defineProperty(Z, {comparer: "comparer"}, function () {
        return this.Aa.comparer
    }, function (a) {
        this.Aa.comparer !== a && (D.h(a, "function", Z, "comparer"), this.Aa.comparer = a, this.N())
    });
    D.defineProperty(Z, {angle: "angle"}, function () {
        return this.Aa.angle
    }, function (a) {
        this.Aa.angle !== a && (D.h(a, "number", Z, "angle"), 0 === a || 90 === a || 180 === a || 270 === a ? (this.Aa.angle = a, this.N()) : D.k("TreeLayout.angle must be 0, 90, 180, or 270"))
    });
    D.defineProperty(Z, {alignment: "alignment"}, function () {
        return this.Aa.alignment
    }, function (a) {
        this.Aa.alignment !== a && (D.Da(a, Z, Z, "alignment"), this.Aa.alignment = a, this.N())
    });
    D.defineProperty(Z, {nodeIndent: "nodeIndent"}, function () {
        return this.Aa.nodeIndent
    }, function (a) {
        this.Aa.nodeIndent !== a && (D.h(a, "number", Z, "nodeIndent"), 0 <= a && (this.Aa.nodeIndent = a, this.N()))
    });
    D.defineProperty(Z, {nodeIndentPastParent: "nodeIndentPastParent"}, function () {
        return this.Aa.nodeIndentPastParent
    }, function (a) {
        this.Aa.nodeIndentPastParent !== a && (D.h(a, "number", Z, "nodeIndentPastParent"), 0 <= a && 1 >= a && (this.Aa.nodeIndentPastParent = a, this.N()))
    });
    D.defineProperty(Z, {nodeSpacing: "nodeSpacing"}, function () {
        return this.Aa.nodeSpacing
    }, function (a) {
        this.Aa.nodeSpacing !== a && (D.h(a, "number", Z, "nodeSpacing"), this.Aa.nodeSpacing = a, this.N())
    });
    D.defineProperty(Z, {layerSpacing: "layerSpacing"}, function () {
        return this.Aa.layerSpacing
    }, function (a) {
        this.Aa.layerSpacing !== a && (D.h(a, "number", Z, "layerSpacing"), this.Aa.layerSpacing = a, this.N())
    });
    D.defineProperty(Z, {layerSpacingParentOverlap: "layerSpacingParentOverlap"}, function () {
        return this.Aa.layerSpacingParentOverlap
    }, function (a) {
        this.Aa.layerSpacingParentOverlap !== a && (D.h(a, "number", Z, "layerSpacingParentOverlap"), 0 <= a && 1 >= a && (this.Aa.layerSpacingParentOverlap = a, this.N()))
    });
    D.defineProperty(Z, {compaction: "compaction"}, function () {
        return this.Aa.compaction
    }, function (a) {
        this.Aa.compaction !== a && (D.Da(a, Z, Z, "compaction"), a === aw || a === cw) && (this.Aa.compaction = a, this.N())
    });
    D.defineProperty(Z, {breadthLimit: "breadthLimit"}, function () {
        return this.Aa.breadthLimit
    }, function (a) {
        this.Aa.breadthLimit !== a && (D.h(a, "number", Z, "breadthLimit"), 0 <= a && (this.Aa.breadthLimit = a, this.N()))
    });
    D.defineProperty(Z, {rowSpacing: "rowSpacing"}, function () {
        return this.Aa.rowSpacing
    }, function (a) {
        this.Aa.rowSpacing !== a && (D.h(a, "number", Z, "rowSpacing"), this.Aa.rowSpacing = a, this.N())
    });
    D.defineProperty(Z, {rowIndent: "rowIndent"}, function () {
        return this.Aa.rowIndent
    }, function (a) {
        this.Aa.rowIndent !== a && (D.h(a, "number", Z, "rowIndent"), 0 <= a && (this.Aa.rowIndent = a, this.N()))
    });
    D.defineProperty(Z, {commentSpacing: "commentSpacing"}, function () {
        return this.Aa.commentSpacing
    }, function (a) {
        this.Aa.commentSpacing !== a && (D.h(a, "number", Z, "commentSpacing"), this.Aa.commentSpacing = a, this.N())
    });
    D.defineProperty(Z, {commentMargin: "commentMargin"}, function () {
        return this.Aa.commentMargin
    }, function (a) {
        this.Aa.commentMargin !== a && (D.h(a, "number", Z, "commentMargin"), this.Aa.commentMargin = a, this.N())
    });
    D.defineProperty(Z, {setsPortSpot: "setsPortSpot"}, function () {
        return this.Aa.setsPortSpot
    }, function (a) {
        this.Aa.setsPortSpot !== a && (D.h(a, "boolean", Z, "setsPortSpot"), this.Aa.setsPortSpot = a, this.N())
    });
    D.defineProperty(Z, {portSpot: "portSpot"}, function () {
        return this.Aa.portSpot
    }, function (a) {
        D.l(a, Q, Z, "portSpot");
        this.Aa.portSpot.O(a) || (this.Aa.portSpot = a, this.N())
    });
    D.defineProperty(Z, {setsChildPortSpot: "setsChildPortSpot"}, function () {
        return this.Aa.setsChildPortSpot
    }, function (a) {
        this.Aa.setsChildPortSpot !== a && (D.h(a, "boolean", Z, "setsChildPortSpot"), this.Aa.setsChildPortSpot = a, this.N())
    });
    D.defineProperty(Z, {childPortSpot: "childPortSpot"}, function () {
        return this.Aa.childPortSpot
    }, function (a) {
        D.l(a, Q, Z, "childPortSpot");
        this.Aa.childPortSpot.O(a) || (this.Aa.childPortSpot = a, this.N())
    });
    D.defineProperty(Z, {fL: "alternateSorting"}, function () {
        return this.Ba.sorting
    }, function (a) {
        this.Ba.sorting !== a && (D.Da(a, Z, Z, "alternateSorting"), a === Qv || a === Rv || a === Sv || Tv) && (this.Ba.sorting = a, this.N())
    });
    D.defineProperty(Z, {UK: "alternateComparer"}, function () {
        return this.Ba.comparer
    }, function (a) {
        this.Ba.comparer !== a && (D.h(a, "function", Z, "alternateComparer"), this.Ba.comparer = a, this.N())
    });
    D.defineProperty(Z, {OK: "alternateAngle"}, function () {
        return this.Ba.angle
    }, function (a) {
        this.Ba.angle !== a && (D.h(a, "number", Z, "alternateAngle"), 0 === a || 90 === a || 180 === a || 270 === a) && (this.Ba.angle = a, this.N())
    });
    D.defineProperty(Z, {NK: "alternateAlignment"}, function () {
        return this.Ba.alignment
    }, function (a) {
        this.Ba.alignment !== a && (D.Da(a, Z, Z, "alternateAlignment"), this.Ba.alignment = a, this.N())
    });
    D.defineProperty(Z, {YK: "alternateNodeIndent"}, function () {
        return this.Ba.nodeIndent
    }, function (a) {
        this.Ba.nodeIndent !== a && (D.h(a, "number", Z, "alternateNodeIndent"), 0 <= a && (this.Ba.nodeIndent = a, this.N()))
    });
    D.defineProperty(Z, {ZK: "alternateNodeIndentPastParent"}, function () {
        return this.Ba.nodeIndentPastParent
    }, function (a) {
        this.Ba.nodeIndentPastParent !== a && (D.h(a, "number", Z, "alternateNodeIndentPastParent"), 0 <= a && 1 >= a && (this.Ba.nodeIndentPastParent = a, this.N()))
    });
    D.defineProperty(Z, {$K: "alternateNodeSpacing"}, function () {
        return this.Ba.nodeSpacing
    }, function (a) {
        this.Ba.nodeSpacing !== a && (D.h(a, "number", Z, "alternateNodeSpacing"), this.Ba.nodeSpacing = a, this.N())
    });
    D.defineProperty(Z, {WK: "alternateLayerSpacing"}, function () {
        return this.Ba.layerSpacing
    }, function (a) {
        this.Ba.layerSpacing !== a && (D.h(a, "number", Z, "alternateLayerSpacing"), this.Ba.layerSpacing = a, this.N())
    });
    D.defineProperty(Z, {XK: "alternateLayerSpacingParentOverlap"}, function () {
        return this.Ba.layerSpacingParentOverlap
    }, function (a) {
        this.Ba.layerSpacingParentOverlap !== a && (D.h(a, "number", Z, "alternateLayerSpacingParentOverlap"), 0 <= a && 1 >= a && (this.Ba.layerSpacingParentOverlap = a, this.N()))
    });
    D.defineProperty(Z, {TK: "alternateCompaction"}, function () {
        return this.Ba.compaction
    }, function (a) {
        this.Ba.compaction !== a && (D.Da(a, Z, Z, "alternateCompaction"), a === aw || a === cw) && (this.Ba.compaction = a, this.N())
    });
    D.defineProperty(Z, {PK: "alternateBreadthLimit"}, function () {
        return this.Ba.breadthLimit
    }, function (a) {
        this.Ba.breadthLimit !== a && (D.h(a, "number", Z, "alternateBreadthLimit"), 0 <= a && (this.Ba.breadthLimit = a, this.N()))
    });
    D.defineProperty(Z, {cL: "alternateRowSpacing"}, function () {
        return this.Ba.rowSpacing
    }, function (a) {
        this.Ba.rowSpacing !== a && (D.h(a, "number", Z, "alternateRowSpacing"), this.Ba.rowSpacing = a, this.N())
    });
    D.defineProperty(Z, {bL: "alternateRowIndent"}, function () {
        return this.Ba.rowIndent
    }, function (a) {
        this.Ba.rowIndent !== a && (D.h(a, "number", Z, "alternateRowIndent"), 0 <= a && (this.Ba.rowIndent = a, this.N()))
    });
    D.defineProperty(Z, {SK: "alternateCommentSpacing"}, function () {
        return this.Ba.commentSpacing
    }, function (a) {
        this.Ba.commentSpacing !== a && (D.h(a, "number", Z, "alternateCommentSpacing"), this.Ba.commentSpacing = a, this.N())
    });
    D.defineProperty(Z, {RK: "alternateCommentMargin"}, function () {
        return this.Ba.commentMargin
    }, function (a) {
        this.Ba.commentMargin !== a && (D.h(a, "number", Z, "alternateCommentMargin"), this.Ba.commentMargin = a, this.N())
    });
    D.defineProperty(Z, {eL: "alternateSetsPortSpot"}, function () {
        return this.Ba.setsPortSpot
    }, function (a) {
        this.Ba.setsPortSpot !== a && (D.h(a, "boolean", Z, "alternateSetsPortSpot"), this.Ba.setsPortSpot = a, this.N())
    });
    D.defineProperty(Z, {aL: "alternatePortSpot"}, function () {
        return this.Ba.portSpot
    }, function (a) {
        D.l(a, Q, Z, "alternatePortSpot");
        this.Ba.portSpot.O(a) || (this.Ba.portSpot = a, this.N())
    });
    D.defineProperty(Z, {dL: "alternateSetsChildPortSpot"}, function () {
        return this.Ba.setsChildPortSpot
    }, function (a) {
        this.Ba.setsChildPortSpot !== a && (D.h(a, "boolean", Z, "alternateSetsChildPortSpot"), this.Ba.setsChildPortSpot = a, this.N())
    });
    D.defineProperty(Z, {QK: "alternateChildPortSpot"}, function () {
        return this.Ba.childPortSpot
    }, function (a) {
        D.l(a, Q, Z, "alternateChildPortSpot");
        this.Ba.childPortSpot.O(a) || (this.Ba.childPortSpot = a, this.N())
    });
    var tv;
    Z.PathDefault = tv = D.s(Z, "PathDefault", -1);
    var uv;
    Z.PathDestination = uv = D.s(Z, "PathDestination", 0);
    var Bv;
    Z.PathSource = Bv = D.s(Z, "PathSource", 1);
    var Qv;
    Z.SortingForwards = Qv = D.s(Z, "SortingForwards", 10);
    var Rv;
    Z.SortingReverse = Rv = D.s(Z, "SortingReverse", 11);
    var Sv;
    Z.SortingAscending = Sv = D.s(Z, "SortingAscending", 12);
    var Tv;
    Z.SortingDescending = Tv = D.s(Z, "SortingDescending", 13);
    var Vw;
    Z.AlignmentCenterSubtrees = Vw = D.s(Z, "AlignmentCenterSubtrees", 20);
    var Uv;
    Z.AlignmentCenterChildren = Uv = D.s(Z, "AlignmentCenterChildren", 21);
    var ew;
    Z.AlignmentStart = ew = D.s(Z, "AlignmentStart", 22);
    var fw;
    Z.AlignmentEnd = fw = D.s(Z, "AlignmentEnd", 23);
    var Wv;
    Z.AlignmentBus = Wv = D.s(Z, "AlignmentBus", 24);
    var Lv;
    Z.AlignmentBusBranching = Lv = D.s(Z, "AlignmentBusBranching", 25);
    var Xv;
    Z.AlignmentTopLeftBus = Xv = D.s(Z, "AlignmentTopLeftBus", 26);
    var Yv;
    Z.AlignmentBottomRightBus = Yv = D.s(Z, "AlignmentBottomRightBus", 27);
    var aw;
    Z.CompactionNone = aw = D.s(Z, "CompactionNone", 30);
    var cw;
    Z.CompactionBlock = cw = D.s(Z, "CompactionBlock", 31);
    var vv;
    Z.StyleLayered = vv = D.s(Z, "StyleLayered", 40);
    var Pv;
    Z.StyleLastParents = Pv = D.s(Z, "StyleLastParents", 41);
    var Ov;
    Z.StyleAlternating = Ov = D.s(Z, "StyleAlternating", 42);
    var Nv;
    Z.StyleRootOnly = Nv = D.s(Z, "StyleRootOnly", 43);
    var xv;
    Z.ArrangementVertical = xv = D.s(Z, "ArrangementVertical", 50);
    var dx;
    Z.ArrangementHorizontal = dx = D.s(Z, "ArrangementHorizontal", 51);
    var Av;
    Z.ArrangementFixedRoots = Av = D.s(Z, "ArrangementFixedRoots", 52);
    var wv;
    Z.LayerIndividual = wv = D.s(Z, "LayerIndividual", 60);
    var Jv;
    Z.LayerSiblings = Jv = D.s(Z, "LayerSiblings", 61);
    var Iv;
    Z.LayerUniform = Iv = D.s(Z, "LayerUniform", 62);
    function zv() {
        ta.call(this)
    }

    D.Ra(zv, ta);
    D.ka("TreeNetwork", zv);
    zv.prototype.createVertex = function () {
        return new yv
    };
    zv.prototype.createEdge = function () {
        return new fx
    };
    function yv() {
        va.call(this);
        this.initialized = !1;
        this.parent = null;
        this.children = [];
        this.maxGenerationCount = this.maxChildrenCount = this.descendantCount = this.level = 0;
        this.comments = null;
        this.sa = new N(0, 0);
        this.tb = new Ba(0, 0);
        this.Va = new N(0, 0);
        this.Lq = this.Kq = this.jK = !1;
        this.Zu = this.Fu = null;
        this.sorting = Qv;
        this.comparer = zs;
        this.angle = 0;
        this.alignment = Uv;
        this.nodeIndentPastParent = this.nodeIndent = 0;
        this.nodeSpacing = 20;
        this.layerSpacing = 50;
        this.layerSpacingParentOverlap = 0;
        this.compaction = cw;
        this.breadthLimit =
            0;
        this.rowSpacing = 25;
        this.commentSpacing = this.rowIndent = 10;
        this.commentMargin = 20;
        this.setsPortSpot = !0;
        this.portSpot = Wc;
        this.setsChildPortSpot = !0;
        this.childPortSpot = Wc
    }

    D.Ra(yv, va);
    D.ka("TreeVertex", yv);
    yv.prototype.copyInheritedPropertiesFrom = function (a) {
        null !== a && (this.sorting = a.sorting, this.comparer = a.comparer, this.angle = a.angle, this.alignment = a.alignment, this.nodeIndent = a.nodeIndent, this.nodeIndentPastParent = a.nodeIndentPastParent, this.nodeSpacing = a.nodeSpacing, this.layerSpacing = a.layerSpacing, this.layerSpacingParentOverlap = a.layerSpacingParentOverlap, this.compaction = a.compaction, this.breadthLimit = a.breadthLimit, this.rowSpacing = a.rowSpacing, this.rowIndent = a.rowIndent, this.commentSpacing = a.commentSpacing,
            this.commentMargin = a.commentMargin, this.setsPortSpot = a.setsPortSpot, this.portSpot = a.portSpot, this.setsChildPortSpot = a.setsChildPortSpot, this.childPortSpot = a.childPortSpot)
    };
    D.w(yv, {In: "childrenCount"}, function () {
        return this.children.length
    });
    D.defineProperty(yv, {wM: "relativePosition"}, function () {
        return this.sa
    }, function (a) {
        this.sa.set(a)
    });
    D.defineProperty(yv, {JM: "subtreeSize"}, function () {
        return this.tb
    }, function (a) {
        this.tb.set(a)
    });
    D.defineProperty(yv, {IM: "subtreeOffset"}, function () {
        return this.Va
    }, function (a) {
        this.Va.set(a)
    });
    function fx() {
        wa.call(this);
        this.ct = new N(0, 0)
    }

    D.Ra(fx, wa);
    D.ka("TreeEdge", fx);
    fx.prototype.commit = function () {
        var a = this.link;
        if (null !== a && !a.Kj) {
            var b = this.network.Yb, c = null, d = null;
            switch (b.Vf) {
                case uv:
                    c = this.fromVertex;
                    d = this.toVertex;
                    break;
                case Bv:
                    c = this.toVertex;
                    d = this.fromVertex;
                    break;
                default:
                    D.k("Unhandled path value " + b.Vf.toString())
            }
            if (null !== c && null !== d)if (b = this.ct, 0 !== b.x || 0 !== b.y || c.jK) {
                var d = c.pb, e = dw(c), g = gw(c), h = c.rowSpacing;
                a.Ao();
                var k = a.jf === Tj, l = a.ic, m = 0, n, p;
                a.zm();
                if (l || k) {
                    for (m = 2; 4 < a.ta;)a.CG(2);
                    n = a.m(1);
                    p = a.m(2)
                } else {
                    for (m = 1; 3 < a.ta;)a.CG(1);
                    n = a.m(0);
                    p =
                        a.m(a.ta - 1)
                }
                var q = a.m(a.ta - 1), r = 0;
                0 === e ? (c.alignment === fw ? (r = d.bottom + b.y, 0 === b.y && n.y > q.y + c.rowIndent && (r = Math.min(r, Math.max(n.y, r - hw(c))))) : c.alignment === ew ? (r = d.top + b.y, 0 === b.y && n.y < q.y - c.rowIndent && (r = Math.max(r, Math.min(n.y, r + hw(c))))) : r = c.Kq || c.Lq && 1 === c.maxGenerationCount ? d.top - c.Va.y + b.y : d.y + d.height / 2 + b.y, k ? (a.B(m, n.x, r), m++, a.B(m, d.right + g, r), m++, a.B(m, d.right + g + (b.x - h) / 3, r), m++, a.B(m, d.right + g + 2 * (b.x - h) / 3, r), m++, a.B(m, d.right + g + (b.x - h), r), m++, a.B(m, p.x, r)) : (l && (a.B(m, d.right + g / 2, n.y),
                    m++), a.B(m, d.right + g / 2, r), m++, a.B(m, d.right + g + b.x - (l ? h / 2 : h), r), m++, l && a.B(m, a.m(m - 1).x, p.y))) : 90 === e ? (c.alignment === fw ? (r = d.right + b.x, 0 === b.x && n.x > q.x + c.rowIndent && (r = Math.min(r, Math.max(n.x, r - hw(c))))) : c.alignment === ew ? (r = d.left + b.x, 0 === b.x && n.x < q.x - c.rowIndent && (r = Math.max(r, Math.min(n.x, r + hw(c))))) : r = c.Kq || c.Lq && 1 === c.maxGenerationCount ? d.left - c.Va.x + b.x : d.x + d.width / 2 + b.x, k ? (a.B(m, r, n.y), m++, a.B(m, r, d.bottom + g), m++, a.B(m, r, d.bottom + g + (b.y - h) / 3), m++, a.B(m, r, d.bottom + g + 2 * (b.y - h) / 3), m++, a.B(m, r, d.bottom +
                    g + (b.y - h)), m++, a.B(m, r, p.y)) : (l && (a.B(m, n.x, d.bottom + g / 2), m++), a.B(m, r, d.bottom + g / 2), m++, a.B(m, r, d.bottom + g + b.y - (l ? h / 2 : h)), m++, l && a.B(m, p.x, a.m(m - 1).y))) : 180 === e ? (c.alignment === fw ? (r = d.bottom + b.y, 0 === b.y && n.y > q.y + c.rowIndent && (r = Math.min(r, Math.max(n.y, r - hw(c))))) : c.alignment === ew ? (r = d.top + b.y, 0 === b.y && n.y < q.y - c.rowIndent && (r = Math.max(r, Math.min(n.y, r + hw(c))))) : r = c.Kq || c.Lq && 1 === c.maxGenerationCount ? d.top - c.Va.y + b.y : d.y + d.height / 2 + b.y, k ? (a.B(m, n.x, r), m++, a.B(m, d.left - g, r), m++, a.B(m, d.left - g + (b.x +
                    h) / 3, r), m++, a.B(m, d.left - g + 2 * (b.x + h) / 3, r), m++, a.B(m, d.left - g + (b.x + h), r), m++, a.B(m, p.x, r)) : (l && (a.B(m, d.left - g / 2, n.y), m++), a.B(m, d.left - g / 2, r), m++, a.B(m, d.left - g + b.x + (l ? h / 2 : h), r), m++, l && a.B(m, a.m(m - 1).x, p.y))) : 270 === e ? (c.alignment === fw ? (r = d.right + b.x, 0 === b.x && n.x > q.x + c.rowIndent && (r = Math.min(r, Math.max(n.x, r - hw(c))))) : c.alignment === ew ? (r = d.left + b.x, 0 === b.x && n.x < q.x - c.rowIndent && (r = Math.max(r, Math.min(n.x, r + hw(c))))) : r = c.Kq || c.Lq && 1 === c.maxGenerationCount ? d.left - c.Va.x + b.x : d.x + d.width / 2 + b.x, k ? (a.B(m,
                    r, n.y), m++, a.B(m, r, d.top - g), m++, a.B(m, r, d.top - g + (b.y + h) / 3), m++, a.B(m, r, d.top - g + 2 * (b.y + h) / 3), m++, a.B(m, r, d.top - g + (b.y + h)), m++, a.B(m, r, p.y)) : (l && (a.B(m, n.x, d.top - g / 2), m++), a.B(m, r, d.top - g / 2), m++, a.B(m, r, d.top - g + b.y + (l ? h / 2 : h)), m++, l && a.B(m, p.x, a.m(m - 1).y))) : D.k("Invalid angle " + e);
                a.Bj()
            } else e = c, g = d, v && D.l(e, yv, fx, "adjustRouteForAngleChange:parent"), v && D.l(g, yv, fx, "adjustRouteForAngleChange:child"), a = this.link, c = dw(e), c !== dw(g) && (b = gw(e), d = e.pb, e = g.pb, 0 === c && e.left - d.right < b + 1 || 90 === c && e.top - d.bottom <
            b + 1 || 180 === c && d.left - e.right < b + 1 || 270 === c && d.top - e.bottom < b + 1 || (a.Ao(), e = a.jf === Tj, g = a.ic, h = Vv(this.fromVertex.alignment), a.zm(), 0 === c ? (c = d.right + b / 2, e ? 4 === a.ta && (b = a.m(3).y, a.ia(1, c - 20, a.m(1).y), a.B(2, c - 20, b), a.B(3, c, b), a.B(4, c + 20, b), a.ia(5, a.m(5).x, b)) : g ? h ? a.ia(3, a.m(2).x, a.m(4).y) : 6 === a.ta && (a.ia(2, c, a.m(2).y), a.ia(3, c, a.m(3).y)) : 4 === a.ta ? a.B(2, c, a.m(2).y) : 3 === a.ta ? a.ia(1, c, a.m(2).y) : 2 === a.ta && a.B(1, c, a.m(1).y)) : 90 === c ? (b = d.bottom + b / 2, e ? 4 === a.ta && (c = a.m(3).x, a.ia(1, a.m(1).x, b - 20), a.B(2, c, b - 20),
                a.B(3, c, b), a.B(4, c, b + 20), a.ia(5, c, a.m(5).y)) : g ? h ? a.ia(3, a.m(2).x, a.m(4).y) : 6 === a.ta && (a.ia(2, a.m(2).x, b), a.ia(3, a.m(3).x, b)) : 4 === a.ta ? a.B(2, a.m(2).x, b) : 3 === a.ta ? a.ia(1, a.m(2).x, b) : 2 === a.ta && a.B(1, a.m(1).x, b)) : 180 === c ? (c = d.left - b / 2, e ? 4 === a.ta && (b = a.m(3).y, a.ia(1, c + 20, a.m(1).y), a.B(2, c + 20, b), a.B(3, c, b), a.B(4, c - 20, b), a.ia(5, a.m(5).x, b)) : g ? h ? a.ia(3, a.m(2).x, a.m(4).y) : 6 === a.ta && (a.ia(2, c, a.m(2).y), a.ia(3, c, a.m(3).y)) : 4 === a.ta ? a.B(2, c, a.m(2).y) : 3 === a.ta ? a.ia(1, c, a.m(2).y) : 2 === a.ta && a.B(1, c, a.m(1).y)) : 270 ===
            c && (b = d.top - b / 2, e ? 4 === a.ta && (c = a.m(3).x, a.ia(1, a.m(1).x, b + 20), a.B(2, c, b + 20), a.B(3, c, b), a.B(4, c, b - 20), a.ia(5, c, a.m(5).y)) : g ? h ? a.ia(3, a.m(2).x, a.m(4).y) : 6 === a.ta && (a.ia(2, a.m(2).x, b), a.ia(3, a.m(3).x, b)) : 4 === a.ta ? a.B(2, a.m(2).x, b) : 3 === a.ta ? a.ia(1, a.m(2).x, b) : 2 === a.ta && a.B(1, a.m(1).x, b)), a.Bj()))
        }
    };
    D.defineProperty(fx, {vM: "relativePoint"}, function () {
        return this.ct
    }, function (a) {
        this.ct.set(a)
    });
    function gx() {
        P.call(this);
        this.$e = null
    }

    D.Ra(gx, P);
    gx.prototype.cloneProtected = function (a) {
        P.prototype.cloneProtected.call(this, a);
        a.element = this.$e.cloneNode(!0)
    };
    gx.prototype.toString = function () {
        return "HTMLHost(" + this.$e.toString() + ")#" + D.Jd(this)
    };
    gx.prototype.Qk = function (a, b) {
        var c = this.$e;
        if (null !== c) {
            var d = this.eb(kc);
            d.x -= this.$.width / 2;
            d.y -= this.$.height / 2;
            d.x -= this.$.x;
            d.y -= this.$.y;
            var d = b.aC(d), e = b.Ej;
            null === e || e.contains(c) || e.appendChild(c);
            e = this.transform;
            c.style.transform = "matrix(" + e.m11 + "," + e.m12 + "," + e.m21 + "," + e.m22 + "," + e.dx + "," + e.dy + ")";
            c.style.transformOrigin = "0 0";
            e = d.y;
            c.style.left = d.x + "px";
            c.style.top = e + "px"
        }
    };
    gx.prototype.jo = function (a, b, c, d) {
        var e = this.Ea;
        isFinite(e.width) && (a = e.width);
        isFinite(e.height) && (b = e.height);
        var e = this.mf, g = this.kg;
        c = Math.max(c, g.width);
        d = Math.max(d, g.height);
        a = Math.min(e.width, a);
        b = Math.min(e.height, b);
        a = Math.max(c, a);
        b = Math.max(d, b);
        c = this.$e;
        null !== c && (b = c.getBoundingClientRect(), a = b.width, b = b.height);
        xb(this.cd, a, b);
        Jo(this, 0, 0, a, b)
    };
    gx.prototype.zj = function (a, b, c, d) {
        Oo(this, a, b, c, d)
    };
    D.w(gx, {Ga: "naturalBounds"}, function () {
        return this.cd
    });
    D.defineProperty(gx, {element: "element"}, function () {
        return this.$e
    }, function (a) {
        var b = this.$e;
        b !== a && (a instanceof HTMLElement || D.k("HTMLHost.element must be an instance of Element."), this.$e = a, a.className = "HTMLHost", this.i("element", b, a), this.qa())
    });
    aa.version = "1.7.17";
    window && (window.module && "object" === typeof window.module && "object" === typeof window.module.exports ? window.module.exports = aa : window.define && "function" === typeof window.define && window.define.amd ? (window.go = aa, window.define(aa)) : window.go = aa);
    "undefined" !== typeof module && "object" === typeof module.exports && (module.exports = aa);
})(window);
